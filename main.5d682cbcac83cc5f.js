"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[792],{1593:(ut,Te,H)=>{var N={};H.r(N),H.d(N,{AbortException:()=>im,AnnotationEditorLayer:()=>rm,AnnotationEditorParamsType:()=>Fl,AnnotationEditorType:()=>Na,AnnotationEditorUIManager:()=>Ti,AnnotationLayer:()=>r_,AnnotationMode:()=>sm,ColorPicker:()=>cf,DOMSVGFactory:()=>s_,DrawLayer:()=>om,FeatureTest:()=>Cd,GlobalWorkerOptions:()=>am,ImageKind:()=>lm,InvalidPDFException:()=>uf,MissingPDFException:()=>Ad,OPS:()=>cm,OutputScale:()=>o_,PDFDataRangeTransport:()=>a_,PDFDateString:()=>l_,PDFWorker:()=>um,PasswordResponses:()=>c_,PermissionFlag:()=>dm,PixelsPerInch:()=>u_,RenderingCancelledException:()=>d_,TextLayer:()=>LE,UnexpectedResponseException:()=>hm,Util:()=>fm,VerbosityLevel:()=>wr,XfaLayer:()=>FE,build:()=>pm,createValidAbsoluteUrl:()=>VE,fetchData:()=>df,getDocument:()=>$s,getFilenameFromUrl:()=>gm,getPdfFilenameFromUrl:()=>Vl,getXfaPageViewport:()=>h_,isDataScheme:()=>f_,isPdfFile:()=>mm,noContextMenu:()=>jE,normalizeUnicode:()=>BE,setLayerDimensions:()=>UE,shadow:()=>HE,version:()=>hf});var V={};H.r(V),H.d(V,{AnnotationLayerBuilder:()=>Qd,DownloadManager:()=>lu,EventBus:()=>wy,FindState:()=>Gf,GenericL10n:()=>Jl,LinkTarget:()=>za,PDFFindController:()=>Yd,PDFHistory:()=>Zd,PDFLinkService:()=>Ey,PDFPageView:()=>Cy,PDFScriptingManager:()=>uw,PDFSinglePageViewer:()=>Ay,PDFViewer:()=>Dy,ProgressBar:()=>Sy,RenderingStates:()=>My,ScrollMode:()=>Ft,SimpleLinkService:()=>Ty,SpreadMode:()=>Iy,StructTreeLayerBuilder:()=>ec,TextLayerBuilder:()=>xy,XfaLayerBuilder:()=>Py,parseQueryString:()=>dw});var ge=H(345),G=H(467),m=H(4438),xe=H(4432);class ye{}var Qe=H(6354),Ne=H(4842);let Oe=(()=>{class l{constructor(t){this.translate=t}getNestedTranslations(t,r){return this.translate.get(t).pipe((0,Qe.T)(o=>{let c=[];return c=Object.keys(o).map(f=>o[f]),c}))}getNestedTranslations2(t,r=[]){return this.translate.get(t).pipe((0,Qe.T)(o=>o?Object.keys(o).map(c=>o[c]):r))}getAboutMe(){let t;return this.translate.get(["aboutme"]).subscribe({next:r=>{t=r},error:r=>{console.error(r)}}),t}static{this.\u0275fac=function(r){return new(r||l)(m.KVO(Ne.c$))}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})(),be=(()=>{class l{constructor(t){this.translator=t,this.pictureIds=[]}ngOnInit(){var t=this;this.translator.getNestedTranslations("languages",ye).subscribe(function(){var r=(0,G.A)(function*(o){t.lenguajes=o,console.table(t.lenguajes);const d=360/t.lenguajes.length;t.saveNames();for(let f=0;f<t.lenguajes.length;f++)yield t.createdivwithpicture(f,d)});return function(o){return r.apply(this,arguments)}}())}createdivwithpicture(t,r){let o=document.getElementById("scope"),c=document.createElement("span");c.setAttribute("style",`--i:${t}; --step:${r}deg`);let d=document.createElement("img");this.randomIntFromInterval(1,this.lenguajes.length);let p=this.pictureIds[t];this.pictureIds.findIndex(_=>_===p),console.log(p+"--"),d.src="assets/"+p+".png",d.alt="assets/"+p+".png",c.appendChild(d),o.appendChild(c)}randomIntFromInterval(t,r){return Math.floor(Math.random()*(r-t+1)+t)}saveNames(){var t=this;return(0,G.A)(function*(){for(let r=0;r<t.lenguajes.length;r++)t.pictureIds.push(t.lenguajes[r].id)})()}hasClassName(t,r){return new RegExp("(?:^|\\s+)"+r+"(?:\\s+|$)").test(t.className)}addClassName(t,r){this.hasClassName(t,r)||(t.className=[t.className,r].join(" "))}removeClassName(t,r){if(this.hasClassName(t,r)){let o=new RegExp("(?:^|\\s+)"+r+"(?:\\s+|$)","g");t.className=t.className.replace(o," ")}}toggleClassName(t,r){this.hasClassName(t,r)?this.removeClassName(t,r):this.addClassName(t,r)}toggleShape(){let t=document.getElementById("shape");this.hasClassName(t,"ring")?(this.removeClassName(t,"ring"),this.addClassName(t,"cube")):(this.removeClassName(t,"cube"),this.addClassName(t,"ring")),document.getElementById("stage").style.webkitTransform=this.hasClassName(t,"ring")?"translateZ(-200px)":""}toggleBackfaces(){let t=document.getElementById("backfaces");t.checked=!0;let r=document.getElementById("shape");t?this.addClassName(r,"backfaces"):this.removeClassName(r,"backfaces")}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Oe))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-morphinscube"]],decls:2,vars:0,consts:[["scope",""],["id","scope",1,"scope"]],template:function(r,o){1&r&&m.nrm(0,"div",1,0)},styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;display:flex;justify-content:center;align-items:center;height:100vh;background:#0f2027;background:-webkit-linear-gradient(to right,#2c5364,#203a43,#0f2027);overflow:hidden}.scope[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;transform-style:preserve-3d;animation:_ngcontent-%COMP%_slid 30s linear infinite}  .scope span{background-color:transparent!important;border:none!important;position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:center;transform-style:preserve-3d;transform:rotateY(calc(var(--i) * var(--step))) translateZ(250px)}@media (max-width:810px){  .scope span{transform:rotateY(calc(var(--i) * var(--step))) translateZ(250px)}.scope[_ngcontent-%COMP%]{width:120px;height:120px}}@media (max-width:560px){  .scope span{transform:rotateY(calc(var(--i) * 150deg)) translateZ(180px)}.scope[_ngcontent-%COMP%]{width:70px;height:70px}}  .scope span img{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:10px;transition:2s}  .scope span:hover img{transform:translateY(-10px) scale(1.2)}@keyframes _ngcontent-%COMP%_slid{0%{transform:perspective(1000px) rotateY(0)}to{transform:perspective(1000px) rotateY(360deg)}}"]})}}return l})();const Fe=["aboutme"];let rt=(()=>{class l{constructor(t,r){this.resolver=t,this.renderer2=r,this.created=!1}ngAfterViewInit(){}ngOnInit(){document.getElementById("anchorElement").addEventListener("click",o=>{o.stopPropagation(),document.getElementById("aboutme").scrollIntoView()});const t=new IntersectionObserver(o=>{o.forEach(c=>{console.log(c),c.isIntersecting&&c.target.classList.contains("hidden")&&(c.target.classList.add("show"),c.target.classList.remove("hidden"),this.loadAboutMe())})});document.querySelectorAll(".hidden").forEach(o=>{t.observe(o)})}loadAboutMe(){console.log("Entra en loadaboutme"),H.e(500).then(H.bind(H,9500)).then(({AboutmeComponent:t})=>{let r=this.aboutme.createComponent(t);this.renderer2.addClass(r.location.nativeElement,"fadein"),this.created=!0})}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(m.OM3),m.rXU(m.sFG))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-home"]],viewQuery:function(r,o){if(1&r&&m.GBs(Fe,5,m.c1b),2&r){let c;m.mGM(c=m.lsd())&&(o.aboutme=c.first)}},decls:15,vars:0,consts:[["aboutme",""],[1,"doubleDiv"],["id","mainDiv",1,"mainDiv"],[1,"textCenter"],[1,"ring"],["id","anchorElement"],["id","divLinkAMe",1,"sticky"],[1,"blink"],[1,"triangleDown"],["id","aboutme",1,"hidden"]],template:function(r,o){1&r&&(m.j41(0,"div",1)(1,"div",2)(2,"h2",3),m.EFF(3,"HEY! I'M ALEJANDRO"),m.k0s(),m.j41(4,"p"),m.EFF(5," FULL STACK DEVELOPER "),m.k0s()(),m.j41(6,"div",4),m.nrm(7,"app-morphinscube"),m.k0s()(),m.j41(8,"a",5)(9,"div",6)(10,"p",7),m.EFF(11,"About me"),m.k0s(),m.nrm(12,"div",8),m.k0s()(),m.nrm(13,"div",9,0))},dependencies:[be],styles:['.mainDiv[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;overflow:hidden}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink-caret{0%,to{border-color:transparent}50%{border-color:orange}}.mainDiv[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;border-right:.15em solid orange;white-space:nowrap;margin:0 auto;letter-spacing:.15em;animation:_ngcontent-%COMP%_typing 3s steps(30,end),blink-caret .5s step-end infinite}.doubleDiv[_ngcontent-%COMP%]{display:flex;flex-direction:row}.ring[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-self:center;justify-content:center;width:100%}.mainDiv[_ngcontent-%COMP%]{padding-top:20%;padding-bottom:10%;width:50%}.mainDiv[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{animation:2s _ngcontent-%COMP%_slide-right 1s forwards;transform:translate(-100%)}.hidden[_ngcontent-%COMP%]{opacity:0}.show[_ngcontent-%COMP%]{animation:2s fadein 1s forwards;transform:translate(-100%)}.sticky[_ngcontent-%COMP%]{position:sticky;position:-moz-sticky;position:-ms-sticky;position:-o-sticky;bottom:10px}.blink[_ngcontent-%COMP%]{padding-left:0;animation:_ngcontent-%COMP%_blinker 1s linear;position:sticky}@keyframes _ngcontent-%COMP%_blinker{50%{opacity:0}}@keyframes _ngcontent-%COMP%_slide-right{to{transform:translate(0)}}#divLinkAMe[_ngcontent-%COMP%]{margin-top:10%;display:flex;flex-direction:column;flex-wrap:wrap;align-content:center;align-items:center}.triangleDown[_ngcontent-%COMP%]{position:relative;top:-5px;content:"";display:inline-block;width:15px;height:15px;border-right:.2em solid white;border-top:.2em solid white;transform:rotate(135deg);margin-right:.5em;margin-left:1em}  .fadein{animation:_ngcontent-%COMP%_fade-in 2s linear 1!important}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}#anchorElement[_ngcontent-%COMP%]:hover{color:orange;cursor:pointer}#divLinkAMe[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#b8860b;border:2px solid black}@media (max-width:1045px){.doubleDiv[_ngcontent-%COMP%]{flex-direction:column;padding-bottom:20%}.mainDiv[_ngcontent-%COMP%]{width:100%}}@media (max-width:700px){h2[_ngcontent-%COMP%]{font-size:25px}}@media (max-width:363px){h2[_ngcontent-%COMP%]{font-size:20px}}']})}}return l})();var Ue=H(177);function ct(l,e){if(1&l&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&l){const t=e.$implicit;m.R7$(),m.JRh(t)}}function Ut(l,e){if(1&l&&(m.j41(0,"div",2)(1,"div",3)(2,"div",4),m.EFF(3),m.k0s(),m.j41(4,"div",5)(5,"blockquote",6)(6,"p"),m.EFF(7),m.k0s(),m.j41(8,"footer",7),m.EFF(9),m.k0s()(),m.j41(10,"div",8),m.DNE(11,ct,2,1,"span",9),m.k0s()()()()),2&l){const t=e.$implicit;m.R7$(3),m.LHq(" ",t.startingMonth," ",t.startingYear," - ",t.finishMonth," ",t.finishYear," "),m.R7$(4),m.JRh(t.fullName),m.R7$(2),m.Lme(" ",t.school,", ",t.location," "),m.R7$(2),m.Y8G("ngForOf",t.technologies)}}let Rt=(()=>{class l{constructor(t,r){this.translator=t,this.translate=r,this.estudios=[]}ngOnInit(){this.loadEducation(),this.langSub=this.translate.onLangChange.subscribe(()=>{this.loadEducation()})}trackByEstudio(t,r){return t}ngOnDestroy(){this.langSub&&this.langSub.unsubscribe()}loadEducation(){this.translator.getNestedTranslations2("education",[]).subscribe(t=>{this.estudios=t})}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Oe),m.rXU(Ne.c$))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-estudios"]],decls:2,vars:2,consts:[[1,"row"],["class","col-12",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"blockquote","mb-0"],[1,"blockquote-footer"],[1,"auxDiv","fadein"],[4,"ngFor","ngForOf"]],template:function(r,o){1&r&&(m.j41(0,"div",0),m.DNE(1,Ut,12,8,"div",1),m.k0s()),2&r&&(m.R7$(),m.Y8G("ngForOf",o.estudios)("ngForTrackBy",o.trackByEstudio))},dependencies:[Ue.Sq],styles:[".card{left:-120%;animation:_ngcontent-%COMP%_slide 2s forwards;animation-timing-function:cubic-bezier(.4,1,1.25,2)}  .auxDiv{display:flex;flex-wrap:wrap}  span{border:1px solid #dee2e5;background-color:#085189;border-radius:25px;white-space:nowrap;padding:1%;color:#a9b1b5;transition:all .3s ease-in-out}  span:hover{color:#fff;background-color:#63d3e1}  p{color:#000!important}@keyframes _ngcontent-%COMP%_slide{to{left:0}}  .fadein{animation:_ngcontent-%COMP%_fade-in 2s linear 1}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@media (max-width: 830px){  .auxDiv{flex-wrap:nowrap;overflow:auto}}"]})}}return l})();function Xt(l,e){if(1&l&&(m.j41(0,"li"),m.EFF(1),m.k0s()),2&l){const t=e.$implicit;m.R7$(),m.JRh(t)}}function tn(l,e){if(1&l&&(m.j41(0,"div",2)(1,"h2",3)(2,"button",4)(3,"div",5)(4,"p"),m.EFF(5),m.k0s(),m.j41(6,"p"),m.EFF(7),m.k0s()()()(),m.j41(8,"div",6)(9,"div",7)(10,"ul"),m.DNE(11,Xt,2,1,"li",8),m.k0s()()()()),2&l){const t=e.$implicit,r=e.index;m.R7$(),m.Y8G("id","heading"+r),m.R7$(),m.BMQ("data-bs-target","#collapse"+r)("aria-controls","collapse"+r),m.R7$(3),m.Lme("",t.nombrePuesto," - ",t.empresa,""),m.R7$(2),m.LHq("",t.startingMonth," ",t.startingYear," - ",t.finishMonth," ",0==t.finishYear?"":t.finishYear," "),m.R7$(),m.Y8G("id","collapse"+r),m.BMQ("aria-labelledby","heading"+r),m.R7$(3),m.Y8G("ngForOf",t.experiences)}}let ln=(()=>{class l{constructor(t){this.translate=t,this.experiences=[],this.openPanels=new Set}ngOnInit(){this.loadExperiences(),this.langSub=this.translate.onLangChange.subscribe(()=>{this.loadExperiences()})}ngOnDestroy(){this.langSub&&this.langSub.unsubscribe()}ngAfterViewInit(){}trackByExp(t,r){return t}loadExperiences(){this.openPanels.clear(),document.querySelectorAll(".accordion-collapse.show").forEach(t=>{const r=t.id.replace("collapse","");this.openPanels.add(Number(r))}),this.translate.get("workingexperiences").subscribe(t=>{this.experiences=Object.keys(t).map(r=>t[r]),setTimeout(()=>{this.openPanels.forEach(r=>{const o=document.getElementById("collapse"+r);o&&o.classList.add("show")})})})}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Ne.c$))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-experiencia"]],decls:2,vars:2,consts:[["id","accordionExample",1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button"],[1,"divPuestoFechas"],[1,"accordion-collapse","collapse","show",3,"id"],[1,"accordion-body"],[4,"ngFor","ngForOf"]],template:function(r,o){1&r&&(m.j41(0,"div",0),m.DNE(1,tn,12,12,"div",1),m.k0s()),2&r&&(m.R7$(),m.Y8G("ngForOf",o.experiences.slice().reverse())("ngForTrackBy",o.trackByExp))},dependencies:[Ue.Sq],styles:[".accordion-item{animation-name:_ngcontent-%COMP%_slideDown;-webkit-animation-name:_ngcontent-%COMP%_slideDown;animation-duration:1s;-webkit-animation-duration:1s;animation-timing-function:ease;-webkit-animation-timing-function:ease;visibility:visible!important}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-100%)}50%{transform:translateY(8%)}65%{transform:translateY(-4%)}80%{transform:translateY(4%)}95%{transform:translateY(-2%)}to{transform:translateY(0)}}  .divPuestoFechas{display:flex;flex-direction:row;flex-wrap:wrap;width:95%;justify-content:space-between}  .divPuestoFechas p{color:#000;padding:0}  h2{padding:0!important}"]})}}return l})(),Ye=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-proyectos"]],decls:2,vars:0,template:function(r,o){1&r&&(m.j41(0,"p"),m.EFF(1,"proyectos works!"),m.k0s())}})}}return l})();const He=["languageLogo"];function lt(l,e){if(1&l&&(m.j41(0,"li"),m.EFF(1),m.k0s()),2&l){const t=e.$implicit;m.R7$(),m.JRh(t)}}function wt(l,e){if(1&l&&(m.j41(0,"section")(1,"h4"),m.EFF(2,"Experiencias"),m.k0s(),m.j41(3,"ul"),m.DNE(4,lt,2,1,"li",6),m.k0s()()),2&l){const t=m.XpG();m.R7$(4),m.Y8G("ngForOf",t.lenguajeObject.experiences)}}function ze(l,e){if(1&l&&(m.j41(0,"li"),m.EFF(1),m.k0s()),2&l){const t=e.$implicit;m.R7$(),m.JRh(t)}}function qe(l,e){if(1&l&&(m.j41(0,"section")(1,"h4"),m.EFF(2,"Tecnolog\xedas"),m.k0s(),m.j41(3,"ul"),m.DNE(4,ze,2,1,"li",6),m.k0s()()),2&l){const t=m.XpG();m.R7$(4),m.Y8G("ngForOf",t.lenguajeObject.tecnologias)}}function tt(l,e){if(1&l&&(m.qex(0),m.EFF(1),m.bVm()),2&l){const t=m.XpG().$implicit;m.R7$(),m.SpI(" ",t," ")}}function Ct(l,e){if(1&l&&(m.j41(0,"li"),m.EFF(1),m.k0s()),2&l){const t=e.$implicit;m.R7$(),m.JRh(t)}}function Ht(l,e){if(1&l&&(m.j41(0,"div")(1,"strong"),m.EFF(2),m.k0s(),m.j41(3,"ul"),m.DNE(4,Ct,2,1,"li",6),m.k0s()()),2&l){const t=e.$implicit,r=m.XpG(2).$implicit,o=m.XpG(2);m.R7$(2),m.JRh(t),m.R7$(2),m.Y8G("ngForOf",o.asObject(r)[t])}}function Yn(l,e){if(1&l&&m.DNE(0,Ht,5,2,"div",6),2&l){const t=m.XpG().$implicit,r=m.XpG(2);m.Y8G("ngForOf",r.objectKeys(r.asObject(t)))}}function Ln(l,e){if(1&l&&(m.j41(0,"li"),m.DNE(1,tt,2,1,"ng-container",7)(2,Yn,1,1,"ng-template",null,1,m.C5r),m.k0s()),2&l){const t=e.$implicit,r=m.sdS(3),o=m.XpG(2);m.R7$(),m.Y8G("ngIf",o.isString(t))("ngIfElse",r)}}function nn(l,e){if(1&l&&(m.j41(0,"section")(1,"h4"),m.EFF(2,"Funcionalidades"),m.k0s(),m.j41(3,"ul"),m.DNE(4,Ln,4,2,"li",6),m.k0s()()),2&l){const t=m.XpG();m.R7$(4),m.Y8G("ngForOf",t.lenguajeObject.funcionalidades)}}function Zn(l,e){if(1&l&&(m.j41(0,"li"),m.EFF(1),m.k0s()),2&l){const t=e.$implicit;m.R7$(),m.JRh(t)}}function pi(l,e){if(1&l&&(m.j41(0,"section")(1,"h4"),m.EFF(2,"Responsabilidades"),m.k0s(),m.j41(3,"ul"),m.DNE(4,Zn,2,1,"li",6),m.k0s()()),2&l){const t=m.XpG();m.R7$(4),m.Y8G("ngForOf",t.lenguajeObject.responsabilidades)}}let Sr=(()=>{class l{constructor(t){this.translate=t,this.current=0,this.max=100,this.lenguaje="",this.animations=["squash","coinflip","bounce","flip","wiggle","pulse"]}ngOnInit(){this.loadLanguage(),this.langSub=this.translate.onLangChange.subscribe(()=>{this.loadLanguage()})}ngOnDestroy(){this.langSub&&this.langSub.unsubscribe()}ngAfterViewInit(){this.randomClassAnimation()}loadLanguage(){this.lenguajestring=this.lenguaje,this.translate.get("languages."+this.lenguajestring).subscribe(t=>{this.lenguajeObject=t,this.current=Number(this.lenguajeObject.progress)})}randomClassAnimation(){const t=Math.floor(Math.random()*this.animations.length);this.languageLogo.nativeElement.classList.add(this.animations[t])}isString(t){return"string"==typeof t}asObject(t){return t}objectKeys(t){return Object.keys(t)}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Ne.c$))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-detail"]],viewQuery:function(r,o){if(1&r&&m.GBs(He,5),2&r){let c;m.mGM(c=m.lsd())&&(o.languageLogo=c.first)}},inputs:{lenguaje:"lenguaje"},decls:11,vars:6,consts:[["languageLogo",""],["objectTemplate",""],[1,"text"],[1,"divImg"],["alt","",3,"src"],[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"]],template:function(r,o){1&r&&(m.j41(0,"div")(1,"h3"),m.EFF(2),m.k0s(),m.j41(3,"div",2)(4,"div",3),m.nrm(5,"img",4,0),m.k0s(),m.DNE(7,wt,5,1,"section",5)(8,qe,5,1,"section",5)(9,nn,5,1,"section",5)(10,pi,5,1,"section",5),m.k0s()()),2&r&&(m.R7$(2),m.JRh(null==o.lenguajeObject?null:o.lenguajeObject.name),m.R7$(3),m.Y8G("src","assets/"+o.lenguajestring+".png",m.B4B),m.R7$(2),m.Y8G("ngIf",null==o.lenguajeObject||null==o.lenguajeObject.experiences?null:o.lenguajeObject.experiences.length),m.R7$(),m.Y8G("ngIf",null==o.lenguajeObject||null==o.lenguajeObject.tecnologias?null:o.lenguajeObject.tecnologias.length),m.R7$(),m.Y8G("ngIf",null==o.lenguajeObject||null==o.lenguajeObject.funcionalidades?null:o.lenguajeObject.funcionalidades.length),m.R7$(),m.Y8G("ngIf",null==o.lenguajeObject||null==o.lenguajeObject.responsabilidades?null:o.lenguajeObject.responsabilidades.length))},dependencies:[Ue.Sq,Ue.bT],styles:["img[_ngcontent-%COMP%]{width:25%;height:25%;float:left;position:relative}.progressBar[_ngcontent-%COMP%]{width:20%!important;height:20%!important}.circlebar[_ngcontent-%COMP%]{width:100px;height:100px}@media (max-width:536px){[_nghost-%COMP%]     ul{float:left}img[_ngcontent-%COMP%]{width:40%;height:40%;float:none}.divImg[_ngcontent-%COMP%]{width:100%;height:100%;text-align-last:center;float:none}}.flip[_ngcontent-%COMP%]{backface-visibility:visible!important;animation:_ngcontent-%COMP%_flip 2s ease 1}@keyframes _ngcontent-%COMP%_flip{0%{transform:perspective(400px) rotateY(0);animation-timing-function:ease-out}40%{transform:perspective(400px) translateZ(150px) rotateY(170deg);animation-timing-function:ease-out}50%{transform:perspective(400px) translateZ(150px) rotateY(190deg) scale(1.5);animation-timing-function:ease-in}80%{transform:perspective(400px) rotateY(360deg) scale(.1);animation-timing-function:ease-in}to{transform:perspective(400px) scale(1);animation-timing-function:ease-in}}.coinflip[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 3s linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotateY(0)}25%{transform:rotateY(1080deg)}50%{transform:rotateY(720deg)}to{transform:rotateY(360deg)}}.squash[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_squash;animation-duration:1s;animation-fill-mode:both;animation-iteration-count:1;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_squash{0%,to{transition-time-function:ease-in;transform-origin:50% 100%}0%{transform:translateY(-300%) scaleX(.5) scaleY(1.5);opacity:0}11%{transform:translateY(-197%) scaleX(.41) scaleY(1.59);opacity:.1}30%{transform:translateY(-18%) scaleX(.25) scaleY(1.75);opacity:1}35%{transform:translateY(-2%) scaleX(1.7) scaleY(.3)}46%{transform:translateY(2%) scaleX(1.8) scaleY(.2)}54%{transform:translateY(2%) scaleX(.8) scaleY(1.2)}66%{transform:translate(0) scaleX(1.2) scaleY(.8)}78%{transform:translate(0) scaleX(.95) scaleY(1.05)}to{transform:inherit}}.bounce[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 3s linear}@keyframes _ngcontent-%COMP%_bounce{0%,to{transition-time-function:ease-in;transform-origin:50% 100%}0%{transform:translateY(-300%) scaleX(.5) scaleY(1.5);opacity:0}20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-30px)}60%{transform:translateY(-15px)}}.wiggle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_wiggle 2s linear 2}@keyframes _ngcontent-%COMP%_wiggle{0%,7%{transform:rotate(0)}15%{transform:rotate(-15deg)}20%{transform:rotate(10deg)}25%{transform:rotate(-10deg)}30%{transform:rotate(6deg)}35%{transform:rotate(-4deg)}40%,to{transform:rotate(0)}}.pulse[_ngcontent-%COMP%]{transform:scale(1);animation:_ngcontent-%COMP%_pulse 2s}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.2);box-shadow:0 0 #e30202f8}70%{transform:scale(2);box-shadow:0 0 #e30202f8}to{transform:scale(.6);box-shadow:0 0 #e30202f8}}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%!important;width:100%!important}"]})}}return l})();var it=function(l){return l[l.State=0]="State",l[l.Transition=1]="Transition",l[l.Sequence=2]="Sequence",l[l.Group=3]="Group",l[l.Animate=4]="Animate",l[l.Keyframes=5]="Keyframes",l[l.Style=6]="Style",l[l.Trigger=7]="Trigger",l[l.Reference=8]="Reference",l[l.AnimateChild=9]="AnimateChild",l[l.AnimateRef=10]="AnimateRef",l[l.Query=11]="Query",l[l.Stagger=12]="Stagger",l}(it||{});const Cn="*";function ce(l,e){return{type:it.Trigger,name:l,definitions:e,options:{}}}function fe(l,e=null){return{type:it.Animate,styles:e,timings:l}}function he(l){return{type:it.Style,styles:l,offset:null}}function U(l,e,t){return{type:it.State,name:l,styles:e,options:t}}function Ee(l,e,t=null){return{type:it.Transition,expr:l,animation:e,options:t}}class cr{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class $i{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,o=0;const c=this.players.length;0==c?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==c&&this._onFinish()}),d.onDestroy(()=>{++r==c&&this._onDestroy()}),d.onStart(()=>{++o==c&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var Nt=H(7673),ur=H(1985),Ii=H(6648),ri=H(274),Ur=H(5964),Jn=H(980),tl=H(5558);class bt{}class dr{}class jt{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),c=o.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(o,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof jt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new jt;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof jt?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const c=e.value;if(c){let d=this.headers.get(t);if(!d)return;d=d.filter(f=>-1===c.indexOf(f)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(c=>c.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ss{encodeKey(e){return Hr(e)}encodeValue(e){return Hr(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zi=/%(\d[a-f0-9])/gi,gn={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Hr(l){return encodeURIComponent(l).replace(zi,(e,t)=>gn[t]??e)}function hr(l){return`${l}`}class J{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ss,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Fn(l,e){const t=new Map;return l.length>0&&l.replace(/^\?/,"").split("&").forEach(o=>{const c=o.indexOf("="),[d,f]=-1==c?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,c)),e.decodeValue(o.slice(c+1))],p=t.get(d)||[];p.push(f),t.set(d,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(hr):[hr(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new J({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(hr(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(hr(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class q{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Pe(l){return typeof ArrayBuffer<"u"&&l instanceof ArrayBuffer}function Ze(l){return typeof Blob<"u"&&l instanceof Blob}function dt(l){return typeof FormData<"u"&&l instanceof FormData}class yn{constructor(e,t,r,o){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function re(l){switch(l){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,c=o):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params),this.transferCache=c.transferCache),this.headers??=new jt,this.context??=new q,this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+d}}else this.params=new J,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||Pe(this.body)||Ze(this.body)||dt(this.body)||function mn(l){return typeof URLSearchParams<"u"&&l instanceof URLSearchParams}(this.body)?this.body:this.body instanceof J?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dt(this.body)?null:Ze(this.body)?this.body.type||null:Pe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof J?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,c=e.transferCache??this.transferCache,d=void 0!==e.body?e.body:this.body,f=e.withCredentials??this.withCredentials,p=e.reportProgress??this.reportProgress;let y=e.headers||this.headers,_=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((T,R)=>T.set(R,e.setHeaders[R]),y)),e.setParams&&(_=Object.keys(e.setParams).reduce((T,R)=>T.set(R,e.setParams[R]),_)),new yn(t,r,d,{params:_,headers:y,context:A,reportProgress:p,responseType:o,withCredentials:f,transferCache:c})}}var Hn=function(l){return l[l.Sent=0]="Sent",l[l.UploadProgress=1]="UploadProgress",l[l.ResponseHeader=2]="ResponseHeader",l[l.DownloadProgress=3]="DownloadProgress",l[l.Response=4]="Response",l[l.User=5]="User",l}(Hn||{});class ki{constructor(e,t=So.Ok,r="OK"){this.headers=e.headers||new jt,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class si extends ki{constructor(e={}){super(e),this.type=Hn.ResponseHeader}clone(e={}){return new si({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Yi extends ki{constructor(e={}){super(e),this.type=Hn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Yi({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class as extends ki{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}var So=function(l){return l[l.Continue=100]="Continue",l[l.SwitchingProtocols=101]="SwitchingProtocols",l[l.Processing=102]="Processing",l[l.EarlyHints=103]="EarlyHints",l[l.Ok=200]="Ok",l[l.Created=201]="Created",l[l.Accepted=202]="Accepted",l[l.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",l[l.NoContent=204]="NoContent",l[l.ResetContent=205]="ResetContent",l[l.PartialContent=206]="PartialContent",l[l.MultiStatus=207]="MultiStatus",l[l.AlreadyReported=208]="AlreadyReported",l[l.ImUsed=226]="ImUsed",l[l.MultipleChoices=300]="MultipleChoices",l[l.MovedPermanently=301]="MovedPermanently",l[l.Found=302]="Found",l[l.SeeOther=303]="SeeOther",l[l.NotModified=304]="NotModified",l[l.UseProxy=305]="UseProxy",l[l.Unused=306]="Unused",l[l.TemporaryRedirect=307]="TemporaryRedirect",l[l.PermanentRedirect=308]="PermanentRedirect",l[l.BadRequest=400]="BadRequest",l[l.Unauthorized=401]="Unauthorized",l[l.PaymentRequired=402]="PaymentRequired",l[l.Forbidden=403]="Forbidden",l[l.NotFound=404]="NotFound",l[l.MethodNotAllowed=405]="MethodNotAllowed",l[l.NotAcceptable=406]="NotAcceptable",l[l.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",l[l.RequestTimeout=408]="RequestTimeout",l[l.Conflict=409]="Conflict",l[l.Gone=410]="Gone",l[l.LengthRequired=411]="LengthRequired",l[l.PreconditionFailed=412]="PreconditionFailed",l[l.PayloadTooLarge=413]="PayloadTooLarge",l[l.UriTooLong=414]="UriTooLong",l[l.UnsupportedMediaType=415]="UnsupportedMediaType",l[l.RangeNotSatisfiable=416]="RangeNotSatisfiable",l[l.ExpectationFailed=417]="ExpectationFailed",l[l.ImATeapot=418]="ImATeapot",l[l.MisdirectedRequest=421]="MisdirectedRequest",l[l.UnprocessableEntity=422]="UnprocessableEntity",l[l.Locked=423]="Locked",l[l.FailedDependency=424]="FailedDependency",l[l.TooEarly=425]="TooEarly",l[l.UpgradeRequired=426]="UpgradeRequired",l[l.PreconditionRequired=428]="PreconditionRequired",l[l.TooManyRequests=429]="TooManyRequests",l[l.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",l[l.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",l[l.InternalServerError=500]="InternalServerError",l[l.NotImplemented=501]="NotImplemented",l[l.BadGateway=502]="BadGateway",l[l.ServiceUnavailable=503]="ServiceUnavailable",l[l.GatewayTimeout=504]="GatewayTimeout",l[l.HttpVersionNotSupported=505]="HttpVersionNotSupported",l[l.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",l[l.InsufficientStorage=507]="InsufficientStorage",l[l.LoopDetected=508]="LoopDetected",l[l.NotExtended=510]="NotExtended",l[l.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",l}(So||{});function ci(l,e){return{body:e,headers:l.headers,context:l.context,observe:l.observe,params:l.params,reportProgress:l.reportProgress,responseType:l.responseType,withCredentials:l.withCredentials,transferCache:l.transferCache}}let ht=(()=>{class l{constructor(t){this.handler=t}request(t,r,o={}){let c;if(t instanceof yn)c=t;else{let p,y;p=o.headers instanceof jt?o.headers:new jt(o.headers),o.params&&(y=o.params instanceof J?o.params:new J({fromObject:o.params})),c=new yn(t,r,void 0!==o.body?o.body:null,{headers:p,context:o.context,params:y,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}const d=(0,Nt.of)(c).pipe((0,ri.H)(p=>this.handler.handle(p)));if(t instanceof yn||"events"===o.observe)return d;const f=d.pipe((0,Ur.p)(p=>p instanceof Yi));switch(o.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return f.pipe((0,Qe.T)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return f.pipe((0,Qe.T)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return f.pipe((0,Qe.T)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return f.pipe((0,Qe.T)(p=>p.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new J).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,ci(o,r))}post(t,r,o={}){return this.request("POST",t,ci(o,r))}put(t,r,o={}){return this.request("PUT",t,ci(o,r))}static{this.\u0275fac=function(r){return new(r||l)(m.KVO(bt))}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})();function Qs(l,e){return e(l)}function Ys(l,e){return(t,r)=>e.intercept(t,{handle:o=>l(o,r)})}const To=new m.nKC(""),Zi=new m.nKC(""),Zs=new m.nKC(""),Js=new m.nKC("");function Io(){let l=null;return(e,t)=>{null===l&&(l=((0,m.WQX)(To,{optional:!0})??[]).reduceRight(Ys,Qs));const r=(0,m.WQX)(m.TgB),o=r.add();return l(e,t).pipe((0,Jn.j)(()=>r.remove(o)))}}let kt=(()=>{class l extends bt{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,m.WQX)(m.TgB);const o=(0,m.WQX)(Js,{optional:!0});this.backend=o??t}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Zi),...this.injector.get(Zs,[])]));this.chain=o.reduceRight((c,d)=>function Mo(l,e,t){return(r,o)=>(0,m.N4e)(t,()=>e(r,c=>l(c,o)))}(c,d,this.injector),Qs)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe((0,Jn.j)(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||l)(m.KVO(dr),m.KVO(m.uvJ))}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})();const cs=/^\)\]\}',?\n/;let to=(()=>{class l{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new m.wOt(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,Ii.H)(r.\u0275loadImpl()):(0,Nt.of)(null)).pipe((0,tl.n)(()=>new ur.c(c=>{const d=r.build();if(d.open(t.method,t.urlWithParams),t.withCredentials&&(d.withCredentials=!0),t.headers.forEach((j,K)=>d.setRequestHeader(j,K.join(","))),t.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const j=t.detectContentTypeHeader();null!==j&&d.setRequestHeader("Content-Type",j)}if(t.responseType){const j=t.responseType.toLowerCase();d.responseType="json"!==j?j:"text"}const f=t.serializeBody();let p=null;const y=()=>{if(null!==p)return p;const j=d.statusText||"OK",K=new jt(d.getAllResponseHeaders()),$=function Po(l){return"responseURL"in l&&l.responseURL?l.responseURL:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):null}(d)||t.url;return p=new si({headers:K,status:d.status,statusText:j,url:$}),p},_=()=>{let{headers:j,status:K,statusText:$,url:Z}=y(),te=null;K!==So.NoContent&&(te=typeof d.response>"u"?d.responseText:d.response),0===K&&(K=te?So.Ok:0);let se=K>=200&&K<300;if("json"===t.responseType&&"string"==typeof te){const ue=te;te=te.replace(cs,"");try{te=""!==te?JSON.parse(te):null}catch(pe){te=ue,se&&(se=!1,te={error:pe,text:te})}}se?(c.next(new Yi({body:te,headers:j,status:K,statusText:$,url:Z||void 0})),c.complete()):c.error(new as({error:te,headers:j,status:K,statusText:$,url:Z||void 0}))},A=j=>{const{url:K}=y(),$=new as({error:j,status:d.status||0,statusText:d.statusText||"Unknown Error",url:K||void 0});c.error($)};let T=!1;const R=j=>{T||(c.next(y()),T=!0);let K={type:Hn.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(K.total=j.total),"text"===t.responseType&&d.responseText&&(K.partialText=d.responseText),c.next(K)},L=j=>{let K={type:Hn.UploadProgress,loaded:j.loaded};j.lengthComputable&&(K.total=j.total),c.next(K)};return d.addEventListener("load",_),d.addEventListener("error",A),d.addEventListener("timeout",A),d.addEventListener("abort",A),t.reportProgress&&(d.addEventListener("progress",R),null!==f&&d.upload&&d.upload.addEventListener("progress",L)),d.send(f),c.next({type:Hn.Sent}),()=>{d.removeEventListener("error",A),d.removeEventListener("abort",A),d.removeEventListener("load",_),d.removeEventListener("timeout",A),t.reportProgress&&(d.removeEventListener("progress",R),null!==f&&d.upload&&d.upload.removeEventListener("progress",L)),d.readyState!==d.DONE&&d.abort()}})))}static{this.\u0275fac=function(r){return new(r||l)(m.KVO(Ue.N0))}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})();const us=new m.nKC(""),mi=new m.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ft=new m.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class It{}let sl=(()=>{class l{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Ue._b)(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||l)(m.KVO(Ue.qQ),m.KVO(m.Agw),m.KVO(mi))}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})();function yi(l,e){const t=l.url.toLowerCase();if(!(0,m.WQX)(us)||"GET"===l.method||"HEAD"===l.method||t.startsWith("http://")||t.startsWith("https://"))return e(l);const r=(0,m.WQX)(It).getToken(),o=(0,m.WQX)(ft);return null!=r&&!l.headers.has(o)&&(l=l.clone({headers:l.headers.set(o,r)})),e(l)}var fr=function(l){return l[l.Interceptors=0]="Interceptors",l[l.LegacyInterceptors=1]="LegacyInterceptors",l[l.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",l[l.NoXsrfProtection=3]="NoXsrfProtection",l[l.JsonpSupport=4]="JsonpSupport",l[l.RequestsMadeViaParent=5]="RequestsMadeViaParent",l[l.Fetch=6]="Fetch",l}(fr||{});function $r(l,e){return{\u0275kind:l,\u0275providers:e}}function ba(...l){const e=[ht,to,kt,{provide:bt,useExisting:kt},{provide:dr,useExisting:to},{provide:Zi,useValue:yi,multi:!0},{provide:us,useValue:!0},{provide:It,useClass:sl}];for(const t of l)e.push(...t.\u0275providers);return(0,m.EmA)(e)}const Oo=new m.nKC("");let io=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l})}static{this.\u0275inj=m.G2t({providers:[ba($r(fr.LegacyInterceptors,[{provide:Oo,useFactory:Io},{provide:Zi,useExisting:Oo,multi:!0}]))]})}}return l})();var dl=H(8750),Ea=H(1397),so=H(7441),Tr=H(8071),oo=H(6450);const Rc=["addListener","removeListener"],zr=["addEventListener","removeEventListener"],Ca=["on","off"];function zt(l,e,t,r){if((0,Tr.T)(t)&&(r=t,t=void 0),r)return zt(l,e,t).pipe((0,oo.I)(r));const[o,c]=function ds(l){return(0,Tr.T)(l.addEventListener)&&(0,Tr.T)(l.removeEventListener)}(l)?zr.map(d=>f=>l[d](e,f,t)):function hl(l){return(0,Tr.T)(l.addListener)&&(0,Tr.T)(l.removeListener)}(l)?Rc.map(Wr(l,e)):function Gr(l){return(0,Tr.T)(l.on)&&(0,Tr.T)(l.off)}(l)?Ca.map(Wr(l,e)):[];if(!o&&(0,so.X)(l))return(0,Ea.Z)(d=>zt(d,e,t))((0,dl.Tg)(l));if(!o)throw new TypeError("Invalid event target");return new ur.c(d=>{const f=(...p)=>d.next(1<p.length?p:p[0]);return o(f),()=>c(f)})}function Wr(l,e){return t=>r=>l[t](e,r)}var fl=H(1413),Sn=H(6977),pl=H(8359);class gl extends pl.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const vi={setInterval(l,e,...t){const{delegate:r}=vi;return r?.setInterval?r.setInterval(l,e,...t):setInterval(l,e,...t)},clearInterval(l){const{delegate:e}=vi;return(e?.clearInterval||clearInterval)(l)},delegate:void 0};var Fo=H(7908),Oc=H(6129);class Vo{constructor(e,t=Vo.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Vo.now=Oc.U.now;const rn=new class Ir extends Vo{constructor(e,t=Vo.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}(class nr extends gl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const o=this.id,c=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(c,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,r=0){return vi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&vi.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,r=!1;try{this.work(e)}catch(c){r=!0,o=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Fo.o)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});var Nc=H(9974),ml=H(4360),Kr={d:(l,e)=>{for(var t in e)Kr.o(e,t)&&!Kr.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:e[t]})},o:(l,e)=>Object.prototype.hasOwnProperty.call(l,e)},mt=globalThis.pdfjsLib={};Kr.d(mt,{AbortException:()=>gr,AnnotationEditorLayer:()=>i_,AnnotationEditorParamsType:()=>vt,AnnotationEditorType:()=>At,AnnotationEditorUIManager:()=>Ko,AnnotationLayer:()=>tm,AnnotationMode:()=>qr,ColorPicker:()=>kr,DOMSVGFactory:()=>pd,DrawLayer:()=>Mi,FeatureTest:()=>qn,GlobalWorkerOptions:()=>od,ImageKind:()=>Xr,InvalidPDFException:()=>Zu,MissingPDFException:()=>pr,OPS:()=>Ai,OutputScale:()=>dn,PDFDataRangeTransport:()=>hd,PDFDateString:()=>Lt,PDFWorker:()=>Ri,PasswordResponses:()=>Lc,PermissionFlag:()=>ir,PixelsPerInch:()=>Os,RenderingCancelledException:()=>M,TextLayer:()=>Vi,UnexpectedResponseException:()=>co,Util:()=>at,VerbosityLevel:()=>hs,XfaLayer:()=>Qg,build:()=>tf,createValidAbsoluteUrl:()=>_i,fetchData:()=>Yr,getDocument:()=>po,getFilenameFromUrl:()=>de,getPdfFilenameFromUrl:()=>De,getXfaPageViewport:()=>$n,isDataScheme:()=>P,isPdfFile:()=>W,noContextMenu:()=>Wt,normalizeUnicode:()=>Kh,setLayerDimensions:()=>et,shadow:()=>Yt,version:()=>qg});const on=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),yl=[1,0,0,1,0,0],xr=[.001,0,0,.001,0,0],qr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},vt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},ir={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},hs={ERRORS:0,WARNINGS:1,INFOS:5},Ai={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Lc={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let lo=hs.WARNINGS;function Vc(){return lo}function Ps(l){lo>=hs.INFOS&&console.log(`Info: ${l}`)}function Xe(l){lo>=hs.WARNINGS&&console.log(`Warning: ${l}`)}function xt(l){throw new Error(l)}function qt(l,e){l||xt(e)}function _i(l,e=null,t=null){if(!l)return null;try{if(t&&"string"==typeof l&&(t.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),t.tryConvertEncoding))try{l=function wl(l){return decodeURIComponent(escape(l))}(l)}catch{}const r=e?new URL(l,e):new URL(l);if(function Wi(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch{}return null}function Yt(l,e,t,r=!1){return Object.defineProperty(l,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Gi=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Pr extends Gi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class fs extends Gi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Zu extends Gi{constructor(e){super(e,"InvalidPDFException")}}class pr extends Gi{constructor(e){super(e,"MissingPDFException")}}class co extends Gi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Ho extends Gi{constructor(e){super(e,"FormatError")}}class gr extends Gi{constructor(e){super(e,"AbortException")}}function $o(l){("object"!=typeof l||void 0===l?.length)&&xt("Invalid argument for bytesToString");const e=l.length,t=8192;if(e<t)return String.fromCharCode.apply(null,l);const r=[];for(let o=0;o<e;o+=t){const c=Math.min(o+t,e),d=l.subarray(o,c);r.push(String.fromCharCode.apply(null,d))}return r.join("")}function Rs(l){"string"!=typeof l&&xt("Invalid argument for stringToBytes");const e=l.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=255&l.charCodeAt(r);return t}function zo(l){const e=Object.create(null);for(const[t,r]of l)e[t]=r;return e}class qn{static get isLittleEndian(){return Yt(this,"isLittleEndian",function jc(){const l=new Uint8Array(4);return l[0]=1,1===new Uint32Array(l.buffer,0,1)[0]}())}static get isEvalSupported(){return Yt(this,"isEvalSupported",function Bc(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return Yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof navigator?.platform?Yt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof navigator?.userAgent&&navigator.userAgent.includes("Firefox")}):Yt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ps=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));class at{static makeHexColor(e,t,r){return`#${ps[e]}${ps[t]}${ps[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),o=this.applyTransform(e.slice(2,4),t),c=this.applyTransform([e[0],e[3]],t),d=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],o[0],c[0],d[0]),Math.min(r[1],o[1],c[1],d[1]),Math.max(r[0],o[0],c[0],d[0]),Math.max(r[1],o[1],c[1],d[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],d=e[2]*t[1]+e[3]*t[3],f=(r+d)/2,p=Math.sqrt((r+d)**2-4*(r*d-(e[2]*t[0]+e[3]*t[2])*(e[0]*t[1]+e[1]*t[3])))/2,_=f-p||1;return[Math.sqrt(f+p||1),Math.sqrt(_)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),o=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>o)return null;const c=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),d=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return c>d?null:[r,c,o,d]}static#e(e,t,r,o,c,d,f,p,y,_){if(y<=0||y>=1)return;const A=1-y,T=y*y,R=T*y,L=A*(A*(A*e+3*y*t)+3*T*r)+R*o,j=A*(A*(A*c+3*y*d)+3*T*f)+R*p;_[0]=Math.min(_[0],L),_[1]=Math.min(_[1],j),_[2]=Math.max(_[2],L),_[3]=Math.max(_[3],j)}static#t(e,t,r,o,c,d,f,p,y,_,A,T){if(Math.abs(y)<1e-12)return void(Math.abs(_)>=1e-12&&this.#e(e,t,r,o,c,d,f,p,-A/_,T));const R=_**2-4*A*y;if(R<0)return;const L=Math.sqrt(R),j=2*y;this.#e(e,t,r,o,c,d,f,p,(-_+L)/j,T),this.#e(e,t,r,o,c,d,f,p,(-_-L)/j,T)}static bezierBoundingBox(e,t,r,o,c,d,f,p,y){return y?(y[0]=Math.min(y[0],e,f),y[1]=Math.min(y[1],t,p),y[2]=Math.max(y[2],e,f),y[3]=Math.max(y[3],t,p)):y=[Math.min(e,f),Math.min(t,p),Math.max(e,f),Math.max(t,p)],this.#t(e,r,c,f,t,o,d,p,3*(3*(r-c)-e+f),6*(e-2*r+c),3*(r-e),y),this.#t(e,r,c,f,t,o,d,p,3*(3*(o-d)-t+p),6*(t-2*o+d),3*(o-t),y),y}}let Go=null,El=null;function Kh(l){return Go||(Go=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,El=new Map([["\ufb05","\u017ft"]])),l.replaceAll(Go,(e,t,r)=>t?t.normalize("NFKC"):El.get(r))}const gs="pdfjs_internal_id_",xi="http://www.w3.org/2000/svg";class Os{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function Yr(l){return C.apply(this,arguments)}function C(){return(C=(0,G.A)(function*(l,e="text"){if(an(l,document.baseURI)){const t=yield fetch(l);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const o=new XMLHttpRequest;o.open("GET",l,!0),o.responseType=e,o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){switch(e){case"arraybuffer":case"blob":case"json":return void t(o.response)}return void t(o.responseText)}r(new Error(o.statusText))}},o.send(null)})})).apply(this,arguments)}class k{constructor({viewBox:e,scale:t,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:d=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=o,this.offsetY=c;const f=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let y,_,A,T,R,L,j,K;switch((r%=360)<0&&(r+=360),r){case 180:y=-1,_=0,A=0,T=1;break;case 90:y=0,_=1,A=1,T=0;break;case 270:y=0,_=-1,A=-1,T=0;break;case 0:y=1,_=0,A=0,T=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(A=-A,T=-T),0===y?(R=Math.abs(p-e[1])*t+o,L=Math.abs(f-e[0])*t+c,j=(e[3]-e[1])*t,K=(e[2]-e[0])*t):(R=Math.abs(f-e[0])*t+o,L=Math.abs(p-e[1])*t+c,j=(e[2]-e[0])*t,K=(e[3]-e[1])*t),this.transform=[y*t,_*t,A*t,T*t,R-y*t*f-A*t*p,L-_*t*f-T*t*p],this.width=j,this.height=K}get rawDims(){const{viewBox:e}=this;return Yt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:o=this.offsetY,dontFlip:c=!1}={}){return new k({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:o,dontFlip:c})}convertToViewportPoint(e,t){return at.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=at.applyTransform([e[0],e[1]],this.transform),r=at.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return at.applyInverseTransform([e,t],this.transform)}}class M extends Gi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function P(l){const e=l.length;let t=0;for(;t<e&&""===l[t].trim();)t++;return"data:"===l.substring(t,t+5).toLowerCase()}function W(l){return"string"==typeof l&&/\.pdf$/i.test(l)}function de(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function De(l,e="document.pdf"){if("string"!=typeof l)return e;if(P(l))return Xe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(l);let c=r.exec(o[1])||r.exec(o[2])||r.exec(o[3]);if(c&&(c=c[0],c.includes("%")))try{c=r.exec(decodeURIComponent(c))[0]}catch{}return c||e}class Je{started=Object.create(null);times=[];time(e){e in this.started&&Xe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Xe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:o,end:c}of this.times)e.push(`${r.padEnd(t)} ${c-o}ms\n`);return e.join("")}}function an(l,e){try{const{protocol:t}=e?new URL(l,e):new URL(l);return"http:"===t||"https:"===t}catch{return!1}}function Wt(l){l.preventDefault()}function fn(l){console.log("Deprecated API usage: "+l)}class Lt{static#e;static toDateObject(e){if(!e||"string"!=typeof e)return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let o=parseInt(t[2],10);o=o>=1&&o<=12?o-1:0;let c=parseInt(t[3],10);c=c>=1&&c<=31?c:1;let d=parseInt(t[4],10);d=d>=0&&d<=23?d:0;let f=parseInt(t[5],10);f=f>=0&&f<=59?f:0;let p=parseInt(t[6],10);p=p>=0&&p<=59?p:0;const y=t[7]||"Z";let _=parseInt(t[8],10);_=_>=0&&_<=23?_:0;let A=parseInt(t[9],10)||0;return A=A>=0&&A<=59?A:0,"-"===y?(d+=_,f+=A):"+"===y&&(d-=_,f-=A),new Date(Date.UTC(r,o,c,d,f,p))}}function $n(l,{scale:e=1,rotation:t=0}){const{width:r,height:o}=l.attributes.style,c=[0,0,parseInt(r),parseInt(o)];return new k({viewBox:c,scale:e,rotation:t})}function sn(l){if(l.startsWith("#")){const e=parseInt(l.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(e=>parseInt(e)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Xe(`Not a valid color format: "${l}"`),[0,0,0])}function pt(l){const{a:e,b:t,c:r,d:o,e:c,f:d}=l.getTransform();return[e,t,r,o,c,d]}function Re(l){const{a:e,b:t,c:r,d:o,e:c,f:d}=l.getTransform().invertSelf();return[e,t,r,o,c,d]}function et(l,e,t=!1,r=!0){if(e instanceof k){const{pageWidth:o,pageHeight:c}=e.rawDims,{style:d}=l,f=qn.isCSSRoundSupported,p=`var(--scale-factor) * ${o}px`,y=`var(--scale-factor) * ${c}px`,_=f?`round(down, ${p}, var(--scale-round-x, 1px))`:`calc(${p})`,A=f?`round(down, ${y}, var(--scale-round-y, 1px))`:`calc(${y})`;t&&e.rotation%180!=0?(d.width=A,d.height=_):(d.width=_,d.height=A)}r&&l.setAttribute("data-main-rotation",e.rotation)}class dn{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}class zn{#e=null;#t=null;#n;#i=null;#r=null;static#s=null;constructor(e){this.#n=e,zn.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",Wt,{signal:t}),e.addEventListener("pointerdown",zn.#l,{signal:t});const r=this.#i=document.createElement("div");r.className="buttons",e.append(r);const o=this.#n.toolbarPosition;if(o){const{style:c}=e,d="ltr"===this.#n._uiManager.direction?1-o[0]:o[0];c.insetInlineEnd=100*d+"%",c.top=`calc(${100*o[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Wt,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",zn.#s[e]),this.#a(r),r.addEventListener("click",o=>{t.delete()},{signal:t._signal}),this.#i.append(r)}get#o(){const e=document.createElement("div");return e.className="divider",e}addAltText(e){var t=this;return(0,G.A)(function*(){const r=yield e.render();t.#a(r),t.#i.prepend(r,t.#o),t.#r=e})()}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#i.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Vn{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Wt,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#r(e,t){let r=0,o=0;for(const c of e){const d=c.y+c.height;if(d<r)continue;const f=c.x+(t?c.width:0);d>r?(o=f,r=d):t?f>o&&(o=f):f<o&&(o=f)}return[t?1-o:o,r]}show(e,t,r){const[o,c]=this.#r(t,r),{style:d}=this.#t||=this.#i();e.append(this.#t),d.insetInlineEnd=100*o+"%",d.top=`calc(${100*c}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",Wt,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function Tn(l,e,t){for(const r of t)e.addEventListener(r,l[r].bind(l))}class On{#e=0;get id(){return"pdfjs_internal_editor_"+this.#e++}}class Qn{#e=function Uc(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const l=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(l);else for(let e=0;e<32;e++)l[e]=Math.floor(255*Math.random());return $o(l)}();#t=0;#n=null;static get _isSVGFittingCanvas(){const r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),o=new Image;return o.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Yt(this,"_isSVGFittingCanvas",o.decode().then(()=>(r.drawImage(o,0,0,1,1,0,0,1,3),0===new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0])))}#i(e,t){var r=this;return(0,G.A)(function*(){r.#n||=new Map;let o=r.#n.get(e);if(null===o)return null;if(o?.bitmap)return o.refCounter+=1,o;try{let c;if(o||={bitmap:null,id:`image_${r.#e}_${r.#t++}`,refCounter:0,isSvg:!1},"string"==typeof t?(o.url=t,c=yield Yr(t,"blob")):t instanceof File?c=o.file=t:t instanceof Blob&&(c=t),"image/svg+xml"===c.type){const d=Qn._isSVGFittingCanvas,f=new FileReader,p=new Image,y=new Promise((_,A)=>{p.onload=()=>{o.bitmap=p,o.isSvg=!0,_()},f.onload=(0,G.A)(function*(){const T=o.svgUrl=f.result;p.src=(yield d)?`${T}#svgView(preserveAspectRatio(none))`:T}),p.onerror=f.onerror=A});f.readAsDataURL(c),yield y}else o.bitmap=yield createImageBitmap(c);o.refCounter=1}catch(c){console.error(c),o=null}return r.#n.set(e,o),o&&r.#n.set(o.id,o),o})()}getFromFile(e){var t=this;return(0,G.A)(function*(){const{lastModified:r,name:o,size:c,type:d}=e;return t.#i(`${r}_${o}_${c}_${d}`,e)})()}getFromUrl(e){var t=this;return(0,G.A)(function*(){return t.#i(e,e)})()}getFromBlob(e,t){var r=this;return(0,G.A)(function*(){const o=yield t;return r.#i(e,o)})()}getFromId(e){var t=this;return(0,G.A)(function*(){t.#n||=new Map;const r=t.#n.get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return t.getFromFile(r.file);if(r.blobPromise){const{blobPromise:o}=r;return delete r.blobPromise,t.getFromBlob(r.id,o)}return t.getFromUrl(r.url)})()}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const o=new OffscreenCanvas(t.width,t.height);return o.getContext("2d").drawImage(t,0,0),r={bitmap:o.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,0!==t.refCounter))return;const{bitmap:r}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(r.width,r.height);o.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=o.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Or{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:o,type:c=NaN,overwriteIfSameType:d=!1,keepUndo:f=!1}){if(o&&e(),this.#t)return;const p={cmd:e,undo:t,post:r,type:c};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(p);if(d&&this.#e[this.#i].type===c)return f&&(p.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=p);const y=this.#i+1;y===this.#n?this.#e.splice(0,1):(this.#i=y,y<this.#e.length&&this.#e.splice(y)),this.#e.push(p)}undo(){if(-1===this.#i)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class st{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=qn.platform;for(const[r,o,c={}]of e)for(const d of r){const f=d.startsWith("mac+");t&&f?(this.callbacks.set(d.slice(4),{callback:o,options:c}),this.allKeys.add(d.split("+").at(-1))):!t&&!f&&(this.callbacks.set(d,{callback:o,options:c}),this.allKeys.add(d.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:o,options:{bubbles:c=!1,args:d=[],checker:f=null}}=r;f&&!f(e,t)||(o.bind(e,...d,t)(),c||(t.stopPropagation(),t.preventDefault()))}}class uo{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function Rn(l){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of l.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;l.set(t,sn(r))}e.remove()}(e),Yt(this,"_colors",e)}convert(e){const t=sn(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,o]of this._colors)if(o.every((c,d)=>c===t[d]))return uo._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?at.makeHexColor(...t):e}}let Ko=(()=>{class l{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#r=null;#s=null;#l=null;#c=new Or;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#g=!1;#y=!1;#m=null;#v=null;#_=null;#C=null;#w=!1;#E=null;#x=new On;#M=!1;#A=!1;#T=null;#S=null;#P=null;#O=null;#D=At.NONE;#b=new Set;#I=null;#R=null;#F=null;#U={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#L=null;#V=null;#j=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=l.prototype,r=f=>f.#V.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&f.hasSomethingToControl(),o=(f,{target:p})=>{if(p instanceof HTMLInputElement){const{type:y}=p;return"text"!==y&&"number"!==y}return!0},c=this.TRANSLATE_SMALL,d=this.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new st([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:o}],[["ctrl+z","mac+meta+z"],t.undo,{checker:o}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:o}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:o}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(f,{target:p})=>!(p instanceof HTMLButtonElement)&&f.#V.contains(p)&&!f.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(f,{target:p})=>!(p instanceof HTMLButtonElement)&&f.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-c,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-d,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[c,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[d,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-c],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-d],checker:r}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,c],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,d],checker:r}]]))}constructor(t,r,o,c,d,f,p,y,_,A,T){const R=this._signal=this.#e.signal;this.#V=t,this.#j=r,this.#r=o,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:R}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:R}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:R}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:R}),c._on("setpreference",this.onSetPreference.bind(this),{signal:R}),c._on("switchannotationeditorparams",L=>this.updateParams(L.type,L.value),{signal:R}),this.#ee(),this.#re(),this.#K(),this.#s=d.annotationStorage,this.#m=d.filterFactory,this.#R=f,this.#C=p||null,this.#f=y,this.#g=_,this.#y=A,this.#O=T||null,this.viewParameters={realScale:Os.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#N?.resolve(),this.#N=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#c.destroy(),this.#r?.destroy(),this.#E?.hide(),this.#E=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L&&(clearTimeout(this.#L),this.#L=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#O}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Yt(this,"hcmFilter",this.#R?this.#m.addHCMFilter(this.#R.foreground,this.#R.background):"none")}get direction(){return Yt(this,"direction",getComputedStyle(this.#V).direction)}get highlightColors(){return Yt(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(t=>t.split("=").map(r=>r.trim()))):null)}get highlightColorNames(){return Yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#P=t}editAltText(t,r=!1){this.#r?.editAltText(this,t,r)}switchToMode(t,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,r){this._eventBus.dispatch("setpreference",{source:this,name:t,value:r})}onSetPreference({name:t,value:r}){"enableNewAltTextWhenAddingImage"===t&&(this.#y=r)}onPageChanging({pageNumber:t}){this.#a=t-1}focusMainContainer(){this.#V.focus()}findParent(t,r){for(const o of this.#i.values()){const{x:c,y:d,width:f,height:p}=o.div.getBoundingClientRect();if(t>=c&&t<=c+f&&r>=d&&r<=d+p)return o}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Os.PDF_TO_CSS_UNITS;for(const r of this.#p)r.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#G(t){const{currentLayer:r}=this;if(r.hasTextLayer(t))return r;for(const o of this.#i.values())if(o.hasTextLayer(t))return o;return null}highlightSelection(t=""){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:o,anchorOffset:c,focusNode:d,focusOffset:f}=r,p=r.toString(),_=this.#z(r).closest(".textLayer"),A=this.getSelectionBoxes(_);if(!A)return;r.empty();const T=this.#G(_),R=this.#D===At.NONE,L=()=>{T?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:A,anchorNode:o,anchorOffset:c,focusNode:d,focusOffset:f,text:p}),R&&this.showAllEditors("highlight",!0,!0)};R?this.switchToMode(At.HIGHLIGHT,L):L()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const o=this.#z(t).closest(".textLayer"),c=this.getSelectionBoxes(o);c&&(this.#E||=new Vn(this),this.#E.show(o,c,"ltr"===this.direction))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#J(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#I&&(this.#E?.hide(),this.#I=null,this.#k({hasSelectedText:!1})));const{anchorNode:r}=t;if(r===this.#I)return;const c=this.#z(t).closest(".textLayer");if(c){if(this.#E?.hide(),this.#I=r,this.#k({hasSelectedText:!0}),(this.#D===At.HIGHLIGHT||this.#D===At.NONE)&&(this.#D===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const d=this.#D===At.HIGHLIGHT?this.#G(c):null;d?.toggleDrawing();const f=new AbortController,p=this.combinedSignal(f),y=_=>{"pointerup"===_.type&&0!==_.button||(f.abort(),d?.toggleDrawing(!0),"pointerup"===_.type&&this.#W("main_toolbar"))};window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("blur",y,{signal:p})}}else this.#I&&(this.#E?.hide(),this.#I=null,this.#k({hasSelectedText:!1}))}#W(t=""){this.#D===At.HIGHLIGHT?this.highlightSelection(t):this.#f&&this.#Z()}#ee(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#te(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ne(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const r of this.#b)if(r.div.contains(t)){this.#S=[r,t],r._focusEventsAllowed=!1;break}}focus(){if(!this.#S)return;const[t,r]=this.#S;this.#S=null,r.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}#K(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ie(){this.#T?.abort(),this.#T=null}#q(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#X(){this.#u?.abort(),this.#u=null}#re(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#K(),this.#q()}removeEditListeners(){this.#ie(),this.#X()}dragOver(t){for(const{type:r}of t.dataTransfer.items)for(const o of this.#h)if(o.isHandlingMimeForPasting(r))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const r of t.dataTransfer.items)for(const o of this.#h)if(o.isHandlingMimeForPasting(r.type))return o.paste(r,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const r=[];for(const o of this.#b){const c=o.serialize(!0);c&&r.push(c)}0!==r.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(t){this.copy(t),this.delete()}paste(t){var r=this;return(0,G.A)(function*(){t.preventDefault();const{clipboardData:o}=t;for(const f of o.items)for(const p of r.#h)if(p.isHandlingMimeForPasting(f.type))return void p.paste(f,r.currentLayer);let c=o.getData("application/pdfjs");if(!c)return;try{c=JSON.parse(c)}catch(f){return void Xe(`paste: "${f.message}".`)}if(!Array.isArray(c))return;r.unselectAll();const d=r.currentLayer;try{const f=[];for(const _ of c){const A=yield d.deserialize(_);if(!A)return;f.push(A)}const p=()=>{for(const _ of f)r.#Q(_);r.#Y(f)};r.addCommands({cmd:p,undo:()=>{for(const _ of f)_.remove()},mustExec:!0})}catch(f){Xe(`paste: "${f.message}".`)}})()}keydown(t){!this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!0),this.#D!==At.NONE&&!this.isEditorHandlingKeyboard&&l._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#k(t){Object.entries(t).some(([o,c])=>this.#U[o]!==c)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#U,t)}),this.#D===At.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#H([[vt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#te(),this.#q(),this.#k({isEditing:this.#D!==At.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#X(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const r of this.#h)this.#H(r.defaultPropertiesToUpdate)}}getId(){return this.#x.id}get currentLayer(){return this.#i.get(this.#a)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#a}addLayer(t){this.#i.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t){var r=this;return(0,G.A)(function*(o,c=null,d=!1){if(r.#D!==o&&(!r.#N||(yield r.#N.promise,r.#N))){if(r.#N=Promise.withResolvers(),r.#D=o,o===At.NONE)return r.setEditingState(!1),r.#oe(),void r.#N.resolve();r.setEditingState(!0),yield r.#se(),r.unselectAll();for(const f of r.#i.values())f.updateMode(o);if(!c)return d&&r.addNewEditorFromKeyboard(),void r.#N.resolve();for(const f of r.#n.values())f.annotationElementId===c?(r.setSelected(f),f.enterInEditMode()):f.unselect();r.#N.resolve()}}).apply(this,arguments)}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,r){if(this.#h){switch(t){case vt.CREATE:return void this.currentLayer.addNewEditor();case vt.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(r);break;case vt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#F||=new Map).set(t,r),this.showAllEditors("highlight",r)}for(const o of this.#b)o.updateParams(t,r);for(const o of this.#h)o.updateDefaultParams(t,r)}}showAllEditors(t,r,o=!1){for(const d of this.#n.values())d.editorType===t&&d.show(r);(this.#F?.get(vt.HIGHLIGHT_SHOW_ALL)??!0)!==r&&this.#H([[vt.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(t=!1){if(this.#A!==t){this.#A=t;for(const r of this.#i.values())t?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",t)}}#se(){var t=this;return(0,G.A)(function*(){if(!t.#M){t.#M=!0;const r=[];for(const o of t.#i.values())r.push(o.enable());yield Promise.all(r);for(const o of t.#n.values())o.enable()}})()}#oe(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const r=[];for(const o of this.#n.values())o.pageIndex===t&&r.push(o);return r}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Q(t){const r=this.#i.get(t.pageIndex);r?r.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#H(t.propertiesToUpdate))}get#ae(){let t=null;for(t of this.#b);return t}updateUI(t){this.#ae===t&&this.#H(t.propertiesToUpdate)}toggleSelected(t){if(this.#b.has(t))return this.#b.delete(t),t.unselect(),void this.#k({hasSelectedEditor:this.hasSelection});this.#b.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){for(const r of this.#b)r!==t&&r.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#b.size}get isEnterHandled(){return 1===this.#b.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#b];this.addCommands({cmd:()=>{for(const c of t)c.remove()},undo:()=>{for(const c of t)this.#Q(c)},mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Y(t){for(const r of this.#b)r.unselect();this.#b.clear();for(const r of t)r.isEmpty()||(this.#b.add(r),r.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#b)t.commit();this.#Y(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#D===At.NONE))&&this.hasSelection){for(const t of this.#b)t.unselect();this.#b.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,r,o=!1){if(o||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=t,this.#B[1]+=r;const[c,d]=this.#B,f=[...this.#b];this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const y of f)this.#n.has(y.id)&&y.translateInPage(c,d)},undo:()=>{for(const y of f)this.#n.has(y.id)&&y.translateInPage(-c,-d)},mustExec:!1})},1e3);for(const y of f)y.translateInPage(t,r)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const t of this.#b)this.#o.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const t=this.#o;this.#o=null;let r=!1;for(const[{x:c,y:d,pageIndex:f},p]of t)p.newX=c,p.newY=d,p.newPageIndex=f,r||=c!==p.savedX||d!==p.savedY||f!==p.savedPageIndex;if(!r)return!1;const o=(c,d,f,p)=>{if(this.#n.has(c.id)){const y=this.#i.get(p);y?c._setParentAndPosition(y,d,f):(c.pageIndex=p,c.x=d,c.y=f)}};return this.addCommands({cmd:()=>{for(const[c,{newX:d,newY:f,newPageIndex:p}]of t)o(c,d,f,p)},undo:()=>{for(const[c,{savedX:d,savedY:f,savedPageIndex:p}]of t)o(c,d,f,p)},mustExec:!0}),!0}dragSelectedEditors(t,r){if(this.#o)for(const o of this.#o.keys())o.drag(t,r)}rebuild(t){if(null===t.parent){const r=this.getLayer(t.pageIndex);r?(r.changeParent(t),r.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#b.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#D}get imageManager(){return Yt(this,"imageManager",new Qn)}getSelectionBoxes(t){if(!t)return null;const r=document.getSelection();for(let _=0,A=r.rangeCount;_<A;_++)if(!t.contains(r.getRangeAt(_).commonAncestorContainer))return null;const{x:o,y:c,width:d,height:f}=t.getBoundingClientRect();let p;switch(t.getAttribute("data-main-rotation")){case"90":p=(_,A,T,R)=>({x:(A-c)/f,y:1-(_+T-o)/d,width:R/f,height:T/d});break;case"180":p=(_,A,T,R)=>({x:1-(_+T-o)/d,y:1-(A+R-c)/f,width:T/d,height:R/f});break;case"270":p=(_,A,T,R)=>({x:1-(A+R-c)/f,y:(_-o)/d,width:R/f,height:T/d});break;default:p=(_,A,T,R)=>({x:(_-o)/d,y:(A-c)/f,width:T/d,height:R/f})}const y=[];for(let _=0,A=r.rangeCount;_<A;_++){const T=r.getRangeAt(_);if(!T.collapsed)for(const{x:R,y:L,width:j,height:K}of T.getClientRects())0===j||0===K||y.push(p(R,L,j,K))}return 0===y.length?null:y}addChangedExistingAnnotation({annotationElementId:t,id:r}){(this.#l||=new Map).set(t,r)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const r=this.#l?.get(t.data.id);if(!r)return;const o=this.#s.getRawValue(r);o&&(this.#D===At.NONE&&!o.hasBeenModified||o.renderAnnotationElement(t))}}return l})(),Zr=(()=>{class l{#e=null;#t=!1;#n=null;#i=null;#r=null;#s=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(t){this.#u=t,this.#o=t._uiManager.useNewAltTextFlow,l.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){l._l10n??=t}render(){var t=this;return(0,G.A)(function*(){const r=t.#n=document.createElement("button");r.className="altText",r.tabIndex="0";const o=t.#i=document.createElement("span");r.append(o),t.#o?(r.classList.add("new"),r.setAttribute("data-l10n-id",l.#h.missing),o.setAttribute("data-l10n-id",l.#h["missing-label"])):(r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),o.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const c=t.#u._uiManager._signal;r.addEventListener("contextmenu",Wt,{signal:c}),r.addEventListener("pointerdown",f=>f.stopPropagation(),{signal:c});const d=f=>{f.preventDefault(),t.#u._uiManager.editAltText(t.#u),t.#o&&t.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:t.#p}})};return r.addEventListener("click",d,{capture:!0,signal:c}),r.addEventListener("keydown",f=>{f.target===r&&"Enter"===f.key&&(t.#l=!0,d(f))},{signal:c}),yield t.#f(),r})()}get#p(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#o?null!==this.#e||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}setGuessedText(t){var r=this;return(0,G.A)(function*(){null===r.#e&&(r.#a=t,r.#d=yield l._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),r.#f())})()}toggleAltTextBadge(t=!1){if(!this.#o||this.#e)return this.#c?.remove(),void(this.#c=null);if(!this.#c){const r=this.#c=document.createElement("div");r.className="noAltTextBadge",this.#u.div.append(r)}this.#c.classList.toggle("hidden",!t)}serialize(t){let r=this.#e;return!t&&this.#a===r&&(r=this.#d),{altText:r,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:r,guessedText:o,textWithDisclaimer:c,cancel:d=!1}){o&&(this.#a=o,this.#d=c),(this.#e!==t||this.#t!==r)&&(d||(this.#e=t,this.#t=r),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#c?.remove(),this.#c=null}#f(){var t=this;return(0,G.A)(function*(){const r=t.#n;if(!r)return;if(t.#o){if(r.classList.toggle("done",!!t.#e),r.setAttribute("data-l10n-id",l.#h[t.#p]),t.#i?.setAttribute("data-l10n-id",l.#h[`${t.#p}-label`]),!t.#e)return void t.#r?.remove()}else{if(!t.#e&&!t.#t)return r.classList.remove("done"),void t.#r?.remove();r.classList.add("done"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let o=t.#r;if(!o){t.#r=o=document.createElement("span"),o.className="tooltip",o.setAttribute("role","tooltip"),o.id=`alt-text-tooltip-${t.#u.id}`;const d=100,f=t.#u._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(t.#s),t.#s=null},{once:!0}),r.addEventListener("mouseenter",()=>{t.#s=setTimeout(()=>{t.#s=null,t.#r.classList.add("show"),t.#u._reportTelemetry({action:"alt_text_tooltip"})},d)},{signal:f}),r.addEventListener("mouseleave",()=>{t.#s&&(clearTimeout(t.#s),t.#s=null),t.#r?.classList.remove("show")},{signal:f})}t.#t?o.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(o.removeAttribute("data-l10n-id"),o.textContent=t.#e),o.parentNode||r.append(o),t.#u.getImageForAltText()?.setAttribute("aria-describedby",o.id)})()}}return l})();class nt{#e=null;#t=null;#n=null;#i=!1;#r=!1;#s=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#g=0;#y=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#v=!1;#_=nt._zIndex++;static _borderLineWidth=-1;static _colorManager=new uo;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=nt.prototype._resizeWithKeyboard,t=Ko.TRANSLATE_SMALL,r=Ko.TRANSLATE_BIG;return Yt(this,"_resizerKeyboardManager",new st([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],nt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:d}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,o],this.pageTranslation=[c,d];const[f,p]=this.parentDimensions;this.x=e.x/f,this.y=e.y/p,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Ma({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(nt._l10n??=e,nt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1!==nt._borderLineWidth)return;const r=getComputedStyle(document.documentElement);nt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#v}set _isDraggable(e){this.#v=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#F(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,o){const[c,d]=this.parentDimensions;[r,o]=this.screenToPageTranslation(r,o),this.x=(e+r)/c,this.y=(t+o)/d,this.fixAndSetPosition()}#C([e,t],r,o){[r,o]=this.screenToPageTranslation(r,o),this.x+=r/e,this.y+=o/t,this.fixAndSetPosition()}translate(e,t){this.#C(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#C(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[r,o]=this.parentDimensions;if(this.x+=e/r,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:_}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,_)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:d}=this;const[f,p]=this.getBaseTranslation();c+=f,d+=p,this.div.style.left=`${(100*c).toFixed(2)}%`,this.div.style.top=`${(100*d).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=nt,o=r/e,c=r/t;switch(this.rotation){case 90:return[-o,c];case 180:return[o,c];case 270:return[o,-c];default:return[-o,-c]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:o,y:c,width:d,height:f}=this;if(d*=t,f*=r,o*=t,c*=r,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(t-d,o)),c=Math.max(0,Math.min(r-f,c));break;case 90:o=Math.max(0,Math.min(t-f,o)),c=Math.min(r,Math.max(d,c));break;case 180:o=Math.min(t,Math.max(d,o)),c=Math.min(r,Math.max(f,c));break;case 270:o=Math.min(t,Math.max(f,o)),c=Math.max(0,Math.min(r-d,c))}this.x=o/=t,this.y=c/=r;const[p,y]=this.getBaseTranslation();o+=p,c+=y;const{style:_}=this.div;_.left=`${(100*o).toFixed(2)}%`,_.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#w(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return nt.#w(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return nt.#w(e,t,360-this.parentRotation)}#E(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,o]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*t/o).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,o=r.endsWith("%"),c=!this.#r&&t.endsWith("%");if(o&&c)return;const[d,f]=this.parentDimensions;o||(e.width=`${(100*parseFloat(r)/d).toFixed(2)}%`),!this.#r&&!c&&(e.height=`${(100*parseFloat(t)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const o=document.createElement("div");this.#s.append(o),o.classList.add("resizer",r),o.setAttribute("data-resizer-name",r),o.addEventListener("pointerdown",this.#M.bind(this,r),{signal:t}),o.addEventListener("contextmenu",Wt,{signal:t}),o.tabIndex=-1}this.div.prepend(this.#s)}#M(e,t){t.preventDefault();const{isMac:r}=qn.platform;if(0!==t.button||t.ctrlKey&&r)return;this.#n?.toggle(!1);const o=this._isDraggable;this._isDraggable=!1;const c=new AbortController,d=this._uiManager.combinedSignal(c);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#T.bind(this,e),{passive:!0,capture:!0,signal:d}),window.addEventListener("contextmenu",Wt,{signal:d});const f=this.x,p=this.y,y=this.width,_=this.height,A=this.parent.div.style.cursor,T=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const R=()=>{c.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=o,this.parent.div.style.cursor=A,this.div.style.cursor=T,this.#A(f,p,y,_)};window.addEventListener("pointerup",R,{signal:d}),window.addEventListener("blur",R,{signal:d})}#A(e,t,r,o){const c=this.x,d=this.y,f=this.width,p=this.height;c===e&&d===t&&f===r&&p===o||this.addCommands({cmd:()=>{this.width=f,this.height=p,this.x=c,this.y=d;const[y,_]=this.parentDimensions;this.setDims(y*f,_*p),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=o,this.x=e,this.y=t;const[y,_]=this.parentDimensions;this.setDims(y*r,_*o),this.fixAndSetPosition()},mustExec:!0})}#T(e,t){const[r,o]=this.parentDimensions,c=this.x,d=this.y,f=this.width,p=this.height,y=nt.MIN_SIZE/r,_=nt.MIN_SIZE/o,A=Me=>Math.round(1e4*Me)/1e4,T=this.#E(this.rotation),R=(Me,Be)=>[T[0]*Me+T[2]*Be,T[1]*Me+T[3]*Be],L=this.#E(360-this.rotation);let K,$,Z=!1,te=!1;switch(e){case"topLeft":Z=!0,K=(Me,Be)=>[0,0],$=(Me,Be)=>[Me,Be];break;case"topMiddle":K=(Me,Be)=>[Me/2,0],$=(Me,Be)=>[Me/2,Be];break;case"topRight":Z=!0,K=(Me,Be)=>[Me,0],$=(Me,Be)=>[0,Be];break;case"middleRight":te=!0,K=(Me,Be)=>[Me,Be/2],$=(Me,Be)=>[0,Be/2];break;case"bottomRight":Z=!0,K=(Me,Be)=>[Me,Be],$=(Me,Be)=>[0,0];break;case"bottomMiddle":K=(Me,Be)=>[Me/2,Be],$=(Me,Be)=>[Me/2,0];break;case"bottomLeft":Z=!0,K=(Me,Be)=>[0,Be],$=(Me,Be)=>[Me,0];break;case"middleLeft":te=!0,K=(Me,Be)=>[0,Be/2],$=(Me,Be)=>[Me,Be/2]}const se=K(f,p),ue=$(f,p);let pe=R(...ue);const Ce=A(c+pe[0]),Ae=A(d+pe[1]);let ie=1,ve=1,[$e,Vt]=this.screenToPageTranslation(t.movementX,t.movementY);if([$e,Vt]=[L[0]*(Me=$e/r)+L[2]*(Be=Vt/o),L[1]*Me+L[3]*Be],Z){const Me=Math.hypot(f,p);ie=ve=Math.max(Math.min(Math.hypot(ue[0]-se[0]-$e,ue[1]-se[1]-Vt)/Me,1/f,1/p),y/f,_/p)}else te?ie=Math.max(y,Math.min(1,Math.abs(ue[0]-se[0]-$e)))/f:ve=Math.max(_,Math.min(1,Math.abs(ue[1]-se[1]-Vt)))/p;var Me,Be;const Gt=A(f*ie),Zt=A(p*ve);pe=R(...$(Gt,Zt));const vn=Ce-pe[0],We=Ae-pe[1];this.width=Gt,this.height=Zt,this.x=vn,this.y=We,this.setDims(r*Gt,o*Zt),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){var e=this;return(0,G.A)(function*(){return e._editToolbar||e.#h||(e._editToolbar=new zn(e),e.div.append(e._editToolbar.render()),e.#n&&(yield e._editToolbar.addAltText(e.#n))),e._editToolbar})()}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){var e=this;return(0,G.A)(function*(){e.#n||(Zr.initialize(nt._l10n),e.#n=new Zr(e),e.#e&&(e.#n.data=e.#e,e.#e=null),yield e.addEditToolbar())})()}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){var t=this;return(0,G.A)(function*(){yield t.#n?.setGuessedText(e)})()}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#O();const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),Tn(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=qn.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#a=!0,this._isDraggable?this.#P(e):this.#S(e))}get isSelected(){return this._uiManager.isSelected(this)}#S(e){const{isMac:t}=qn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const r=new AbortController,o=this._uiManager.combinedSignal(r);t&&(this.div.classList.add("moving"),this.#g=e.clientX,this.#y=e.clientY,window.addEventListener("pointermove",f=>{const{clientX:p,clientY:y}=f,[_,A]=this.screenToPageTranslation(p-this.#g,y-this.#y);this.#g=p,this.#y=y,this._uiManager.dragSelectedEditors(_,A)},{passive:!0,capture:!0,signal:o}));const c=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#S(e)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const o=this.parentScale,[c,d]=this.pageDimensions,[f,p]=this.pageTranslation,y=e/o,_=t/o,A=this.x*c,T=this.y*d,R=this.width*c,L=this.height*d;switch(r){case 0:return[A+y+f,d-T-_-L+p,A+y+R+f,d-T-_+p];case 90:return[A+_+f,d-T+y+p,A+_+L+f,d-T+y+R+p];case 180:return[A-y-R+f,d-T+_+p,A-y+f,d-T+_+L+p];case 270:return[A-_-L+f,d-T-y-R+p,A-_+f,d-T-y+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,o,c,d]=e,f=c-r,p=d-o;switch(this.rotation){case 0:return[r,t-d,f,p];case 90:return[r,t-o,p,f];case 180:return[c,t-o,f,p];case 270:return[c,t-d,p,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#O(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#O()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){xt("An editor must be serializable")}static deserialize(e,t,r){var o=this;return(0,G.A)(function*(){const c=new o.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});c.rotation=e.rotation,c.#e=e.accessibilityData;const[d,f]=c.pageDimensions,[p,y,_,A]=c.getRectInCurrentCoords(e.rect,f);return c.x=p/d,c.y=y/f,c.width=_/d,c.height=A/f,c})()}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#F(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#s.classList.remove("hidden"),Tn(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#s.children;if(!this.#t){this.#t=Array.from(t);const d=this.#D.bind(this),f=this.#b.bind(this),p=this._uiManager._signal;for(const y of this.#t){const _=y.getAttribute("data-resizer-name");y.setAttribute("role","spinbutton"),y.addEventListener("keydown",d,{signal:p}),y.addEventListener("blur",f,{signal:p}),y.addEventListener("focus",this.#I.bind(this,_),{signal:p}),y.setAttribute("data-l10n-id",nt._l10nResizer[_])}}const r=this.#t[0];let o=0;for(const d of t){if(d===r)break;o++}const c=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(c!==o){if(c<o)for(let f=0;f<o-c;f++)this.#s.append(this.#s.firstChild);else if(c>o)for(let f=0;f<c-o;f++)this.#s.firstChild.before(this.#s.lastChild);let d=0;for(const f of t){const y=this.#t[d++].getAttribute("data-resizer-name");f.setAttribute("data-l10n-id",nt._l10nResizer[y])}}this.#R(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#D(e){nt._resizerKeyboardManager.exec(this,e)}#b(e){this.#p&&e.relatedTarget?.parentNode!==this.#s&&this.#F()}#I(e){this.#u=this.#p?e:""}#R(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#T(this.#u,{movementX:e,movementY:t})}#F(){if(this.#p=!1,this.#R(-1),this.#l){const{savedX:e,savedY:t,savedWidth:r,savedHeight:o}=this.#l;this.#A(e,t,r,o),this.#l=null}}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#r=!0;const r=e/t,{style:o}=this.div;o.aspectRatio=r,o.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:r}=e;let o=this.#m.get(r);return o&&clearTimeout(o),o=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),0===this.#m.size&&(this.#m=null)},nt._telemetryTimeout),void this.#m.set(r,o)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t?.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}class Ma extends nt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ns=3285377520,di=4294901760,rr=65535;class zc{constructor(e){this.h1=e?4294967295&e:Ns,this.h2=e?4294967295&e:Ns}update(e){let t,r;if("string"==typeof e){t=new Uint8Array(2*e.length),r=0;for(let j=0,K=e.length;j<K;j++){const $=e.charCodeAt(j);$<=255?t[r++]=$:(t[r++]=$>>>8,t[r++]=255&$)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),r=t.byteLength}const o=r>>2,c=r-4*o,d=new Uint32Array(t.buffer,0,o);let f=0,p=0,y=this.h1,_=this.h2;const A=3432918353,T=461845907,R=A&rr,L=T&rr;for(let j=0;j<o;j++)1&j?(f=d[j],f=f*A&di|f*R&rr,f=f<<15|f>>>17,f=f*T&di|f*L&rr,y^=f,y=y<<13|y>>>19,y=5*y+3864292196):(p=d[j],p=p*A&di|p*R&rr,p=p<<15|p>>>17,p=p*T&di|p*L&rr,_^=p,_=_<<13|_>>>19,_=5*_+3864292196);switch(f=0,c){case 3:f^=t[4*o+2]<<16;case 2:f^=t[4*o+1]<<8;case 1:f^=t[4*o],f=f*A&di|f*R&rr,f=f<<15|f>>>17,f=f*T&di|f*L&rr,1&o?y^=f:_^=f}this.h1=y,this.h2=_}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&di|36045*e&rr,t=4283543511*t&di|(2950163797*(t<<16|e>>>16)&di)>>>16,e^=t>>>1,e=444984403*e&di|60499*e&rr,t=3301882366*t&di|(3120437893*(t<<16|e>>>16)&di)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const yr=Object.freeze({map:null,hash:"",transfer:void 0});class ho{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return void 0===r?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#n.values())if(t instanceof nt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let o=!1;if(void 0!==r)for(const[c,d]of Object.entries(t))r[c]!==d&&(o=!0,r[c]=d);else o=!0,this.#n.set(e,t);o&&this.#i(),t instanceof nt&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?zo(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new ks(this)}get serializable(){if(0===this.#n.size)return yr;const e=new Map,t=new zc,r=[],o=Object.create(null);let c=!1;for(const[d,f]of this.#n){const p=f instanceof nt?f.serialize(!1,o):f;p&&(e.set(d,p),t.update(`${d}:${JSON.stringify(p)}`),c||=!!p.bitmap)}if(c)for(const d of e.values())d.bitmap&&r.push(d.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:yr}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof nt))continue;const o=r.telemetryFinalData;if(!o)continue;const{type:c}=o;t.has(c)||t.set(c,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const d=e[c]||=new Map;for(const[f,p]of Object.entries(o)){if("type"===f)continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const _=y.get(p)??0;y.set(p,_+1)}}for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof nt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class ks extends ho{#e;constructor(e){super();const{map:t,hash:r,transfer:o}=e.serializable,c=structuredClone(t,o?{transfer:o}:null);this.#e={map:c,hash:r,transfer:o}}get print(){xt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Yt(this,"modifiedIds",{ids:new Set,hash:""})}}class St{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(e){var t=this;return(0,G.A)(function*({systemFontInfo:r,_inspectFont:o}){if(r&&!t.#e.has(r.loadedName)){if(qt(!t.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),t.isFontLoadingAPISupported){const{loadedName:c,src:d,style:f}=r,p=new FontFace(c,d,f);t.addNativeFontFace(p);try{yield p.load(),t.#e.add(c),o?.(r)}catch{Xe(`Cannot load system font: ${r.baseFontName}, installing it could help to improve PDF rendering.`),t.removeNativeFontFace(p)}return}xt("Not implemented: loadSystemFont without the Font Loading API.")}}).apply(this,arguments)}bind(e){var t=this;return(0,G.A)(function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(yield t.loadSystemFont(e));if(t.isFontLoadingAPISupported){const o=e.createNativeFontFace();if(o){t.addNativeFontFace(o);try{yield o.loaded}catch(c){throw Xe(`Failed to load font '${o.family}': '${c}'.`),e.disableFontFace=!0,c}}return}const r=e.createFontFaceRule();if(r){if(t.insertRule(r),t.isSyncFontLoadingSupported)return;yield new Promise(o=>{const c=t._queueLoadingCallback(o);t._prepareFontLoadEvent(e,c)})}})()}get isFontLoadingAPISupported(){return Yt(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return(on||typeof navigator<"u"&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Yt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:r}=this,o={done:!1,complete:function t(){for(qt(!o.done,"completeRequest() cannot be called twice."),o.done=!0;r.length>0&&r[0].done;){const c=r.shift();setTimeout(c.callback,0)}},callback:e};return r.push(o),o}get _loadTestFont(){return Yt(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function r(se,ue){return se.charCodeAt(ue)<<24|se.charCodeAt(ue+1)<<16|se.charCodeAt(ue+2)<<8|255&se.charCodeAt(ue+3)}function o(se,ue,pe,Ce){return se.substring(0,ue)+Ce+se.substring(ue+pe)}let c,d;const f=this._document.createElement("canvas");f.width=1,f.height=1;const p=f.getContext("2d");let y=0;const A=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=o(T,976,A.length,A);const j=1482184792;let K=r(T,16);for(c=0,d=A.length-3;c<d;c+=4)K=K-j+r(A,c)|0;c<A.length&&(K=K-j+r(A+"XXX",c)|0),T=o(T,16,4,function _l(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,255&l)}(K));const $=`url(data:font/opentype;base64,${btoa(T)});`;this.insertRule(`@font-face {font-family:"${A}";src:${$}}`);const te=this._document.createElement("div");te.style.visibility="hidden",te.style.width=te.style.height="10px",te.style.position="absolute",te.style.top=te.style.left="0px";for(const se of[e.loadedName,A]){const ue=this._document.createElement("span");ue.textContent="Hi",ue.style.fontFamily=se,te.append(ue)}this._document.body.append(te),function _(se,ue){if(++y>30)return Xe("Load test font never loaded."),void ue();p.font="30px "+se,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0?ue():setTimeout(_.bind(null,se,ue))}(A,()=>{te.remove(),t.complete()})}}class vr{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=!0===t,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${function Hc(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa($o(l))}(this.data)});`;let t;if(this.cssFontInfo){let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}else t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(c){Xe(`getPathGenerator - ignoring character: "${c}".`)}if(!Array.isArray(r)||0===r.length)return this.compiledGlyphs[t]=function(c,d){};const o=[];for(let c=0,d=r.length;c<d;)switch(r[c++]){case 0:{const[f,p,y,_,A,T]=r.slice(c,c+6);o.push(R=>R.bezierCurveTo(f,p,y,_,A,T)),c+=6}break;case 1:{const[f,p]=r.slice(c,c+2);o.push(y=>y.moveTo(f,p)),c+=2}break;case 2:{const[f,p]=r.slice(c,c+2);o.push(y=>y.lineTo(f,p)),c+=2}break;case 3:{const[f,p,y,_]=r.slice(c,c+4);o.push(A=>A.quadraticCurveTo(f,p,y,_)),c+=4}break;case 4:o.push(f=>f.restore());break;case 5:o.push(f=>f.save());break;case 6:qt(2===o.length,"Scale command is only valid at the third position.");break;case 7:{const[f,p,y,_,A,T]=r.slice(c,c+6);o.push(R=>R.transform(f,p,y,_,A,T)),c+=6}break;case 8:{const[f,p]=r.slice(c,c+2);o.push(y=>y.translate(f,p)),c+=2}}return this.compiledGlyphs[t]=function(d,f){o[0](d),o[1](d),d.scale(f,-f);for(let p=2,y=o.length;p<y;p++)o[p](d)}}}class qo{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){xt("Abstract method `_createCanvas` called.")}}class Cl{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(e){var t=this;return(0,G.A)(function*({name:r}){if(!t.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!r)throw new Error("CMap name must be specified.");const o=t.baseUrl+r+(t.isCompressed?".bcmap":"");return t._fetch(o).then(c=>({cMapData:c,isCompressed:t.isCompressed})).catch(c=>{throw new Error(`Unable to load ${t.isCompressed?"binary ":""}CMap at: ${o}`)})}).apply(this,arguments)}_fetch(e){return(0,G.A)(function*(){xt("Abstract method `_fetch` called.")})()}}class Xo extends Cl{_fetch(e){var t=this;return(0,G.A)(function*(){const r=yield Yr(e,t.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):Rs(r)})()}}class Xn{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,o,c){return"none"}destroy(e=!1){}}class hi{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(e){var t=this;return(0,G.A)(function*({filename:r}){if(!t.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!r)throw new Error("Font filename must be specified.");const o=`${t.baseUrl}${r}`;return t._fetch(o).catch(c=>{throw new Error(`Unable to load font data at: ${o}`)})}).apply(this,arguments)}_fetch(e){return(0,G.A)(function*(){xt("Abstract method `_fetch` called.")})()}}class Di extends hi{_fetch(e){return(0,G.A)(function*(){const t=yield Yr(e,"arraybuffer");return new Uint8Array(t)})()}}if(on){var Ta=Promise.withResolvers(),Ls=null;(function(){var e=(0,G.A)(function*(){const t=yield import("fs"),r=yield import("http"),o=yield import("https"),c=yield import("url");return new Map(Object.entries({fs:t,http:r,https:o,url:c,canvas:void 0,path2d:void 0}))});return function(){return e.apply(this,arguments)}})()().then(e=>{Ls=e,Ta.resolve()},e=>{Xe(`loadPackages: ${e}`),Ls=new Map,Ta.resolve()})}class br{static get promise(){return Ta.promise}static get(e){return Ls?.get(e)}}function _r(l){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,G.A)(function*(l){const t=yield br.get("fs").promises.readFile(l);return new Uint8Array(t)})).apply(this,arguments)}function Qo(l,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],o=new Path2D;o.rect(e[0],e[1],t,r),l.clip(o)}class nd{getPattern(){xt("Abstract method `getPattern` called.")}}class Sg extends nd{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,o){let c;if("Stroke"===o||"Fill"===o){const d=t.current.getClippedPathBoundingBox(o,pt(e))||[0,0,0,0],f=Math.ceil(d[2]-d[0])||1,p=Math.ceil(d[3]-d[1])||1,y=t.cachedCanvases.getCanvas("pattern",f,p),_=y.context;_.clearRect(0,0,_.canvas.width,_.canvas.height),_.beginPath(),_.rect(0,0,_.canvas.width,_.canvas.height),_.translate(-d[0],-d[1]),r=at.transform(r,[1,0,0,1,d[0],d[1]]),_.transform(...t.baseTransform),this.matrix&&_.transform(...this.matrix),Qo(_,this._bbox),_.fillStyle=this._createGradient(_),_.fill(),c=e.createPattern(y.canvas,"no-repeat");const A=new DOMMatrix(r);c.setTransform(A)}else Qo(e,this._bbox),c=this._createGradient(e);return c}}function id(l,e,t,r,o,c,d,f){const p=e.coords,y=e.colors,_=l.data,A=4*l.width;let T;p[t+1]>p[r+1]&&(T=t,t=r,r=T,T=c,c=d,d=T),p[r+1]>p[o+1]&&(T=r,r=o,o=T,T=d,d=f,f=T),p[t+1]>p[r+1]&&(T=t,t=r,r=T,T=c,c=d,d=T);const R=(p[t]+e.offsetX)*e.scaleX,L=(p[t+1]+e.offsetY)*e.scaleY,j=(p[r]+e.offsetX)*e.scaleX,K=(p[r+1]+e.offsetY)*e.scaleY,$=(p[o]+e.offsetX)*e.scaleX,Z=(p[o+1]+e.offsetY)*e.scaleY;if(L>=Z)return;const te=y[c],se=y[c+1],ue=y[c+2],pe=y[d],Ce=y[d+1],Ae=y[d+2],ie=y[f],ve=y[f+1],$e=y[f+2],Vt=Math.round(L),Gt=Math.round(Z);let Zt,vn,We,Me,Be,Kt,Bn,ii;for(let pn=Vt;pn<=Gt;pn++){if(pn<K){const Bt=pn<L?0:(L-pn)/(L-K);Zt=R-(R-j)*Bt,vn=te-(te-pe)*Bt,We=se-(se-Ce)*Bt,Me=ue-(ue-Ae)*Bt}else{let Bt;Bt=pn>Z?1:K===Z?0:(K-pn)/(K-Z),Zt=j-(j-$)*Bt,vn=pe-(pe-ie)*Bt,We=Ce-(Ce-ve)*Bt,Me=Ae-(Ae-$e)*Bt}let kn;kn=pn<L?0:pn>Z?1:(L-pn)/(L-Z),Be=R-(R-$)*kn,Kt=te-(te-ie)*kn,Bn=se-(se-ve)*kn,ii=ue-(ue-$e)*kn;const bn=Math.round(Math.min(Zt,Be)),Xs=Math.round(Math.max(Zt,Be));let lr=A*pn+4*bn;for(let Bt=bn;Bt<=Xs;Bt++)kn=(Zt-Bt)/(Zt-Be),kn<0?kn=0:kn>1&&(kn=1),_[lr++]=vn-(vn-Kt)*kn|0,_[lr++]=We-(We-Bn)*kn|0,_[lr++]=Me-(Me-ii)*kn|0,_[lr++]=255}}function Mg(l,e,t){const r=e.coords,o=e.colors;let c,d;switch(e.type){case"lattice":const f=e.verticesPerRow,p=Math.floor(r.length/f)-1,y=f-1;for(c=0;c<p;c++){let _=c*f;for(let A=0;A<y;A++,_++)id(l,t,r[_],r[_+1],r[_+f],o[_],o[_+1],o[_+f]),id(l,t,r[_+f+1],r[_+1],r[_+f],o[_+f+1],o[_+1],o[_+f])}break;case"triangles":for(c=0,d=r.length;c<d;c+=3)id(l,t,r[c],r[c+1],r[c+2],o[c],o[c+1],o[c+2]);break;default:throw new Error("illegal figure")}}class Tg extends nd{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const f=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),y=Math.ceil(this._bounds[2])-f,_=Math.ceil(this._bounds[3])-p,A=Math.min(Math.ceil(Math.abs(y*e[0]*1.1)),3e3),T=Math.min(Math.ceil(Math.abs(_*e[1]*1.1)),3e3),R=y/A,L=_/T,j={coords:this._coords,colors:this._colors,offsetX:-f,offsetY:-p,scaleX:1/R,scaleY:1/L},Z=r.getCanvas("mesh",A+4,T+4),te=Z.context,se=te.createImageData(A,T);if(t){const pe=se.data;for(let Ce=0,Ae=pe.length;Ce<Ae;Ce+=4)pe[Ce]=t[0],pe[Ce+1]=t[1],pe[Ce+2]=t[2],pe[Ce+3]=255}for(const pe of this._figures)Mg(se,pe,j);return te.putImageData(se,2,2),{canvas:Z.canvas,offsetX:f-2*R,offsetY:p-2*L,scaleX:R,scaleY:L}}getPattern(e,t,r,o){let c;if(Qo(e,this._bbox),"Shading"===o)c=at.singularValueDecompose2dScale(pt(e));else if(c=at.singularValueDecompose2dScale(t.baseTransform),this.matrix){const f=at.singularValueDecompose2dScale(this.matrix);c=[c[0]*f[0],c[1]*f[1]]}const d=this._createMeshCanvas(c,"Shading"===o?null:this._background,t.cachedCanvases);return"Shading"!==o&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(d.offsetX,d.offsetY),e.scale(d.scaleX,d.scaleY),e.createPattern(d.canvas,"no-repeat")}}class Ig extends nd{getPattern(){return"hotpink"}}let Pg=(()=>{class l{static MAX_PATTERN_SIZE=3e3;constructor(t,r,o,c,d){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=r,this.ctx=o,this.canvasGraphicsFactory=c,this.baseTransform=d}createPatternCanvas(t){const{bbox:r,operatorList:o,paintType:c,tilingType:d,color:f,canvasGraphicsFactory:p}=this;let{xstep:y,ystep:_}=this;y=Math.abs(y),_=Math.abs(_),Ps("TilingType: "+d);const A=r[0],T=r[1],R=r[2],L=r[3],j=R-A,K=L-T,$=at.singularValueDecompose2dScale(this.matrix),Z=at.singularValueDecompose2dScale(this.baseTransform),te=$[0]*Z[0],se=$[1]*Z[1];let ue=j,pe=K,Ce=!1,Ae=!1;const ie=Math.ceil(y*te),ve=Math.ceil(_*se);ie>=Math.ceil(j*te)?ue=y:Ce=!0,ve>=Math.ceil(K*se)?pe=_:Ae=!0;const Gt=this.getSizeAndScale(ue,this.ctx.canvas.width,te),Zt=this.getSizeAndScale(pe,this.ctx.canvas.height,se),vn=t.cachedCanvases.getCanvas("pattern",Gt.size,Zt.size),We=vn.context,Me=p.createCanvasGraphics(We);if(Me.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Me,c,f),We.translate(-Gt.scale*A,-Zt.scale*T),Me.transform(Gt.scale,0,0,Zt.scale,0,0),We.save(),this.clipBbox(Me,A,T,R,L),Me.baseTransform=pt(Me.ctx),Me.executeOperatorList(o),Me.endDrawing(),We.restore(),Ce||Ae){const Be=vn.canvas;Ce&&(ue=y),Ae&&(pe=_);const Kt=this.getSizeAndScale(ue,this.ctx.canvas.width,te),Bn=this.getSizeAndScale(pe,this.ctx.canvas.height,se),ii=Kt.size,pn=Bn.size,kn=t.cachedCanvases.getCanvas("pattern-workaround",ii,pn),bn=kn.context,Xs=Ce?Math.floor(j/y):0,lr=Ae?Math.floor(K/_):0;for(let Bt=0;Bt<=Xs;Bt++)for(let Gn=0;Gn<=lr;Gn++)bn.drawImage(Be,ii*Bt,pn*Gn,ii,pn,0,0,ii,pn);return{canvas:kn.canvas,scaleX:Kt.scale,scaleY:Bn.scale,offsetX:A,offsetY:T}}return{canvas:vn.canvas,scaleX:Gt.scale,scaleY:Zt.scale,offsetX:A,offsetY:T}}getSizeAndScale(t,r,o){const c=Math.max(l.MAX_PATTERN_SIZE,r);let d=Math.ceil(t*o);return d>=c?d=c:o=d/t,{scale:o,size:d}}clipBbox(t,r,o,c,d){t.ctx.rect(r,o,c-r,d-o),t.current.updateRectMinMax(pt(t.ctx),[r,o,c,d]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,r,o){const c=t.ctx,d=t.current;switch(r){case 1:const f=this.ctx;c.fillStyle=f.fillStyle,c.strokeStyle=f.strokeStyle,d.fillColor=f.fillStyle,d.strokeColor=f.strokeStyle;break;case 2:const p=at.makeHexColor(o[0],o[1],o[2]);c.fillStyle=p,c.strokeStyle=p,d.fillColor=p,d.strokeColor=p;break;default:throw new Ho(`Unsupported paint type: ${r}`)}}getPattern(t,r,o,c){let d=o;"Shading"!==c&&(d=at.transform(d,r.baseTransform),this.matrix&&(d=at.transform(d,this.matrix)));const f=this.createPatternCanvas(r);let p=new DOMMatrix(d);p=p.translate(f.offsetX,f.offsetY),p=p.scale(1/f.scaleX,1/f.scaleY);const y=t.createPattern(f.canvas,"repeat");return y.setTransform(p),y}}return l})();function Rg({src:l,srcPos:e=0,dest:t,width:r,height:o,nonBlackColor:c=4294967295,inverseDecode:d=!1}){const f=qn.isLittleEndian?4278190080:255,[p,y]=d?[c,f]:[f,c],_=r>>3,A=7&r,T=l.length;t=new Uint32Array(t.buffer);let R=0;for(let L=0;L<o;L++){for(const K=e+_;e<K;e++){const $=e<T?l[e]:255;t[R++]=128&$?y:p,t[R++]=64&$?y:p,t[R++]=32&$?y:p,t[R++]=16&$?y:p,t[R++]=8&$?y:p,t[R++]=4&$?y:p,t[R++]=2&$?y:p,t[R++]=1&$?y:p}if(0===A)continue;const j=e<T?l[e++]:255;for(let K=0;K<A;K++)t[R++]=j&1<<7-K?y:p}return{srcPos:e,destPos:R}}const D=16;class F{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let o;return void 0!==this.cache[e]?(o=this.cache[e],this.canvasFactory.reset(o,t,r)):(o=this.canvasFactory.create(t,r),this.cache[e]=o),o}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function z(l,e,t,r,o,c,d,f,p,y){const[_,A,T,R,L,j]=pt(l);if(0===A&&0===T){const te=Math.round(d*_+L),ue=Math.round(f*R+j),Ce=Math.abs(Math.round((d+p)*_+L)-te)||1,ie=Math.abs(Math.round((f+y)*R+j)-ue)||1;return l.setTransform(Math.sign(_),0,0,Math.sign(R),te,ue),l.drawImage(e,t,r,o,c,0,0,Ce,ie),l.setTransform(_,A,T,R,L,j),[Ce,ie]}if(0===_&&0===R){const te=Math.round(f*T+L),ue=Math.round(d*A+j),Ce=Math.abs(Math.round((f+y)*T+L)-te)||1,ie=Math.abs(Math.round((d+p)*A+j)-ue)||1;return l.setTransform(0,Math.sign(A),Math.sign(T),0,te,ue),l.drawImage(e,t,r,o,c,0,0,ie,Ce),l.setTransform(_,A,T,R,L,j),[ie,Ce]}return l.drawImage(e,t,r,o,c,d,f,p,y),[Math.hypot(_,A)*p,Math.hypot(T,R)*y]}class ne{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=yl,this.textMatrixScale=1,this.fontMatrix=xr,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=at.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=at.applyTransform(t,e),o=at.applyTransform(t.slice(2),e),c=at.applyTransform([t[0],t[3]],e),d=at.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],o[0],c[0],d[0]),this.minY=Math.min(this.minY,r[1],o[1],c[1],d[1]),this.maxX=Math.max(this.maxX,r[0],o[0],c[0],d[0]),this.maxY=Math.max(this.maxY,r[1],o[1],c[1],d[1])}updateScalingPathMinMax(e,t){at.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,o,c,d,f,p,y,_){const A=at.bezierBoundingBox(t,r,o,c,d,f,p,y,_);_||this.updateRectMinMax(e,A)}getPathBoundingBox(e="Fill",t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if("Stroke"===e){t||xt("Stroke bounding box must include transform.");const o=at.singularValueDecompose2dScale(t),c=o[0]*this.lineWidth/2,d=o[1]*this.lineWidth/2;r[0]-=c,r[1]-=d,r[2]+=c,r[3]+=d}return r}updateClipFromPath(){const e=at.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e="Fill",t=null){return at.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Le(l,e){if(typeof ImageData<"u"&&e instanceof ImageData)return void l.putImageData(e,0,0);const t=e.height,r=e.width,o=t%D,c=(t-o)/D,d=0===o?c:c+1,f=l.createImageData(r,D);let y,p=0;const _=e.data,A=f.data;let T,R,L,j;if(e.kind===Xr.GRAYSCALE_1BPP){const K=_.byteLength,$=new Uint32Array(A.buffer,0,A.byteLength>>2),Z=$.length,te=r+7>>3,se=4294967295,ue=qn.isLittleEndian?4278190080:255;for(T=0;T<d;T++){for(L=T<c?D:o,y=0,R=0;R<L;R++){const pe=K-p;let Ce=0;const Ae=pe>te?r:8*pe-7,ie=-8&Ae;let ve=0,$e=0;for(;Ce<ie;Ce+=8)$e=_[p++],$[y++]=128&$e?se:ue,$[y++]=64&$e?se:ue,$[y++]=32&$e?se:ue,$[y++]=16&$e?se:ue,$[y++]=8&$e?se:ue,$[y++]=4&$e?se:ue,$[y++]=2&$e?se:ue,$[y++]=1&$e?se:ue;for(;Ce<Ae;Ce++)0===ve&&($e=_[p++],ve=128),$[y++]=$e&ve?se:ue,ve>>=1}for(;y<Z;)$[y++]=0;l.putImageData(f,0,T*D)}}else if(e.kind===Xr.RGBA_32BPP){for(R=0,j=r*D*4,T=0;T<c;T++)A.set(_.subarray(p,p+j)),p+=j,l.putImageData(f,0,R),R+=D;T<d&&(j=r*o*4,A.set(_.subarray(p,p+j)),l.putImageData(f,0,R))}else{if(e.kind!==Xr.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(L=D,j=r*L,T=0;T<d;T++){for(T>=c&&(L=o,j=r*L),y=0,R=j;R--;)A[y++]=_[p++],A[y++]=_[p++],A[y++]=_[p++],A[y++]=255;l.putImageData(f,0,T*D)}}}function Et(l,e){if(e.bitmap)return void l.drawImage(e.bitmap,0,0);const t=e.height,r=e.width,o=t%D,c=(t-o)/D,d=0===o?c:c+1,f=l.createImageData(r,D);let p=0;const y=e.data,_=f.data;for(let A=0;A<d;A++){const T=A<c?D:o;({srcPos:p}=Rg({src:y,srcPos:p,dest:_,width:r,height:T,nonBlackColor:0})),l.putImageData(f,0,A*D)}}function Mt(l,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)void 0!==l[r]&&(e[r]=l[r]);void 0!==l.setLineDash&&(e.setLineDash(l.getLineDash()),e.lineDashOffset=l.lineDashOffset)}function jn(l){if(l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",void 0!==l.setLineDash&&(l.setLineDash([]),l.lineDashOffset=0),!on){const{filter:e}=l;"none"!==e&&""!==e&&(l.filter="none")}}function Yo(l,e){if(e)return!0;const t=at.singularValueDecompose2dScale(l);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Os.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const qi=["butt","round","square"],Zo=["miter","round","bevel"],Ml={},ys={};class Tl{constructor(e,t,r,o,c,{optionalContentConfig:d,markedContentStack:f=null},p,y){this.ctx=e,this.current=new ne(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=o,this.filterFactory=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=f||[],this.optionalContentConfig=d,this.cachedCanvases=new F(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=y,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:o=null}){const c=this.ctx.canvas.width,d=this.ctx.canvas.height,f=this.ctx.fillStyle;if(this.ctx.fillStyle=o||"#ffffff",this.ctx.fillRect(0,0,c,d),this.ctx.fillStyle=f,r){const p=this.cachedCanvases.getCanvas("transparent",c,d);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...pt(this.compositeCtx))}this.ctx.save(),jn(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=pt(this.ctx)}executeOperatorList(e,t,r,o){const c=e.argsArray,d=e.fnArray;let f=t||0;const p=c.length;if(p===f)return f;const y=p-f>10&&"function"==typeof r,_=y?Date.now()+15:0;let A=0;const T=this.commonObjs,R=this.objs;let L;for(;;){if(void 0!==o&&f===o.nextBreakPoint)return o.breakIt(f,r),f;if(L=d[f],L!==Ai.dependency)this[L].apply(this,c[f]);else for(const j of c[f]){const K=j.startsWith("g_")?T:R;if(!K.has(j))return K.get(j,r),f}if(f++,f===p)return f;if(y&&++A>10){if(Date.now()>_)return r(),f;A=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,o=e.height??e.displayHeight;let _,A,c=Math.max(Math.hypot(t[0],t[1]),1),d=Math.max(Math.hypot(t[2],t[3]),1),f=r,p=o,y="prescale1";for(;c>2&&f>1||d>2&&p>1;){let T=f,R=p;c>2&&f>1&&(T=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f/2),c/=f/T),d>2&&p>1&&(R=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,d/=p/R),_=this.cachedCanvases.getCanvas(y,T,R),A=_.context,A.clearRect(0,0,T,R),A.drawImage(e,0,0,f,p,0,0,T,R),e=_.canvas,f=T,p=R,y="prescale1"===y?"prescale2":"prescale1"}return{img:e,paintWidth:f,paintHeight:p}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:o}=e,c=this.current.fillColor,d=this.current.patternFill,f=pt(t);let p,y,_,A;if((e.bitmap||e.data)&&e.count>1){const Ae=e.bitmap||e.data.buffer;y=JSON.stringify(d?f:[f.slice(0,4),c]),p=this._cachedBitmapsMap.get(Ae),p||(p=new Map,this._cachedBitmapsMap.set(Ae,p));const ie=p.get(y);if(ie&&!d)return{canvas:ie,offsetX:Math.round(Math.min(f[0],f[2])+f[4]),offsetY:Math.round(Math.min(f[1],f[3])+f[5])};_=ie}_||(A=this.cachedCanvases.getCanvas("maskCanvas",r,o),Et(A.context,e));let T=at.transform(f,[1/r,0,0,-1/o,0,0]);T=at.transform(T,[1,0,0,1,0,-o]);const[R,L,j,K]=at.getAxialAlignedBoundingBox([0,0,r,o],T),$=Math.round(j-R)||1,Z=Math.round(K-L)||1,te=this.cachedCanvases.getCanvas("fillCanvas",$,Z),se=te.context,ue=R,pe=L;se.translate(-ue,-pe),se.transform(...T),_||(_=this._scaleImage(A.canvas,Re(se)),_=_.img,p&&d&&p.set(y,_)),se.imageSmoothingEnabled=Yo(pt(se),e.interpolate),z(se,_,0,0,_.width,_.height,0,0,r,o),se.globalCompositeOperation="source-in";const Ce=at.transform(Re(se),[1,0,0,1,-ue,-pe]);return se.fillStyle=d?c.getPattern(t,this,Ce,"Fill"):c,se.fillRect(0,0,r,o),p&&!d&&(this.cachedCanvases.delete("fillCanvas"),p.set(y,te.canvas)),{canvas:te.canvas,offsetX:Math.round(ue),offsetY:Math.round(pe)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=qi[e]}setLineJoin(e){this.ctx.lineJoin=Zo[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const o=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=o.context;const c=this.ctx;c.setTransform(...pt(this.suspendedCtx)),Mt(this.suspendedCtx,c),function x(l,e){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){e.save(),this.__originalSave()},l.restore=function(){e.restore(),this.__originalRestore()},l.translate=function(r,o){e.translate(r,o),this.__originalTranslate(r,o)},l.scale=function(r,o){e.scale(r,o),this.__originalScale(r,o)},l.transform=function(r,o,c,d,f,p){e.transform(r,o,c,d,f,p),this.__originalTransform(r,o,c,d,f,p)},l.setTransform=function(r,o,c,d,f,p){e.setTransform(r,o,c,d,f,p),this.__originalSetTransform(r,o,c,d,f,p)},l.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},l.rotate=function(r){e.rotate(r),this.__originalRotate(r)},l.clip=function(r){e.clip(r),this.__originalClip(r)},l.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},l.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},l.bezierCurveTo=function(t,r,o,c,d,f){e.bezierCurveTo(t,r,o,c,d,f),this.__originalBezierCurveTo(t,r,o,c,d,f)},l.rect=function(t,r,o,c){e.rect(t,r,o,c),this.__originalRect(t,r,o,c)},l.closePath=function(){e.closePath(),this.__originalClosePath()},l.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Mt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,t,r,o){const c=o[0],d=o[1],f=o[2]-c,p=o[3]-d;0===f||0===p||(this.genericComposeSMask(t.context,r,f,p,t.subtype,t.backdrop,t.transferMap,c,d,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,o,c,d,f,p,y,_,A){let T=e.canvas,R=p-_,L=y-A;if(d){const K=at.makeHexColor(...d);if(R<0||L<0||R+r>T.width||L+o>T.height){const $=this.cachedCanvases.getCanvas("maskExtension",r,o),Z=$.context;Z.drawImage(T,-R,-L),Z.globalCompositeOperation="destination-atop",Z.fillStyle=K,Z.fillRect(0,0,r,o),Z.globalCompositeOperation="source-over",T=$.canvas,R=L=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const $=new Path2D;$.rect(R,L,r,o),e.clip($),e.globalCompositeOperation="destination-atop",e.fillStyle=K,e.fillRect(R,L,r,o),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===c&&f?t.filter=this.filterFactory.addAlphaFilter(f):"Luminosity"===c&&(t.filter=this.filterFactory.addLuminosityFilter(f));const j=new Path2D;j.rect(p,y,r,o),t.clip(j),t.globalCompositeOperation="destination-in",t.drawImage(T,R,L,r,o,p,y,r,o),t.restore()}save(){this.inSMaskMode?(Mt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Mt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,o,c,d){this.ctx.transform(e,t,r,o,c,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const o=this.ctx,c=this.current;let p,y,d=c.x,f=c.y;const _=pt(o),A=0===_[0]&&0===_[3]||0===_[1]&&0===_[2],T=A?r.slice(0):null;for(let R=0,L=0,j=e.length;R<j;R++)switch(0|e[R]){case Ai.rectangle:d=t[L++],f=t[L++];const K=t[L++],$=t[L++],Z=d+K,te=f+$;o.moveTo(d,f),0===K||0===$?o.lineTo(Z,te):(o.lineTo(Z,f),o.lineTo(Z,te),o.lineTo(d,te)),A||c.updateRectMinMax(_,[d,f,Z,te]),o.closePath();break;case Ai.moveTo:d=t[L++],f=t[L++],o.moveTo(d,f),A||c.updatePathMinMax(_,d,f);break;case Ai.lineTo:d=t[L++],f=t[L++],o.lineTo(d,f),A||c.updatePathMinMax(_,d,f);break;case Ai.curveTo:p=d,y=f,d=t[L+4],f=t[L+5],o.bezierCurveTo(t[L],t[L+1],t[L+2],t[L+3],d,f),c.updateCurvePathMinMax(_,p,y,t[L],t[L+1],t[L+2],t[L+3],d,f,T),L+=6;break;case Ai.curveTo2:p=d,y=f,o.bezierCurveTo(d,f,t[L],t[L+1],t[L+2],t[L+3]),c.updateCurvePathMinMax(_,p,y,d,f,t[L],t[L+1],t[L+2],t[L+3],T),d=t[L+2],f=t[L+3],L+=4;break;case Ai.curveTo3:p=d,y=f,d=t[L+2],f=t[L+3],o.bezierCurveTo(t[L],t[L+1],d,f,d,f),c.updateCurvePathMinMax(_,p,y,t[L],t[L+1],d,f,d,f,T),L+=4;break;case Ai.closePath:o.closePath()}A&&c.updateScalingPathMinMax(_,T),c.setCurrentPoint(d,f)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof r&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,Re(t),"Stroke"),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor;let c=!1;this.current.patternFill&&(t.save(),t.fillStyle=r.getPattern(t,this,Re(t),"Fill"),c=!0);const d=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==d&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),c&&t.restore(),e&&this.consumePath(d)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ml}eoClip(){this.pendingClip=ys}beginText(){this.current.textMatrix=yl,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),o=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=r.fontMatrix||xr,(0===o.fontMatrix[0]||0===o.fontMatrix[3])&&Xe("Invalid font matrix for font "+e),t<0?(t=-t,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const c=r.loadedName||"sans-serif",d=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let f="normal";r.black?f="900":r.bold&&(f="bold");const p=r.italic?"italic":"normal";let y=t;t<16?y=16:t>100&&(y=100),this.current.fontSizeScale=t/y,this.ctx.font=`${p} ${f} ${y}px ${d}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,o,c,d){this.current.textMatrix=[e,t,r,o,c,d],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,o){const c=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,_=3&p,A=!!(4&p),T=d.patternFill&&!f.missingFile;let R;(f.disableFontFace||A||T)&&(R=f.getPathGenerator(this.commonObjs,e)),f.disableFontFace||T?(c.save(),c.translate(t,r),c.beginPath(),R(c,y),o&&c.setTransform(...o),(0===_||2===_)&&c.fill(),(1===_||2===_)&&c.stroke(),c.restore()):((0===_||2===_)&&c.fillText(e,t,r),(1===_||2===_)&&c.strokeText(e,t,r)),A&&(this.pendingTextPaths||=[]).push({transform:pt(c),x:t,y:r,fontSize:y,addToPath:R})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let o=3;o<t.length;o+=4)if(t[o]>0&&t[o]<255){r=!0;break}return Yt(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const o=t.fontSize;if(0===o)return;const c=this.ctx,d=t.fontSizeScale,f=t.charSpacing,p=t.wordSpacing,y=t.fontDirection,_=t.textHScale*y,A=e.length,T=r.vertical,R=T?1:-1,L=r.defaultVMetrics,j=o*t.fontMatrix[0],K=0===t.textRenderingMode&&!r.disableFontFace&&!t.patternFill;let $;if(c.save(),c.transform(...t.textMatrix),c.translate(t.x,t.y+t.textRise),c.scale(_,y>0?-1:1),t.patternFill){c.save();const pe=t.fillColor.getPattern(c,this,Re(c),"Fill");$=pt(c),c.restore(),c.fillStyle=pe}let Z=t.lineWidth;const te=t.textMatrixScale;if(0===te||0===Z){const pe=3&t.textRenderingMode;(1===pe||2===pe)&&(Z=this.getSinglePixelWidth())}else Z/=te;if(1!==d&&(c.scale(d,d),Z/=d),c.lineWidth=Z,r.isInvalidPDFjsFont){const pe=[];let Ce=0;for(const Ae of e)pe.push(Ae.unicode),Ce+=Ae.width;return c.fillText(pe.join(""),0,0),t.x+=Ce*j*_,c.restore(),void this.compose()}let ue,se=0;for(ue=0;ue<A;++ue){const pe=e[ue];if("number"==typeof pe){se+=R*pe*o/1e3;continue}let Ce=!1;const Ae=(pe.isSpace?p:0)+f,ie=pe.fontChar,ve=pe.accent;let $e,Vt,Gt=pe.width;if(T){const vn=pe.vmetric||L,We=-(pe.vmetric?vn[1]:.5*Gt)*j;Gt=vn?-vn[0]:Gt,$e=We/d,Vt=(se+vn[2]*j)/d}else $e=se/d,Vt=0;if(r.remeasure&&Gt>0){const vn=1e3*c.measureText(ie).width/o*d;if(Gt<vn&&this.isFontSubpixelAAEnabled){const We=Gt/vn;Ce=!0,c.save(),c.scale(We,1),$e/=We}else Gt!==vn&&($e+=(Gt-vn)/2e3*o/d)}this.contentVisible&&(pe.isInFont||r.missingFile)&&(K&&!ve?c.fillText(ie,$e,Vt):(this.paintChar(ie,$e,Vt,$),ve&&this.paintChar(ve.fontChar,$e+o*ve.offset.x/d,Vt-o*ve.offset.y/d,$))),se+=T?Gt*j-Ae*y:Gt*j+Ae*y,Ce&&c.restore()}T?t.y-=se:t.x+=se*_,c.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,o=r.font,c=r.fontSize,d=r.fontDirection,f=o.vertical?1:-1,p=r.charSpacing,y=r.wordSpacing,_=r.textHScale*d,A=r.fontMatrix||xr,T=e.length;let L,j,K,$;if(3!==r.textRenderingMode&&0!==c){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(_,d),L=0;L<T;++L){if(j=e[L],"number"==typeof j){$=f*j*c/1e3,this.ctx.translate($,0),r.x+=$*_;continue}const Z=(j.isSpace?y:0)+p,te=o.charProcOperatorList[j.operatorListId];te?(this.contentVisible&&(this.processingType3=j,this.save(),t.scale(c,c),t.transform(...A),this.executeOperatorList(te),this.restore()),K=at.applyTransform([j.width,0],A)[0]*c+Z,t.translate(K,0),r.x+=K*_):Xe(`Type3 character "${j.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,o,c,d){this.ctx.rect(r,o,c-r,d-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const r=e[1],o=this.baseTransform||pt(this.ctx);t=new Pg(e,r,this.ctx,{createCanvasGraphics:d=>new Tl(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},o)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=at.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=at.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=function xg(l){switch(l[0]){case"RadialAxial":return new Sg(l);case"Mesh":return new Tg(l);case"Dummy":return new Ig}throw new Error(`Unknown IR type: ${l[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Re(t),"Shading");const o=Re(t);if(o){const{width:c,height:d}=t.canvas,[f,p,y,_]=at.getAxialAlignedBoundingBox([0,0,c,d],o);this.ctx.fillRect(f,p,y-f,_-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){xt("Should not call beginInlineImage")}beginImageData(){xt("Should not call beginImageData")}paintFormXObjectBegin(e,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=pt(this.ctx),t)&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.current.updateRectMinMax(pt(this.ctx),t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ps("TODO: Support non-isolated groups."),e.knockout&&Xe("Knockout groups not supported.");const r=pt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=at.getAxialAlignedBoundingBox(e.bbox,pt(t));o=at.intersect(o,[0,0,t.canvas.width,t.canvas.height])||[0,0,0,0];const d=Math.floor(o[0]),f=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-d,1),y=Math.max(Math.ceil(o[3])-f,1);this.current.startNewPathAndClipBox([0,0,p,y]);let _="groupAt"+this.groupLevel;e.smask&&(_+="_smask_"+this.smaskCounter++%2);const A=this.cachedCanvases.getCanvas(_,p,y),T=A.context;T.translate(-d,-f),T.transform(...r),e.smask?this.smaskStack.push({canvas:A.canvas,context:T,offsetX:d,offsetY:f,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(d,f),t.save()),Mt(t,T),this.ctx=T,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=pt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...o);const c=at.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],o);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,t,r,o,c){if(this.#e(),jn(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const d=t[2]-t[0],f=t[3]-t[1];if(c&&this.annotationCanvasMap){(r=r.slice())[4]-=t[0],r[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=d,t[3]=f;const[p,y]=at.singularValueDecompose2dScale(pt(this.ctx)),{viewportScale:_}=this,A=Math.ceil(d*this.outputScaleX*_),T=Math.ceil(f*this.outputScaleY*_);this.annotationCanvas=this.canvasFactory.create(A,T);const{canvas:R,context:L}=this.annotationCanvas;this.annotationCanvasMap.set(e,R),this.annotationCanvas.savedCtx=this.ctx,this.ctx=L,this.ctx.save(),this.ctx.setTransform(p,0,0,-y,0,f*y),jn(this.ctx)}else jn(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],d,f),this.ctx.clip(),this.ctx.beginPath()}this.current=new ne(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...o)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const r=this.ctx,o=this.processingType3;if(o&&(void 0===o.compiled&&(o.compiled=function ae(l){const{width:e,height:t}=l;if(e>1e3||t>1e3)return null;const o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=e+1;let f,p,y,d=new Uint8Array(c*(t+1));const _=e+7&-8;let A=new Uint8Array(_*t),T=0;for(const $ of l.data){let Z=128;for(;Z>0;)A[T++]=$&Z?0:255,Z>>=1}let R=0;for(T=0,0!==A[T]&&(d[0]=1,++R),p=1;p<e;p++)A[T]!==A[T+1]&&(d[p]=A[T]?2:1,++R),T++;for(0!==A[T]&&(d[p]=2,++R),f=1;f<t;f++){T=f*_,y=f*c,A[T-_]!==A[T]&&(d[y]=A[T]?1:8,++R);let $=(A[T]?4:0)+(A[T-_]?8:0);for(p=1;p<e;p++)$=($>>2)+(A[T+1]?4:0)+(A[T-_+1]?8:0),o[$]&&(d[y+p]=o[$],++R),T++;if(A[T-_]!==A[T]&&(d[y+p]=A[T]?2:4,++R),R>1e3)return null}for(T=_*(t-1),y=f*c,0!==A[T]&&(d[y]=8,++R),p=1;p<e;p++)A[T]!==A[T+1]&&(d[y+p]=A[T]?4:8,++R),T++;if(0!==A[T]&&(d[y+p]=4,++R),R>1e3)return null;const L=new Int32Array([0,c,-1,0,-c,0,0,0,1]),j=new Path2D;for(f=0;R&&f<=t;f++){let $=f*c;const Z=$+e;for(;$<Z&&!d[$];)$++;if($===Z)continue;j.moveTo($%c,f);const te=$;let se=d[$];do{const ue=L[se];do{$+=ue}while(!d[$]);const pe=d[$];5!==pe&&10!==pe?(se=pe,d[$]=0):(se=pe&51*se>>4,d[$]&=se>>2|se<<2),j.lineTo($%c,$/c|0),d[$]||--R}while(te!==$);--f}return A=null,d=null,function($){$.save(),$.scale(1/e,-1/t),$.translate(0,-t),$.fill(j),$.beginPath(),$.restore()}}(e)),o.compiled))return void o.compiled(r);const c=this._createMaskCanvas(e),d=c.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(d,c.offsetX,c.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,o=0,c,d){if(!this.contentVisible)return;e=this.getObject(e.data,e);const f=this.ctx;f.save();const p=pt(f);f.transform(t,r,o,c,0,0);const y=this._createMaskCanvas(e);f.setTransform(1,0,0,1,y.offsetX-p[4],y.offsetY-p[5]);for(let _=0,A=d.length;_<A;_+=2){const T=at.transform(p,[t,r,o,c,d[_],d[_+1]]),[R,L]=at.applyTransform([0,0],T);f.drawImage(y.canvas,R,L)}f.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,o=this.current.patternFill;for(const c of e){const{data:d,width:f,height:p,transform:y}=c,_=this.cachedCanvases.getCanvas("maskCanvas",f,p),A=_.context;A.save(),Et(A,this.getObject(d,c)),A.globalCompositeOperation="source-in",A.fillStyle=o?r.getPattern(A,this,Re(t),"Fill"):r,A.fillRect(0,0,f,p),A.restore(),t.save(),t.transform(...y),t.scale(1,-1),z(t,_.canvas,0,0,f,p,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):Xe("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,r,o){if(!this.contentVisible)return;const c=this.getObject(e);if(!c)return void Xe("Dependent image isn't ready yet");const d=c.width,f=c.height,p=[];for(let y=0,_=o.length;y<_;y+=2)p.push({transform:[t,0,0,r,o[y],o[y+1]],x:0,y:0,w:d,h:f});this.paintInlineImageXObjectGroup(c,p)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:r,height:o}=e,c=this.cachedCanvases.getCanvas("inlineImage",r,o),d=c.context;return d.filter=this.current.transferMaps,d.drawImage(t,0,0),d.filter="none",c.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,o=this.ctx;if(this.save(),!on){const{filter:f}=o;"none"!==f&&""!==f&&(o.filter="none")}let c;if(o.scale(1/t,-1/r),e.bitmap)c=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)c=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",t,r).context;Le(p,e),c=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(c,Re(o));o.imageSmoothingEnabled=Yo(pt(o),e.interpolate),z(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const p=this.cachedCanvases.getCanvas("inlineImage",e.width,e.height).context;Le(p,e),o=this.applyTransferMapsToCanvas(p)}for(const c of t)r.save(),r.transform(...c.transform),r.scale(1,-1),z(r,o,c.x,c.y,c.w,c.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){this.markedContentStack.push("OC"===e?{visible:this.optionalContentConfig.isVisible(t)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===ys?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=pt(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),o=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,o)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:r,c:o,d:c}=this.ctx.getTransform();let d,f;if(0===r&&0===o){const p=Math.abs(t),y=Math.abs(c);if(p===y)if(0===e)d=f=1/p;else{const _=p*e;d=f=_<1?1/_:1}else if(0===e)d=1/p,f=1/y;else{const _=p*e,A=y*e;d=_<1?1/_:1,f=A<1?1/A:1}}else{const p=Math.abs(t*c-r*o),y=Math.hypot(t,r),_=Math.hypot(o,c);if(0===e)d=_/p,f=y/p;else{const A=e*p;d=_>A?_/A:1,f=y>A?y/A:1}}this._cachedScaleForStroking[0]=d,this._cachedScaleForStroking[1]=f}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[o,c]=this.getScaleForStroking();if(t.lineWidth=r||1,1===o&&1===c)return void t.stroke();const d=t.getLineDash();if(e&&t.save(),t.scale(o,c),d.length>0){const f=Math.max(o,c);t.setLineDash(d.map(p=>p/f)),t.lineDashOffset/=f}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const l in Ai)void 0!==Tl.prototype[l]&&(Tl.prototype[Ai[l]]=Tl.prototype[l]);class od{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#t=e}}function Fi(l){switch(l instanceof Error||"object"==typeof l&&null!==l||xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new gr(l.message);case"MissingPDFException":return new pr(l.message);case"PasswordException":return new Pr(l.message,l.code);case"UnexpectedResponseException":return new co(l.message,l.status);case"UnknownErrorException":return new fs(l.message,l.details);default:return new fs(l.message,l.toString())}}class Si{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#i(e);if(e.callback){const r=e.callbackId,o=this.callbackCapabilities[r];if(!o)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],1===e.callback)o.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");o.reject(Fi(e.reason))}return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,o=e.sourceName,c=this.comObj;new Promise(function(d){d(t(e.data))}).then(function(d){c.postMessage({sourceName:r,targetName:o,callback:1,callbackId:e.callbackId,data:d})},function(d){c.postMessage({sourceName:r,targetName:o,callback:2,callbackId:e.callbackId,reason:Fi(d)})})}else e.streamId?this.#n(e):t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const o=this.callbackId++,c=Promise.withResolvers();this.callbackCapabilities[o]=c;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:o,data:t},r)}catch(d){c.reject(d)}return c.promise}sendWithStream(e,t,r,o){const c=this.streamId++,d=this.sourceName,f=this.targetName,p=this.comObj;return new ReadableStream({start:y=>{const _=Promise.withResolvers();return this.streamControllers[c]={controller:y,startCall:_,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:d,targetName:f,action:e,streamId:c,data:t,desiredSize:y.desiredSize},o),_.promise},pull:y=>{const _=Promise.withResolvers();return this.streamControllers[c].pullCall=_,p.postMessage({sourceName:d,targetName:f,stream:6,streamId:c,desiredSize:y.desiredSize}),_.promise},cancel:y=>{qt(y instanceof Error,"cancel must have a valid reason");const _=Promise.withResolvers();return this.streamControllers[c].cancelCall=_,this.streamControllers[c].isClosed=!0,p.postMessage({sourceName:d,targetName:f,stream:1,streamId:c,reason:Fi(y)}),_.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,o=e.sourceName,c=this.comObj,d=this,f=this.actionHandler[e.action],p={enqueue(y,_=1,A){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=_,T>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),c.postMessage({sourceName:r,targetName:o,stream:4,streamId:t,chunk:y},A)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:r,targetName:o,stream:3,streamId:t}),delete d.streamSinks[t])},error(y){qt(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,c.postMessage({sourceName:r,targetName:o,stream:5,streamId:t,reason:Fi(y)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[t]=p,new Promise(function(y){y(f(e.data,p))}).then(function(){c.postMessage({sourceName:r,targetName:o,stream:8,streamId:t,success:!0})},function(y){c.postMessage({sourceName:r,targetName:o,stream:8,streamId:t,reason:Fi(y)})})}#i(e){const t=e.streamId,r=this.sourceName,o=e.sourceName,c=this.comObj,d=this.streamControllers[t],f=this.streamSinks[t];switch(e.stream){case 8:e.success?d.startCall.resolve():d.startCall.reject(Fi(e.reason));break;case 7:e.success?d.pullCall.resolve():d.pullCall.reject(Fi(e.reason));break;case 6:if(!f){c.postMessage({sourceName:r,targetName:o,stream:7,streamId:t,success:!0});break}f.desiredSize<=0&&e.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=e.desiredSize,new Promise(function(p){p(f.onPull?.())}).then(function(){c.postMessage({sourceName:r,targetName:o,stream:7,streamId:t,success:!0})},function(p){c.postMessage({sourceName:r,targetName:o,stream:7,streamId:t,reason:Fi(p)})});break;case 4:if(qt(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(e.chunk);break;case 3:if(qt(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this.#r(d,t);break;case 5:qt(d,"error should have stream controller"),d.controller.error(Fi(e.reason)),this.#r(d,t);break;case 2:e.success?d.cancelCall.resolve():d.cancelCall.reject(Fi(e.reason)),this.#r(d,t);break;case 1:if(!f)break;new Promise(function(p){p(f.onCancel?.(Fi(e.reason)))}).then(function(){c.postMessage({sourceName:r,targetName:o,stream:2,streamId:t,success:!0})},function(p){c.postMessage({sourceName:r,targetName:o,stream:2,streamId:t,reason:Fi(p)})}),f.sinkCapability.reject(Fi(e.reason)),f.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#r(e,t){var r=this;return(0,G.A)(function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete r.streamControllers[t]})()}destroy(){this.#e?.abort(),this.#e=null}}class Fb{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return zo(this.#e)}has(e){return this.#e.has(e)}}const Fs=Symbol("INTERNAL");class Il{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:r,usage:o,rbGroups:c}){this.#e=!!(2&e),this.#t=!!(4&e),this.name=t,this.intent=r,this.usage=o,this.rbGroups=c}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?"OFF"!==t?.viewState:!this.#t||"OFF"!==e?.printState}_setVisible(e,t,r=!1){e!==Fs&&xt("Internal method `_setVisible` called."),this.#n=r,this.#i=t}}class Nr{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=2){if(this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const r of e.groups)this.#t.set(r.id,new Il(t,r));if("OFF"===e.baseState)for(const r of this.#t.values())r._setVisible(Fs,!1);for(const r of e.on)this.#t.get(r)._setVisible(Fs,!0);for(const r of e.off)this.#t.get(r)._setVisible(Fs,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let o=1;o<t;o++){const c=e[o];let d;if(Array.isArray(c))d=this.#r(c);else{if(!this.#t.has(c))return Xe(`Optional content group not found: ${c}`),!0;d=this.#t.get(c).visible}switch(r){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return"And"===r}isVisible(e){if(0===this.#t.size)return!0;if(!e)return Ps("Optional content group not defined."),!0;if("OCG"===e.type)return this.#t.has(e.id)?this.#t.get(e.id).visible:(Xe(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#r(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return Xe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Xe(`Unknown optional content policy ${e.policy}.`),!0}return Xe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const o=this.#t.get(e);if(o){if(r&&t&&o.rbGroups.length)for(const c of o.rbGroups)for(const d of c)d!==e&&this.#t.get(d)?._setVisible(Fs,!1,!0);o._setVisible(Fs,!!t,!0),this.#e=null}else Xe(`Optional content group not found: ${e}`)}setOCGState({state:e,preserveRB:t}){let r;for(const o of e){switch(o){case"ON":case"OFF":case"Toggle":r=o;continue}const c=this.#t.get(o);if(c)switch(r){case"ON":this.setVisibility(o,!0,t);break;case"OFF":this.setVisibility(o,!1,t);break;case"Toggle":this.setVisibility(o,!c.visible,t)}}this.#e=null}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?zo(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(null!==this.#e)return this.#e;const e=new zc;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class Vb{constructor(e,{disableRange:t=!1,disableStream:r=!1}){qt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:o,initialData:c,progressiveDone:d,contentDispositionFilename:f}=e;if(this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=f,c?.length>0){const p=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=o,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((p,y)=>{this._onReceiveData({begin:p,chunk:y})}),e.addProgressListener((p,y)=>{this._onProgress({loaded:p,total:y})}),e.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r):qt(this._rangeReaders.some(function(c){return c._begin===e&&(c._enqueue(r),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Xh(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new jb(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class Xh{constructor(e,t,r=!1,o=null){this._stream=e,this._done=r||!1,this._filename=W(o)?o:null,this._queuedChunks=t||[],this._loaded=0;for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return(0,G.A)(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class jb{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return(0,G.A)(function*(){if(e._queuedChunk){const r=e._queuedChunk;return e._queuedChunk=null,{value:r,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ad(l,e){const t=new Headers;if(!l||!e||"object"!=typeof e)return t;for(const r in e){const o=e[r];void 0!==o&&t.append(r,o)}return t}function Qh({responseHeaders:l,isHttp:e,rangeChunkSize:t,disableRange:r}){const o={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(l.get("Content-Length"),10);return!Number.isInteger(c)||(o.suggestedLength=c,c<=2*t)||r||!e||"bytes"!==l.get("Accept-Ranges")||"identity"!==(l.get("Content-Encoding")||"identity")||(o.allowRangeRequests=!0),o}function ld(l){const e=l.get("Content-Disposition");if(e){let t=function Vs(l){let e=!0,t=r("filename\\*","i").exec(l);if(t){t=t[1];let _=f(t);return _=unescape(_),_=p(_),_=y(_),c(_)}if(t=function d(_){const A=[];let T;const R=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(T=R.exec(_));){let[,j,K,$]=T;if(j=parseInt(j,10),j in A){if(0===j)break}else A[j]=[K,$]}const L=[];for(let j=0;j<A.length&&j in A;++j){let[K,$]=A[j];$=f($),K&&($=unescape($),0===j&&($=p($))),L.push($)}return L.join("")}(l),t)return c(y(t));if(t=r("filename","i").exec(l),t){t=t[1];let _=f(t);return _=y(_),c(_)}function r(_,A){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function o(_,A){if(_){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const T=new TextDecoder(_,{fatal:!0}),R=Rs(A);A=T.decode(R),e=!1}catch{}}return A}function c(_){return e&&/[\x80-\xff]/.test(_)&&(_=o("utf-8",_),e&&(_=o("iso-8859-1",_))),_}function f(_){if(_.startsWith('"')){const A=_.slice(1).split('\\"');for(let T=0;T<A.length;++T){const R=A[T].indexOf('"');-1!==R&&(A[T]=A[T].slice(0,R),A.length=T+1),A[T]=A[T].replaceAll(/\\(.)/g,"$1")}_=A.join('"')}return _}function p(_){const A=_.indexOf("'");return-1===A?_:o(_.slice(0,A),_.slice(A+1).replace(/^[^']*'/,""))}function y(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,T,R,L){if("q"===R||"Q"===R)return o(T,L=(L=L.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(j,K){return String.fromCharCode(parseInt(K,16))}));try{L=atob(L)}catch{}return o(T,L)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(W(t))return t}return null}function xl(l,e){return 404===l||0===l&&e.startsWith("file:")?new pr('Missing PDF "'+e+'".'):new co(`Unexpected server response (${l}) while retrieving PDF "${e}".`,l)}function cd(l){return 200===l||206===l}function Pl(l,e,t){return{method:"GET",headers:l,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Wc(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(Xe(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class ud{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ad(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ia(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Tt(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Ia{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),o=t.url;fetch(o,Pl(r,this._withCredentials,this._abortController)).then(c=>{if(!cd(c.status))throw xl(c.status,o);this._reader=c.body.getReader(),this._headersCapability.resolve();const d=c.headers,{allowRangeRequests:f,suggestedLength:p}=Qh({responseHeaders:d,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=p||this._contentLength,this._filename=ld(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new gr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,G.A)(function*(){yield e._headersCapability.promise;const{value:t,done:r}=yield e._reader.read();return r?{value:t,done:r}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:Wc(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class Tt{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController;const c=new Headers(e.headers);c.append("Range",`bytes=${t}-${r-1}`);const d=o.url;fetch(d,Pl(c,this._withCredentials,this._abortController)).then(f=>{if(!cd(f.status))throw xl(f.status,d);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,G.A)(function*(){yield e._readCapability.promise;const{value:t,done:r}=yield e._reader.read();return r?{value:t,done:r}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded}),{value:Wc(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class Ub{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ad(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const o={begin:e,end:t};for(const c in r)o[c]=r[c];return this.request(o)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,o=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[c,d]of this.headers)t.setRequestHeader(c,d);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),o.expectedStatus=206):o.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(c){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),o.onHeadersReceived=e.onHeadersReceived,o.onDone=e.onDone,o.onError=e.onError,o.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const o=r.xhr;if(o.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4!==o.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===o.status&&this.isHttp)return void r.onError?.(o.status);const c=o.status||200;if((200!==c||206!==r.expectedStatus)&&c!==r.expectedStatus)return void r.onError?.(o.status);const f=function Bb(l){const e=l.response;return"string"!=typeof e?e:Rs(e).buffer}(o);if(206===c){const p=o.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);r.onDone({begin:parseInt(y[1],10),chunk:f})}else f?r.onDone({begin:0,chunk:f}):r.onError?.(o.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Hb{constructor(e){this._source=e,this._manager=new Ub(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Lg(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new Rl(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Lg{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(d=>{const[f,...p]=d.split(": ");return[f,p.join(": ")]})),{allowRangeRequests:o,suggestedLength:c}=Qh({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=ld(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=xl(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){var e=this;return(0,G.A)(function*(){if(e._storedError)throw e._storedError;if(e._cachedChunks.length>0)return{value:e._cachedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Rl{constructor(e,t,r){this._manager=e;const o={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,o),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=xl(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){var e=this;return(0,G.A)(function*(){if(e._storedError)throw e._storedError;if(null!==e._queuedChunk){const r=e._queuedChunk;return e._queuedChunk=null,{value:r,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $b=/^[a-z][a-z0-9\-+.]+:/i;function Fg(l,e,t){return"http:"===l.protocol?br.get("http").request(l,{headers:e},t):br.get("https").request(l,{headers:e},t)}class Wb{constructor(e){this.source=e,this.url=function zb(l){if($b.test(l))return new URL(l);const e=br.get("url");return new URL(e.pathToFileURL(l))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.headers=ad(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Bg(this):new en(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new In(this,e,t):new jg(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Vg{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,G.A)(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new gr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _e{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,G.A)(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class en extends Vg{constructor(e){super(e);const t=Object.fromEntries(e.headers);this._request=Fg(this._url,t,o=>{if(404===o.statusCode){const p=new pr(`Missing PDF "${this._url}".`);return this._storedError=p,void this._headersCapability.reject(p)}this._headersCapability.resolve(),this._setReadableStream(o);const c=new Headers(this._readableStream.headers),{allowRangeRequests:d,suggestedLength:f}=Qh({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=ld(c)}),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class jg extends _e{constructor(e,t,r){super(e);const o=Object.fromEntries(e.headers);o.Range=`bytes=${t}-${r-1}`,this._request=Fg(this._url,o,d=>{if(404!==d.statusCode)this._setReadableStream(d);else{const f=new pr(`Missing PDF "${this._url}".`);this._storedError=f}}),this._request.on("error",d=>{this._storedError=d}),this._request.end()}}class Bg extends Vg{constructor(e){super(e);const t=br.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{"ENOENT"===r.code&&(r=new pr(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class In extends _e{constructor(e,t,r){super(e);const o=br.get("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:r-1}))}}class Vi{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#g=[];#y=new WeakMap;#m=null;static#v=new Map;static#_=new Map;static#C=new WeakMap;static#w=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');this.#f=new ReadableStream({start(p){p.enqueue(e),p.close()}})}this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:o,pageHeight:c,pageX:d,pageY:f}=r.rawDims;this.#m=[1,0,0,-1,-d,f+c],this.#c=o,this.#l=c,Vi.#P(),et(t,r),this.#e.promise.finally(()=>{Vi.#E.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=qn.platform;return Yt(this,"fontFamilyMap",new Map([["sans-serif",(e&&t?"Calibri, ":"")+"sans-serif"],["monospace",(e&&t?"Lucida Console, ":"")+"monospace"]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{r?this.#e.resolve():(this.#r??=t.lang,Object.assign(this.#h,t.styles),this.#x(t.items),e())},this.#e.reject)};return this.#u=this.#f.getReader(),Vi.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),o=e.rotation;if(o!==this.#d&&(t?.(),this.#d=o,et(this.#a,{rotation:o})),r!==this.#o){t?.(),this.#o=r;const c={div:null,properties:null,ctx:Vi.#T(this.#r)};for(const d of this.#g)c.properties=this.#y.get(d),c.div=d,this.#A(c)}}cancel(){const e=new gr("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#x(e){if(this.#n)return;this.#s.ctx??=Vi.#T(this.#r);const t=this.#g,r=this.#p;for(const o of e){if(t.length>1e5)return Xe("Ignoring additional textDivs for performance reasons."),void(this.#n=!0);if(void 0!==o.str)r.push(o.str),this.#M(o);else if("beginMarkedContentProps"===o.type||"beginMarkedContent"===o.type){const c=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),null!==o.id&&this.#t.setAttribute("id",`${o.id}`),c.append(this.#t)}else"endMarkedContent"===o.type&&(this.#t=this.#t.parentNode)}}#M(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);const o=at.transform(this.#m,e.transform);let c=Math.atan2(o[1],o[0]);const d=this.#h[e.fontName];d.vertical&&(c+=Math.PI/2);let f=this.#i&&d.fontSubstitution||d.fontFamily;f=Vi.fontFamilyMap.get(f)||f;const p=Math.hypot(o[2],o[3]),y=p*Vi.#O(f,this.#r);let _,A;0===c?(_=o[4],A=o[5]-y):(_=o[4]+y*Math.sin(c),A=o[5]-y*Math.cos(c));const T="calc(var(--scale-factor)*",R=t.style;this.#t===this.#a?(R.left=`${(100*_/this.#c).toFixed(2)}%`,R.top=`${(100*A/this.#l).toFixed(2)}%`):(R.left=`${T}${_.toFixed(2)}px)`,R.top=`${T}${A.toFixed(2)}px)`),R.fontSize=`${T}${(Vi.#w*p).toFixed(2)}px)`,R.fontFamily=f,r.fontSize=p,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=d.fontSubstitutionLoadedName||e.fontName),0!==c&&(r.angle=c*(180/Math.PI));let L=!1;if(e.str.length>1)L=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const j=Math.abs(e.transform[0]),K=Math.abs(e.transform[3]);j!==K&&Math.max(j,K)/Math.min(j,K)>1.5&&(L=!0)}if(L&&(r.canvasWidth=d.vertical?e.height:e.width),this.#y.set(t,r),this.#s.div=t,this.#s.properties=r,this.#A(this.#s),r.hasText&&this.#t.append(t),r.hasEOL){const j=document.createElement("br");j.setAttribute("role","presentation"),this.#t.append(j)}}#A(e){const{div:t,properties:r,ctx:o}=e,{style:c}=t;let d="";if(Vi.#w>1&&(d=`scale(${1/Vi.#w})`),0!==r.canvasWidth&&r.hasText){const{fontFamily:f}=c,{canvasWidth:p,fontSize:y}=r;Vi.#S(o,y*this.#o,f);const{width:_}=o.measureText(t.textContent);_>0&&(d=`scaleX(${p*this.#o/_}) ${d}`)}0!==r.angle&&(d=`rotate(${r.angle}deg) ${d}`),d.length>0&&(c.transform=d)}static cleanup(){if(!(this.#E.size>0)){this.#v.clear();for(const{canvas:e}of this.#_.values())e.remove();this.#_.clear()}}static#T(e=null){let t=this.#_.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#S(e,t,r){const o=this.#C.get(e);t===o.size&&r===o.family||(e.font=`${t}px ${r}`,o.size=t,o.family=r)}static#P(){if(null!==this.#w)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#O(e,t){const r=this.#v.get(e);if(r)return r;const o=this.#T(t);o.canvas.width=o.canvas.height=30,this.#S(o,30,e);const c=o.measureText("");let d=c.fontBoundingBoxAscent,f=Math.abs(c.fontBoundingBoxDescent);if(d){const _=d/(d+f);return this.#v.set(e,_),o.canvas.width=o.canvas.height=0,_}o.strokeStyle="red",o.clearRect(0,0,30,30),o.strokeText("g",0,0);let p=o.getImageData(0,0,30,30).data;f=0;for(let _=p.length-1-3;_>=0;_-=4)if(p[_]>0){f=Math.ceil(_/4/30);break}o.clearRect(0,0,30,30),o.strokeText("A",0,30),p=o.getImageData(0,0,30,30).data,d=0;for(let _=0,A=p.length;_<A;_+=4)if(p[_]>0){d=30-Math.floor(_/4/30);break}o.canvas.width=o.canvas.height=0;const y=d?d/(d+f):.8;return this.#v.set(e,y),y}}class xa{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};return function o(c){if(!c)return;let d=null;const f=c.name;if("#text"===f)d=c.value;else{if(!xa.shouldBuildText(f))return;c?.attributes?.textContent?d=c.attributes.textContent:c.value&&(d=c.value)}if(null!==d&&t.push({str:d}),c.children)for(const p of c.children)o(p)}(e),r}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const Gb=65536,sr=on?class Dg extends qo{_createCanvas(e,t){return br.get("canvas").createCanvas(e,t)}}:class ms extends qo{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}},fo=on?class Sl extends Cl{_fetch(e){return(0,G.A)(function*(){return _r(e)})()}}:Xo,$g=on?class Ag extends Xn{}:class Al extends Xn{#e;#t;#n;#i;#r;#s;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#r=t}get#c(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#a(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#r.createElementNS(xi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#r.createElementNS(xi,"defs"),e.append(r),r.append(this.#n),this.#r.body.append(e)}return this.#n}#d(e){if(1===e.length){const p=e[0],y=new Array(256);for(let A=0;A<256;A++)y[A]=p[A]/255;const _=y.join(",");return[_,_,_]}const[t,r,o]=e,c=new Array(256),d=new Array(256),f=new Array(256);for(let p=0;p<256;p++)c[p]=t[p]/255,d[p]=r[p]/255,f[p]=o[p]/255;return[c.join(","),d.join(","),f.join(",")]}#o(e){if(void 0===this.#e){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(P(t)?Xe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[r,o,c]=this.#d(e),d=1===e.length?r:`${r}${o}${c}`;if(t=this.#c.get(d),t)return this.#c.set(e,t),t;const f=`g_${this.#i}_transfer_map_${this.#l++}`,p=this.#o(f);this.#c.set(e,p),this.#c.set(d,p);const y=this.#f(f);return this.#y(r,o,c,y),p}addHCMFilter(e,t){const r=`${e}-${t}`,o="base";let c=this.#u.get(o);if(c?.key===r||(c?(c.filter?.remove(),c.key=r,c.url="none",c.filter=null):(c={key:r,url:"none",filter:null},this.#u.set(o,c)),!e||!t))return c.url;const d=this.#v(e);e=at.makeHexColor(...d);const f=this.#v(t);if(t=at.makeHexColor(...f),this.#a.style.color="","#000000"===e&&"#ffffff"===t||e===t)return c.url;const p=new Array(256);for(let R=0;R<=255;R++){const L=R/255;p[R]=L<=.03928?L/12.92:((L+.055)/1.055)**2.4}const y=p.join(","),_=`g_${this.#i}_hcm_filter`,A=c.filter=this.#f(_);this.#y(y,y,y,A),this.#p(A);const T=(R,L)=>{const j=d[R]/255,K=f[R]/255,$=new Array(L+1);for(let Z=0;Z<=L;Z++)$[Z]=j+Z/L*(K-j);return $.join(",")};return this.#y(T(0,5),T(1,5),T(2,5),A),c.url=this.#o(_),c.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[r]=this.#d([e]),o=`alpha_${r}`;if(t=this.#c.get(o),t)return this.#c.set(e,t),t;const c=`g_${this.#i}_alpha_map_${this.#l++}`,d=this.#o(c);this.#c.set(e,d),this.#c.set(o,d);const f=this.#f(c);return this.#m(r,f),d}addLuminosityFilter(e){let r,o,t=this.#c.get(e||"luminosity");if(t)return t;if(e?([r]=this.#d([e]),o=`luminosity_${r}`):o="luminosity",t=this.#c.get(o),t)return this.#c.set(e,t),t;const c=`g_${this.#i}_luminosity_map_${this.#l++}`,d=this.#o(c);this.#c.set(e,d),this.#c.set(o,d);const f=this.#f(c);return this.#h(f),e&&this.#m(r,f),d}addHighlightHCMFilter(e,t,r,o,c){const d=`${t}-${r}-${o}-${c}`;let f=this.#u.get(e);if(f?.key===d||(f?(f.filter?.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},this.#u.set(e,f)),!t||!r))return f.url;const[p,y]=[t,r].map(this.#v.bind(this));let _=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),A=Math.round(.2126*y[0]+.7152*y[1]+.0722*y[2]),[T,R]=[o,c].map(this.#v.bind(this));A<_&&([_,A,T,R]=[A,_,R,T]),this.#a.style.color="";const L=($,Z,te)=>{const se=new Array(256),ue=(A-_)/te,pe=$/255,Ce=(Z-$)/(255*te);let Ae=0;for(let ie=0;ie<=te;ie++){const ve=Math.round(_+ie*ue),$e=pe+ie*Ce;for(let Vt=Ae;Vt<=ve;Vt++)se[Vt]=$e;Ae=ve+1}for(let ie=Ae;ie<256;ie++)se[ie]=se[Ae-1];return se.join(",")},j=`g_${this.#i}_hcm_${e}_filter`,K=f.filter=this.#f(j);return this.#p(K),this.#y(L(T[0],R[0],5),L(T[1],R[1],5),L(T[2],R[2],5),K),f.url=this.#o(j),f.url}destroy(e=!1){e&&0!==this.#u.size||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#r.createElementNS(xi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(xi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#r.createElementNS(xi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#g(e,t,r){const o=this.#r.createElementNS(xi,t);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)}#y(e,t,r,o){const c=this.#r.createElementNS(xi,"feComponentTransfer");o.append(c),this.#g(c,"feFuncR",e),this.#g(c,"feFuncG",t),this.#g(c,"feFuncB",r)}#m(e,t){const r=this.#r.createElementNS(xi,"feComponentTransfer");t.append(r),this.#g(r,"feFuncA",e)}#v(e){return this.#a.style.color=e,sn(getComputedStyle(this.#a).getPropertyValue("color"))}},vs=on?class td extends hi{_fetch(e){return(0,G.A)(function*(){return _r(e)})()}}:Di;function po(l={}){"string"==typeof l||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const e=new Yh,{docId:t}=e,r=l.url?function Kb(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(on&&"string"==typeof l)return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(l.url):null,o=l.data?function zg(l){if(on&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if("string"==typeof l)return Rs(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||"object"==typeof l&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(l.data):null,c=l.httpHeaders||null,d=!0===l.withCredentials,f=l.password??null,p=l.range instanceof hd?l.range:null,y=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:Gb;let _=l.worker instanceof Ri?l.worker:null;const A=l.verbosity,T="string"!=typeof l.docBaseUrl||P(l.docBaseUrl)?null:l.docBaseUrl,R="string"==typeof l.cMapUrl?l.cMapUrl:null,L=!1!==l.cMapPacked,j=l.CMapReaderFactory||fo,K="string"==typeof l.standardFontDataUrl?l.standardFontDataUrl:null,$=l.StandardFontDataFactory||vs,Z=!0!==l.stopAtErrors,te=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,se=!1!==l.isEvalSupported,ue="boolean"==typeof l.isOffscreenCanvasSupported?l.isOffscreenCanvasSupported:!on,pe="boolean"==typeof l.isChrome?l.isChrome:!qn.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,Ce=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,Ae="boolean"==typeof l.disableFontFace?l.disableFontFace:on,ie=!0===l.fontExtraProperties,ve=!0===l.enableXfa,$e=l.ownerDocument||globalThis.document,Vt=!0===l.disableRange,Gt=!0===l.disableStream,Zt=!0===l.disableAutoFetch,vn=!0===l.pdfBug,We=l.CanvasFactory||sr,Me=l.FilterFactory||$g,Be=!0===l.enableHWA,Kt=p?p.length:l.length??NaN,Bn="boolean"==typeof l.useSystemFonts?l.useSystemFonts:!on&&!Ae,ii="boolean"==typeof l.useWorkerFetch?l.useWorkerFetch:j===Xo&&$===Di&&R&&K&&an(R,document.baseURI)&&an(K,document.baseURI);l.canvasFactory&&fn("`canvasFactory`-instance option, please use `CanvasFactory` instead."),l.filterFactory&&fn("`filterFactory`-instance option, please use `FilterFactory` instead."),function Fc(l){Number.isInteger(l)&&(lo=l)}(A);const kn={canvasFactory:new We({ownerDocument:$e,enableHWA:Be}),filterFactory:new Me({docId:t,ownerDocument:$e}),cMapReaderFactory:ii?null:new j({baseUrl:R,isCompressed:L}),standardFontDataFactory:ii?null:new $({baseUrl:K})};if(!_){const lr={verbosity:A,port:od.workerPort};_=lr.port?Ri.fromPort(lr):new Ri(lr),e._worker=_}const bn={docId:t,apiVersion:"4.8.69",data:o,password:f,disableAutoFetch:Zt,rangeChunkSize:y,length:Kt,docBaseUrl:T,enableXfa:ve,evaluatorOptions:{maxImageSize:te,disableFontFace:Ae,ignoreErrors:Z,isEvalSupported:se,isOffscreenCanvasSupported:ue,isChrome:pe,canvasMaxAreaInBytes:Ce,fontExtraProperties:ie,useSystemFonts:Bn,cMapUrl:ii?R:null,standardFontDataUrl:ii?K:null}},Xs={disableFontFace:Ae,fontExtraProperties:ie,ownerDocument:$e,pdfBug:vn,styleElement:null,loadingParams:{disableAutoFetch:Zt,enableXfa:ve}};return _.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(_.destroyed)throw new Error("Worker was destroyed");const lr=_.messageHandler.sendWithPromise("GetDocRequest",bn,o?[o.buffer]:null);let Bt;if(p)Bt=new Vb(p,{disableRange:Vt,disableStream:Gt});else if(!o){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Gn;Gn=on?typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&an(r)?ud:Wb:an(r)?ud:Hb,Bt=new Gn({url:r,length:Kt,httpHeaders:c,withCredentials:d,rangeChunkSize:y,disableRange:Vt,disableStream:Gt})}return lr.then(Gn=>{if(e.destroyed)throw new Error("Loading aborted");if(_.destroyed)throw new Error("Worker was destroyed");const Qi=new Si(t,Gn,_.port),wc=new Gg(Qi,e,Bt,Xs,kn);e._transport=wc,Qi.send("Ready",null)})}).catch(e._capability.reject),e}function Wg(l){return"object"==typeof l&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0}class Yh{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+Yh.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var e=this;return(0,G.A)(function*(){e.destroyed=!0;try{e._worker?.port&&(e._worker._pendingDestroy=!0),yield e._transport?.destroy()}catch(t){throw e._worker?.port&&delete e._worker._pendingDestroy,t}e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}}class hd{constructor(e,t,r=!1,o=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Zh{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Jh{#e=null;#t=!1;constructor(e,t,r,o=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=o?new Je:null,this._pdfBug=o,this.commonObjs=r.commonObjs,this.objs=new ef,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}={}){return new k({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:o,dontFlip:c})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var e=this;return(0,G.A)(function*(){return e._transport._htmlForXfa?.children[e._pageIndex]||null})()}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:o=qr.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:f=null,annotationCanvasMap:p=null,pageColors:y=null,printAnnotationStorage:_=null,isEditing:A=!1}){this._stats?.time("Overall");const T=this._transport.getRenderingIntent(r,o,_,A),{renderingIntent:R,cacheKey:L}=T;this.#t=!1,this.#i(),f||=this._transport.getOptionalContentConfig(R);let j=this._intentStates.get(L);j||(j=Object.create(null),this._intentStates.set(L,j)),j.streamReaderCancelTimeout&&(clearTimeout(j.streamReaderCancelTimeout),j.streamReaderCancelTimeout=null);const K=!!(4&R);j.displayReadyCapability||(j.displayReadyCapability=Promise.withResolvers(),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(T));const $=se=>{j.renderTasks.delete(Z),(this._maybeCleanupAfterRender||K)&&(this.#t=!0),this.#n(!K),se?(Z.capability.reject(se),this._abortOperatorList({intentState:j,reason:se instanceof Error?se:new Error(se)})):Z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},Z=new Pa({callback:$,params:{canvasContext:e,viewport:t,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:j.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!K,pdfBug:this._pdfBug,pageColors:y});(j.renderTasks||=new Set).add(Z);const te=Z.task;return Promise.all([j.displayReadyCapability.promise,f]).then(([se,ue])=>{if(this.destroyed)$();else{if(this._stats?.time("Rendering"),!(ue.renderingIntent&R))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");Z.initializeGraphics({transparency:se,optionalContentConfig:ue}),Z.operatorListChanged()}}).catch($),te}getOperatorList({intent:e="display",annotationMode:t=qr.ENABLE,printAnnotationStorage:r=null,isEditing:o=!1}={}){const d=this._transport.getRenderingIntent(e,t,r,o,!0);let p,f=this._intentStates.get(d.cacheKey);return f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f)),f.opListReadCapability||(p=Object.create(null),p.operatorListChanged=function c(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(p))},f.opListReadCapability=Promise.withResolvers(),(f.renderTasks||=new Set).add(p),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:o=>o.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>xa.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,o){const d=t.getReader(),f={items:[],styles:Object.create(null),lang:null};!function c(){d.read().then(function({value:p,done:y}){y?r(f):(f.lang??=p.lang,Object.assign(f.styles,p.styles),f.items.push(...p.items),c())},o)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new Je),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,o=e.length;r<o;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:o}){const{map:c,transfer:d}=r,p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:c,modifiedIds:o},d).getReader(),y=this._intentStates.get(t);y.streamReader=p;const _=()=>{p.read().then(({value:A,done:T})=>{T?y.streamReader=null:this._transport.destroyed||(this._renderPageChunk(A,y),_())},A=>{if(y.streamReader=null,!this._transport.destroyed){if(y.operatorList){y.operatorList.lastChunk=!0;for(const T of y.renderTasks)T.operatorListChanged();this.#n(!0)}if(y.displayReadyCapability)y.displayReadyCapability.reject(A);else{if(!y.opListReadCapability)throw A;y.opListReadCapability.reject(A)}}})};_()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof M){let o=100;return t.extraDelay>0&&t.extraDelay<1e3&&(o+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},o))}}if(e.streamReader.cancel(new gr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[o,c]of this._intentStates)if(c===e){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}class fd{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[o]of this.#e)o.call(this,r)})}addEventListener(e,t,r=null){let o=null;if(r?.signal instanceof AbortSignal){const{signal:c}=r;if(c.aborted)return void Xe("LoopbackPort - cannot use an `aborted` signal.");const d=()=>this.removeEventListener(e,t);o=()=>c.removeEventListener("abort",d),c.addEventListener("abort",d)}this.#e.set(t,o)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class Ri{static#e=0;static#t=!1;static#n;static{on&&(this.#t=!0,od.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||"null"===r.origin)return!1}catch{return!1}const o=new URL(t,r);return r.origin===o.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"}))}constructor({name:e=null,port:t=null,verbosity:r=Vc()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Ri.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(Ri.#n||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return on?Promise.all([br.promise,this._readyCapability.promise]):this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Si("main","worker",e),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(Ri.#t||Ri.#r)return void this._setupFakeWorker();let{workerSrc:e}=Ri;try{Ri._isSameOrigin(window.location.href,e)||(e=Ri._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Si("main","worker",t),o=()=>{c.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=new AbortController;t.addEventListener("error",()=>{this._webWorker||o()},{signal:c.signal}),r.on("test",f=>{c.abort(),!this.destroyed&&f?(this._messageHandler=r,this._port=t,this._webWorker=t,this.#i()):o()}),r.on("ready",f=>{if(c.abort(),this.destroyed)o();else try{d()}catch{this._setupFakeWorker()}});const d=()=>{const f=new Uint8Array;r.send("test",f,[f.buffer])};return void d()}catch{Ps("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ri.#t||(Xe("Setting up fake worker."),Ri.#t=!0),Ri._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new fd;this._port=t;const r="fake"+Ri.#e++,o=new Si(r+"_worker",r,t);e.setup(o,t),this._messageHandler=new Si(r,r+"_worker",t),this.#i()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Ri.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ri(e)}static get workerSrc(){if(od.workerSrc)return od.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#r(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var e=this;return Yt(this,"_setupFakeWorkerGlobal",function(){var r=(0,G.A)(function*(){return e.#r?e.#r:(yield import(e.workerSrc)).WorkerMessageHandler});return function(){return r.apply(this,arguments)}}()())}}class Gg{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#r=null;constructor(e,t,r,o,c){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new ef,this.fontLoader=new St({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this.loadingParams=o.loadingParams,this._params=o,this.canvasFactory=c.canvasFactory,this.filterFactory=c.filterFactory,this.cMapReaderFactory=c.cMapReaderFactory,this.standardFontDataFactory=c.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){const r=this.#e.get(e);if(r)return r;const o=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,o),o}get annotationStorage(){return Yt(this,"annotationStorage",new ho)}getRenderingIntent(e,t=qr.ENABLE,r=null,o=!1,c=!1){let d=2,f=yr;switch(e){case"any":d=1;break;case"display":break;case"print":d=4;break;default:Xe(`getRenderingIntent - invalid intent: ${e}`)}const p=4&d&&r instanceof ks?r:this.annotationStorage;switch(t){case qr.DISABLE:d+=64;break;case qr.ENABLE:break;case qr.ENABLE_FORMS:d+=16;break;case qr.ENABLE_STORAGE:d+=32,f=p.serializable;break;default:Xe(`getRenderingIntent - invalid annotationMode: ${t}`)}o&&(d+=128),c&&(d+=256);const{ids:y,hash:_}=p.modifiedIds;return{renderingIntent:d,cacheKey:[d,f.hash,_].join("_"),annotationStorageSerializable:f,modifiedIds:y}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Vi.cleanup(),this._networkStream?.cancelAllRequests(new gr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){var e=this;const{messageHandler:t,loadingTask:r}=this;t.on("GetReader",(o,c)=>{qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=d=>{this._lastProgress={loaded:d.loaded,total:d.total}},c.onPull=()=>{this._fullReader.read().then(function({value:d,done:f}){f?c.close():(qt(d instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(d),1,[d]))}).catch(d=>{c.error(d)})},c.onCancel=d=>{this._fullReader.cancel(d),c.ready.catch(f=>{if(!this.destroyed)throw f})}}),t.on("ReaderHeadersReady",function(){var o=(0,G.A)(function*(c){yield e._fullReader.headersReady;const{isStreamingSupported:d,isRangeSupported:f,contentLength:p}=e._fullReader;return(!d||!f)&&(e._lastProgress&&r.onProgress?.(e._lastProgress),e._fullReader.onProgress=y=>{r.onProgress?.({loaded:y.loaded,total:y.total})}),{isStreamingSupported:d,isRangeSupported:f,contentLength:p}});return function(c){return o.apply(this,arguments)}}()),t.on("GetRangeReader",(o,c)=>{qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const d=this._networkStream.getRangeReader(o.begin,o.end);d?(c.onPull=()=>{d.read().then(function({value:f,done:p}){p?c.close():(qt(f instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(f),1,[f]))}).catch(f=>{c.error(f)})},c.onCancel=f=>{d.cancel(f),c.ready.catch(p=>{if(!this.destroyed)throw p})}):c.close()}),t.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,r._capability.resolve(new Zh(o,this))}),t.on("DocException",function(o){let c;switch(o.name){case"PasswordException":c=new Pr(o.message,o.code);break;case"InvalidPDFException":c=new Zu(o.message);break;case"MissingPDFException":c=new pr(o.message);break;case"UnexpectedResponseException":c=new co(o.message,o.status);break;case"UnknownErrorException":c=new fs(o.message,o.details);break;default:xt("DocException - expected a valid Error.")}r._capability.reject(c)}),t.on("PasswordRequest",o=>{if(this.#r=Promise.withResolvers(),r.onPassword){const c=d=>{d instanceof Error?this.#r.reject(d):this.#r.resolve({password:d})};try{r.onPassword(c,o.code)}catch(d){this.#r.reject(d)}}else this.#r.reject(new Pr(o.message,o.code));return this.#r.promise}),t.on("DataLoaded",o=>{r.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),t.on("StartRenderPage",o=>{this.destroyed||this.#t.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),t.on("commonobj",([o,c,d])=>{if(this.destroyed||this.commonObjs.has(o))return null;switch(c){case"Font":const{disableFontFace:f,fontExtraProperties:p,pdfBug:y}=this._params;if("error"in d){const R=d.error;Xe(`Error during font loading: ${R}`),this.commonObjs.resolve(o,R);break}const _=y&&globalThis.FontInspector?.enabled?(R,L)=>globalThis.FontInspector.fontAdded(R,L):null,A=new vr(d,{disableFontFace:f,inspectFont:_});this.fontLoader.bind(A).catch(()=>t.sendWithPromise("FontFallback",{id:o})).finally(()=>{!p&&A.data&&(A.data=null),this.commonObjs.resolve(o,A)});break;case"CopyLocalImage":const{imageRef:T}=d;qt(T,"The imageRef must be defined.");for(const R of this.#t.values())for(const[,L]of R.objs)if(L?.ref===T)return L.dataLen?(this.commonObjs.resolve(o,structuredClone(L)),L.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,d);break;default:throw new Error(`Got unknown common object type ${c}`)}return null}),t.on("obj",([o,c,d,f])=>{if(this.destroyed)return;const p=this.#t.get(c);if(!p.objs.has(o)){if(0===p._intentStates.size)return void f?.bitmap?.close();switch(d){case"Image":p.objs.resolve(o,f),f?.dataLen>1e7&&(p._maybeCleanupAfterRender=!0);break;case"Pattern":p.objs.resolve(o,f);break;default:throw new Error(`Got unknown object type ${d}`)}}}),t.on("DocProgress",o=>{this.destroyed||r.onProgress?.({loaded:o.loaded,total:o.total})}),t.on("FetchBuiltInCMap",function(){var o=(0,G.A)(function*(c){if(e.destroyed)throw new Error("Worker was destroyed.");if(!e.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return e.cMapReaderFactory.fetch(c)});return function(c){return o.apply(this,arguments)}}()),t.on("FetchStandardFontData",function(){var o=(0,G.A)(function*(c){if(e.destroyed)throw new Error("Worker was destroyed.");if(!e.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return e.standardFontDataFactory.fetch(c)});return function(c){return o.apply(this,arguments)}}())}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Xe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#i.set(c.refStr,e);const d=new Jh(t,c,this,this._params.pdfBug);return this.#t.set(t,d),d});return this.#n.set(t,o),o}getPageIndex(e){return Wg(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new Nr(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(o=>({info:o[0],metadata:o[1]?new Fb(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(){var e=this;return(0,G.A)(function*(t=!1){if(!e.destroyed){yield e.messageHandler.sendWithPromise("Cleanup",null);for(const r of e.#t.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);e.commonObjs.clear(),t||e.fontLoader.clear(),e.#e.clear(),e.filterFactory.destroy(!0),Vi.cleanup()}}).apply(this,arguments)}cachedPageNumber(e){return Wg(e)?this.#i.get(0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`)??null:null}}const Ol=Symbol("INITIAL_DATA");class ef{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Ol}}get(e,t=null){if(t){const o=this.#t(e);return o.promise.then(()=>t(o.data)),null}const r=this.#e[e];if(!r||r.data===Ol)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==Ol}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Ol&&(yield[e,t])}}}class Kg{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Pa{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:o,annotationCanvasMap:c,operatorList:d,pageIndex:f,canvasFactory:p,filterFactory:y,useRequestAnimationFrame:_=!1,pdfBug:A=!1,pageColors:T=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=o,this.annotationCanvasMap=c,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=f,this.canvasFactory=p,this.filterFactory=y,this._pdfBug=A,this.pageColors=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===_&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Kg(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Pa.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Pa.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:o,transform:c,background:d}=this.params;this.gfx=new Tl(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:o,transparency:e,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Pa.#t.delete(this._canvas),this.callback(e||new M(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return(0,G.A)(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),Pa.#t.delete(e._canvas),e.callback())))})()}}const qg="4.8.69",tf="3634dab10";function Xg(l){return Math.floor(255*Math.max(0,Math.min(1,l))).toString(16).padStart(2,"0")}function wi(l){return Math.max(0,Math.min(255,255*l))}class Jo{static CMYK_G([e,t,r,o]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+o)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=wi(e),e,e]}static G_HTML([e]){const t=Xg(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(wi)}static RGB_HTML(e){return`#${e.map(Xg).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,o]){return["RGB",1-Math.min(1,e+o),1-Math.min(1,r+o),1-Math.min(1,t+o)]}static CMYK_rgb([e,t,r,o]){return[wi(1-Math.min(1,e+o)),wi(1-Math.min(1,r+o)),wi(1-Math.min(1,t+o))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const o=1-e,c=1-t,d=1-r;return["CMYK",o,c,d,Math.min(o,c,d)]}}class Wn{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const o=this._createSVG("svg:svg");return o.setAttribute("version","1.1"),r||(o.setAttribute("width",`${e}px`),o.setAttribute("height",`${t}px`)),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("viewBox",`0 0 ${e} ${t}`),o}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){xt("Abstract method `_createSVG` called.")}}class pd extends Wn{_createSVG(e){return document.createElementNS(xi,e)}}class Qg{static setupStorage(e,t,r,o,c){const d=o.getValue(t,{value:null});switch(r.name){case"textarea":if(null!==d.value&&(e.textContent=d.value),"print"===c)break;e.addEventListener("input",f=>{o.setValue(t,{value:f.target.value})});break;case"input":if("radio"===r.attributes.type||"checkbox"===r.attributes.type){if(d.value===r.attributes.xfaOn?e.setAttribute("checked",!0):d.value===r.attributes.xfaOff&&e.removeAttribute("checked"),"print"===c)break;e.addEventListener("change",f=>{o.setValue(t,{value:f.target.getAttribute(f.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==d.value&&e.setAttribute("value",d.value),"print"===c)break;e.addEventListener("input",f=>{o.setValue(t,{value:f.target.value})})}break;case"select":if(null!==d.value){e.setAttribute("value",d.value);for(const f of r.children)f.attributes.value===d.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}e.addEventListener("input",f=>{const p=f.target.options;o.setValue(t,{value:-1===p.selectedIndex?"":p[p.selectedIndex].value})})}}static setAttributes({html:e,element:t,storage:r=null,intent:o,linkService:c}){const{attributes:d}=t,f=e instanceof HTMLAnchorElement;"radio"===d.type&&(d.name=`${d.name}-${o}`);for(const[p,y]of Object.entries(d))if(null!=y)switch(p){case"class":y.length&&e.setAttribute(p,y.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",y);break;case"style":Object.assign(e.style,y);break;case"textContent":e.textContent=y;break;default:(!f||"href"!==p&&"newWindow"!==p)&&e.setAttribute(p,y)}f&&c.addLinkAttributes(e,d.href,d.newWindow),r&&d.dataId&&this.setupStorage(e,d.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,o=e.xfaHtml,c=e.intent||"display",d=document.createElement(o.name);o.attributes&&this.setAttributes({html:d,element:o,intent:c,linkService:r});const f="richText"!==c,p=e.div;if(p.append(d),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;p.style.transform=A}f&&p.setAttribute("class","xfaLayer xfaFont");const y=[];if(0===o.children.length){if(o.value){const A=document.createTextNode(o.value);d.append(A),f&&xa.shouldBuildText(o.name)&&y.push(A)}return{textDivs:y}}const _=[[o,-1,d]];for(;_.length>0;){const[A,T,R]=_.at(-1);if(T+1===A.children.length){_.pop();continue}const L=A.children[++_.at(-1)[1]];if(null===L)continue;const{name:j}=L;if("#text"===j){const $=document.createTextNode(L.value);y.push($),R.append($);continue}const K=L?.attributes?.xmlns?document.createElementNS(L.attributes.xmlns,j):document.createElement(j);if(R.append(K),L.attributes&&this.setAttributes({html:K,element:L,storage:t,intent:c,linkService:r}),L.children?.length>0)_.push([L,-1,K]);else if(L.value){const $=document.createTextNode(L.value);f&&xa.shouldBuildText(j)&&y.push($),K.append($)}}for(const A of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:y}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Nl=1e3,ea=new WeakSet;function Bs(l){return{width:l[2]-l[0],height:l[3]-l[1]}}class Gc{static create(e){switch(e.data.annotationType){case 2:return new Yg(e);case 1:return new gd(e);case 20:switch(e.data.fieldType){case"Tx":return new md(e);case"Btn":return e.data.radioButton?new rf(e):e.data.checkBox?new Zg(e):new Xb(e);case"Ch":return new kl(e);case"Sig":return new nf(e)}return new Us(e);case 16:return new Ra(e);case 3:return new yd(e);case 4:return new Yb(e);case 5:return new Zb(e);case 6:return new Jb(e);case 8:return new e_(e);case 14:return new sf(e);case 15:return new Oa(e);case 7:return new NE(e);case 9:return new Jg(e);case 10:return new Kc(e);case 11:return new af(e);case 12:return new vd(e);case 13:return new t_(e);case 17:return new em(e);default:return new Dn(e)}}}class Dn{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:o=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),o&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Dn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:r,rotation:o},parent:{viewport:{rawDims:{pageWidth:c,pageHeight:d,pageX:f,pageY:p}}}}=this;r?.splice(0,4,...e);const{width:y,height:_}=Bs(e);t.left=100*(e[0]-f)/c+"%",t.top=100*(d-e[3]+p)/d+"%",0===o?(t.width=100*y/c+"%",t.height=100*_/d+"%"):this.setRotation(o)}_createContainer(e){const{data:t,parent:{page:r,viewport:o}}=this,c=document.createElement("section");c.setAttribute("data-annotation-id",t.id),this instanceof Us||(c.tabIndex=Nl);const{style:d}=c;if(d.zIndex=this.parent.zIndex++,t.alternativeText&&(c.title=t.alternativeText),t.noRotate&&c.classList.add("norotate"),!t.rect||this instanceof Ra){const{rotation:j}=t;return!t.hasOwnCanvas&&0!==j&&this.setRotation(j,c),c}const{width:f,height:p}=Bs(t.rect);if(!e&&t.borderStyle.width>0){d.borderWidth=`${t.borderStyle.width}px`;const j=t.borderStyle.horizontalCornerRadius,K=t.borderStyle.verticalCornerRadius;switch(j>0||K>0?d.borderRadius=`calc(${j}px * var(--scale-factor)) / calc(${K}px * var(--scale-factor))`:this instanceof rf&&(d.borderRadius=`calc(${f}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`),t.borderStyle.style){case 1:d.borderStyle="solid";break;case 2:d.borderStyle="dashed";break;case 3:Xe("Unimplemented border style: beveled");break;case 4:Xe("Unimplemented border style: inset");break;case 5:d.borderBottomStyle="solid"}const $=t.borderColor||null;$?(this.#t=!0,d.borderColor=at.makeHexColor(0|$[0],0|$[1],0|$[2])):d.borderWidth=0}const y=at.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:_,pageHeight:A,pageX:T,pageY:R}=o.rawDims;d.left=100*(y[0]-T)/_+"%",d.top=100*(y[1]-R)/A+"%";const{rotation:L}=t;return t.hasOwnCanvas||0===L?(d.width=100*f/_+"%",d.height=100*p/A+"%"):this.setRotation(L,c),c}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:o}=this.parent.viewport.rawDims,{width:c,height:d}=Bs(this.data.rect);let f,p;e%180==0?(f=100*c/r,p=100*d/o):(f=100*d/r,p=100*c/o),t.style.width=`${f}%`,t.style.height=`${p}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,o)=>{const c=o.detail[t],d=c[0],f=c.slice(1);o.target.style[r]=Jo[`${d}_HTML`](f),this.annotationStorage.setValue(this.data.id,{[r]:Jo[`${d}_rgb`](f)})};return Yt(this,"_commonActions",{display:t=>{const{display:r}=t.detail,o=r%2==1;this.container.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:o,noPrint:1===r||2===r})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const o of Object.keys(t.detail))(e[o]||r[o])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[o,c]of Object.entries(t)){const d=r[o];d&&(d({detail:{[o]:c},target:e}),delete t[o])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,o,c]=this.data.rect.map(j=>Math.fround(j));if(8===e.length){const[j,K,$,Z]=e.subarray(2,6);if(o===j&&c===K&&t===$&&r===Z)return}const{style:d}=this.container;let f;if(this.#t){const{borderColor:j,borderWidth:K}=d;d.borderWidth=0,f=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${j}" stroke-width="${K}">`],this.container.classList.add("hasBorder")}const p=o-t,y=c-r,{svgFactory:_}=this,A=_.createElement("svg");A.classList.add("quadrilateralsContainer"),A.setAttribute("width",0),A.setAttribute("height",0);const T=_.createElement("defs");A.append(T);const R=_.createElement("clipPath"),L=`clippath_${this.data.id}`;R.setAttribute("id",L),R.setAttribute("clipPathUnits","objectBoundingBox"),T.append(R);for(let j=2,K=e.length;j<K;j+=8){const $=e[j],Z=e[j+1],te=e[j+2],se=e[j+3],ue=_.createElement("rect"),pe=(te-t)/p,Ce=(c-Z)/y,Ae=($-te)/p,ie=(Z-se)/y;ue.setAttribute("x",pe),ue.setAttribute("y",Ce),ue.setAttribute("width",Ae),ue.setAttribute("height",ie),R.append(ue),f?.push(`<rect vector-effect="non-scaling-stroke" x="${pe}" y="${Ce}" width="${Ae}" height="${ie}"/>`)}this.#t&&(f.push("</g></svg>')"),d.backgroundImage=f.join("")),this.container.append(A),this.container.style.clipPath=`url(#${L})`}_createPopup(){const{data:e}=this,t=this.#n=new Ra({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const o=this._fieldObjects[e];if(o)for(const{page:c,id:d,exportValues:f}of o){if(-1===c||d===t)continue;const p="string"==typeof f?f:null,y=document.querySelector(`[data-element-id="${d}"]`);!y||ea.has(y)?r.push({id:d,exportValue:p,domElement:y}):Xe(`_getElementsByName - element not allowed: ${d}`)}return r}for(const o of document.getElementsByName(e)){const{exportValue:c}=o,d=o.getAttribute("data-element-id");d!==t&&ea.has(o)&&r.push({id:d,exportValue:c,domElement:o})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class Yg extends Dn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action),o=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(this.#n(r,e.setOCGState),o=!0):e.dest?(this._bindLink(r,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(t.actions)){const c=r.get(o);c&&(e[c]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:o}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return Xe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(e.onclick=()=>!1));e.onclick=()=>{r?.();const{fields:o,refs:c,include:d}=t,f=[];if(0!==o.length||0!==c.length){const _=new Set(c);for(const A of o){const T=this._fieldObjects[A]||[];for(const{id:R}of T)_.add(R)}for(const A of Object.values(this._fieldObjects))for(const T of A)_.has(T.id)===d&&f.push(T)}else for(const _ of Object.values(this._fieldObjects))f.push(..._);const p=this.annotationStorage,y=[];for(const _ of f){const{id:A}=_;switch(y.push(A),_.type){case"text":case"combobox":case"listbox":p.setValue(A,{value:_.defaultValue||""});break;case"checkbox":case"radiobutton":p.setValue(A,{value:_.defaultValue===_.exportValues});break;default:continue}const T=document.querySelector(`[data-element-id="${A}"]`);T&&(ea.has(T)?T.dispatchEvent(new Event("resetform")):Xe(`_bindResetFormAction - element not allowed: ${A}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:y,name:"ResetForm"}}),!1}}}class gd extends Dn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Us extends Dn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,o,c){r.includes("mouse")?e.addEventListener(r,d=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:c(d),shift:d.shiftKey,modifier:this._getKeyModifier(d)}})}):e.addEventListener(r,d=>{if("blur"===r){if(!t.focused||!d.relatedTarget)return;t.focused=!1}else if("focus"===r){if(t.focused)return;t.focused=!0}c&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:c(d)}})})}_setEventListeners(e,t,r,o){for(const[c,d]of r)("Action"===d||this.data.actions?.[d])&&(("Focus"===d||"Blur"===d)&&(t||={focused:!1}),this._setEventListener(e,t,c,d,o),"Focus"!==d||this.data.actions?.Blur?"Blur"===d&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":at.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:r}=this.data.defaultAppearanceData,o=this.data.defaultAppearanceData.fontSize||9,c=e.style;let d;const p=y=>Math.round(10*y)/10;if(this.data.multiLine){const y=Math.abs(this.data.rect[3]-this.data.rect[1]-2),_=Math.round(y/(1.35*o))||1;d=Math.min(o,p(y/_/1.35))}else{const y=Math.abs(this.data.rect[3]-this.data.rect[1]-2);d=Math.min(o,p(y/1.35))}c.fontSize=`calc(${d}px * var(--scale-factor))`,c.color=at.makeHexColor(r[0],r[1],r[2]),null!==this.data.textAlignment&&(c.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class md extends Us{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,r,o){const c=this.annotationStorage;for(const d of this._getElementsByName(e.name,e.id))d.domElement&&(d.domElement[t]=r),c.setValue(d.id,{[o]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let c=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let f=o.formattedValue||this.data.textContent?.join("\n")||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:c,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=f??c,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",f??c),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),ea.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=Nl,this._setRequired(r,this.data.required),d&&(r.maxLength=d),r.addEventListener("input",_=>{e.setValue(t,{value:_.target.value}),this.setPropertyOnSiblings(r,"value",_.target.value,"value"),p.formattedValue=null}),r.addEventListener("resetform",_=>{r.value=p.userValue=this.data.defaultFieldValue??"",p.formattedValue=null});let y=_=>{const{formattedValue:A}=p;null!=A&&(_.target.value=A),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",A=>{if(p.focused)return;const{target:T}=A;p.userValue&&(T.value=p.userValue),p.lastCommittedValue=T.value,p.commitKey=1,this.data.actions?.Focus||(p.focused=!0)}),r.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target),this._dispatchEventFromSandbox({value(R){p.userValue=R.detail.value??"",e.setValue(t,{value:p.userValue.toString()}),R.target.value=p.userValue},formattedValue(R){const{formattedValue:L}=R.detail;p.formattedValue=L,null!=L&&R.target!==document.activeElement&&(R.target.value=L),e.setValue(t,{formattedValue:L})},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{const{charLimit:L}=R.detail,{target:j}=R;if(0===L)return void j.removeAttribute("maxLength");j.setAttribute("maxLength",L);let K=p.userValue;!K||K.length<=L||(K=K.slice(0,L),j.value=p.userValue=K,e.setValue(t,{value:K}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:K,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}},A)}),r.addEventListener("keydown",A=>{p.commitKey=1;let T=-1;if("Escape"===A.key?T=0:"Enter"!==A.key||this.data.multiLine?"Tab"===A.key&&(p.commitKey=3):T=2,-1===T)return;const{value:R}=A.target;p.lastCommittedValue!==R&&(p.lastCommittedValue=R,p.userValue=R,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:T,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const _=y;y=null,r.addEventListener("blur",A=>{if(!p.focused||!A.relatedTarget)return;this.data.actions?.Blur||(p.focused=!1);const{value:T}=A.target;p.userValue=T,p.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:p.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}),_(A)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",A=>{p.lastCommittedValue=null;const{data:T,target:R}=A,{value:L,selectionStart:j,selectionEnd:K}=R;let $=j,Z=K;switch(A.inputType){case"deleteWordBackward":{const te=L.substring(0,j).match(/\w*[^\w]*$/);te&&($-=te[0].length);break}case"deleteWordForward":{const te=L.substring(j).match(/^[^\w]*\w*/);te&&(Z+=te[0].length);break}case"deleteContentBackward":j===K&&($-=1);break;case"deleteContentForward":j===K&&(Z+=1)}A.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,change:T||"",willCommit:!1,selStart:$,selEnd:Z}})}),this._setEventListeners(r,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(y&&r.addEventListener("blur",y),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/d;r.classList.add("comb"),r.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class nf extends Us{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Zg extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let o=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;"string"==typeof o&&(o="Off"!==o,e.setValue(r,{value:o})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const c=document.createElement("input");return ea.add(c),c.setAttribute("data-element-id",r),c.disabled=t.readOnly,this._setRequired(c,this.data.required),c.type="checkbox",c.name=t.fieldName,o&&c.setAttribute("checked",!0),c.setAttribute("exportValue",t.exportValue),c.tabIndex=Nl,c.addEventListener("change",d=>{const{name:f,checked:p}=d.target;for(const y of this._getElementsByName(f,r)){const _=p&&y.exportValue===t.exportValue;y.domElement&&(y.domElement.checked=_),e.setValue(y.id,{value:_})}e.setValue(r,{value:p})}),c.addEventListener("resetform",d=>{d.target.checked=(t.defaultFieldValue||"Off")===t.exportValue}),this.enableScripting&&this.hasJSActions&&(c.addEventListener("updatefromsandbox",d=>{this._dispatchEventFromSandbox({value(p){p.target.checked="Off"!==p.detail.value,e.setValue(r,{value:p.target.checked})}},d)}),this._setEventListeners(c,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class rf extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let o=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof o&&(o=o!==t.buttonValue,e.setValue(r,{value:o})),o)for(const d of this._getElementsByName(t.fieldName,r))e.setValue(d.id,{value:!1});const c=document.createElement("input");if(ea.add(c),c.setAttribute("data-element-id",r),c.disabled=t.readOnly,this._setRequired(c,this.data.required),c.type="radio",c.name=t.fieldName,o&&c.setAttribute("checked",!0),c.tabIndex=Nl,c.addEventListener("change",d=>{const{name:f,checked:p}=d.target;for(const y of this._getElementsByName(f,r))e.setValue(y.id,{value:!1});e.setValue(r,{value:p})}),c.addEventListener("resetform",d=>{const f=t.defaultFieldValue;d.target.checked=null!=f&&f===t.buttonValue}),this.enableScripting&&this.hasJSActions){const d=t.buttonValue;c.addEventListener("updatefromsandbox",f=>{this._dispatchEventFromSandbox({value:y=>{const _=d===y.detail.value;for(const A of this._getElementsByName(y.target.name)){const T=_&&A.id===r;A.domElement&&(A.domElement.checked=T),e.setValue(A.id,{value:T})}}},f)}),this._setEventListeners(c,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.checked)}return this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class Xb extends Yg{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class kl extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),o=document.createElement("select");ea.add(o),o.setAttribute("data-element-id",t),o.disabled=this.data.readOnly,this._setRequired(o,this.data.required),o.name=this.data.fieldName,o.tabIndex=Nl;let c=this.data.combo&&this.data.options.length>0;this.data.combo||(o.size=this.data.options.length,this.data.multiSelect&&(o.multiple=!0)),o.addEventListener("resetform",_=>{const A=this.data.defaultFieldValue;for(const T of o.options)T.selected=T.value===A});for(const _ of this.data.options){const A=document.createElement("option");A.textContent=_.displayValue,A.value=_.exportValue,r.value.includes(_.exportValue)&&(A.setAttribute("selected",!0),c=!1),o.append(A)}let d=null;if(c){const _=document.createElement("option");_.value=" ",_.setAttribute("hidden",!0),_.setAttribute("selected",!0),o.prepend(_),d=()=>{_.remove(),o.removeEventListener("input",d),d=null},o.addEventListener("input",d)}const f=_=>{const A=_?"value":"textContent",{options:T,multiple:R}=o;return R?Array.prototype.filter.call(T,L=>L.selected).map(L=>L[A]):-1===T.selectedIndex?null:T[T.selectedIndex][A]};let p=f(!1);const y=_=>Array.prototype.map.call(_.target.options,T=>({displayValue:T.textContent,exportValue:T.value}));return this.enableScripting&&this.hasJSActions?(o.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({value(T){d?.();const R=T.detail.value,L=new Set(Array.isArray(R)?R:[R]);for(const j of o.options)j.selected=L.has(j.value);e.setValue(t,{value:f(!0)}),p=f(!1)},multipleSelection(T){o.multiple=!0},remove(T){const R=o.options,L=T.detail.remove;R[L].selected=!1,o.remove(L),R.length>0&&-1===Array.prototype.findIndex.call(R,K=>K.selected)&&(R[0].selected=!0),e.setValue(t,{value:f(!0),items:y(T)}),p=f(!1)},clear(T){for(;0!==o.length;)o.remove(0);e.setValue(t,{value:null,items:[]}),p=f(!1)},insert(T){const{index:R,displayValue:L,exportValue:j}=T.detail.insert,K=o.children[R],$=document.createElement("option");$.textContent=L,$.value=j,K?K.before($):o.append($),e.setValue(t,{value:f(!0),items:y(T)}),p=f(!1)},items(T){const{items:R}=T.detail;for(;0!==o.length;)o.remove(0);for(const L of R){const{displayValue:j,exportValue:K}=L,$=document.createElement("option");$.textContent=j,$.value=K,o.append($)}o.options.length>0&&(o.options[0].selected=!0),e.setValue(t,{value:f(!0),items:y(T)}),p=f(!1)},indices(T){const R=new Set(T.detail.indices);for(const L of T.target.options)L.selected=R.has(L.index);e.setValue(t,{value:f(!0)}),p=f(!1)},editable(T){T.target.disabled=!T.detail.editable}},_)}),o.addEventListener("input",_=>{const A=f(!0),T=f(!1);e.setValue(t,{value:A}),_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:T,changeEx:A,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(o,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],_=>_.target.value)):o.addEventListener("input",function(_){e.setValue(t,{value:f(!0)})}),this.data.combo&&this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Ra extends Dn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Dn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Qb({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${gs}${r}`).join(",")),this.container}}class Qb{#e=this.#x.bind(this);#t=this.#S.bind(this);#n=this.#T.bind(this);#i=this.#A.bind(this);#r=null;#s=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#g=null;#y=null;#m=null;#v=!1;constructor({container:e,color:t,elements:r,titleObj:o,modificationDate:c,contentsObj:d,richText:f,parent:p,rect:y,parentRect:_,open:A}){this.#s=e,this.#y=o,this.#l=d,this.#g=f,this.#a=p,this.#r=t,this.#f=y,this.#d=_,this.#u=r,this.#c=Lt.toDateObject(c),this.trigger=r.flatMap(T=>T.getElementsToTriggerPopup());for(const T of this.trigger)T.addEventListener("click",this.#i),T.addEventListener("mouseenter",this.#n),T.addEventListener("mouseleave",this.#t),T.classList.add("popupTriggerArea");for(const T of r)T.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,A&&this.#A()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#r){const c=e.style.outlineColor=at.makeHexColor(...this.#r);e.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${c} 30%, white)`:at.makeHexColor(...this.#r.map(f=>Math.floor(.7*(255-f)+f)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),({dir:r.dir,str:r.textContent}=this.#y),e.append(t),this.#c){const c=document.createElement("span");c.classList.add("popupDate"),c.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),c.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(c)}const o=this.#_;if(o)Qg.render({xfaHtml:o,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const c=this._formatContents(this.#l);e.append(c)}this.#s.append(e)}get#_(){const e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#C(){return this.#_?.attributes?.style?.fontSize||0}get#w(){return this.#_?.attributes?.style?.color||null}#E(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},o={style:{color:this.#w,fontSize:this.#C?`calc(${this.#C}px * var(--scale-factor))`:""}};for(const c of e.split("\n"))t.push({name:"span",value:c,attributes:o});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const o=e.split(/(?:\r\n?|\n)/);for(let c=0,d=o.length;c<d;++c)r.append(document.createTextNode(o[c])),c<d-1&&r.append(document.createElement("br"));return r}#x(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#o)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#E(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&(({contentsObj:this.#l,richText:this.#g}=this.#m),this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#M(){if(null!==this.#p)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:o,pageY:c}}}=this.#a;let d=!!this.#d,f=d?this.#d:this.#f;for(const L of this.#u)if(!f||null!==at.intersect(L.data.rect,f)){f=L.data.rect,d=!0;break}const p=at.normalizeRect([f[0],e[3]-f[1]+e[1],f[2],e[3]-f[3]+e[1]]);this.#p=[100*(p[0]+(d?f[2]-f[0]+5:0)-o)/t,100*(p[1]-c)/r];const{style:R}=this.#s;R.left=`${this.#p[0]}%`,R.top=`${this.#p[1]}%`}#A(){this.#o=!this.#o,this.#o?(this.#T(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#T(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!this.#o&&this.isVisible&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#s.hidden=!0)}maybeShow(){this.#v&&(this.#h||this.#T(),this.#v=!1,this.#s.hidden=!1)}get isVisible(){return!1===this.#s.hidden}}class yd extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Yb extends Dn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=Bs(e.rect),o=this.svgFactory.create(t,r,!0),c=this.#e=this.svgFactory.createElement("svg:line");return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zb extends Dn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=Bs(e.rect),o=this.svgFactory.create(t,r,!0),c=e.borderStyle.width,d=this.#e=this.svgFactory.createElement("svg:rect");return d.setAttribute("x",c/2),d.setAttribute("y",c/2),d.setAttribute("width",t-c),d.setAttribute("height",r-c),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jb extends Dn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=Bs(e.rect),o=this.svgFactory.create(t,r,!0),c=e.borderStyle.width,d=this.#e=this.svgFactory.createElement("svg:ellipse");return d.setAttribute("cx",t/2),d.setAttribute("cy",r/2),d.setAttribute("rx",t/2-c/2),d.setAttribute("ry",r/2-c/2),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class e_ extends Dn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:o}}=this;if(!t)return this.container;const{width:c,height:d}=Bs(e),f=this.svgFactory.create(c,d,!0);let p=[];for(let _=0,A=t.length;_<A;_+=2)p.push(`${t[_]-e[0]},${e[3]-t[_+1]}`);p=p.join(" ");const y=this.#e=this.svgFactory.createElement(this.svgElementName);return y.setAttribute("points",p),y.setAttribute("stroke-width",r.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),f.append(y),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class NE extends e_{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sf extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Oa extends Dn{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?At.HIGHLIGHT:At.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:r,popupRef:o}}=this,{width:c,height:d}=Bs(e),f=this.svgFactory.create(c,d,!0);for(const p of t){let y=[];for(let A=0,T=p.length;A<T;A+=2)y.push(`${p[A]-e[0]},${e[3]-p[A+1]}`);y=y.join(" ");const _=this.svgFactory.createElement(this.svgElementName);this.#e.push(_),_.setAttribute("points",y),_.setAttribute("stroke-width",r.width||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","transparent"),f.append(_)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jg extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Kc extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class af extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class vd extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class t_ extends Dn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class em extends Dn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||0===t.fillAlpha?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:o}=qn.platform;return e.addEventListener("keydown",c=>{"Enter"===c.key&&(o?c.metaKey:c.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class tm{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:o,page:c,viewport:d,structTreeLayer:f}){this.div=e,this.#e=t,this.#t=r,this.#i=f||null,this.page=c,this.viewport=d,this.zIndex=0,this._annotationEditorUIManager=o}hasEditableAnnotations(){return this.#n.size>0}#r(e,t){var r=this;return(0,G.A)(function*(){const o=e.firstChild||e,c=o.id=`${gs}${t}`,d=yield r.#i?.getAriaAttributes(c);if(d)for(const[f,p]of d)o.setAttribute(f,p);r.div.append(e),r.#e?.moveElementInDOM(r.div,e,o,!1)})()}render(e){var t=this;return(0,G.A)(function*(){const{annotations:r}=e,o=t.div;et(o,t.viewport);const c=new Map,d={data:null,layer:o,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new pd,annotationStorage:e.annotationStorage||new ho,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:t,elements:null};for(const f of r){if(f.noHTML)continue;const p=16===f.annotationType;if(p){const A=c.get(f.id);if(!A)continue;d.elements=A}else{const{width:A,height:T}=Bs(f.rect);if(A<=0||T<=0)continue}d.data=f;const y=Gc.create(d);if(!y.isRenderable)continue;if(!p&&f.popupRef){const A=c.get(f.popupRef);A?A.push(y):c.set(f.popupRef,[y])}const _=y.render();f.hidden&&(_.style.visibility="hidden"),yield t.#r(_,f.id),y._isEditable&&(t.#n.set(y.data.id,y),t._annotationEditorUIManager?.renderAnnotationElement(y))}t.#s()})()}update({viewport:e}){const t=this.div;this.viewport=e,et(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const o=e.querySelector(`[data-annotation-id="${t}"]`);if(!o)continue;r.className="annotationContent";const{firstChild:c}=o;c?"CANVAS"===c.nodeName?c.replaceWith(r):c.classList.contains("annotationContent")?c.after(r):c.before(r):o.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const bd=/\r\n?|\n/g;class Nn extends nt{#e;#t="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Nn.prototype,t=c=>c.isEmpty(),r=Ko.TRANSLATE_SMALL,o=Ko.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new st([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:t}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Nn._defaultColor||nt._defaultLineColor,this.#r=e.fontSize||Nn._defaultFontSize}static initialize(e,t){nt.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case vt.FREETEXT_SIZE:Nn._defaultFontSize=t;break;case vt.FREETEXT_COLOR:Nn._defaultColor=t}}updateParams(e,t){switch(e){case vt.FREETEXT_SIZE:this.#s(t);break;case vt.FREETEXT_COLOR:this.#l(t)}}static get defaultPropertiesToUpdate(){return[[vt.FREETEXT_SIZE,Nn._defaultFontSize],[vt.FREETEXT_COLOR,Nn._defaultColor||nt._defaultLineColor]]}get propertiesToUpdate(){return[[vt.FREETEXT_SIZE,this.#r],[vt.FREETEXT_COLOR,this.#e]]}#s(e){const t=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-this.#r)*this.parentScale),this.#r=o,this.#u()},r=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=o=>{this.#e=this.editorDiv.style.color=o},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Nn._internalPadding*e,-(Nn._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(At.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&"BR"===r.nodeName||(e.push(Nn.#a(r)),t=r);return e.join("\n")}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,d=c.style.display,f=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),r=c.getBoundingClientRect(),c.remove(),c.style.display=d,c.classList.toggle("hidden",f)}this.rotation%180==this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const r=o=>{this.#t=o,o?(this.#d(),this._uiManager.rebuild(this),this.#u()):this.remove()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Nn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#r}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Tn(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[y,_]=this.pageDimensions,[A,T]=this.pageTranslation;let R,L;switch(this.rotation){case 0:R=e+(d[0]-A)/y,L=t+this.height-(d[1]-T)/_;break;case 90:R=e+(d[0]-A)/y,L=t-(d[1]-T)/_,[f,p]=[p,-f];break;case 180:R=e-this.width+(d[0]-A)/y,L=t-(d[1]-T)/_,[f,p]=[-f,-p];break;case 270:R=e+(d[0]-A-this.height*_)/y,L=t+(d[1]-T-this.width*y)/_,[f,p]=[-p,f]}this.setAt(R*o,L*c,f,p)}else this.setAt(e*o,t*c,this.width*o,this.height*c);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(bd,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(1===r.length&&"text/plain"===r[0])return;e.preventDefault();const o=Nn.#h(t.getData("text")||"").replaceAll(bd,"\n");if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const d=c.getRangeAt(0);if(!o.includes("\n"))return d.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),void c.collapseToStart();const{startContainer:f,startOffset:p}=d,y=[],_=[];if(f.nodeType===Node.TEXT_NODE){const R=f.parentElement;if(_.push(f.nodeValue.slice(p).replaceAll(bd,"")),R!==this.editorDiv){let L=y;for(const j of this.editorDiv.childNodes)j!==R?L.push(Nn.#a(j)):L=_}y.push(f.nodeValue.slice(0,p).replaceAll(bd,""))}else if(f===this.editorDiv){let R=y,L=0;for(const j of this.editorDiv.childNodes)L++===p&&(R=_),R.push(Nn.#a(j))}this.#t=`${y.join("\n")}${o}${_.join("\n")}`,this.#d();const A=new Range;let T=y.reduce((R,L)=>R+L.length,0);for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const L=R.nodeValue.length;if(T<=L){A.setStart(R,T),A.setEnd(R,T);break}T-=L}c.removeAllRanges(),c.addRange(A)}#d(){if(this.editorDiv.replaceChildren(),this.#t)for(const e of this.#t.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll("\xa0"," ")}static#h(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,r){var o=()=>super.deserialize,c=this;return(0,G.A)(function*(){let d=null;if(e instanceof yd){const{data:{defaultAppearanceData:{fontSize:p,fontColor:y},rect:_,rotation:A,id:T,popupRef:R},textContent:L,textPosition:j,parent:{page:{pageNumber:K}}}=e;if(!L||0===L.length)return null;d=e={annotationType:At.FREETEXT,color:Array.from(y),fontSize:p,value:L.join("\n"),position:j,pageIndex:K-1,rect:_.slice(0),rotation:A,id:T,deleted:!1,popupRef:R}}const f=yield o().call(c,e,t,r);return f.#r=e.fontSize,f.#e=at.makeHexColor(...e.color),f.#t=Nn.#h(e.value),f.annotationElementId=e.id||null,f._initialData=d,f})()}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Nn._internalPadding*this.parentScale,r=this.getRect(t,t),o=nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),c={annotationType:At.FREETEXT,color:o,fontSize:this.#r,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!this.#p(c)?null:(c.id=this.annotationElementId,c)}#p(e){const{value:t,fontSize:r,color:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((d,f)=>d!==o[f])||e.pageIndex!==c}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#r}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const c of this.#t.split("\n")){const d=document.createElement("div");d.append(c?document.createTextNode(c):document.createElement("br")),t.append(d)}const o=Nn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class nm{toSVGPath(){xt("Abstract method `toSVGPath` must be implemented.")}get box(){xt("Abstract getter `box` must be implemented.")}serialize(e,t){xt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){xt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){xt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Hs{#e;#t=[];#n;#i;#r=[];#s=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#g=Hs.#p+Hs.#f;constructor({x:e,y:t},r,o,c,d,f=0){this.#e=r,this.#o=c*o,this.#i=d,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=f,this.#a=Hs.#p*o,this.#u=Hs.#g*o,this.#d=o,this.#h.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#y(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[r,o,c,d]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/c,(this.#c+(e[1]-t[1])/2-o)/d,(this.#l+(t[0]-e[0])/2-r)/c,(this.#c+(t[1]-e[1])/2-o)/d]}add({x:e,y:t}){this.#l=e,this.#c=t;const[r,o,c,d]=this.#e;let[f,p,y,_]=this.#s.subarray(8,12);const A=e-y,T=t-_,R=Math.hypot(A,T);if(R<this.#u)return!1;const L=R-this.#a,j=L/R,K=j*A,$=j*T;let Z=f,te=p;f=y,p=_,y+=K,_+=$,this.#h?.push(e,t);const pe=-$/L*this.#o,Ce=K/L*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([y+pe,_+Ce],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([y-pe,_-Ce],16),isNaN(this.#s[6])?(0===this.#r.length&&(this.#s.set([f+pe,p+Ce],2),this.#r.push(NaN,NaN,NaN,NaN,(f+pe-r)/c,(p+Ce-o)/d),this.#s.set([f-pe,p-Ce],14),this.#t.push(NaN,NaN,NaN,NaN,(f-pe-r)/c,(p-Ce-o)/d)),this.#s.set([Z,te,f,p,y,_],6),!this.isEmpty()):(this.#s.set([Z,te,f,p,y,_],6),Math.abs(Math.atan2(te-p,Z-f)-Math.atan2($,K))<Math.PI/2?([f,p,y,_]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((f+y)/2-r)/c,((p+_)/2-o)/d),[f,p,Z,te]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((Z+f)/2-r)/c,((te+p)/2-o)/d),!0):([Z,te,f,p,y,_]=this.#s.subarray(0,6),this.#r.push(((Z+5*f)/6-r)/c,((te+5*p)/6-o)/d,((5*f+y)/6-r)/c,((5*p+_)/6-o)/d,((f+y)/2-r)/c,((p+_)/2-o)/d),[y,_,f,p,Z,te]=this.#s.subarray(12,18),this.#t.push(((Z+5*f)/6-r)/c,((te+5*p)/6-o)/d,((5*f+y)/6-r)/c,((5*p+_)/6-o)/d,((f+y)/2-r)/c,((p+_)/2-o)/d),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#m();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let o=6;o<e.length;o+=6)isNaN(e[o])?r.push(`L${e[o+4]} ${e[o+5]}`):r.push(`C${e[o]} ${e[o+1]} ${e[o+2]} ${e[o+3]} ${e[o+4]} ${e[o+5]}`);this.#_(r);for(let o=t.length-6;o>=6;o-=6)isNaN(t[o])?r.push(`L${t[o+4]} ${t[o+5]}`):r.push(`C${t[o]} ${t[o+1]} ${t[o+2]} ${t[o+3]} ${t[o+4]} ${t[o+5]}`);return this.#v(r),r.join(" ")}#m(){const[e,t,r,o]=this.#e,[c,d,f,p]=this.#y();return`M${(this.#s[2]-e)/r} ${(this.#s[3]-t)/o} L${(this.#s[4]-e)/r} ${(this.#s[5]-t)/o} L${c} ${d} L${f} ${p} L${(this.#s[16]-e)/r} ${(this.#s[17]-t)/o} L${(this.#s[14]-e)/r} ${(this.#s[15]-t)/o} Z`}#v(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#_(e){const[t,r,o,c]=this.#e,d=this.#s.subarray(4,6),f=this.#s.subarray(16,18),[p,y,_,A]=this.#y();e.push(`L${(d[0]-t)/o} ${(d[1]-r)/c} L${p} ${y} L${_} ${A} L${(f[0]-t)/o} ${(f[1]-r)/c}`)}newFreeDrawOutline(e,t,r,o,c,d){return new _d(e,t,r,o,c,d)}getOutlines(){const e=this.#r,t=this.#t,r=this.#s,[o,c,d,f]=this.#e,p=new Float64Array((this.#h?.length??0)+2);for(let A=0,T=p.length-2;A<T;A+=2)p[A]=(this.#h[A]-o)/d,p[A+1]=(this.#h[A+1]-c)/f;if(p[p.length-2]=(this.#l-o)/d,p[p.length-1]=(this.#c-c)/f,isNaN(r[6])&&!this.isEmpty())return this.#C(p);const y=new Float64Array(this.#r.length+24+this.#t.length);let _=e.length;for(let A=0;A<_;A+=2)isNaN(e[A])?y[A]=y[A+1]=NaN:(y[A]=e[A],y[A+1]=e[A+1]);_=this.#E(y,_);for(let A=t.length-6;A>=6;A-=6)for(let T=0;T<6;T+=2)isNaN(t[A+T])?(y[_]=y[_+1]=NaN,_+=2):(y[_]=t[A+T],y[_+1]=t[A+T+1],_+=2);return this.#w(y,_),this.newFreeDrawOutline(y,p,this.#e,this.#d,this.#n,this.#i)}#C(e){const t=this.#s,[r,o,c,d]=this.#e,[f,p,y,_]=this.#y(),A=new Float64Array(36);return A.set([NaN,NaN,NaN,NaN,(t[2]-r)/c,(t[3]-o)/d,NaN,NaN,NaN,NaN,(t[4]-r)/c,(t[5]-o)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,_,NaN,NaN,NaN,NaN,(t[16]-r)/c,(t[17]-o)/d,NaN,NaN,NaN,NaN,(t[14]-r)/c,(t[15]-o)/d],0),this.newFreeDrawOutline(A,e,this.#e,this.#d,this.#n,this.#i)}#w(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+6}#E(e,t){const r=this.#s.subarray(4,6),o=this.#s.subarray(16,18),[c,d,f,p]=this.#e,[y,_,A,T]=this.#y();return e.set([NaN,NaN,NaN,NaN,(r[0]-c)/f,(r[1]-d)/p,NaN,NaN,NaN,NaN,y,_,NaN,NaN,NaN,NaN,A,T,NaN,NaN,NaN,NaN,(o[0]-c)/f,(o[1]-d)/p],t),t+24}}class _d extends nm{#e;#t=null;#n;#i;#r;#s;#l;constructor(e,t,r,o,c,d){super(),this.#l=e,this.#r=t,this.#e=r,this.#s=o,this.#n=c,this.#i=d,this.#a(d);const{x:f,y:p,width:y,height:_}=this.#t;for(let A=0,T=e.length;A<T;A+=2)e[A]=(e[A]-f)/y,e[A+1]=(e[A+1]-p)/_;for(let A=0,T=t.length;A<T;A+=2)t[A]=(t[A]-f)/y,t[A+1]=(t[A+1]-p)/_}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6)isNaN(this.#l[t])?e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`):e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`);return e.push("Z"),e.join(" ")}serialize([e,t,r,o],c){const d=r-e,f=o-t;let p,y;switch(c){case 0:p=this.#c(this.#l,e,o,d,-f),y=this.#c(this.#r,e,o,d,-f);break;case 90:p=this.#u(this.#l,e,t,d,f),y=this.#u(this.#r,e,t,d,f);break;case 180:p=this.#c(this.#l,r,t,-d,f),y=this.#c(this.#r,r,t,-d,f);break;case 270:p=this.#u(this.#l,r,o,-d,-f),y=this.#u(this.#r,r,o,-d,-f)}return{outline:Array.from(p),points:[Array.from(y)]}}#c(e,t,r,o,c){const d=new Float64Array(e.length);for(let f=0,p=e.length;f<p;f+=2)d[f]=t+e[f]*o,d[f+1]=r+e[f+1]*c;return d}#u(e,t,r,o,c){const d=new Float64Array(e.length);for(let f=0,p=e.length;f<p;f+=2)d[f]=t+e[f+1]*o,d[f+1]=r+e[f]*c;return d}#a(e){const t=this.#l;let r=t[4],o=t[5],c=r,d=o,f=r,p=o,y=r,_=o;const A=e?Math.max:Math.min;for(let K=6,$=t.length;K<$;K+=6){if(isNaN(t[K]))c=Math.min(c,t[K+4]),d=Math.min(d,t[K+5]),f=Math.max(f,t[K+4]),p=Math.max(p,t[K+5]),_<t[K+5]?(y=t[K+4],_=t[K+5]):_===t[K+5]&&(y=A(y,t[K+4]));else{const Z=at.bezierBoundingBox(r,o,...t.slice(K,K+6));c=Math.min(c,Z[0]),d=Math.min(d,Z[1]),f=Math.max(f,Z[2]),p=Math.max(p,Z[3]),_<Z[3]?(y=Z[2],_=Z[3]):_===Z[3]&&(y=A(y,Z[2]))}r=t[K+4],o=t[K+5]}const T=c-this.#n,R=d-this.#n,L=f-c+2*this.#n,j=p-d+2*this.#n;this.#t={x:T,y:R,width:L,height:j,lastPoint:[y,_]}}get box(){return this.#t}newOutliner(e,t,r,o,c,d=0){return new Hs(e,t,r,o,c,d)}getNewOutline(e,t){const{x:r,y:o,width:c,height:d}=this.#t,[f,p,y,_]=this.#e,A=c*y,T=d*_,R=r*y+f,L=o*_+p,j=this.newOutliner({x:this.#r[0]*A+R,y:this.#r[1]*T+L},this.#e,this.#s,e,this.#i,t??this.#n);for(let K=2;K<this.#r.length;K+=2)j.add({x:this.#r[K]*A+R,y:this.#r[K+1]*T+L});return j.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class lf{#e;#t=[];#n=[];constructor(e,t=0,r=0,o=!0){let c=1/0,d=-1/0,f=1/0,p=-1/0;const _=10**-4;for(const{x:$,y:Z,width:te,height:se}of e){const ue=Math.floor(($-t)/_)*_,pe=Math.ceil(($+te+t)/_)*_,Ce=Math.floor((Z-t)/_)*_,Ae=Math.ceil((Z+se+t)/_)*_;this.#t.push([ue,Ce,Ae,!0],[pe,Ce,Ae,!1]),c=Math.min(c,ue),d=Math.max(d,pe),f=Math.min(f,Ce),p=Math.max(p,Ae)}const A=d-c+2*r,T=p-f+2*r,R=c-r,L=f-r,j=this.#t.at(o?-1:-2),K=[j[0],j[2]];for(const $ of this.#t){const[Z,te,se]=$;$[0]=(Z-R)/A,$[1]=(te-L)/T,$[2]=(se-L)/T}this.#e={x:R,y:L,width:A,height:T,lastPoint:K}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#s(t)):(this.#l(t),e.push(...this.#c(t)));return this.#i(e)}#i(e){const t=[],r=new Set;for(const d of e){const[f,p,y]=d;t.push([f,p,d],[f,y,d])}t.sort((d,f)=>d[1]-f[1]||d[0]-f[0]);for(let d=0,f=t.length;d<f;d+=2){const p=t[d][2],y=t[d+1][2];p.push(y),y.push(p),r.add(p),r.add(y)}const o=[];let c;for(;r.size>0;){const d=r.values().next().value;let[f,p,y,_,A]=d;r.delete(d);let T=f,R=p;for(c=[f,y],o.push(c);;){let L;if(r.has(_))L=_;else{if(!r.has(A))break;L=A}r.delete(L),[f,p,y,_,A]=L,T!==f&&(c.push(T,R,f,R===p?p:y),T=f),R=R===p?y:p}c.push(T,R)}return new wd(o,this.#e)}#r(e){const t=this.#n;let r=0,o=t.length-1;for(;r<=o;){const c=r+o>>1,d=t[c][0];if(d===e)return c;d<e?r=c+1:o=c-1}return o+1}#s([,e,t]){const r=this.#r(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){const r=this.#r(e);for(let o=r;o<this.#n.length;o++){const[c,d]=this.#n[o];if(c!==e)break;if(c===e&&d===t)return void this.#n.splice(o,1)}for(let o=r-1;o>=0;o--){const[c,d]=this.#n[o];if(c!==e)break;if(c===e&&d===t)return void this.#n.splice(o,1)}}#c(e){const[t,r,o]=e,c=[[t,r,o]],d=this.#r(o);for(let f=0;f<d;f++){const[p,y]=this.#n[f];for(let _=0,A=c.length;_<A;_++){const[,T,R]=c[_];if(!(y<=T||R<=p)){if(T>=p){if(R>y)c[_][1]=y;else{if(1===A)return[];c.splice(_,1),_--,A--}continue}c[_][2]=p,R>y&&c.push([t,y,R])}}}return c}}class wd extends nm{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[r,o]=t;e.push(`M${r} ${o}`);for(let c=2;c<t.length;c+=2){const d=t[c],f=t[c+1];d===r?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${d}`),r=d)}e.push("Z")}return e.join(" ")}serialize([e,t,r,o],c){const d=[],f=r-e,p=o-t;for(const y of this.#t){const _=new Array(y.length);for(let A=0;A<y.length;A+=2)_[A]=e+y[A]*f,_[A+1]=o-y[A+1]*p;d.push(_)}return d}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class qc extends Hs{newFreeDrawOutline(e,t,r,o,c,d){return new n_(e,t,r,o,c,d)}get classNamesForDrawing(){return["highlight","free"]}}class n_ extends _d{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,o,c,d=0){return new qc(e,t,r,o,c,d)}}class kr{#e=null;#t=null;#n;#i=null;#r=!1;#s=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return Yt(this,"_keyboardManager",new st([[["Escape","mac+Escape"],kr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],kr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],kr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],kr.prototype._moveToPrevious],[["Home","mac+Home"],kr.prototype._moveToBeginning],[["End","mac+End"],kr.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#d=vt.HIGHLIGHT_COLOR,this.#l=e):(this.#s=!0,this.#d=vt.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",kr.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#i=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",Wt,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,o]of this.#a.highlightColors){const c=document.createElement("button");c.tabIndex="0",c.role="option",c.setAttribute("data-color",o),c.title=r,c.setAttribute("data-l10n-id",kr.#o[r]);const d=document.createElement("span");c.append(d),d.className="swatch",d.style.backgroundColor=o,c.setAttribute("aria-selected",o===this.#n),c.addEventListener("click",this.#p.bind(this,o),{signal:t}),e.append(c)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e)return void this.#g(e);const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){this.#m?e.target!==this.#e?e.target.nextSibling?.focus():this.#i.firstChild?.focus():this.#g(e)}_moveToPrevious(e){e.target!==this.#i?.firstChild&&e.target!==this.#e?(this.#m||this.#g(e),e.target.previousSibling?.focus()):this.#m&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#m?this.#i.firstChild?.focus():this.#g(e)}_moveToEnd(e){this.#m?this.#i.lastChild?.focus():this.#g(e)}#f(e){kr._keyboardManager.exec(this,e)}#g(e){if(this.#m)return void this.hideDropdown();if(this.#r=0===e.detail,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#y.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#i)return void this.#i.classList.remove("hidden");const t=this.#i=this.#h();this.#e.append(t)}#y(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m)return void this.#l?.unselect();this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#a.highlightColors.values();for(const r of this.#i.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class ai extends nt{#e=null;#t=0;#n;#i=null;#r=null;#s=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#g="";#y;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ai.prototype;return Yt(this,"_keyboardManager",new st([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ai._defaultColor,this.#y=e.thickness||ai._defaultThickness,this.#p=e.opacity||ai._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#_(e),this.#M()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#v(),this.#M(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#y,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){const e=new lf(this.#n,.001);this.#a=e.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box);const t=new lf(this.#n,.0025,.001,"ltr"===this._uiManager.direction);this.#s=t.getOutlines();const{lastPoint:r}=this.#s.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#_({highlightOutlines:e,highlightId:t,clipPathId:r}){if(this.#a=e,this.#s=e.getNewOutline(this.#y/2+1.5,.0025),t>=0)this.#d=t,this.#i=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#s);else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,ai.#A(this.#a.box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#s),this.parent.drawLayer.updateBox(this.#f,ai.#A(this.#s.box,_))}const{x:c,y:d,width:f,height:p}=e.box;switch(this.rotation){case 0:this.x=c,this.y=d,this.width=f,this.height=p;break;case 90:{const[_,A]=this.parentDimensions;this.x=d,this.y=1-c,this.width=f*A/_,this.height=p*_/A;break}case 180:this.x=1-c,this.y=1-d,this.width=f,this.height=p;break;case 270:{const[_,A]=this.parentDimensions;this.x=1-d,this.y=c,this.width=f*A/_,this.height=p*_/A;break}}const{lastPoint:y}=this.#s.box;this.#h=[(y[0]-c)/f,(y[1]-d)/p]}static initialize(e,t){nt.initialize(e,t),ai._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case vt.HIGHLIGHT_DEFAULT_COLOR:ai._defaultColor=t;break;case vt.HIGHLIGHT_THICKNESS:ai._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case vt.HIGHLIGHT_COLOR:this.#C(t);break;case vt.HIGHLIGHT_THICKNESS:this.#w(t)}}static get defaultPropertiesToUpdate(){return[[vt.HIGHLIGHT_DEFAULT_COLOR,ai._defaultColor],[vt.HIGHLIGHT_THICKNESS,ai._defaultThickness]]}get propertiesToUpdate(){return[[vt.HIGHLIGHT_COLOR,this.color||ai._defaultColor],[vt.HIGHLIGHT_THICKNESS,this.#y||ai._defaultThickness],[vt.HIGHLIGHT_FREE,this.#o]]}#C(e){const t=(c,d)=>{this.color=c,this.parent?.drawLayer.changeColor(this.#d,c),this.#r?.updateColor(c),this.#p=d,this.parent?.drawLayer.changeOpacity(this.#d,d)},r=this.color,o=this.#p;this.addCommands({cmd:t.bind(this,e,ai._defaultOpacity),undo:t.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){const t=this.#y,r=o=>{this.#y=o,this.#E(o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){var e=()=>super.addEditToolbar,t=this;return(0,G.A)(function*(){const r=yield e().call(t);return r?(t._uiManager.highlightColors&&(t.#r=new kr({editor:t}),r.addColorPicker(t.#r)),r):null})()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#x():e&&(this.#M(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#E(e){if(!this.#o)return;this.#_({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#x(){null===this.#d||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#M(e=this.parent){null===this.#d&&(({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw(this.#a,this.color,this.#p)),this.#f=e.drawLayer.drawOutline(this.#s),this.#u&&(this.#u.style.clipPath=this.#i))}static#A({x:e,y:t,width:r,height:o},c){switch(c){case 90:return{x:1-t-o,y:e,width:o,height:r};case 180:return{x:1-e-r,y:1-t-o,width:r,height:o};case 270:return{x:t,y:1-e-r,width:o,height:r}}return{x:e,y:t,width:r,height:o}}rotate(e){const{drawLayer:t}=this.parent;let r;r=this.#o?ai.#A(this.#a.box,e=(e-this.rotation+360)%360):ai.#A(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,ai.#A(this.#s.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#T.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),Tn(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#T(e){ai._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#S(!0);break;case 1:case 3:this.#S(!1)}}#S(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#S(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#O(){if(this.#o)return null;const[e,t]=this.pageDimensions,[r,o]=this.pageTranslation,c=this.#n,d=new Float32Array(8*c.length);let f=0;for(const{x:p,y,width:_,height:A}of c){const T=p*e+r,R=(1-y-A)*t+o;d[f]=d[f+4]=T,d[f+1]=d[f+3]=R,d[f+2]=d[f+6]=T+_*e,d[f+5]=d[f+7]=R+A*t,f+=8}return d}#D(e){return this.#a.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:o,y:c}){const{x:d,y:f,width:p,height:y}=r.getBoundingClientRect(),_=new AbortController,A=e.combinedSignal(_),R=L=>{_.abort(),this.#I(e,L)};window.addEventListener("blur",R,{signal:A}),window.addEventListener("pointerup",R,{signal:A}),window.addEventListener("pointerdown",L=>{L.preventDefault(),L.stopPropagation()},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Wt,{signal:A}),r.addEventListener("pointermove",this.#b.bind(this,e),{signal:A}),this._freeHighlight=new qc({x:o,y:c},[d,f,p,y],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#b(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#I(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,r){var o=()=>super.deserialize,c=this;return(0,G.A)(function*(){let d=null;if(e instanceof Jg){const{data:{quadPoints:K,rect:$,rotation:Z,id:te,color:se,opacity:ue,popupRef:pe},parent:{page:{pageNumber:Ce}}}=e;d=e={annotationType:At.HIGHLIGHT,color:Array.from(se),opacity:ue,quadPoints:K,boxes:null,pageIndex:Ce-1,rect:$.slice(0),rotation:Z,id:te,deleted:!1,popupRef:pe}}else if(e instanceof Oa){const{data:{inkLists:K,rect:$,rotation:Z,id:te,color:se,borderStyle:{rawWidth:ue},popupRef:pe},parent:{page:{pageNumber:Ce}}}=e;d=e={annotationType:At.HIGHLIGHT,color:Array.from(se),thickness:ue,inkLists:K,boxes:null,pageIndex:Ce-1,rect:$.slice(0),rotation:Z,id:te,deleted:!1,popupRef:pe}}const{color:f,quadPoints:p,inkLists:y,opacity:_}=e,A=yield o().call(c,e,t,r);A.color=at.makeHexColor(...f),A.#p=_||1,y&&(A.#y=e.thickness),A.annotationElementId=e.id||null,A._initialData=d;const[T,R]=A.pageDimensions,[L,j]=A.pageTranslation;if(p){const K=A.#n=[];for(let $=0;$<p.length;$+=8)K.push({x:(p[$]-L)/T,y:1-(p[$+1]-j)/R,width:(p[$+2]-p[$])/T,height:(p[$+1]-p[$+5])/R});A.#v(),A.#M(),A.rotate(A.rotation)}else if(y){A.#o=!0;const K=y[0],$={x:K[0]-L,y:R-(K[1]-j)},Z=new qc($,[0,0,T,R],1,A.#y/2,!0,.001);for(let ue=0,pe=K.length;ue<pe;ue+=2)$.x=K[ue]-L,$.y=R-(K[ue+1]-j),Z.add($);const{id:te,clipPathId:se}=t.drawLayer.draw(Z,A.color,A._defaultOpacity,!0);A.#_({highlightOutlines:Z.getOutlines(),highlightId:te,clipPathId:se}),A.#M()}return A})()}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=nt._colorManager.convert(this.color),o={annotationType:At.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#y,quadPoints:this.#O(),outlines:this.#D(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#R(o)?null:(o.id=this.annotationElementId,o)}#R(e){const{color:t}=this._initialData;return e.color.some((r,o)=>r!==t[o])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Oi extends nt{#e=0;#t=0;#n=null;#i=new Path2D;#r=!1;#s=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=At.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){nt.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case vt.INK_THICKNESS:Oi._defaultThickness=t;break;case vt.INK_COLOR:Oi._defaultColor=t;break;case vt.INK_OPACITY:Oi._defaultOpacity=t/100}}updateParams(e,t){switch(e){case vt.INK_THICKNESS:this.#p(t);break;case vt.INK_COLOR:this.#f(t);break;case vt.INK_OPACITY:this.#g(t)}}static get defaultPropertiesToUpdate(){return[[vt.INK_THICKNESS,Oi._defaultThickness],[vt.INK_COLOR,Oi._defaultColor||nt._defaultLineColor],[vt.INK_OPACITY,Math.round(100*Oi._defaultOpacity)]]}get propertiesToUpdate(){return[[vt.INK_THICKNESS,this.thickness||Oi._defaultThickness],[vt.INK_COLOR,this.color||Oi._defaultColor||nt._defaultLineColor],[vt.INK_OPACITY,Math.round(100*(this.opacity??Oi._defaultOpacity))]]}#p(e){const t=o=>{this.thickness=o,this.#N()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=o=>{this.color=o,this.#A()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){const t=o=>{this.opacity=o,this.#A()},r=this.opacity;this.addCommands({cmd:t.bind(this,e/=100),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#O(),this.#D()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#N()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions;this.setDimensions(this.width*e,this.height*t)}enableEditMode(){this.#r||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.#T())}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#S())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#y(){const{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){const{ctx:e,color:t,opacity:r,thickness:o,parentScale:c,scaleFactor:d}=this;e.lineWidth=o*c/d,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${function Rr(l){return Math.round(Math.min(255,Math.max(1,255*l))).toString(16).padStart(2,"0")}(r)}`}#v(e,t){this.canvas.addEventListener("contextmenu",Wt,{signal:this._uiManager._signal}),this.#S(),this.#s=new AbortController;const r=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#b(),this.thickness||=Oi._defaultThickness,this.color||=Oi._defaultColor||nt._defaultLineColor,this.opacity??=Oi._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#E(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#_(e,t){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===o)return;const c=this.currentPath;let d=this.#i;if(c.push([e,t]),this.#l=!0,c.length<=2)return d.moveTo(...c[0]),void d.lineTo(e,t);3===c.length&&(this.#i=d=new Path2D,d.moveTo(...c[0])),this.#x(d,...c.at(-3),...c.at(-2),e,t)}#C(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#w(e,t){let r;if(this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#_(e,t),this.#C(),1!==this.currentPath.length)r=this.#M();else{const p=[e,t];r=[[p,p.slice(),p.slice(),p]]}const o=this.#i,c=this.currentPath;this.currentPath=[],this.#i=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(c),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#O(),this.#D()),this.#N())},mustExec:!0})}#E(){if(!this.#l)return;this.#l=!1;Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),r=t.map(_=>_[0]),o=t.map(_=>_[1]),{ctx:y}=(Math.min(...r),Math.max(...r),Math.min(...o),Math.max(...o),this);y.save(),y.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _ of this.bezierPath2D)y.stroke(_);y.stroke(this.#i),y.restore()}#x(e,t,r,o,c,d,f){const p=(t+o)/2,y=(r+c)/2,_=(o+d)/2,A=(c+f)/2;e.bezierCurveTo(p+2*(o-p)/3,y+2*(c-y)/3,_+2*(o-_)/3,A+2*(c-A)/3,_,A)}#M(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let r,[o,c]=e[0];for(r=1;r<e.length-2;r++){const[T,R]=e[r],[L,j]=e[r+1],K=(T+L)/2,$=(R+j)/2;t.push([[o,c],[o+2*(T-o)/3,c+2*(R-c)/3],[K+2*(T-K)/3,$+2*(R-$)/3],[K,$]]),[o,c]=[K,$]}const[d,f]=e[r],[p,y]=e[r+1];return t.push([[o,c],[o+2*(d-o)/3,c+2*(f-c)/3],[p+2*(d-p)/3,y+2*(f-y)/3],[p,y]]),t}#A(){if(this.isEmpty())return void this.#R();this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#R();for(const r of this.bezierPath2D)t.stroke(r)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#N(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#T(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#S(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){0!==e.button||!this.isInEditMode()||this.#r||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#v(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#_(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#s?.abort(),this.#s=null,this.#T(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",Wt)},10),this.#w(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#O(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#D(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#r}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,c,d]=this.#y();if(this.setAt(r,o,0,0),this.setDims(c,d),this.#O(),this.width){const[f,p]=this.parentDimensions;this.setAspectRatio(this.width*f,this.height*p),this.setAt(e*f,t*p,this.width*f,this.height*p),this.#c=!0,this.#b(),this.setDims(this.width*f,this.height*p),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#D(),this.div}#b(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#R()}setDimensions(e,t){const r=Math.round(e),o=Math.round(t);if(this.#d===r&&this.#o===o)return;this.#d=r,this.#o=o,this.canvas.style.visibility="hidden";const[c,d]=this.parentDimensions;this.width=e/c,this.height=t/d,this.fixAndSetPosition(),this.#r&&this.#I(e,t),this.#b(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#I(e,t){const r=this.#j(),o=(e-r)/this.#t,c=(t-r)/this.#e;this.scaleFactor=Math.min(o,c)}#R(){const e=this.#j()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#F(e){const t=new Path2D;for(let r=0,o=e.length;r<o;r++){const[c,d,f,p]=e[r];0===r&&t.moveTo(...c),t.bezierCurveTo(d[0],d[1],f[0],f[1],p[0],p[1])}return t}static#U(e,t,r){const[o,c,d,f]=t;switch(r){case 0:for(let p=0,y=e.length;p<y;p+=2)e[p]+=o,e[p+1]=f-e[p+1];break;case 90:for(let p=0,y=e.length;p<y;p+=2){const _=e[p];e[p]=e[p+1]+o,e[p+1]=_+c}break;case 180:for(let p=0,y=e.length;p<y;p+=2)e[p]=d-e[p],e[p+1]+=c;break;case 270:for(let p=0,y=e.length;p<y;p+=2){const _=e[p];e[p]=d-e[p+1],e[p+1]=f-_}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,r){const[o,c,d,f]=t;switch(r){case 0:for(let p=0,y=e.length;p<y;p+=2)e[p]-=o,e[p+1]=f-e[p+1];break;case 90:for(let p=0,y=e.length;p<y;p+=2){const _=e[p];e[p]=e[p+1]-c,e[p+1]=_-o}break;case 180:for(let p=0,y=e.length;p<y;p+=2)e[p]=d-e[p],e[p+1]-=c;break;case 270:for(let p=0,y=e.length;p<y;p+=2){const _=e[p];e[p]=f-e[p+1],e[p+1]=d-_}break;default:throw new Error("Invalid rotation")}return e}#L(e,t,r,o){const c=[],d=this.thickness/2,f=e*t+d,p=e*r+d;for(const y of this.paths){const _=[],A=[];for(let T=0,R=y.length;T<R;T++){const[L,j,K,$]=y[T];if(L[0]===$[0]&&L[1]===$[1]&&1===R){const ve=e*L[0]+f,$e=e*L[1]+p;_.push(ve,$e),A.push(ve,$e);break}const Z=e*L[0]+f,te=e*L[1]+p,se=e*j[0]+f,ue=e*j[1]+p,pe=e*K[0]+f,Ce=e*K[1]+p,Ae=e*$[0]+f,ie=e*$[1]+p;0===T&&(_.push(Z,te),A.push(Z,te)),_.push(se,ue,pe,Ce,Ae,ie),A.push(se,ue),T===R-1&&A.push(Ae,ie)}c.push({bezier:Oi.#U(_,o,this.rotation),points:Oi.#U(A,o,this.rotation)})}return c}#V(){let e=1/0,t=-1/0,r=1/0,o=-1/0;for(const c of this.paths)for(const[d,f,p,y]of c){const _=at.bezierBoundingBox(...d,...f,...p,...y);e=Math.min(e,_[0]),r=Math.min(r,_[1]),t=Math.max(t,_[2]),o=Math.max(o,_[3])}return[e,r,t,o]}#j(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#N(e=!1){if(this.isEmpty())return;if(!this.#r)return void this.#A();const t=this.#V(),r=this.#j();this.#t=Math.max(nt.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(nt.MIN_SIZE,t[3]-t[1]);const o=Math.ceil(r+this.#t*this.scaleFactor),c=Math.ceil(r+this.#e*this.scaleFactor),[d,f]=this.parentDimensions;this.width=o/d,this.height=c/f,this.setAspectRatio(o,c);const p=this.translationX,y=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#b(),this.#A(),this.#d=o,this.#o=c,this.setDims(o,c);const _=e?r/this.scaleFactor/2:0;this.translate(p-this.translationX-_,y-this.translationY-_)}static deserialize(e,t,r){var o=()=>super.deserialize,c=this;return(0,G.A)(function*(){if(e instanceof Oa)return null;const d=yield o().call(c,e,t,r);d.thickness=e.thickness,d.color=at.makeHexColor(...e.color),d.opacity=e.opacity;const[f,p]=d.pageDimensions,y=d.width*f,_=d.height*p,A=d.parentScale,T=e.thickness/2;d.#r=!0,d.#d=Math.round(y),d.#o=Math.round(_);const{paths:R,rect:L,rotation:j}=e;for(let{bezier:$}of R){$=Oi.#B($,L,j);const Z=[];d.paths.push(Z);let te=A*($[0]-T),se=A*($[1]-T);for(let pe=2,Ce=$.length;pe<Ce;pe+=6){const Vt=A*($[pe+4]-T),Gt=A*($[pe+5]-T);Z.push([[te,se],[A*($[pe]-T),A*($[pe+1]-T)],[A*($[pe+2]-T),A*($[pe+3]-T)],[Vt,Gt]]),te=Vt,se=Gt}const ue=c.#F(Z);d.bezierPath2D.push(ue)}const K=d.#V();return d.#t=Math.max(nt.MIN_SIZE,K[2]-K[0]),d.#e=Math.max(nt.MIN_SIZE,K[3]-K[1]),d.#I(y,_),d})()}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=nt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:At.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#L(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class Ed extends nt{#e=null;#t=null;#n=null;#i=null;#r=null;#s="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,t){nt.initialize(e,t)}static get supportedTypes(){return Yt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Yt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(At.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){e?(this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#s=e.file.name),this.#f()):this.remove()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(){var e=this;return(0,G.A)(function*(t=null,r=!0){if(e.hasAltTextData())return null;const{mlManager:o}=e._uiManager;if(!o)throw new Error("No ML.");if(!(yield o.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:c,width:d,height:f}=t||e.copyCanvas(null,null,!0).imageData,p=yield o.guess({name:"altText",request:{data:c,width:d,height:f,channels:c.length/(d*f)}});if(!p)throw new Error("No response from the AI service.");if(p.error)throw new Error("Error from the AI service.");if(p.cancel)return null;if(!p.output)throw new Error("No valid response from the AI service.");const y=p.output;return yield e.setGuessedAltText(y),r&&!e.hasAltTextData()&&(e.altTextData={alt:y,decorative:!1}),y}).apply(this,arguments)}#p(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(o=>this.#o(o,!0)).finally(()=>this.#h());if(this.#i){const o=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(o).then(c=>this.#o(c)).finally(()=>this.#h()))}if(this.#r){const o=this.#r;return this.#r=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(o).then(c=>this.#o(c)).finally(()=>this.#h()))}const t=document.createElement("input");t.type="file",t.accept=Ed.supportedTypesStr;const r=this._uiManager._signal;this.#n=new Promise(o=>{t.addEventListener("change",(0,G.A)(function*(){if(t.files&&0!==t.files.length){e._uiManager.enableWaiting(!0);const c=yield e._uiManager.imageManager.getFromFile(t.files[0]);e._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:e._uiManager.useNewAltTextFlow}}),e.#o(c)}else e.remove();o()}),{signal:r}),t.addEventListener("cancel",()=>{this.remove(),o()},{signal:r})}).finally(()=>this.#h()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#l&&this.#p(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#p()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#r||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(e*r,t*o,this.width*r,this.height*o)}return this.div}#f(){const{div:e}=this;let{width:t,height:r}=this.#e;const[o,c]=this.pageDimensions,d=.75;if(this.width)t=this.width*o,r=this.height*c;else if(t>d*o||r>d*c){const _=Math.min(d*o/t,d*c/r);t*=_,r*=_}const[f,p]=this.parentDimensions;this.setDims(t*f/o,r*p/c),this._uiManager.enableWaiting(!1);const y=this.#l=document.createElement("canvas");y.setAttribute("role","img"),this.addContainer(y),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#_(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&y.setAttribute("aria-label",this.#s)}copyCanvas(e,t,r=!1){e||(e=224);const{width:o,height:c}=this.#e,d=new dn;let f=this.#e,p=o,y=c,_=null;if(t){if(o>t||c>t){const pe=Math.min(t/o,t/c);p=Math.floor(o*pe),y=Math.floor(c*pe)}_=document.createElement("canvas");const T=_.width=Math.ceil(p*d.sx),R=_.height=Math.ceil(y*d.sy);this.#a||(f=this.#y(T,R));const L=_.getContext("2d");L.filter=this._uiManager.hcmFilter;let j="white",K="#cfcfd8";"none"!==this._uiManager.hcmFilter?K="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(j="#8f8f9d",K="#42414d");const $=15,Z=$*d.sx,te=$*d.sy,se=new OffscreenCanvas(2*Z,2*te),ue=se.getContext("2d");ue.fillStyle=j,ue.fillRect(0,0,2*Z,2*te),ue.fillStyle=K,ue.fillRect(0,0,Z,te),ue.fillRect(Z,te,Z,te),L.fillStyle=L.createPattern(se,"repeat"),L.fillRect(0,0,T,R),L.drawImage(f,0,0,f.width,f.height,0,0,T,R)}let A=null;if(r){let T,R;if(d.symmetric&&f.width<e&&f.height<e)T=f.width,R=f.height;else if(f=this.#e,o>e||c>e){const K=Math.min(e/o,e/c);T=Math.floor(o*K),R=Math.floor(c*K),this.#a||(f=this.#y(T,R))}const j=new OffscreenCanvas(T,R).getContext("2d",{willReadFrequently:!0});j.drawImage(f,0,0,f.width,f.height,0,0,T,R),A={width:T,height:R,data:j.getImageData(0,0,T,R).data}}return{canvas:_,width:p,height:y,imageData:A}}#g(e,t){const[r,o]=this.parentDimensions;this.width=e/r,this.height=t/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#u&&clearTimeout(this.#u),this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},200)}#y(e,t){const{width:r,height:o}=this.#e;let c=r,d=o,f=this.#e;for(;c>2*e||d>2*t;){const p=c,y=d;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*t&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const _=new OffscreenCanvas(c,d);_.getContext("2d").drawImage(f,0,0,p,y,0,0,c,d),f=_.transferToImageBitmap()}return f}#m(e,t){const r=new dn,o=Math.ceil(e*r.sx),c=Math.ceil(t*r.sy),d=this.#l;if(!d||d.width===o&&d.height===c)return;d.width=o,d.height=c;const f=this.#a?this.#e:this.#y(o,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,o,c)}getImageForAltText(){return this.#l}#v(e){if(e){if(this.#a){const o=this._uiManager.imageManager.getSvgUrl(this.#t);if(o)return o}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#e),t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,r]=this.pageDimensions,o=Math.round(this.width*t*Os.PDF_TO_CSS_UNITS),c=Math.round(this.height*r*Os.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(o,c);return d.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,o,c),d.transferToImageBitmap()}return structuredClone(this.#e)}#_(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static deserialize(e,t,r){var o=()=>super.deserialize,c=this;return(0,G.A)(function*(){let d=null;if(e instanceof t_){const{data:{rect:K,rotation:$,id:Z,structParent:te,popupRef:se},container:ue,parent:{page:{pageNumber:pe}}}=e,Ce=ue.querySelector("canvas"),Ae=r.imageManager.getFromCanvas(ue.id,Ce);Ce.remove();const ie=(yield t._structTree.getAriaAttributes(`${gs}${Z}`))?.get("aria-label")||"";d=e={annotationType:At.STAMP,bitmapId:Ae.id,bitmap:Ae.bitmap,pageIndex:pe-1,rect:K.slice(0),rotation:$,id:Z,deleted:!1,accessibilityData:{decorative:!1,altText:ie},isSvg:!1,structParent:te,popupRef:se}}const f=yield o().call(c,e,t,r),{rect:p,bitmap:y,bitmapUrl:_,bitmapId:A,isSvg:T,accessibilityData:R}=e;A&&r.imageManager.isValidId(A)?(f.#t=A,y&&(f.#e=y)):f.#i=_,f.#a=T;const[L,j]=f.pageDimensions;return f.width=(p[2]-p[0])/L,f.height=(p[3]-p[1])/j,f.annotationElementId=e.id||null,R&&(f.altTextData=R),f._initialData=d,f.#d=!!d,f})()}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:At.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#v(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(r.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const f=this.#C(r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,null===t)return r;t.stamps||=new Map;const d=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(t.stamps.has(this.#t)){if(this.#a){const f=t.stamps.get(this.#t);d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=this.#v(!1))}}else t.stamps.set(this.#t,{area:d,serialized:r}),r.bitmap=this.#v(!1);return r}#C(e){const{rect:t,pageIndex:r,accessibilityData:{altText:o}}=this._initialData,c=e.rect.every((p,y)=>Math.abs(p-t[y])<1),d=e.pageIndex===r,f=(e.accessibilityData?.alt||"")===o;return{isSame:c&&d&&f,isSameAltText:f}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}let i_=(()=>{class l{#e;#t=!1;#n=null;#i=null;#r=null;#s=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Nn,Oi,Ed,ai].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:r,div:o,structTreeLayer:c,accessibilityManager:d,annotationLayer:f,drawLayer:p,textLayer:y,viewport:_,l10n:A}){const T=[...l.#h.values()];if(!l._initialized){l._initialized=!0;for(const R of T)R.initialize(A,t)}t.registerEditorTypes(T),this.#o=t,this.pageIndex=r,this.div=o,this.#e=d,this.#n=f,this.viewport=_,this.#a=y,this.drawLayer=p,this._structTree=c,this.#o.addLayer(this)}get isEmpty(){return 0===this.#s.size}get isInvisible(){return this.isEmpty&&this.#o.getMode()===At.NONE}updateToolbar(t){this.#o.updateToolbar(t)}updateMode(t=this.#o.getMode()){switch(this.#m(),t){case At.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case At.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;for(const o of l.#h.values())r.toggle(`${o._type}Editing`,t===o._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#a?.div}addInkEditorIfNeeded(t){if(this.#o.getMode()===At.INK){if(!t)for(const o of this.#s.values())if(o.isEmpty())return void o.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#o.setEditingState(t)}addCommands(t){this.#o.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){var t=this;return(0,G.A)(function*(){t.div.tabIndex=0,t.togglePointerEvents(!0);const r=new Set;for(const c of t.#s.values())c.enableEditing(),c.show(!0),c.annotationElementId&&(t.#o.removeChangedExistingAnnotation(c),r.add(c.annotationElementId));if(!t.#n)return;const o=t.#n.getEditableAnnotations();for(const c of o){if(c.hide(),t.#o.isDeletedAnnotationElement(c.data.id)||r.has(c.data.id))continue;const d=yield t.deserialize(c);d&&(t.addOrRebuild(d),d.enableEditing())}})()}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,r=new Map;for(const c of this.#s.values())if(c.disableEditing(),c.annotationElementId){if(null!==c.serialize()){t.set(c.annotationElementId,c);continue}r.set(c.annotationElementId,c),this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}if(this.#n){const c=this.#n.getEditableAnnotations();for(const d of c){const{id:f}=d.data;if(this.#o.isDeletedAnnotationElement(f))continue;let p=r.get(f);p?(p.resetAnnotationElement(d),p.show(!1),d.show()):(p=t.get(f),p&&(this.#o.addChangedExistingAnnotation(p),p.renderAnnotationElement(d)&&p.show(!1)),d.show())}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:o}=this.div;for(const c of l.#h.values())o.remove(`${c._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#o.getActive()!==t&&this.#o.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const t=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(t){this.#o.unselectAll();const{target:r}=t;if(r===this.#a.div||("img"===r.getAttribute("role")||r.classList.contains("endOfContent"))&&this.#a.div.contains(r)){const{isMac:o}=qn.platform;if(0!==t.button||t.ctrlKey&&o)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),ai.startHighlighting(this,"ltr"===this.#o.direction,{target:this.#a.div,x:t.x,y:t.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:r}=t;r&&this.#o.isDeletedAnnotationElement(r)&&this.#o.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#u&&t.annotationElementId&&this.#o.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#o.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#o.addDeletedAnnotationElement(t.annotationElementId),nt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#o.addEditor(t),this.attach(t),!t.isAttachedToDOM){const r=t.render();this.div.append(r),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#o.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:r}=document;t.div.contains(r)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),r.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return l.#h.get(this.#o.getMode())}combinedSignal(t){return this.#o.combinedSignal(t)}#g(t){const r=this.#f;return r?new r.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,r){this.#o.updateToolbar(t),this.#o.updateMode(t);const{offsetX:o,offsetY:c}=this.#y(),d=this.getNextId(),f=this.#g({parent:this,id:d,x:o,y:c,uiManager:this.#o,isCentered:!0,...r});f&&this.add(f)}deserialize(t){var r=this;return(0,G.A)(function*(){return(yield l.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,r,r.#o))||null})()}createAndAddNewEditor(t,r,o={}){const c=this.getNextId(),d=this.#g({parent:this,id:c,x:t.offsetX,y:t.offsetY,uiManager:this.#o,isCentered:r,...o});return d&&this.add(d),d}#y(){const{x:t,y:r,width:o,height:c}=this.div.getBoundingClientRect(),d=Math.max(0,t),f=Math.max(0,r),_=(d+Math.min(window.innerWidth,t+o))/2-t,A=(f+Math.min(window.innerHeight,r+c))/2-r,[T,R]=this.viewport.rotation%180==0?[_,A]:[A,_];return{offsetX:T,offsetY:R}}addNewEditor(){this.createAndAddNewEditor(this.#y(),!0)}setSelected(t){this.#o.setSelected(t)}toggleSelected(t){this.#o.toggleSelected(t)}unselect(t){this.#o.unselect(t)}pointerup(t){const{isMac:r}=qn.platform;if(!(0!==t.button||t.ctrlKey&&r)&&t.target===this.div&&this.#l){if(this.#l=!1,!this.#t)return void(this.#t=!0);if(this.#o.getMode()===At.STAMP)return void this.#o.unselectAll();this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#o.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#l)return void(this.#l=!1);const{isMac:r}=qn.platform;if(0!==t.button||t.ctrlKey&&r||t.target!==this.div)return;this.#l=!0;const o=this.#o.getActive();this.#t=!o||o.isEmpty()}findNewParent(t,r,o){const c=this.#o.findParent(r,o);return null!==c&&c!==this&&(c.changeParent(t),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const t of this.#s.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,et(this.div,t);for(const r of this.#o.getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:t}){this.#o.commitOrRemove(),this.#m();const r=this.viewport.rotation,o=t.rotation;if(this.viewport=t,et(this.div,{rotation:o}),r!==o)for(const c of this.#s.values())c.rotate(o);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:r}=this.viewport.rawDims;return[t,r]}get scale(){return this.#o.viewParameters.realScale}}return l})();class Mi{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#e){if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}else this.#e=e}static get _svgFactory(){return Yt(this,"_svgFactory",new pd)}static#r(e,{x:t=0,y:r=0,width:o=1,height:c=1}={}){const{style:d}=e;d.top=100*r+"%",d.left=100*t+"%",d.width=100*o+"%",d.height=100*c+"%"}#s(e){const t=Mi._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),Mi.#r(t,e),t}#l(e,t){const r=Mi._svgFactory.createElement("clipPath");e.append(r);const o=`clip_${t}`;r.setAttribute("id",o),r.setAttribute("clipPathUnits","objectBoundingBox");const c=Mi._svgFactory.createElement("use");return r.append(c),c.setAttribute("href",`#${t}`),c.classList.add("clip"),o}draw(e,t,r,o=!1){const c=this.#t++,d=this.#s(e.box);d.classList.add(...e.classNamesForDrawing);const f=Mi._svgFactory.createElement("defs");d.append(f);const p=Mi._svgFactory.createElement("path");f.append(p);const y=`path_p${this.pageIndex}_${c}`;p.setAttribute("id",y),p.setAttribute("d",e.toSVGPath()),o&&this.#i.set(c,p);const _=this.#l(f,y),A=Mi._svgFactory.createElement("use");return d.append(A),d.setAttribute("fill",t),d.setAttribute("fill-opacity",r),A.setAttribute("href",`#${y}`),this.#n.set(c,d),{id:c,clipPathId:`url(#${_})`}}drawOutline(e){const t=this.#t++,r=this.#s(e.box);r.classList.add(...e.classNamesForOutlining);const o=Mi._svgFactory.createElement("defs");r.append(o);const c=Mi._svgFactory.createElement("path");o.append(c);const d=`path_p${this.pageIndex}_${t}`;let f;if(c.setAttribute("id",d),c.setAttribute("d",e.toSVGPath()),c.setAttribute("vector-effect","non-scaling-stroke"),e.mustRemoveSelfIntersections){const _=Mi._svgFactory.createElement("mask");o.append(_),f=`mask_p${this.pageIndex}_${t}`,_.setAttribute("id",f),_.setAttribute("maskUnits","objectBoundingBox");const A=Mi._svgFactory.createElement("rect");_.append(A),A.setAttribute("width","1"),A.setAttribute("height","1"),A.setAttribute("fill","white");const T=Mi._svgFactory.createElement("use");_.append(T),T.setAttribute("href",`#${d}`),T.setAttribute("stroke","none"),T.setAttribute("fill","black"),T.setAttribute("fill-rule","nonzero"),T.classList.add("mask")}const p=Mi._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${d}`),f&&p.setAttribute("mask",`url(#${f})`);const y=p.cloneNode();return r.append(y),p.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){const r=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){Mi.#r(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),null!==this.#e&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}var im=mt.AbortException,rm=mt.AnnotationEditorLayer,Fl=mt.AnnotationEditorParamsType,Na=mt.AnnotationEditorType,Ti=mt.AnnotationEditorUIManager,r_=mt.AnnotationLayer,sm=mt.AnnotationMode,cf=mt.ColorPicker,s_=mt.DOMSVGFactory,om=mt.DrawLayer,Cd=mt.FeatureTest,am=mt.GlobalWorkerOptions,lm=mt.ImageKind,uf=mt.InvalidPDFException,Ad=mt.MissingPDFException,cm=mt.OPS,o_=mt.OutputScale,a_=mt.PDFDataRangeTransport,l_=mt.PDFDateString,um=mt.PDFWorker,c_=mt.PasswordResponses,dm=mt.PermissionFlag,u_=mt.PixelsPerInch,d_=mt.RenderingCancelledException,LE=mt.TextLayer,hm=mt.UnexpectedResponseException,fm=mt.Util,wr=mt.VerbosityLevel,FE=mt.XfaLayer,pm=mt.build,VE=mt.createValidAbsoluteUrl,df=mt.fetchData,$s=mt.getDocument,gm=mt.getFilenameFromUrl,Vl=mt.getPdfFilenameFromUrl,h_=mt.getXfaPageViewport,f_=mt.isDataScheme,mm=mt.isPdfFile,jE=mt.noContextMenu,BE=mt.normalizeUnicode,UE=mt.setLayerDimensions,HE=mt.shadow,hf=mt.version;function ym(l,e){this.v=l,this.k=e}function ka(l){return new ym(l,0)}function jl(l){return function(){return new Bl(l.apply(this,arguments))}}function Bl(l){var e,t;function r(c,d){try{var f=l[c](d),p=f.value,y=p instanceof ym;Promise.resolve(y?p.v:p).then(function(_){if(y){var A="return"===c?"return":"next";if(!p.k||_.done)return r(A,_);_=l[A](_).value}o(f.done?"return":"normal",_)},function(_){r("throw",_)})}catch(_){o("throw",_)}}function o(c,d){switch(c){case"return":e.resolve({value:d,done:!0});break;case"throw":e.reject(d);break;default:e.resolve({value:d,done:!1})}(e=e.next)?r(e.key,e.arg):t=null}this._invoke=function(c,d){return new Promise(function(f,p){var y={key:c,arg:d,resolve:f,reject:p,next:null};t?t=t.next=y:(e=t=y,r(c,d))})},"function"!=typeof l.return&&(this.return=void 0)}function Ul(l){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(o){return{value:o,done:r}})}return(Ul=function(r){this.s=r,this.n=r.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(r){var o=this.s.return;return void 0===o?Promise.resolve({value:r,done:!0}):e(o.apply(this.s,arguments))},throw:function(r){var o=this.s.return;return void 0===o?Promise.reject(r):e(o.apply(this.s,arguments))}},new Ul(l)}Bl.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Bl.prototype.next=function(l){return this._invoke("next",l)},Bl.prototype.throw=function(l){return this._invoke("throw",l)},Bl.prototype.return=function(l){return this._invoke("return",l)};var Er={d:(l,e)=>{for(var t in e)Er.o(e,t)&&!Er.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:e[t]})},o:(l,e)=>Object.prototype.hasOwnProperty.call(l,e)},ei=globalThis.pdfjsViewer={};Er.d(ei,{AnnotationLayerBuilder:()=>mo,DownloadManager:()=>L_,EventBus:()=>Gm,FindState:()=>Ws,GenericL10n:()=>sa,LinkTarget:()=>Kl,PDFFindController:()=>Ef,PDFHistory:()=>Gd,PDFLinkService:()=>ql,PDFPageView:()=>fy,PDFScriptingManager:()=>gy,PDFSinglePageViewer:()=>by,PDFViewer:()=>Wf,ProgressBar:()=>Mm,RenderingStates:()=>li,ScrollMode:()=>hn,SimpleLinkService:()=>ja,SpreadMode:()=>xn,StructTreeLayerBuilder:()=>hy,TextLayerBuilder:()=>Ua,XfaLayerBuilder:()=>Zl,parseQueryString:()=>ta});const li={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},hn={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},xn={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function Md(l,e,t=!1){let r=l.offsetParent;if(!r)return void console.error("offsetParent is not set -- cannot scroll");let o=l.offsetTop+l.clientTop,c=l.offsetLeft+l.clientLeft;for(;r.clientHeight===r.scrollHeight&&r.clientWidth===r.scrollWidth||t&&(r.classList.contains("markedContent")||"hidden"===getComputedStyle(r).overflow);)if(o+=r.offsetTop,c+=r.offsetLeft,r=r.offsetParent,!r)return;e&&(void 0!==e.top&&(o+=e.top),void 0!==e.left&&(c+=e.left,r.scrollLeft=c)),r.scrollTop=o}function ta(l){const e=new Map;for(const[t,r]of new URLSearchParams(l))e.set(t.toLowerCase(),r);return e}const pf=/[\x00-\x1F]/g;function Wl(l,e=!1){return pf.test(l)?e?l.replaceAll(pf,t=>"\0"===t?"":" "):l.replaceAll("\0",""):l}function Xc(l,e,t=0){let r=t,o=l.length-1;if(o<0||!e(l[o]))return l.length;if(e(l[r]))return r;for(;r<o;){const c=r+o>>1;e(l[c])?o=c:r=c+1}return r}function gf(l){if(Math.floor(l)===l)return[l,1];const e=1/l;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const r=l>1?e:l;let p,o=0,c=1,d=1,f=1;for(;;){const y=o+d,_=c+f;if(_>8)break;r<=y/_?(d=y,f=_):(o=y,c=_)}return p=r-o/c<d/f-r?r===l?[o,c]:[c,o]:r===l?[d,f]:[f,d],p}function Td(l,e){return l-l%e}function Am(l){return Number.isInteger(l)&&l%90==0}function mf(l){return l.width<=l.height}new Promise(function(l){window.requestAnimationFrame(l)});const Id=document.documentElement.style;class Mm{#e=null;#t=null;#n=0;#i=null;#r=!0;constructor(e){this.#e=e.classList,this.#i=e.style}get percent(){return this.#n}set percent(e){this.#n=function Sm(l,e,t){return Math.min(Math.max(l,e),t)}(e,0,100),isNaN(e)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(e){if(!e)return;const r=e.parentNode.offsetWidth-e.offsetWidth;r>0&&this.#i.setProperty("--progressBar-end-offset",`${r}px`)}setDisableAutoFetch(e=5e3){100===this.#n||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#r&&(this.#r=!1,this.#e.add("hidden"))}show(){this.#r||(this.#r=!0,this.#e.remove("hidden"))}}const xd=function(){const l=document.createElement("div");return l.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)","calc(1320px)"===l.style.width?Math.fround:e=>e}();function Qc(l){return function KE(l){return l<11904}(l)?function Im(l){return!(65408&l)}(l)?function qE(l){return 32===l||9===l||13===l||10===l}(l)?0:function E_(l){return l>=97&&l<=122||l>=65&&l<=90}(l)||function C_(l){return l>=48&&l<=57}(l)||95===l?1:2:function na(l){return 3584==(65408&l)}(l)?7:160===l?0:1:function A_(l){return l>=13312&&l<=40959||l>=63744&&l<=64255}(l)?3:function xm(l){return l>=12448&&l<=12543}(l)?4:function yf(l){return l>=12352&&l<=12447}(l)?5:function D_(l){return l>=65376&&l<=65439}(l)?6:1}let Pm;const Ws={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},Om={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},Nm=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let T_;const QE=new RegExp("\\p{M}+","gu"),Pd=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),I_=new RegExp("([^\\p{M}])\\p{M}*$","u"),vf=new RegExp("^\\p{M}*([^\\p{M}])","u"),bf=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,Fa=new Map,Rd=new Map;let Va=null,Gl=null;function ia(l){const e=[];let t,r;for(;null!==(t=bf.exec(l));){let{index:R}=t;for(const L of t[0]){let j=Fa.get(L);j||(j=L.normalize("NFD").length,Fa.set(L,j)),e.push([j,R++])}}if(0===e.length&&Va)r=Va;else if(e.length>0&&Gl)r=Gl;else{const Z=`([${Object.keys(Om).join("")}])|([${function Rm(){return Pm||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",Pm}()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;r=0===e.length?Va=new RegExp(Z+"|(\\u0000)","gum"):Gl=new RegExp(Z+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const o=[];for(;null!==(t=QE.exec(l));)o.push([t[0].length,t.index]);let c=l.normalize("NFD");const d=[[0,0]];let f=0,p=0,y=0,_=0,A=0,T=!1;return c=c.replace(r,(R,L,j,K,$,Z,te,se,ue,pe,Ce)=>{if(Ce-=_,L){const Ae=Om[L],ie=Ae.length;for(let ve=1;ve<ie;ve++)d.push([Ce-y+ve,y-ve]);return y-=ie-1,Ae}if(j){let Ae=Rd.get(j);Ae||(Ae=j.normalize("NFKC"),Rd.set(j,Ae));const ie=Ae.length;for(let ve=1;ve<ie;ve++)d.push([Ce-y+ve,y-ve]);return y-=ie-1,Ae}if(K)return T=!0,Ce+A===o[f]?.[1]?++f:(d.push([Ce-1-y+1,y-1]),y-=1,_+=1),d.push([Ce-y+1,y]),_+=1,A+=1,K.charAt(0);if($){const Ae=$.endsWith("\n"),ie=Ae?$.length-2:$.length;T=!0;let ve=ie;Ce+A===o[f]?.[1]&&(ve-=o[f][0],++f);for(let $e=1;$e<=ve;$e++)d.push([Ce-1-y+$e,y-$e]);return y-=ve,_+=ve,Ae?(d.push([(Ce+=ie-1)-y+1,1+y]),y+=1,_+=1,A+=1,$.slice(0,ie)):$}if(Z)return d.push([Ce-y+3,1+y]),y+=1,_+=1,A+=1,Z.replace("\n","");if(te)return d.push([Ce-y+(te.length-2),1+y]),y+=1,_+=1,A+=1,te.slice(0,-2);if(se)return d.push([Ce-y+(se.length-1),y]),_+=1,A+=1,se.slice(0,-1);if(ue)return d.push([Ce-y+1,y-1]),y-=1,_+=1,A+=1," ";if(Ce+A===e[p]?.[1]){const Ae=e[p][0]-1;++p;for(let ie=1;ie<=Ae;ie++)d.push([Ce-(y-ie),y-ie]);y-=Ae,_+=Ae}return pe}),d.push([c.length,y]),[c,d,T]}class Ef{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:r=!0}){this._linkService=e,this._eventBus=t,this.#t=r,this.onIsPageVisible=null,this.#r(),t._on("find",this.#i.bind(this)),t._on("findbarclose",this.#v.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#r(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#i(e){if(!e)return;const t=this._pdfDocument,{type:r}=e;(null===this.#e||this.#l(e))&&(this._dirtyMatch=!0),this.#e=e,"highlightallchange"!==r&&this.#w(Ws.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#d();const o=!this._highlightMatches,c=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),r?this._dirtyMatch?this.#p():"again"===r?(this.#p(),o&&this.#e.highlightAll&&this.#h()):"highlightallchange"===r?(c?this.#p():this._highlightMatches=!0,this.#h()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},250)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:r=-1,matchIndex:o=-1}){this._scrollMatches&&e&&-1!==o&&o===this._selected.matchIdx&&-1!==r&&r===this._selected.pageIdx&&(this._scrollMatches=!1,Md(e,{top:-50,left:t+-400},!0))}#r(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){const{query:e}=this.#e;return"string"==typeof e?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=ia(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>ia(t)[0])}#l(e){const t=e.query,r=this.#e.query,o=typeof t;if(o!==typeof r)return!0;if("string"===o){if(t!==r)return!0}else if(JSON.stringify(t)!==JSON.stringify(r))return!0;switch(e.type){case"again":const d=this._selected.pageIdx+1,f=this._linkService;return d>=1&&d<=f.pagesCount&&d!==f.page&&!(this.onIsPageVisible?.(d)??1);case"highlightallchange":return!1}return!0}#c(e,t,r){let o=e.slice(0,t).match(I_);if(o){const c=e.charCodeAt(t),d=o[1].charCodeAt(0);if(Qc(c)===Qc(d))return!1}if(o=e.slice(t+r).match(vf),o){const c=e.charCodeAt(t+r-1),d=o[1].charCodeAt(0);if(Qc(c)===Qc(d))return!1}return!0}#u(e,t){const{matchDiacritics:r}=this.#e;let o=!1;return(e=e.replaceAll(Pd,(d,f,p,y,_,A)=>f?`[ ]*\\${f}[ ]*`:p?`[ ]*${p}[ ]*`:y?"[ ]+":r?_||A:_?Nm.has(_.charCodeAt(0))?_:"":t?(o=!0,`${A}\\p{M}*`):A)).endsWith("[ ]*")&&(e=e.slice(0,e.length-4)),r&&t&&(T_||=String.fromCharCode(...Nm),o=!0,e=`${e}(?=[${T_}]|[^\\p{M}]|$)`),[o,e]}#a(e){const t=this.#s;if(0===t.length)return;const o=this.match(t,this._pageContents[e],e),c=this._pageMatches[e]=[],d=this._pageMatchesLength[e]=[],f=this._pageDiffs[e];o?.forEach(({index:y,length:_})=>{const[A,T]=function wf(l,e,t){if(!l)return[e,t];const r=e,o=e+t-1;let c=Xc(l,_=>_[0]>=r);l[c][0]>r&&--c;let d=Xc(l,_=>_[0]>=o,c);l[d][0]>o&&--d;const f=r+l[c][1];return[f,o+l[d][1]+1-f]}(f,y,_);T&&(c.push(A),d.push(T))}),this.#e.highlightAll&&this.#o(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());const p=c.length;this._matchesCountTotal+=p,this.#t?p>0&&this.#C():++this.#n===this._linkService.pagesCount&&this.#C()}match(e,t,r){const o=this._hasDiacritics[r];let c=!1;if("string"==typeof e?[c,e]=this.#u(e,o):e=e.sort().reverse().map(A=>{const[T,R]=this.#u(A,o);return c||=T,`(${R})`}).join("|"),!e)return;const{caseSensitive:d,entireWord:f}=this.#e;e=new RegExp(e,`g${c?"u":""}${d?"":"i"}`);const y=[];let _;for(;null!==(_=e.exec(t));)f&&!this.#c(t,_.index,_[0].length)||y.push({index:_.index,length:_[0].length});return y}#d(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0};for(let r=0,o=this._linkService.pagesCount;r<o;r++){const{promise:c,resolve:d}=Promise.withResolvers();this._extractTextPromises[r]=c,e=e.then(()=>this._pdfDocument.getPage(r+1).then(f=>f.getTextContent(t)).then(f=>{const p=[];for(const y of f.items)p.push(y.str),y.hasEOL&&p.push("\n");[this._pageContents[r],this._pageDiffs[r],this._hasDiacritics[r]]=ia(p.join("")),d()},f=>{console.error(`Unable to get text content for page ${r+1}`,f),this._pageContents[r]="",this._pageDiffs[r]=null,this._hasDiacritics[r]=!1,d()}))}}#o(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#h(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){const e=this.#e.findPrevious,t=this._linkService.page-1,r=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#h();for(let d=0;d<r;d++)this._pendingFindMatches.has(d)||(this._pendingFindMatches.add(d),this._extractTextPromises[d].then(()=>{this._pendingFindMatches.delete(d),this.#a(d)}))}if(0===this.#s.length)return void this.#w(Ws.FOUND);if(this._resumePageIdx)return;const c=this._offset;if(this._pagesToSearch=r,null!==c.matchIdx){if(!e&&c.matchIdx+1<this._pageMatches[c.pageIdx].length||e&&c.matchIdx>0)return c.matchIdx=e?c.matchIdx-1:c.matchIdx+1,void this.#m(!0);this.#y(e)}this.#g()}#f(e){const t=this._offset,r=e.length,o=this.#e.findPrevious;return r?(t.matchIdx=o?r-1:0,this.#m(!0),!0):(this.#y(o),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this.#m(!1),!0))}#g(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#f(e))}#y(e){const t=this._offset,r=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=r||t.pageIdx<0)&&(t.pageIdx=e?r-1:0,t.wrapped=!0)}#m(e=!1){let t=Ws.NOT_FOUND;const r=this._offset.wrapped;if(this._offset.wrapped=!1,e){const o=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=r?Ws.WRAPPED:Ws.FOUND,-1!==o&&o!==this._selected.pageIdx&&this.#o(o)}this.#w(t,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#v(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w(Ws.FOUND),this._highlightMatches=!1,this.#h())})}#_(){const{pageIdx:e,matchIdx:t}=this._selected;let r=0,o=this._matchesCountTotal;if(-1!==t){for(let c=0;c<e;c++)r+=this._pageMatches[c]?.length||0;r+=t+1}return(r<1||r>o)&&(r=o=0),{current:r,total:o}}#C(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#_()})}#w(e,t=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===Ws.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#_(),rawQuery:this.#e?.query??null})}}const Kl={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class ql{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:r=null,ignoreDestinationZoom:o=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=r,this._ignoreDestinationZoom=o,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}goToDestination(e){var t=this;return(0,G.A)(function*(){if(!t.pdfDocument)return;let r,o,c;if("string"==typeof e?(r=e,o=yield t.pdfDocument.getDestination(e)):(r=null,o=yield e),!Array.isArray(o))return void console.error(`goToDestination: "${o}" is not a valid destination array, for dest="${e}".`);const[d]=o;if(d&&"object"==typeof d){if(c=t.pdfDocument.cachedPageNumber(d),!c)try{c=(yield t.pdfDocument.getPageIndex(d))+1}catch{return void console.error(`goToDestination: "${d}" is not a valid page reference, for dest="${e}".`)}}else Number.isInteger(d)&&(c=d+1);!c||c<1||c>t.pagesCount?console.error(`goToDestination: "${c}" is not a valid page number, for dest="${e}".`):(t.pdfHistory&&(t.pdfHistory.pushCurrentPosition(),t.pdfHistory.push({namedDest:r,explicitDest:o,pageNumber:c})),t.pdfViewer.scrollPageIntoView({pageNumber:c,destArray:o,ignoreDestinationZoom:t._ignoreDestinationZoom}))})()}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(t)&&t>0&&t<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})):console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`)}addLinkAttributes(e,t,r=!1){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');const o=r?Kl.BLANK:this.externalLinkTarget,c=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let d="";switch(o){case Kl.NONE:break;case Kl.SELF:d="_self";break;case Kl.BLANK:d="_blank";break;case Kl.PARENT:d="_parent";break;case Kl.TOP:d="_top"}e.target=d,e.rel="string"==typeof c?c:"noopener noreferrer nofollow"}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,r;if(e.includes("=")){const o=ta(e);if(o.has("search")){const c=o.get("search").replaceAll('"',""),d="true"===o.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:d?c:c.match(/\S+/g)})}if(o.has("page")&&(t=0|o.get("page")||1),o.has("zoom")){const c=o.get("zoom").split(","),d=c[0],f=parseFloat(d);d.includes("Fit")?"Fit"===d||"FitB"===d?r=[null,{name:d}]:"FitH"===d||"FitBH"===d||"FitV"===d||"FitBV"===d?r=[null,{name:d},c.length>1?0|c[1]:null]:"FitR"===d?5!==c.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):r=[null,{name:d},0|c[1],0|c[2],0|c[3],0|c[4]]:console.error(`PDFLinkService.setHash: "${d}" is not a valid zoom value.`):r=[null,{name:"XYZ"},c.length>1?0|c[1]:null,c.length>2?0|c[2]:null,f?f/100:d]}return r?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:r,allowNegativeOffset:!0}):t&&(this.page=t),o.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:o.get("pagemode")}),void(o.has("nameddest")&&this.goToDestination(o.get("nameddest")))}r=unescape(e);try{r=JSON.parse(r),Array.isArray(r)||(r=r.toString())}catch{}"string"==typeof r||ql.#e(r)?this.goToDestination(r):console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){var t=this;return(0,G.A)(function*(){if(!t.pdfDocument)return;const r=t.pdfDocument,o=yield t.pdfViewer.optionalContentConfigPromise;r===t.pdfDocument&&(o.setOCGState(e),t.pdfViewer.optionalContentConfigPromise=Promise.resolve(o))})()}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;const[t,r,...o]=e;if(("object"!=typeof t||!Number.isInteger(t?.num)||!Number.isInteger(t?.gen))&&!Number.isInteger(t)||"object"!=typeof r||"string"!=typeof r?.name)return!1;const c=o.length;let d=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return 0===c;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(4!==c)return!1;d=!1;break;default:return!1}for(const f of o)if(!("number"==typeof f||d&&null===f))return!1;return!0}}class ja extends ql{setDocument(e,t=null){}}const{AbortException:x_,AnnotationEditorLayer:km,AnnotationEditorType:Lr,AnnotationEditorUIManager:Cf,AnnotationLayer:Lm,AnnotationMode:go,createValidAbsoluteUrl:Fm,DrawLayer:P_,fetchData:R_,getPdfFilenameFromUrl:Ld,isPdfFile:Fd,normalizeUnicode:Um,OutputScale:Sf,PermissionFlag:Ba,PixelsPerInch:bs,RenderingCancelledException:Vd,setLayerDimensions:Hm,shadow:Zc,TextLayer:$m,version:zm,XfaLayer:Mf}=globalThis.pdfjsLib;class mo{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:r,annotationStorage:o=null,imageResourcesPath:c="",renderForms:d=!0,enableScripting:f=!1,hasJSActionsPromise:p=null,fieldObjectsPromise:y=null,annotationCanvasMap:_=null,accessibilityManager:A=null,annotationEditorUIManager:T=null,onAppend:R=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=r,this.imageResourcesPath=c,this.renderForms=d,this.annotationStorage=o,this.enableScripting=f,this._hasJSActionsPromise=p||Promise.resolve(!1),this._fieldObjectsPromise=y||Promise.resolve(null),this._annotationCanvasMap=_,this._accessibilityManager=A,this._annotationEditorUIManager=T,this.#e=R,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}render(e,t){var r=this;return(0,G.A)(function*(o,c,d="display"){if(r.div){if(r._cancelled||!r.annotationLayer)return;return void r.annotationLayer.update({viewport:o.clone({dontFlip:!0})})}const[f,p,y]=yield Promise.all([r.pdfPage.getAnnotations({intent:d}),r._hasJSActionsPromise,r._fieldObjectsPromise]);if(r._cancelled)return;const _=r.div=document.createElement("div");_.className="annotationLayer",r.#e?.(_),0!==f.length?(r.annotationLayer=new Lm({div:_,accessibilityManager:r._accessibilityManager,annotationCanvasMap:r._annotationCanvasMap,annotationEditorUIManager:r._annotationEditorUIManager,page:r.pdfPage,viewport:o.clone({dontFlip:!0}),structTreeLayer:c?.structTreeLayer||null}),yield r.annotationLayer.render({annotations:f,imageResourcesPath:r.imageResourcesPath,renderForms:r.renderForms,linkService:r.linkService,downloadManager:r.downloadManager,annotationStorage:r.annotationStorage,enableScripting:r.enableScripting,hasJSActions:p,fieldObjects:y}),r.linkService.isInPresentationMode&&r.#n(3),r.#t||(r.#t=new AbortController,r._eventBus?._on("presentationmodechanged",A=>{r.#n(A.state)},{signal:r.#t.signal}))):r.hide()}).apply(this,arguments)}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let t=!1;switch(e){case 3:t=!0;break;case 1:break;default:return}for(const r of this.div.childNodes)r.hasAttribute("data-internal-link")||(r.inert=t)}}function Xl(l,e){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=l,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}class L_{#e=new WeakMap;downloadData(e,t,r){Xl(URL.createObjectURL(new Blob([e],{type:r})),t)}openOrDownloadData(e,t,r=null){const c=Fd(t)?"application/pdf":"";return this.downloadData(e,t,c),!1}download(e,t,r){let o;if(e)o=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!Fm(t,"http://example.com"))return void console.error(`download - not a valid URL: ${t}`);o=t+"#pdfjs.action=download"}Xl(o,r)}}const F__EVENT="event",F__TIMEOUT="timeout";function Wm(){return(Wm=(0,G.A)(function*({target:l,name:e,delay:t=0}){if("object"!=typeof l||!e||"string"!=typeof e||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:r,resolve:o}=Promise.withResolvers(),c=new AbortController;function d(y){c.abort(),clearTimeout(p),o(y)}l[l instanceof Gm?"_on":"addEventListener"](e,d.bind(null,F__EVENT),{signal:c.signal});const p=setTimeout(d.bind(null,F__TIMEOUT),t);return r})).apply(this,arguments)}class Gm{#e=Object.create(null);on(e,t,r=null){this._on(e,t,{external:!0,once:r?.once,signal:r?.signal})}off(e,t,r=null){this._off(e,t)}dispatch(e,t){const r=this.#e[e];if(!r||0===r.length)return;let o;for(const{listener:c,external:d,once:f}of r.slice(0))f&&this._off(e,c),d?(o||=[]).push(c):c(t);if(o){for(const c of o)c(t);o=null}}_on(e,t,r=null){let o=null;if(r?.signal instanceof AbortSignal){const{signal:d}=r;if(d.aborted)return void console.error("Cannot use an `aborted` signal.");const f=()=>this._off(e,t);o=()=>d.removeEventListener("abort",f),d.addEventListener("abort",f)}(this.#e[e]||=[]).push({listener:t,external:!0===r?.external,once:!0===r?.once,rmAbort:o})}_off(e,t,r=null){const o=this.#e[e];if(o)for(let c=0,d=o.length;c<d;c++){const f=o[c];if(f.listener===t)return f.rmAbort?.(),void o.splice(c,1)}}}class Jc{constructor(e){this.value=e}valueOf(){return this.value}}class Ei extends Jc{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class yo extends Jc{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class eu extends Jc{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}const Km=100,Tf="\u2068",vo="\u2069";function tu(l,e,t){return t===e||t instanceof yo&&e instanceof yo&&t.value===e.value||e instanceof yo&&"string"==typeof t&&t===l.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value)}function If(l,e,t){return e[t]?nu(l,e[t].value):(l.reportError(new RangeError("No default")),new Ei)}function jd(l,e){const t=[],r=Object.create(null);for(const o of e)"narg"===o.type?r[o.name]=Ql(l,o.value):t.push(Ql(l,o));return{positional:t,named:r}}function Ql(l,e){switch(e.type){case"str":return e.value;case"num":return new yo(e.value,{minimumFractionDigits:e.precision});case"var":return function aC(l,{name:e}){let t;if(l.params){if(!Object.prototype.hasOwnProperty.call(l.params,e))return new Ei(`$${e}`);t=l.params[e]}else{if(!l.args||!Object.prototype.hasOwnProperty.call(l.args,e))return l.reportError(new ReferenceError(`Unknown variable: $${e}`)),new Ei(`$${e}`);t=l.args[e]}if(t instanceof Jc)return t;switch(typeof t){case"string":return t;case"number":return new yo(t);case"object":if(t instanceof Date)return new eu(t.getTime());default:return l.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new Ei(`$${e}`)}}(l,e);case"mesg":return function lC(l,{name:e,attr:t}){const r=l.bundle._messages.get(e);if(!r)return l.reportError(new ReferenceError(`Unknown message: ${e}`)),new Ei(e);if(t){const o=r.attributes[t];return o?nu(l,o):(l.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new Ei(`${e}.${t}`))}return r.value?nu(l,r.value):(l.reportError(new ReferenceError(`No value: ${e}`)),new Ei(e))}(l,e);case"term":return function cC(l,{name:e,attr:t,args:r}){const o=`-${e}`,c=l.bundle._terms.get(o);if(!c)return l.reportError(new ReferenceError(`Unknown term: ${o}`)),new Ei(o);if(t){const f=c.attributes[t];if(f){l.params=jd(l,r).named;const p=nu(l,f);return l.params=null,p}return l.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new Ei(`${o}.${t}`)}l.params=jd(l,r).named;const d=nu(l,c.value);return l.params=null,d}(l,e);case"func":return function xf(l,{name:e,args:t}){let r=l.bundle._functions[e];if(!r)return l.reportError(new ReferenceError(`Unknown function: ${e}()`)),new Ei(`${e}()`);if("function"!=typeof r)return l.reportError(new TypeError(`Function ${e}() is not callable`)),new Ei(`${e}()`);try{let o=jd(l,t);return r(o.positional,o.named)}catch(o){return l.reportError(o),new Ei(`${e}()`)}}(l,e);case"select":return function Pf(l,{selector:e,variants:t,star:r}){let o=Ql(l,e);if(o instanceof Ei)return If(l,t,r);for(const c of t)if(tu(l,o,Ql(l,c.key)))return nu(l,c.value);return If(l,t,r)}(l,e);default:return new Ei}}function V_(l,e){if(l.dirty.has(e))return l.reportError(new RangeError("Cyclic reference")),new Ei;l.dirty.add(e);const t=[],r=l.bundle._useIsolating&&e.length>1;for(const o of e)if("string"!=typeof o){if(l.placeables++,l.placeables>Km)throw l.dirty.delete(e),new RangeError(`Too many placeables expanded: ${l.placeables}, max allowed is ${Km}`);r&&t.push(Tf),t.push(Ql(l,o).toString(l)),r&&t.push(vo)}else t.push(l.bundle._transform(o));return l.dirty.delete(e),t.join("")}function nu(l,e){return"string"==typeof e?l.bundle._transform(e):V_(l,e)}class qm{constructor(e,t,r){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=r}reportError(e){if(!(this.errors&&e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let r=this.bundle._intls.get(e);r||(r={},this.bundle._intls.set(e,r));let o=JSON.stringify(t);return r[o]||(r[o]=new e(this.bundle.locales,t)),r[o]}}function Bd(l,e){const t=Object.create(null);for(const[r,o]of Object.entries(l))e.includes(r)&&(t[r]=o.valueOf());return t}const Xm=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function j_(l,e){let t=l[0];if(t instanceof Ei)return new Ei(`NUMBER(${t.valueOf()})`);if(t instanceof yo)return new yo(t.valueOf(),{...t.opts,...Bd(e,Xm)});if(t instanceof eu)return new yo(t.valueOf(),{...Bd(e,Xm)});throw new TypeError("Invalid argument to NUMBER")}const Qm=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function B_(l,e){let t=l[0];if(t instanceof Ei)return new Ei(`DATETIME(${t.valueOf()})`);if(t instanceof eu)return new eu(t.valueOf(),{...t.opts,...Bd(e,Qm)});if(t instanceof yo)return new eu(t.valueOf(),{...Bd(e,Qm)});throw new TypeError("Invalid argument to DATETIME")}const Rf=new Map;class U_{constructor(e,{functions:t,useIsolating:r=!0,transform:o=(c=>c)}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:j_,DATETIME:B_,...t},this._useIsolating=r,this._transform=o,this._intls=function Ym(l){const e=Array.isArray(l)?l.join(" "):l;let t=Rf.get(e);return void 0===t&&(t=new Map,Rf.set(e,t)),t}(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const r=[];for(let o=0;o<e.body.length;o++){let c=e.body[o];if(c.id.startsWith("-")){if(!1===t&&this._terms.has(c.id)){r.push(new Error(`Attempt to override an existing term: "${c.id}"`));continue}this._terms.set(c.id,c)}else{if(!1===t&&this._messages.has(c.id)){r.push(new Error(`Attempt to override an existing message: "${c.id}"`));continue}this._messages.set(c.id,c)}}return r}formatPattern(e,t=null,r=null){if("string"==typeof e)return this._transform(e);let o=new qm(this,r,t);try{return V_(o,e).toString(o)}catch(c){if(o.errors&&c instanceof Error)return o.errors.push(c),(new Ei).toString(o);throw c}}}const Of=/^(-?[a-zA-Z][\w-]*) *= */gm,Nf=/\.([a-zA-Z][\w-]*) *= */y,Ud=/\*?\[/y,kf=/(-?[0-9]+(?:\.([0-9]+))?)/y,Lf=/([a-zA-Z][\w-]*)/y,Zm=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,Yl=/^[A-Z][A-Z0-9_-]*$/,Hd=/([^{}\n\r]+)/y,H_=/([^\\"\n\r]*)/y,$d=/\\([\\"])/y,Ff=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,$_=/^\n+/,Jm=/ +$/,z_=/ *\r?\n/g,W_=/( *)$/,ey=/{\s*/y,G_=/\s*}/y,uC=/\[\s*/y,iu=/\s*] */y,K_=/\s*\(\s*/y,q_=/\s*->\s*/y,X_=/\s*:\s*/y,ty=/\s*,?\s*/y,Q_=/\s+/y;class Y_{constructor(e){this.body=[],Of.lastIndex=0;let t=0;for(;;){let ie=Of.exec(e);if(null===ie)break;t=Of.lastIndex;try{this.body.push(p(ie[1]))}catch(ve){if(ve instanceof SyntaxError)continue;throw ve}}function r(ie){return ie.lastIndex=t,ie.test(e)}function o(ie,ve){if(e[t]===ie)return t++,!0;if(ve)throw new ve(`Expected ${ie}`);return!1}function c(ie,ve){if(r(ie))return t=ie.lastIndex,!0;if(ve)throw new ve(`Expected ${ie.toString()}`);return!1}function d(ie){ie.lastIndex=t;let ve=ie.exec(e);if(null===ve)throw new SyntaxError(`Expected ${ie.toString()}`);return t=ie.lastIndex,ve}function f(ie){return d(ie)[1]}function p(ie){let ve=_(),$e=function y(){let ie=Object.create(null);for(;r(Nf);){let ve=f(Nf),$e=_();if(null===$e)throw new SyntaxError("Expected attribute value");ie[ve]=$e}return ie}();if(null===ve&&0===Object.keys($e).length)throw new SyntaxError("Expected message value or attributes");return{id:ie,value:ve,attributes:$e}}function _(){let ie;if(r(Hd)&&(ie=f(Hd)),"{"===e[t]||"}"===e[t])return A(ie?[ie]:[],1/0);let ve=pe();return ve?ie?A([ie,ve],ve.length):(ve.value=Ce(ve.value,$_),A([ve],ve.length)):ie?Ce(ie,Jm):null}function A(ie=[],ve){for(;;){if(r(Hd)){ie.push(f(Hd));continue}if("{"===e[t]){ie.push(T());continue}if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");let Zt=pe();if(!Zt)break;ie.push(Zt),ve=Math.min(ve,Zt.length)}let $e=ie.length-1,Vt=ie[$e];"string"==typeof Vt&&(ie[$e]=Ce(Vt,Jm));let Gt=[];for(let Zt of ie)Zt instanceof ny&&(Zt=Zt.value.slice(0,Zt.value.length-ve)),Zt&&Gt.push(Zt);return Gt}function T(){c(ey,SyntaxError);let ie=R();if(c(G_))return ie;if(c(q_)){let ve=function K(){let $e,ie=[],ve=0;for(;r(Ud);){o("*")&&($e=ve);let Vt=$(),Gt=_();if(null===Gt)throw new SyntaxError("Expected variant value");ie[ve++]={key:Vt,value:Gt}}if(0===ve)return null;if(void 0===$e)throw new SyntaxError("Expected default variant");return{variants:ie,star:$e}}();return c(G_,SyntaxError),{type:"select",selector:ie,...ve}}throw new SyntaxError("Unclosed placeable")}function R(){if("{"===e[t])return T();if(r(Zm)){let[,ie,ve,$e=null]=d(Zm);if("$"===ie)return{type:"var",name:ve};if(c(K_)){let Vt=function L(){let ie=[];for(;;){switch(e[t]){case")":return t++,ie;case void 0:throw new SyntaxError("Unclosed argument list")}ie.push(j()),c(ty)}}();if("-"===ie)return{type:"term",name:ve,attr:$e,args:Vt};if(Yl.test(ve))return{type:"func",name:ve,args:Vt};throw new SyntaxError("Function names must be all upper-case")}return"-"===ie?{type:"term",name:ve,attr:$e,args:[]}:{type:"mesg",name:ve,attr:$e}}return Z()}function j(){let ie=R();return"mesg"!==ie.type?ie:c(X_)?{type:"narg",name:ie.name,value:Z()}:ie}function $(){let ie;return c(uC,SyntaxError),ie=r(kf)?te():{type:"str",value:f(Lf)},c(iu,SyntaxError),ie}function Z(){if(r(kf))return te();if('"'===e[t])return function se(){o('"',SyntaxError);let ie="";for(;;){if(ie+=f(H_),"\\"!==e[t]){if(o('"'))return{type:"str",value:ie};throw new SyntaxError("Unclosed string literal")}ie+=ue()}}();throw new SyntaxError("Invalid expression")}function te(){let[,ie,ve=""]=d(kf),$e=ve.length;return{type:"num",value:parseFloat(ie),precision:$e}}function ue(){if(r($d))return f($d);if(r(Ff)){let[,ie,ve]=d(Ff),$e=parseInt(ie||ve,16);return $e<=55295||57344<=$e?String.fromCodePoint($e):"\ufffd"}throw new SyntaxError("Unknown escape sequence")}function pe(){let ie=t;switch(c(Q_),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return Ae(e.slice(ie,t))}return" "===e[t-1]&&Ae(e.slice(ie,t))}function Ce(ie,ve){return ie.replace(ve,"")}function Ae(ie){let ve=ie.replace(z_,"\n"),$e=W_.exec(ie)[1].length;return new ny(ve,$e)}}}class ny{constructor(e,t){this.value=e,this.length=t}}const Z_=/<|&#?\w+;/,J_={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},ew={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function Vf(l,e){const{value:t}=e;if("string"==typeof t)if("title"===l.localName&&"http://www.w3.org/1999/xhtml"===l.namespaceURI)l.textContent=t;else if(Z_.test(t)){const r=l.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");r.innerHTML=t,function dC(l,e){for(const t of l.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){const r=fC(e,t);l.replaceChild(r,t);continue}if(gC(t)){const r=pC(t);l.replaceChild(r,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),l.replaceChild(iy(t),t)}e.textContent="",e.appendChild(l)}(r.content,l)}else l.textContent=t;zd(e,l)}function hC(l,e){if(!l)return!1;for(let t of l)if(t.name===e)return!0;return!1}function zd(l,e){const t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(r=>r.trim()):null;for(const r of Array.from(e.attributes))tw(r.name,e,t)&&!hC(l.attributes,r.name)&&e.removeAttribute(r.name);if(l.attributes)for(const r of Array.from(l.attributes))tw(r.name,e,t)&&e.getAttribute(r.name)!==r.value&&e.setAttribute(r.name,r.value)}function fC(l,e){const t=e.getAttribute("data-l10n-name"),r=l.querySelector(`[data-l10n-name="${t}"]`);return r?r.localName!==e.localName?(console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${r.localName}).`),iy(e)):(l.removeChild(r),ry(e,r.cloneNode(!1))):(console.warn(`An element named "${t}" wasn't found in the source.`),iy(e))}function pC(l){const e=l.ownerDocument.createElement(l.localName);return ry(l,e)}function iy(l){return l.ownerDocument.createTextNode(l.textContent)}function gC(l){const e=J_[l.namespaceURI];return e&&e.includes(l.localName)}function tw(l,e,t=null){if(t&&t.includes(l))return!0;const r=ew[e.namespaceURI];if(!r)return!1;const o=l.toLowerCase(),c=e.localName;if(r.global.includes(o))return!0;if(!r[c])return!1;if(r[c].includes(o))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===c&&"value"===o){const d=e.type.toLowerCase();if("submit"===d||"button"===d||"reset"===d)return!0}return!1}function ry(l,e){return e.textContent=l.textContent,zd(l,e),e}class ru extends Array{static from(e){return e instanceof this?e:new this(e)}}Symbol;class Bf extends ru{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let t=0;return{next:()=>(0,G.A)(function*(){return e.length<=t&&e.push(e.iterator.next()),e[t++]})()}}touchNext(){var e=this;return(0,G.A)(function*(t=1){let r=0;for(;r++<t;){const o=e[e.length-1];if(o&&(yield o).done)break;e.push(e.iterator.next())}return e[e.length-1]}).apply(this,arguments)}}class sy{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){var r=this;return(0,G.A)(function*(){const o=[];let c=!1;var p,d=!1,f=!1;try{for(var _,y=function p_(l){var e,t,r,o=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(t&&null!=(e=l[t]))return e.call(l);if(r&&null!=(e=l[r]))return new Ul(e.call(l));t="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(r.bundles);d=!(_=yield y.next()).done;d=!1){const A=_.value;{c=!0;const T=nw(t,A,e,o);if(0===T.size)break;if(typeof console<"u"){const R=A.locales[0],L=Array.from(T).join(", ");console.warn(`[fluent] Missing translations in ${R}: ${L}`)}}}}catch(A){f=!0,p=A}finally{try{d&&null!=y.return&&(yield y.return())}finally{if(f)throw p}}return!c&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(e)}.\n  resourceIds: ${JSON.stringify(r.resourceIds)}.`),o})()}formatMessages(e){return this.formatWithFallback(e,ay)}formatValues(e){return this.formatWithFallback(e,oy)}formatValue(e,t){var r=this;return(0,G.A)(function*(){const[o]=yield r.formatValues([{id:e,args:t}]);return o})()}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=Bf.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function oy(l,e,t,r){return t.value?l.formatPattern(t.value,r,e):null}function ay(l,e,t,r){const o={value:null,attributes:null};t.value&&(o.value=l.formatPattern(t.value,r,e));let c=Object.keys(t.attributes);if(c.length>0){o.attributes=new Array(c.length);for(let[d,f]of c.entries()){let p=l.formatPattern(t.attributes[f],r,e);o.attributes[d]={name:f,value:p}}}return o}function nw(l,e,t,r){const o=[],c=new Set;return t.forEach(({id:d,args:f},p)=>{if(void 0!==r[p])return;let y=e.getMessage(d);if(y){if(o.length=0,r[p]=l(e,o,y,f),o.length>0&&typeof console<"u"){const _=e.locales[0],A=o.join(", ");console.warn(`[fluent][resolver] errors in ${_}/${d}: ${A}.`)}}else c.add(d)}),c}const ra="data-l10n-id",Gs="data-l10n-args",Fr=`[${ra}]`;class _s extends sy{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[ra,Gs]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,r){return e.setAttribute(ra,t),r?e.setAttribute(Gs,JSON.stringify(r)):e.removeAttribute(Gs),e}getAttributes(e){return{id:e.getAttribute(ra),args:JSON.parse(e.getAttribute(Gs)||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const r of t.addedNodes)if(r.nodeType===r.ELEMENT_NODE)if(r.childElementCount)for(const o of this.getTranslatables(r))this.pendingElements.add(o);else r.hasAttribute(ra)&&this.pendingElements.add(r)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){var t=this;return(0,G.A)(function*(){if(!e.length)return;const r=e.map(t.getKeysForElement),o=yield t.formatMessages(r);return t.applyTranslations(e,o)})()}applyTranslations(e,t){this.pauseObserving();for(let r=0;r<e.length;r++)void 0!==t[r]&&Vf(e[r],t[r]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll(Fr));return"function"==typeof e.hasAttribute&&e.hasAttribute(ra)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(ra),args:JSON.parse(e.getAttribute(Gs)||null)}}}class su{#e;#t;#n;#i;constructor({lang:e,isRTL:t},r=null){this.#n=su.#r(e),this.#i=r,this.#e=t??su.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#i=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e){var t=this;return(0,G.A)(function*(r,o=null,c){return Array.isArray(r)?(r=r.map(p=>({id:p})),(yield t.#i.formatMessages(r)).map(p=>p.value)):(yield t.#i.formatMessages([{id:r,args:o}]))[0]?.value||c}).apply(this,arguments)}translate(e){var t=this;return(0,G.A)(function*(){(t.#t||=new Set).add(e);try{t.#i.connectRoot(e),yield t.#i.translateRoots()}catch{}})()}translateOnce(e){var t=this;return(0,G.A)(function*(){try{yield t.#i.translateElements([e])}catch(r){console.error(`translateOnce: "${r}".`)}})()}destroy(){var e=this;return(0,G.A)(function*(){if(e.#t){for(const t of e.#t)e.#i.disconnectRoot(t);e.#t.clear(),e.#t=null}e.#i.pauseObserving()})()}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#r(e){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e=e?.toLowerCase()||"en-us"]||e}static#s(e){const t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}}function ly(l,e){const t=new Y_(e),r=new U_(l),o=r.addResource(t);return o.length&&console.error("L10n errors",o),r}class sa extends su{constructor(e){super({lang:e});const t=e?sa.#e.bind(sa,"en-us",this.getLanguage()):sa.#i.bind(sa,this.getLanguage());this._setL10n(new _s([],t))}static#e(e,t){var r=this;return jl(function*(){const{baseURL:o,paths:c}=yield ka(r.#n()),d=[t];if(e!==t){const f=t.split("-",1)[0];f!==t&&d.push(f),d.push(e)}for(const f of d){const p=yield ka(r.#t(f,o,c));p?yield p:"en-us"===f&&(yield r.#r(f))}})()}static#t(e,t,r){return(0,G.A)(function*(){const o=r[e];if(!o)return null;const c=new URL(o,t),d=yield R_(c,"text");return ly(e,d)})()}static#n(){return(0,G.A)(function*(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),t=yield R_(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}})()}static#i(e){var t=this;return jl(function*(){yield t.#r(e)})()}static#r(e){return(0,G.A)(function*(){return ly(e,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties\u2026\npdfjs-document-properties-button-label = Document Properties\u2026\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } \xd7 { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } \xd7 { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing\u2026\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document\u2026\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text2 =\n    .aria-label = Text Editor\n    .default-content = Start typing\u2026\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button =\n    .aria-label = Alt text\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button =\n    .aria-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, \u201cA young man sits down at a table to eat a meal\u201d\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner \u2014 resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle \u2014 resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner \u2014 resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right \u2014 resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner \u2014 resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle \u2014 resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner \u2014 resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left \u2014 resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here\u2026\npdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button =\n    .aria-label = Alt text added\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button =\n    .aria-label = Missing alt text\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button =\n    .aria-label = Review alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close')})()}}function cy(){return document.location.hash}class Gd{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",r=>{this._isPagesLoaded=!!r.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:r=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const o=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===r,this._initialized=!0,this.#d();const c=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=cy(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#r(c,!0)||t){const{hash:f,page:p,rotation:y}=this.#l(!0);return!f||o||t?void this.#t(null,!0):void this.#t({hash:f,page:p,rotation:y},!0)}const d=c.destination;this.#s(d,c.uid,!0),void 0!==d.rotation&&(this._initialRotation=d.rotation),d.dest?(this._initialBookmark=JSON.stringify(d.dest),this._destination.page=null):d.hash?this._initialBookmark=d.hash:d.page&&(this._initialBookmark=`page=${d.page}`)}reset(){this._initialized&&(this.#a(),this._initialized=!1,this.#o()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:r}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(t))return void console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);if(!this.#i(r)&&(null!==r||this._destination))return void console.error(`PDFHistory.push: "${r}" is not a valid pageNumber parameter.`);const o=e||JSON.stringify(t);if(!o)return;let c=!1;if(this._destination&&(function Hf(l,e){return"string"==typeof l&&"string"==typeof e&&(l===e||ta(l).get("nameddest")===e)}(this._destination.hash,o)||function $f(l,e){function t(r,o){if(typeof r!=typeof o||Array.isArray(r)||Array.isArray(o))return!1;if(null!==r&&"object"==typeof r&&null!==o){if(Object.keys(r).length!==Object.keys(o).length)return!1;for(const c in r)if(!t(r[c],o[c]))return!1;return!0}return r===o||Number.isNaN(r)&&Number.isNaN(o)}if(!Array.isArray(l)||!Array.isArray(e)||l.length!==e.length)return!1;for(let r=0,o=l.length;r<o;r++)if(!t(l[r],e[r]))return!1;return!0}(this._destination.dest,t))){if(this._destination.page)return;c=!0}this._popStateInProgress&&!c||(this.#t({dest:t,hash:o,page:r,rotation:this.linkService.rotation},c),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#i(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){const r=t||!this._destination,o={fingerprint:this._fingerprint,uid:r?this._uid:this._uid+1,destination:e};let c;if(this.#s(e,o.uid),this._updateUrl&&e?.hash){const d=document.location.href.split("#",1)[0];d.startsWith("file://")||(c=`${d}#${e.hash}`)}r?window.history.replaceState(o,"",c):window.history.pushState(o,"",c)}#n(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination)return void this.#t(t);if(this._destination.temporary)return void this.#t(t,!0);if(this._destination.hash===t.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let r=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;r=!0}this.#t(t,r)}#i(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#r(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[r]=performance.getEntriesByType("navigation");if("reload"!==r?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}#s(e,t,r=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),r&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#l(e=!1){const t=unescape(cy()).substring(1),r=ta(t),o=r.get("nameddest")||"";let c=0|r.get("page");return(!this.#i(c)||e&&o.length>0)&&(c=null),{hash:t,page:c,rotation:this.linkService.rotation}}#c({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},1e3))}#u({state:e}){const t=cy(),r=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:c,page:d,rotation:f}=this.#l();return void this.#t({hash:c,page:d,rotation:f},!0)}if(!this.#r(e))return;this._popStateInProgress=!0,r&&(this._blockHashChange++,function oC(l){return Wm.apply(this,arguments)}({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const o=e.destination;this.#s(o,e.uid,!0),Am(o.rotation)&&(this.linkService.rotation=o.rotation),o.dest?this.linkService.goToDestination(o.dest):o.hash?this.linkService.setHash(o.hash):o.page&&(this.linkService.page=o.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#a(){(!this._destination||this._destination.temporary)&&this.#n()}#d(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#c.bind(this),{signal:e}),window.addEventListener("popstate",this.#u.bind(this),{signal:e}),window.addEventListener("pagehide",this.#a.bind(this),{signal:e})}#o(){this.#e?.abort(),this.#e=null}}class iw{#e=null;#t=null;#n=null;#i=null;#r=null;#s;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new sa,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#s=e.uiManager,this.#e=e.annotationLayer||null,this.#r=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null,this.#i=e.structTreeLayer||null}render(e){var t=this;return(0,G.A)(function*(r,o="display"){if("display"!==o||t._cancelled)return;const c=r.clone({dontFlip:!0});if(t.div)return t.annotationEditorLayer.update({viewport:c}),void t.show();const d=t.div=document.createElement("div");d.className="annotationEditorLayer",d.hidden=!0,d.dir=t.#s.direction,t.#n?.(d),t.annotationEditorLayer=new km({uiManager:t.#s,div:d,structTreeLayer:t.#i,accessibilityManager:t.accessibilityManager,pageIndex:t.pdfPage.pageNumber-1,l10n:t.l10n,viewport:c,annotationLayer:t.#e,textLayer:t.#r,drawLayer:t.#t}),t.annotationEditorLayer.render({viewport:c,div:d,annotations:null,intent:o}),t.show()}).apply(this,arguments)}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}}{var oa=new Map;const l=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,r=/Android/.test(l);(/\b(iPad|iPhone|iPod)(?=;)/.test(l)||"MacIntel"===e&&t>1||r)&&oa.set("maxCanvasPixels",5242880),r&&oa.set("useSystemFonts",!1)}const Kd={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},es={allowedGlobalEvents:{value:null,kind:1},canvasMaxAreaInBytes:{value:-1,kind:5},isInAutomation:{value:!1,kind:1},localeProperties:{value:{lang:navigator.language||"en-US"},kind:1},nimbusDataStr:{value:"",kind:1},supportsCaretBrowsingMode:{value:!1,kind:1},supportsDocumentFonts:{value:!0,kind:1},supportsIntegratedFind:{value:!1,kind:1},supportsMouseWheelZoomCtrlKey:{value:!0,kind:1},supportsMouseWheelZoomMetaKey:{value:!0,kind:1},supportsPinchToZoom:{value:!0,kind:1},toolbarDensity:{value:0,kind:17},altTextLearnMoreUrl:{value:"",kind:130},annotationEditorMode:{value:0,kind:130},annotationMode:{value:2,kind:130},cursorToolOnLoad:{value:0,kind:130},debuggerSrc:{value:"./debugger.mjs",kind:2},defaultZoomDelay:{value:400,kind:130},defaultZoomValue:{value:"",kind:130},disableHistory:{value:!1,kind:2},disablePageLabels:{value:!1,kind:130},enableAltText:{value:!1,kind:130},enableAltTextModelDownload:{value:!0,kind:146},enableGuessAltText:{value:!0,kind:146},enableHighlightFloatingButton:{value:!1,kind:130},enableNewAltTextWhenAddingImage:{value:!0,kind:130},enablePermissions:{value:!1,kind:130},enablePrintAutoRotate:{value:!0,kind:130},enableScripting:{value:!0,kind:130},enableUpdatedAddImage:{value:!1,kind:130},externalLinkRel:{value:"noopener noreferrer nofollow",kind:2},externalLinkTarget:{value:0,kind:130},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:130},historyUpdateUrl:{value:!1,kind:130},ignoreDestinationZoom:{value:!1,kind:130},imageResourcesPath:{value:"./images/",kind:2},maxCanvasPixels:{value:2**25,kind:2},forcePageColors:{value:!1,kind:130},pageColorsBackground:{value:"Canvas",kind:130},pageColorsForeground:{value:"CanvasText",kind:130},pdfBugEnabled:{value:!1,kind:130},printResolution:{value:150,kind:2},sidebarViewOnLoad:{value:-1,kind:130},scrollModeOnLoad:{value:-1,kind:130},spreadModeOnLoad:{value:-1,kind:130},textLayerMode:{value:1,kind:130},viewOnLoad:{value:0,kind:130},cMapPacked:{value:!0,kind:4},cMapUrl:{value:"../web/cmaps/",kind:4},disableAutoFetch:{value:!1,kind:132},disableFontFace:{value:!1,kind:132},disableRange:{value:!1,kind:132},disableStream:{value:!1,kind:132},docBaseUrl:{value:"",kind:4},enableHWA:{value:!0,kind:134},enableXfa:{value:!0,kind:132},fontExtraProperties:{value:!1,kind:4},isEvalSupported:{value:!0,kind:4},isOffscreenCanvasSupported:{value:!0,kind:4},maxImageSize:{value:-1,kind:4},pdfBug:{value:!1,kind:4},standardFontDataUrl:{value:"../web/standard_fonts/",kind:4},useSystemFonts:{value:void 0,kind:4,type:Kd.BOOLEAN+Kd.UNDEFINED},verbosity:{value:1,kind:4},workerPort:{value:null,kind:8},workerSrc:{value:"../build/pdf.worker.mjs",kind:8},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:2},sandboxBundleSrc:{value:"../build/pdf.sandbox.mjs",kind:2},viewerCssTheme:{value:0,kind:130},enableFakeMLManager:{value:!0,kind:2},disablePreferences:{value:!1,kind:2}};class qd{static eventBus;static#e=new Map;static{for(const e in es)this.#e.set(e,es[e].value);for(const[e,t]of oa)this.#e.set(e,t);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>!!this.get("disablePreferences")||(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(e){return this.#e.get(e)}static getAll(e=null,t=!1){const r=Object.create(null);for(const o in es){const c=es[o];e&&!(e&c.kind)||(r[o]=t?c.value:this.#e.get(o))}return r}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){let r;this._hasInvokedSet||=!0;for(const o in e){const c=es[o],d=e[o];if(!c||!(typeof d==typeof c.value||Kd[(typeof d).toUpperCase()]&c.type))continue;const{kind:f}=c;t&&!(1&f||128&f)||(this.eventBus&&16&f&&(r||=new Map).set(o,d),this.#e.set(o,d))}if(r)for(const[o,c]of r)this.eventBus.dispatch(o.toLowerCase(),{source:this,value:c})}}class rw{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(){var e=this;return(0,G.A)(function*(t="display"){"display"!==t||e.#e||e._cancelled||(e.#e=new P_({pageIndex:e.pageIndex}))}).apply(this,arguments)}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}const uy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},dy=/^H(\d+)$/;class hy{#e;#t=null;#n;#i=new Map;#r;#s=null;constructor(e,t){this.#e=e.getStructTree(),this.#r=t}render(){var e=this;return(0,G.A)(function*(){if(e.#n)return e.#n;const{promise:t,resolve:r,reject:o}=Promise.withResolvers();e.#n=t;try{e.#t=e.#u(yield e.#e)}catch(c){o(c)}return e.#e=null,e.#t?.classList.add("structTree"),r(e.#t),t})()}getAriaAttributes(e){var t=this;return(0,G.A)(function*(){try{return yield t.render(),t.#i.get(e)}catch{}return null})()}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#l(e,t){const{alt:r,id:o,lang:c}=e;if(void 0!==r){let d=!1;const f=Wl(r);for(const p of e.children)if("annotation"===p.type){let y=this.#i.get(p.id);y||(y=new Map,this.#i.set(p.id,y)),y.set("aria-label",f),d=!0}d||t.setAttribute("aria-label",f)}void 0!==o&&t.setAttribute("aria-owns",o),void 0!==c&&t.setAttribute("lang",Wl(c,!0))}#c(e,t){const{alt:r,bbox:o,children:c}=e,d=c?.[0];if(!this.#r||!r||!o||"content"!==d?.type)return!1;const{id:f}=d;if(!f)return!1;t.setAttribute("aria-owns",f);const p=document.createElement("span");(this.#s||=new Map).set(f,p),p.setAttribute("role","img"),p.setAttribute("aria-label",Wl(r));const{pageHeight:y,pageX:_,pageY:A}=this.#r,T="calc(var(--scale-factor)*",{style:R}=p;return R.width=`${T}${o[2]-o[0]}px)`,R.height=`${T}${o[3]-o[1]}px)`,R.left=`${T}${o[0]-_}px)`,R.top=`${T}${y-o[3]+A}px)`,!0}addElementsToTextLayer(){if(this.#s){for(const[e,t]of this.#s)document.getElementById(e)?.append(t);this.#s.clear(),this.#s=null}}#u(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:r}=e,o=r.match(dy);if(o?(t.setAttribute("role","heading"),t.setAttribute("aria-level",o[1])):uy[r]&&t.setAttribute("role",uy[r]),"Figure"===r&&this.#c(e,t))return t}if(this.#l(e,t),e.children)if(1===e.children.length&&"id"in e.children[0])this.#l(e.children[0],t);else for(const r of e.children)t.append(this.#u(r));return t}}class ou{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(e){this.#t=e}static#r(e,t){const r=e.getBoundingClientRect(),o=t.getBoundingClientRect();if(0===r.width&&0===r.height)return 1;if(0===o.width&&0===o.height)return-1;const f=r.y+r.height/2,_=o.y+o.height/2;return f<=o.y&&_>=r.y+r.height?-1:_<=r.y&&f>=o.y+o.height?1:r.x+r.width/2-(o.x+o.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(ou.#r),this.#n.size>0){const e=this.#t;for(const[t,r]of this.#n)document.getElementById(t)?this.#s(t,e[r]):this.#n.delete(t)}for(const[e,t]of this.#i)this.addPointerInTextLayer(e,t);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e)return void this.#i.delete(e);const t=this.#t;if(!t||0===t.length)return;const{id:r}=e,o=this.#n.get(r);if(void 0===o)return;const c=t[o];this.#n.delete(r);let d=c.getAttribute("aria-owns");d?.includes(r)&&(d=d.split(" ").filter(f=>f!==r).join(" "),d?c.setAttribute("aria-owns",d):(c.removeAttribute("aria-owns"),c.setAttribute("role","presentation")))}#s(e,t){const r=t.getAttribute("aria-owns");r?.includes(e)||t.setAttribute("aria-owns",r?`${r} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){const{id:r}=e;if(!r)return null;if(!this.#e)return this.#i.set(e,t),null;t&&this.removePointerInTextLayer(e);const o=this.#t;if(!o||0===o.length)return null;const c=Xc(o,y=>ou.#r(e,y)<0),d=Math.max(0,c-1),f=o[d];this.#s(r,f),this.#n.set(r,d);const p=f.parentNode;return p?.classList.contains("markedContent")?p.id:null}moveElementInDOM(e,t,r,o){const c=this.addPointerInTextLayer(r,o);if(!e.hasChildNodes())return e.append(t),c;const d=Array.from(e.childNodes).filter(y=>y!==t);if(0===d.length)return c;const f=r||t,p=Xc(d,y=>ou.#r(f,y)<0);return 0===p?d[0].before(t):d[p-1].after(t),c}}class sw{#e=null;constructor({findController:e,eventBus:t,pageIndex:r}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=r,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||-1===e.pageIndex)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:r}=this;let o=0,c=0;const d=r.length-1,f=[];for(let p=0,y=e.length;p<y;p++){let _=e[p];for(;o!==d&&_>=c+r[o].length;)c+=r[o].length,o++;o===r.length&&console.error("Could not find a matching mapping");const A={begin:{divIdx:o,offset:_-c}};for(_+=t[p];o!==d&&_>c+r[o].length;)c+=r[o].length,o++;A.end={divIdx:o,offset:_-c},f.push(A)}return f}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:r}=this,{textContentItemsStr:o,textDivs:c}=this,d=r===t.selected.pageIdx,f=t.selected.matchIdx;let y=null;function A($,Z){const te=$.divIdx;return c[te].textContent="",T(te,0,$.offset,Z)}function T($,Z,te,se){let ue=c[$];if(ue.nodeType===Node.TEXT_NODE){const Ae=document.createElement("span");ue.before(Ae),Ae.append(ue),c[$]=Ae,ue=Ae}const pe=o[$].substring(Z,te),Ce=document.createTextNode(pe);if(se){const Ae=document.createElement("span");return Ae.className=`${se} appended`,Ae.append(Ce),ue.append(Ae),se.includes("selected")?Ae.offsetLeft:0}return ue.append(Ce),0}let R=f,L=R+1;if(t.state.highlightAll)R=0,L=e.length;else if(!d)return;let j=-1,K=-1;for(let $=R;$<L;$++){const Z=e[$],te=Z.begin;if(te.divIdx===j&&te.offset===K)continue;j=te.divIdx,K=te.offset;const se=Z.end,ue=d&&$===f,pe=ue?" selected":"";let Ce=0;if(y&&te.divIdx===y.divIdx?T(y.divIdx,y.offset,te.offset):(null!==y&&T(y.divIdx,y.offset,undefined),A(te)),te.divIdx===se.divIdx)Ce=T(te.divIdx,te.offset,se.offset,"highlight"+pe);else{Ce=T(te.divIdx,te.offset,undefined,"highlight begin"+pe);for(let Ae=te.divIdx+1,ie=se.divIdx;Ae<ie;Ae++)c[Ae].className="highlight middle"+pe;A(se,"highlight end"+pe)}y=se,ue&&t.scrollMatchIntoView({element:c[te.divIdx],selectedLeft:Ce,pageIndex:r,matchIndex:f})}y&&T(y.divIdx,y.offset,undefined)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:r,pageIdx:o}=this,{textContentItemsStr:c,textDivs:d}=this;let f=-1;for(const _ of r){for(let T=Math.max(f,_.begin.divIdx),R=_.end.divIdx;T<=R;T++){const L=d[T];L.textContent=c[T],L.className=""}f=_.end.divIdx+1}t?.highlightMatches&&!e&&(this.matches=this._convertMatches(t.pageMatches[o]||null,t.pageMatchesLength[o]||null),this._renderMatches(this.matches))}}class Ua{#e=!1;#t=null;#n=!1;#i=null;static#r=new Map;static#s=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:r=null,enablePermissions:o=!1,onAppend:c=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=r,this.#e=!0===o,this.#t=c,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e){var t=this;return(0,G.A)(function*(r,o=null){if(t.#n&&t.#i)return t.#i.update({viewport:r,onBefore:t.hide.bind(t)}),void t.show();t.cancel(),t.#i=new $m({textContentSource:t.pdfPage.streamTextContent(o||{includeMarkedContent:!0,disableNormalization:!0}),container:t.div,viewport:r});const{textDivs:c,textContentItemsStr:d}=t.#i;t.highlighter?.setTextMapping(c,d),t.accessibilityManager?.setTextMapping(c),yield t.#i.render(),t.#n=!0;const f=document.createElement("div");f.className="endOfContent",t.div.append(f),t.#l(f),t.#t?.(t.div),t.highlighter?.enable(),t.accessibilityManager?.enable()}).apply(this,arguments)}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),Ua.#c(this.div)}#l(e){const{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",r=>{if(!this.#e){const o=document.getSelection();r.clipboardData.setData("text/plain",Wl(Um(o.toString())))}r.preventDefault(),r.stopPropagation()}),Ua.#r.set(t,e),Ua.#u()}static#c(e){this.#r.delete(e),0===this.#r.size&&(this.#s?.abort(),this.#s=null)}static#u(){if(this.#s)return;this.#s=new AbortController;const{signal:e}=this.#s,t=(d,f)=>{f.append(d),d.style.width="",d.style.height="",f.classList.remove("selecting")};let r=!1;var o,c;document.addEventListener("pointerdown",()=>{r=!0},{signal:e}),document.addEventListener("pointerup",()=>{r=!1,this.#r.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{r=!1,this.#r.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{r||this.#r.forEach(t)},{signal:e}),document.addEventListener("selectionchange",()=>{const d=document.getSelection();if(0===d.rangeCount)return void this.#r.forEach(t);const f=new Set;for(let R=0;R<d.rangeCount;R++){const L=d.getRangeAt(R);for(const j of this.#r.keys())!f.has(j)&&L.intersectsNode(j)&&f.add(j)}for(const[R,L]of this.#r)f.has(R)?R.classList.add("selecting"):t(L,R);if(o??="none"===getComputedStyle(this.#r.values().next().value).getPropertyValue("-moz-user-select"),o)return;const p=d.getRangeAt(0),y=c&&(0===p.compareBoundaryPoints(Range.END_TO_END,c)||0===p.compareBoundaryPoints(Range.START_TO_END,c));let _=y?p.startContainer:p.endContainer;_.nodeType===Node.TEXT_NODE&&(_=_.parentNode);const A=_.parentElement?.closest(".textLayer"),T=this.#r.get(A);T&&(T.style.width=A.style.width,T.style.height=A.style.height,_.parentElement.insertBefore(T,y?_:_.nextSibling)),c=p.cloneRange()},{signal:e})}}class Zl{constructor({pdfPage:e,annotationStorage:t=null,linkService:r,xfaHtml:o=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=r,this.xfaHtml=o,this.div=null,this._cancelled=!1}render(e){var t=this;return(0,G.A)(function*(r,o="display"){if("print"===o){const f={viewport:r.clone({dontFlip:!0}),div:t.div,xfaHtml:t.xfaHtml,annotationStorage:t.annotationStorage,linkService:t.linkService,intent:o};return t.div=document.createElement("div"),f.div=t.div,Mf.render(f)}const c=yield t.pdfPage.getXfa();if(t._cancelled||!c)return{textDivs:[]};const d={viewport:r.clone({dontFlip:!0}),div:t.div,xfaHtml:c,annotationStorage:t.annotationStorage,linkService:t.linkService,intent:o};return t.div?Mf.update(d):(t.div=document.createElement("div"),d.div=t.div,Mf.render(d))}).apply(this,arguments)}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const Xd={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new ja}},zf=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class fy{#e=go.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#r=null;#s=null;#l=null;#c=1;#u=1;#a=null;#d=li.INITIAL;#o=1;#h={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#p=new WeakMap;#f=[null,null,null,null];constructor(e){const t=e.container,r=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#r=e.layerProperties||Xd,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=r,this.pdfPageRotate=r.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#o=e.textLayerMode??1,this.#e=e.annotationMode??go.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??qd.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new sa,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const o=document.createElement("div");if(o.className="page",o.setAttribute("data-page-number",this.id),o.setAttribute("role","region"),o.setAttribute("data-l10n-id","pdfjs-page-landmark"),o.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=o,this.#y(),t?.append(o),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*bs.PDF_TO_CSS_UNITS),this.pageColors?.background&&t?.style.setProperty("--page-bg-color",this.pageColors.background);const{optionalContentConfigPromise:c}=e;c&&c.then(d=>{c===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=d.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#g(e,t){const r=zf.get(t),o=this.#f[r];if(this.#f[r]=e,o)o.replaceWith(e);else{for(let c=r-1;c>=0;c--){const d=this.#f[c];if(d)return void d.after(e)}this.div.prepend(e)}}get renderingState(){return this.#d}set renderingState(e){if(e!==this.#d)switch(this.#d=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case li.PAUSED:this.div.classList.remove("loading");break;case li.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case li.INITIAL:case li.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#y(){const{viewport:e}=this;if(this.pdfPage){if(this.#l===e.rotation)return;this.#l=e.rotation}Hm(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate,this.viewport=e.getViewport({scale:this.scale*bs.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#y(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return Zc(this,"_textHighlighter",new sw({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#r.findController}))}#m(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}#v(){var e=this;return(0,G.A)(function*(){let t=null;try{yield e.annotationLayer.render(e.viewport,{structTreeLayer:e.structTreeLayer},"display")}catch(r){console.error(`#renderAnnotationLayer: "${r}".`),t=r}finally{e.#m("annotationlayerrendered",t)}})()}#_(){var e=this;return(0,G.A)(function*(){let t=null;try{yield e.annotationEditorLayer.render(e.viewport,"display")}catch(r){console.error(`#renderAnnotationEditorLayer: "${r}".`),t=r}finally{e.#m("annotationeditorlayerrendered",t)}})()}#C(){var e=this;return(0,G.A)(function*(){try{yield e.drawLayer.render("display")}catch(t){console.error(`#renderDrawLayer: "${t}".`)}})()}#w(){var e=this;return(0,G.A)(function*(){let t=null;try{const r=yield e.xfaLayer.render(e.viewport,"display");r?.textDivs&&e._textHighlighter&&e.#M(r.textDivs)}catch(r){console.error(`#renderXfaLayer: "${r}".`),t=r}finally{e.xfaLayer?.div&&(e.l10n.pause(),e.#g(e.xfaLayer.div,"xfaLayer"),e.l10n.resume()),e.#m("xfalayerrendered",t)}})()}#E(){var e=this;return(0,G.A)(function*(){if(!e.textLayer)return;let t=null;try{yield e.textLayer.render(e.viewport)}catch(r){if(r instanceof x_)return;console.error(`#renderTextLayer: "${r}".`),t=r}e.#m("textlayerrendered",t),e.#x()})()}#x(){var e=this;return(0,G.A)(function*(){if(!e.textLayer)return;const t=yield e.structTreeLayer?.render();t&&(e.l10n.pause(),e.structTreeLayer?.addElementsToTextLayer(),e.canvas&&t.parentNode!==e.canvas&&e.canvas.append(t),e.l10n.resume()),e.structTreeLayer?.show()})()}#M(e){var t=this;return(0,G.A)(function*(){const r=yield t.pdfPage.getTextContent(),o=[];for(const c of r.items)o.push(c.str);t._textHighlighter.setTextMapping(e,o),t._textHighlighter.enable()})()}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.#p.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:r=!1,keepXfaLayer:o=!1,keepTextLayer:c=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:r,keepXfaLayer:o,keepTextLayer:c}),this.renderingState=li.INITIAL;const d=this.div,f=d.childNodes,p=e&&this.zoomLayer||null,y=t&&this.annotationLayer?.div||null,_=r&&this.annotationEditorLayer?.div||null,A=o&&this.xfaLayer?.div||null,T=c&&this.textLayer?.div||null;for(let R=f.length-1;R>=0;R--){const L=f[R];switch(L){case p:case y:case _:case A:case T:continue}L.remove();const j=this.#f.indexOf(L);j>=0&&(this.#f[j]=null)}d.removeAttribute("data-loaded"),y&&this.annotationLayer.hide(),_&&this.annotationEditorLayer.hide(),A&&this.xfaLayer.hide(),T&&this.textLayer.hide(),this.structTreeLayer?.hide(),p||(this.canvas&&(this.#p.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#i=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:r=null,drawingDelay:o=-1}){if(this.scale=e||this.scale,"number"==typeof t&&(this.rotation=t),r instanceof Promise&&(this._optionalContentConfigPromise=r,r.then(d=>{r===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=d.hasInitialVisibility)})),this.#h.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*bs.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#y(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let d=!1;if(this.#n)if(0===this.maxCanvasPixels)d=!0;else if(this.maxCanvasPixels>0){const{width:p,height:y}=this.viewport,{sx:_,sy:A}=this.outputScale;d=(Math.floor(p)*_|0)*(Math.floor(y)*A|0)>this.maxCanvasPixels}const f=o>=0&&o<1e3;if(f||d){if(f&&!d&&this.renderingState!==li.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:o}),this.renderingState=li.FINISHED,this.#h.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!f,hideTextLayer:f}),f)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#a})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:r=!1,keepTextLayer:o=!1,cancelExtraDelay:c=0}={}){this.renderTask&&(this.renderTask.cancel(c),this.renderTask=null),this.resume=null,this.textLayer&&(!o||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!r||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:r=!1,redrawXfaLayer:o=!1,redrawTextLayer:c=!1,hideTextLayer:d=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:p}=e;p.width=p.height=""}const f=this.#p.get(e);if(this.viewport!==f){const p=this.viewport.rotation-f.rotation,y=Math.abs(p);let _=1,A=1;if(90===y||270===y){const{width:T,height:R}=this.viewport;_=R/T,A=T/R}e.style.transform=`rotate(${p}deg) scale(${_}, ${A})`}t&&this.annotationLayer&&this.#v(),r&&this.annotationEditorLayer&&(this.drawLayer&&this.#C(),this.#_()),o&&this.xfaLayer&&this.#w(),this.textLayer&&(d?(this.textLayer.hide(),this.structTreeLayer?.hide()):c&&this.#E())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}#A(e){var t=this;return(0,G.A)(function*(r,o=null){if(r===t.renderTask&&(t.renderTask=null),o instanceof Vd)t.#a=null;else if(t.#a=o,t.renderingState=li.FINISHED,t._resetZoomLayer(!0),t.#h.regularAnnotations=!r.separateAnnots,t.eventBus.dispatch("pagerendered",{source:t,pageNumber:t.id,cssTransform:!1,timestamp:performance.now(),error:t.#a}),o)throw o}).apply(this,arguments)}draw(){var e=this;return(0,G.A)(function*(){e.renderingState!==li.INITIAL&&(console.error("Must be in new state before drawing"),e.reset());const{div:t,l10n:r,pageColors:o,pdfPage:c,viewport:d}=e;if(!c)throw e.renderingState=li.FINISHED,new Error("pdfPage is not loaded");e.renderingState=li.RUNNING;const f=document.createElement("div");if(f.classList.add("canvasWrapper"),e.#g(f,"canvasWrapper"),!e.textLayer&&0!==e.#o&&!c.isPureXfa&&(e._accessibilityManager||=new ou,e.textLayer=new Ua({pdfPage:c,highlighter:e._textHighlighter,accessibilityManager:e._accessibilityManager,enablePermissions:2===e.#o,onAppend:ve=>{e.l10n.pause(),e.#g(ve,"textLayer"),e.l10n.resume()}})),!e.annotationLayer&&e.#e!==go.DISABLE){const{annotationStorage:ve,annotationEditorUIManager:$e,downloadManager:Vt,enableScripting:Gt,fieldObjectsPromise:Zt,hasJSActionsPromise:vn,linkService:We}=e.#r;e._annotationCanvasMap||=new Map,e.annotationLayer=new mo({pdfPage:c,annotationStorage:ve,imageResourcesPath:e.imageResourcesPath,renderForms:e.#e===go.ENABLE_FORMS,linkService:We,downloadManager:Vt,enableScripting:Gt,hasJSActionsPromise:vn,fieldObjectsPromise:Zt,annotationCanvasMap:e._annotationCanvasMap,accessibilityManager:e._accessibilityManager,annotationEditorUIManager:$e,onAppend:Me=>{e.#g(Me,"annotationLayer")}})}const{width:y,height:_}=d,A=document.createElement("canvas");A.setAttribute("role","presentation"),A.hidden=!0;const T=!(!o?.background||!o?.foreground);let R=ve=>{(!T||ve)&&(A.hidden=!1,R=null)};f.append(A),e.canvas=A;const L=A.getContext("2d",{alpha:!1,willReadFrequently:!e.#t}),j=e.outputScale=new Sf;if(0===e.maxCanvasPixels){const ve=1/e.scale;j.sx*=ve,j.sy*=ve,e.#n=!0}else if(e.maxCanvasPixels>0){const $e=Math.sqrt(e.maxCanvasPixels/(y*_));j.sx>$e||j.sy>$e?(j.sx=$e,j.sy=$e,e.#n=!0):e.#n=!1}const K=gf(j.sx),$=gf(j.sy),Z=A.width=Td(xd(y*j.sx),K[0]),te=A.height=Td(xd(_*j.sy),$[0]),se=Td(xd(y),K[1]),ue=Td(xd(_),$[1]);j.sx=Z/se,j.sy=te/ue,e.#c!==K[1]&&(t.style.setProperty("--scale-round-x",`${K[1]}px`),e.#c=K[1]),e.#u!==$[1]&&(t.style.setProperty("--scale-round-y",`${$[1]}px`),e.#u=$[1]),e.#p.set(A,d);const Ce={canvasContext:L,transform:j.scaled?[j.sx,0,0,j.sy,0,0]:null,viewport:d,annotationMode:e.#e,optionalContentConfigPromise:e._optionalContentConfigPromise,annotationCanvasMap:e._annotationCanvasMap,pageColors:o,isEditing:e.#i},Ae=e.renderTask=c.render(Ce);Ae.onContinue=ve=>{if(R?.(!1),e.renderingQueue&&!e.renderingQueue.isHighestPriority(e))return e.renderingState=li.PAUSED,void(e.resume=()=>{e.renderingState=li.RUNNING,ve()});ve()};const ie=Ae.promise.then((0,G.A)(function*(){R?.(!0),yield e.#A(Ae),e.structTreeLayer||=new hy(c,d.rawDims),e.#E(),e.annotationLayer&&(yield e.#v());const{annotationEditorUIManager:ve}=e.#r;ve&&(e.drawLayer||=new rw({pageIndex:e.id}),yield e.#C(),e.drawLayer.setParent(f),e.annotationEditorLayer||=new iw({uiManager:ve,pdfPage:c,l10n:r,structTreeLayer:e.structTreeLayer,accessibilityManager:e._accessibilityManager,annotationLayer:e.annotationLayer?.annotationLayer,textLayer:e.textLayer,drawLayer:e.drawLayer.getDrawLayer(),onAppend:$e=>{e.#g($e,"annotationEditorLayer")}}),e.#_())}),ve=>(ve instanceof Vd||R?.(!0),e.#A(Ae,ve)));if(c.isPureXfa){if(!e.xfaLayer){const{annotationStorage:ve,linkService:$e}=e.#r;e.xfaLayer=new Zl({pdfPage:c,annotationStorage:ve,linkService:$e})}e.#w()}return t.setAttribute("data-loaded",!0),e.eventBus.dispatch("pagerender",{source:e,pageNumber:e.id}),ie})()}setPageLabel(e){this.pageLabel="string"==typeof e?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:r}=this.#h;return e&&t&&r?this.canvas:null}}function au(){return(au=(0,G.A)(function*(l){const t="".split("#",1)[0];let{info:r,metadata:o,contentDispositionFilename:c,contentLength:d}=yield l.getMetadata();if(!d){const{length:f}=yield l.getDownloadInfo();d=f}return{...r,baseURL:t,filesize:d,filename:c||Ld(""),metadata:o?.getRaw(),authors:o?.get("dc:creator"),numPages:l.numPages,URL:""}})).apply(this,arguments)}class py{constructor(e){this._ready=new Promise((t,r)=>{import(e).then(c=>{t(c.QuickJSSandbox())}).catch(r)})}createSandbox(e){var t=this;return(0,G.A)(function*(){(yield t._ready).create(e)})()}dispatchEventInSandbox(e){var t=this;return(0,G.A)(function*(){const r=yield t._ready;setTimeout(()=>r.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return(0,G.A)(function*(){(yield e._ready).nukeSandbox()})()}}class Ha{#e=null;#t=null;#n=null;#i=null;#r=null;#s=null;#l=null;#c=null;#u=!1;#a=null;#d=null;constructor({eventBus:e,externalServices:t=null,docProperties:r=null}){this.#r=e,this.#s=t,this.#n=r}setViewer(e){this.#c=e}setDocument(e){var t=this;return(0,G.A)(function*(){if(t.#l&&(yield t.#g()),t.#l=e,!e)return;const[r,o,c]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!r&&!c)return void(yield t.#g());if(e!==t.#l)return;try{t.#a=t.#f()}catch(p){return console.error(`setDocument: "${p.message}".`),void(yield t.#g())}const d=t.#r;t.#i=new AbortController;const{signal:f}=t.#i;d._on("updatefromsandbox",p=>{p?.source===window&&t.#o(p.detail)},{signal:f}),d._on("dispatcheventinsandbox",p=>{t.#a?.dispatchEventInSandbox(p.detail)},{signal:f}),d._on("pagechanging",({pageNumber:p,previous:y})=>{p!==y&&(t.#p(y),t.#h(p))},{signal:f}),d._on("pagerendered",({pageNumber:p})=>{t._pageOpenPending.has(p)&&p===t.#c.currentPageNumber&&t.#h(p)},{signal:f}),d._on("pagesdestroy",(0,G.A)(function*(){yield t.#p(t.#c.currentPageNumber),yield t.#a?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),t.#e?.resolve()}),{signal:f});try{const p=yield t.#n(e);if(e!==t.#l)return;yield t.#a.createSandbox({objects:r,calculationOrder:o,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...p,actions:c}}),d.dispatch("sandboxcreated",{source:t})}catch(p){return console.error(`setDocument: "${p.message}".`),void(yield t.#g())}yield t.#a?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield t.#h(t.#c.currentPageNumber,!0),Promise.resolve().then(()=>{e===t.#l&&(t.#u=!0)})})()}dispatchWillSave(){var e=this;return(0,G.A)(function*(){return e.#a?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var e=this;return(0,G.A)(function*(){return e.#a?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var e=this;return(0,G.A)(function*(){if(e.#a){yield e.#d?.promise,e.#d=Promise.withResolvers();try{yield e.#a.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw e.#d.resolve(),e.#d=null,t}yield e.#d.promise}})()}dispatchDidPrint(){var e=this;return(0,G.A)(function*(){return e.#a?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#u}get _pageOpenPending(){return Zc(this,"_pageOpenPending",new Set)}get _visitedPages(){return Zc(this,"_visitedPages",new Map)}#o(e){var t=this;return(0,G.A)(function*(){const r=t.#c,o=r.isInPresentationMode||r.isChangingPresentationMode,{id:c,siblings:d,command:f,value:p}=e;if(!c){switch(f){case"clear":console.clear();break;case"error":console.error(p);break;case"layout":if(!o){const _=function Tm(l){let e=hn.VERTICAL,t=xn.NONE;switch(l){case"SinglePage":e=hn.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=hn.PAGE;case"TwoColumnLeft":t=xn.ODD;break;case"TwoPageRight":e=hn.PAGE;case"TwoColumnRight":t=xn.EVEN}return{scrollMode:e,spreadMode:t}}(p);r.spreadMode=_.spreadMode}break;case"page-num":r.currentPageNumber=p+1;break;case"print":yield r.pagesPromise,t.#r.dispatch("print",{source:t});break;case"println":console.log(p);break;case"zoom":o||(r.currentScaleValue=p);break;case"SaveAs":t.#r.dispatch("download",{source:t});break;case"FirstPage":r.currentPageNumber=1;break;case"LastPage":r.currentPageNumber=r.pagesCount;break;case"NextPage":r.nextPage();break;case"PrevPage":r.previousPage();break;case"ZoomViewIn":o||r.increaseScale();break;case"ZoomViewOut":o||r.decreaseScale();break;case"WillPrintFinished":t.#d?.resolve(),t.#d=null}return}if(o&&e.focus)return;delete e.id,delete e.siblings;const y=d?[c,...d]:[c];for(const _ of y){const A=document.querySelector(`[data-element-id="${_}"]`);A?A.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):t.#l?.annotationStorage.setValue(_,e)}})()}#h(e){var t=this;return(0,G.A)(function*(r,o=!1){const c=t.#l,d=t._visitedPages;if(o&&(t.#e=Promise.withResolvers()),!t.#e)return;const f=t.#c.getPageView(r-1);if(f?.renderingState!==li.FINISHED)return void t._pageOpenPending.add(r);t._pageOpenPending.delete(r);const p=(0,G.A)(function*(){const y=yield d.has(r)?null:f.pdfPage?.getJSActions();c===t.#l&&(yield t.#a?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:r,actions:y}))})();d.set(r,p)}).apply(this,arguments)}#p(e){var t=this;return(0,G.A)(function*(){const r=t.#l,o=t._visitedPages;if(!t.#e||t._pageOpenPending.has(e))return;const c=o.get(e);c&&(o.set(e,null),yield c,r===t.#l&&(yield t.#a?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})()}#f(){if(this.#t=Promise.withResolvers(),this.#a)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){var e=this;return(0,G.A)(function*(){if(!e.#a)return e.#l=null,void e.#t?.resolve();e.#e&&(yield Promise.race([e.#e.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),e.#e=null),e.#l=null;try{yield e.#a.destroySandbox()}catch{}e.#d?.reject(new Error("Scripting destroyed.")),e.#d=null,e.#i?.abort(),e.#i=null,e._pageOpenPending.clear(),e._visitedPages.clear(),e.#a=null,e.#u=!1,e.#t?.resolve()})()}}class gy extends Ha{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new py(e.sandboxBundleSrc)},e.docProperties||=t=>function ow(l){return au.apply(this,arguments)}(t),super(e)}}class aw{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,t,r,o=!1){const c=e.views,d=c.length;if(0===d)return null;for(let A=0;A<d;A++){const T=c[A].view;if(!this.isViewFinished(T))return T}const f=e.first.id,p=e.last.id;if(p-f+1>d){const A=e.ids;for(let T=1,R=p-f;T<R;T++){const L=r?f+T:p-T;if(A.has(L))continue;const j=t[L-1];if(!this.isViewFinished(j))return j}}let y=r?p:f-2,_=t[y];return _&&!this.isViewFinished(_)||o&&(y+=r?1:-1,_=t[y],_&&!this.isViewFinished(_))?_:null}isViewFinished(e){return e.renderingState===li.FINISHED}renderView(e){switch(e.renderingState){case li.FINISHED:return!1;case li.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case li.RUNNING:this.highestPriorityPage=e.renderingId;break;case li.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof Vd||console.error(`renderView: "${t}"`)})}return!0}}function yy(l){return Object.values(Lr).includes(l)&&l!==Lr.DISABLE}class vy{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#n()}resize(e,t=null){this.#t=e;const r=this.#e;if(t){const o=r.size;let c=1;for(const d of r)if(t.has(d.id)&&(r.delete(d),r.add(d)),++c>o)break}for(;r.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class Wf{#e=null;#t=null;#n=null;#i=Lr.NONE;#r=null;#s=go.ENABLE_FORMS;#l=null;#c=!1;#u=!1;#a=!1;#d=!1;#o=!1;#h=null;#p=null;#f=null;#g=null;#y=!1;#m=null;#v=!1;#_=0;#C=new ResizeObserver(this.#V.bind(this));#w=null;#E=null;#x=1;constructor(e){const t="4.8.69";if(zm!==t)throw new Error(`The API version "${zm}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#C.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new ja,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=o=>this._getVisiblePages().ids.has(o)),this._scriptingManager=e.scriptingManager||null,this.#x=e.textLayerMode??1,this.#s=e.annotationMode??go.ENABLE_FORMS,this.#i=e.annotationEditorMode??Lr.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#u=!0===e.enableHighlightFloatingButton,this.#d=!0===e.enableUpdatedAddImage,this.#o=!0===e.enableNewAltTextWhenAddingImage,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new sa,this.#a=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#p=e.mlManager||null,this.#c=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new aw,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:r}=e;r?.addEventListener("abort",()=>{this.#C.disconnect(),this.#C=null},{once:!0}),this.scroll=function Xi(l,e,t){const r=function(d){c||(c=window.requestAnimationFrame(function(){c=null;const p=l.scrollLeft,y=o.lastX;p!==y&&(o.right=p>y),o.lastX=p;const _=l.scrollTop,A=o.lastY;_!==A&&(o.down=_>A),o.lastY=_,e(o)}))},o={right:!0,down:!0,lastX:l.scrollLeft,lastY:l.scrollTop,_eventHandler:r};let c=null;return l.addEventListener("scroll",r,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(c),{once:!0}),o}(this.container,this._scrollUpdate.bind(this),r),this.presentationModeState=0,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#L(),this.eventBus._on("thumbnailrendered",({pageNumber:o,pdfPage:c})=>{this.#e.has(this._pages[o-1])||c?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===go.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#R(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const r=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:r}),t&&this.#R(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const r=this._pageLabels.indexOf(e);r>=0&&(t=r+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#I(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#I(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!Am(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((e%=360)<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#I(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return Zc(this,"_layerProperties",{get annotationEditorUIManager(){return e.#r},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#M(e){const t={annotationEditorMode:this.#i,annotationMode:this.#s,textLayerMode:this.#x};return e&&(!e.includes(Ba.COPY)&&1===this.#x&&(t.textLayerMode=2),e.includes(Ba.MODIFY_CONTENTS)||(t.annotationEditorMode=Lr.DISABLE),!e.includes(Ba.MODIFY_ANNOTATIONS)&&!e.includes(Ba.FILL_INTERACTIVE_FORMS)&&this.#s===go.ENABLE_FORMS&&(t.annotationMode=go.ENABLE)),t}#A(e){var t=this;return(0,G.A)(function*(){if("hidden"===document.visibilityState||!t.container.offsetParent||0===t._getVisiblePages().views.length)return;const r=Promise.withResolvers(),o=new AbortController;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&r.resolve()},{signal:"function"==typeof AbortSignal.any?AbortSignal.any([e,o.signal]):e}),yield Promise.race([t._onePageRenderedCapability.promise,r.promise]),o.abort()})()}getAllText(){var e=this;return(0,G.A)(function*(){const t=[],r=[];for(let o=1,c=e.pdfDocument.numPages;o<=c;++o){if(e.#v)return null;r.length=0;const d=yield e.pdfDocument.getPage(o),{items:f}=yield d.getTextContent();for(const p of f)p.str&&r.push(p.str),p.hasEOL&&r.push("\n");t.push(Wl(r.join("")))}return t.join("\n")})()}#T(e,t){const r=document.getSelection(),{focusNode:o,anchorNode:c}=r;if(c&&o&&r.containsNode(this.#m)){if(this.#y||2===e)return t.preventDefault(),void t.stopPropagation();this.#y=!0;const{classList:d}=this.viewer;d.add("copyAll");const f=new AbortController;window.addEventListener("keydown",p=>this.#v="Escape"===p.key,{signal:f.signal}),this.getAllText().then(function(){var p=(0,G.A)(function*(y){null!==y&&(yield navigator.clipboard.writeText(y))});return function(y){return p.apply(this,arguments)}}()).catch(p=>{console.warn(`Something goes wrong when extracting the text: ${p.message}`)}).finally(()=>{this.#y=!1,this.#v=!1,f.abort(),d.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){var t=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#r?.destroy(),this.#r=null),this.pdfDocument=e,!e)return;const r=e.numPages,o=e.getPage(1),c=e.getOptionalContentConfig({intent:"display"}),d=this.#a?e.getPermissions():Promise.resolve(),{eventBus:f,pageColors:p,viewer:y}=this;this.#h=new AbortController;const{signal:_}=this.#h;if(r>1e4){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const R=this._scrollMode=hn.PAGE;f.dispatch("scrollmodechanged",{source:this,mode:R})}this._pagesCapability.promise.then(()=>{f.dispatch("pagesloaded",{source:this,pagesCount:r})},()=>{}),f._on("pagerender",R=>{const L=this._pages[R.pageNumber-1];L&&this.#e.push(L)},{signal:_});const T=R=>{R.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:R.timestamp}),f._off("pagerendered",T))};f._on("pagerendered",T,{signal:_}),Promise.all([o,d]).then(([R,L])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(R),this._optionalContentConfigPromise=c;const{annotationEditorMode:j,annotationMode:K,textLayerMode:$}=this.#M(L);if(0!==$){const ue=this.#m=document.createElement("div");ue.id="hiddenCopyElement",y.before(ue)}if("function"==typeof AbortSignal.any&&j!==Lr.DISABLE){const ue=j;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):yy(ue)?(this.#r=new Cf(this.container,y,this.#t,f,e,p,this.#n,this.#u,this.#d,this.#o,this.#p),f.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#r}),ue!==Lr.NONE&&(ue===Lr.STAMP&&this.#p?.loadModel("altText"),this.#r.updateMode(ue))):console.error(`Invalid AnnotationEditor mode: ${ue}`)}const Z=this._scrollMode===hn.PAGE?null:y,te=this.currentScale,se=R.getViewport({scale:te*bs.PDF_TO_CSS_UNITS});y.style.setProperty("--scale-factor",se.scale),p?.background&&y.style.setProperty("--page-bg-color",p.background),("CanvasText"===p?.foreground||"Canvas"===p?.background)&&(y.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),y.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let ue=1;ue<=r;++ue){const pe=new fy({container:Z,eventBus:f,id:ue,scale:te,defaultViewport:se.clone(),optionalContentConfigPromise:c,renderingQueue:this.renderingQueue,textLayerMode:$,annotationMode:K,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:p,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#c});this._pages.push(pe)}this._pages[0]?.setPdfPage(R),this._scrollMode===hn.PAGE?this.#S():this._spreadMode!==xn.NONE&&this._updateSpreadMode(),this.#A(_).then((0,G.A)(function*(){if(e!==t.pdfDocument)return;if(t.findController?.setDocument(e),t._scriptingManager?.setDocument(e),t.#m&&document.addEventListener("copy",t.#T.bind(t,$),{signal:_}),t.#r&&f.dispatch("annotationeditormodechanged",{source:t,mode:t.#i}),e.loadingParams.disableAutoFetch||r>5e3)return void t._pagesCapability.resolve();let ue=r-1;if(ue<=0)t._pagesCapability.resolve();else for(let pe=2;pe<=r;++pe){const Ce=e.getPage(pe).then(Ae=>{const ie=t._pages[pe-1];ie.pdfPage||ie.setPdfPage(Ae),0==--ue&&t._pagesCapability.resolve()},Ae=>{console.error(`Unable to get page ${pe} to initialize viewer`,Ae),0==--ue&&t._pagesCapability.resolve()});pe%250==0&&(yield Ce)}})),f.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:ue})=>{e===this.pdfDocument&&ue.Language&&(y.lang=ue.Language)}),this.defaultRenderingQueue&&this.update()}).catch(R=>{console.error("Unable to initialize viewer",R),this._pagesCapability.reject(R)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,r=this._pages.length;t<r;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,this.#e=new vy(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=hn.VERTICAL,this._previousScrollMode=hn.UNKNOWN,this._spreadMode=xn.NONE,this.#w={previousPageNumber:1,scrollDown:!0,pages:[]},this.#h?.abort(),this.#h=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#j()}#S(){if(this._scrollMode!==hn.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=this.#w,r=this.viewer;if(r.textContent="",t.pages.length=0,this._spreadMode!==xn.NONE||this.isInPresentationMode){const o=new Set,c=this._spreadMode-1;-1===c?o.add(e-1):e%2!==c?(o.add(e-1),o.add(e)):(o.add(e-2),o.add(e-1));const d=document.createElement("div");if(d.className="spread",this.isInPresentationMode){const f=document.createElement("div");f.className="dummyPage",d.append(f)}for(const f of o){const p=this._pages[f];p&&(d.append(p.div),t.pages.push(p))}r.append(d)}else{const o=this._pages[e-1];r.append(o.div),t.pages.push(o)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){0!==this.pagesCount&&this.update()}#P(e,t=null){const{div:r,id:o}=e;if(this._currentPageNumber!==o&&this._setCurrentPageNumber(o),this._scrollMode===hn.PAGE&&(this.#S(),this.update()),!t&&!this.isInPresentationMode){const c=r.offsetLeft+r.clientLeft,d=c+r.clientWidth,{scrollLeft:f,clientWidth:p}=this.container;(this._scrollMode===hn.HORIZONTAL||c<f||d>f+p)&&(t={left:0,top:0})}Md(r,t),!this._currentScaleValue&&this._location&&(this._location=null)}#O(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#D(e,t,{noScroll:r=!1,preset:o=!1,drawingDelay:c=-1,origin:d=null}){if(this._currentScaleValue=t.toString(),this.#O(e))return void(o&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t}));this.viewer.style.setProperty("--scale-factor",e*bs.PDF_TO_CSS_UNITS);const f=c>=0&&c<1e3;this.refresh(!0,{scale:e,drawingDelay:f?c:-1}),f&&(this.#E=setTimeout(()=>{this.#E=null,this.refresh()},c));const p=this._currentScale;if(this._currentScale=e,!r){let _,y=this._currentPageNumber;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(y=this._location.pageNumber,_=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:y,destArray:_,allowNegativeOffset:!0}),Array.isArray(d)){const A=e/p-1,[T,R]=this.containerTopLeft;this.container.scrollLeft+=(d[0]-R)*A,this.container.scrollTop+=(d[1]-T)*A}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:o?t:void 0}),this.defaultRenderingQueue&&this.update()}get#b(){return this._spreadMode!==xn.NONE&&this._scrollMode!==hn.HORIZONTAL?2:1}#I(e,t){let r=parseFloat(e);if(r>0)t.preset=!1,this.#D(r,e,t);else{const o=this._pages[this._currentPageNumber-1];if(!o)return;let c=40,d=5;this.isInPresentationMode?(c=d=4,this._spreadMode!==xn.NONE&&(c*=2)):this.removePageBorders?c=d=0:this._scrollMode===hn.HORIZONTAL&&([c,d]=[d,c]);const f=(this.container.clientWidth-c)/o.width*o.scale/this.#b,p=(this.container.clientHeight-d)/o.height*o.scale;switch(e){case"page-actual":r=1;break;case"page-width":r=f;break;case"page-height":r=p;break;case"page-fit":r=Math.min(f,p);break;case"auto":const y=mf(o)?f:Math.min(p,f);r=Math.min(1.25,y);break;default:return void console.error(`#setScale: "${e}" is an unknown zoom value.`)}t.preset=!0,this.#D(r,e,t)}}#R(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#I(this._currentScaleValue,{noScroll:!0}),this.#P(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:r=!1,ignoreDestinationZoom:o=!1}){if(!this.pdfDocument)return;const c=Number.isInteger(e)&&this._pages[e-1];if(!c)return void console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!t)return void this._setCurrentPageNumber(e,!0);let _,A,d=0,f=0,p=0,y=0;const T=c.rotation%180!=0,R=(T?c.height:c.width)/c.scale/bs.PDF_TO_CSS_UNITS,L=(T?c.width:c.height)/c.scale/bs.PDF_TO_CSS_UNITS;let j=0;switch(t[1].name){case"XYZ":d=t[2],f=t[3],j=t[4],d=null!==d?d:0,f=null!==f?f:L;break;case"Fit":case"FitB":j="page-fit";break;case"FitH":case"FitBH":f=t[2],j="page-width",null===f&&this._location?(d=this._location.left,f=this._location.top):("number"!=typeof f||f<0)&&(f=L);break;case"FitV":case"FitBV":d=t[2],p=R,y=L,j="page-height";break;case"FitR":d=t[2],f=t[3],p=t[4]-d,y=t[5]-f;let te=40,se=5;this.removePageBorders&&(te=se=0),_=(this.container.clientWidth-te)/p/bs.PDF_TO_CSS_UNITS,A=(this.container.clientHeight-se)/y/bs.PDF_TO_CSS_UNITS,j=Math.min(Math.abs(_),Math.abs(A));break;default:return void console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`)}if(o||(j&&j!==this._currentScale?this.currentScaleValue=j:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"===j&&!t[4])return void this.#P(c);const K=[c.viewport.convertToViewportPoint(d,f),c.viewport.convertToViewportPoint(d+p,f+y)];let $=Math.min(K[0][0],K[1][0]),Z=Math.min(K[0][1],K[1][1]);r||($=Math.max($,0),Z=Math.max(Z,0)),this.#P(c,{left:$,top:Z})}_updateLocation(e){const t=this._currentScale,r=this._currentScaleValue,o=parseFloat(r)===t?Math.round(1e4*t)/100:r,c=e.id,f=this.container,p=this._pages[c-1].getPagePoint(f.scrollLeft-e.x,f.scrollTop-e.y),y=Math.round(p[0]),_=Math.round(p[1]);let A=`#page=${c}`;this.isInPresentationMode||(A+=`&zoom=${o},${y},${_}`),this._location={pageNumber:c,scale:o,top:_,left:y,rotation:this._pagesRotation,pdfOpenParams:A}}update(){const e=this._getVisiblePages(),t=e.views,r=t.length;if(0===r)return;const o=Math.max(10,2*r+1);this.#e.resize(o,e.ids),this.renderingQueue.renderHighestPriority(e);const c=this._spreadMode===xn.NONE&&(this._scrollMode===hn.PAGE||this._scrollMode===hn.VERTICAL),d=this._currentPageNumber;let f=!1;for(const p of t){if(p.percent<100)break;if(p.id===d&&c){f=!0;break}}this._setCurrentPageNumber(f?d:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#F(){const e=this._getVisiblePages(),t=[],{ids:r,views:o}=e;for(const c of o){const{view:d}=c;d.hasEditableAnnotations()?t.push(c):r.delete(d.id)}return 0===t.length?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:r}),r)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return 3===this.presentationModeState}get isChangingPresentationMode(){return 2===this.presentationModeState}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===hn.PAGE?this.#w.pages:this._pages,t=this._scrollMode===hn.HORIZONTAL;return function Cm({scrollEl:l,views:e,sortByVisibility:t=!1,horizontal:r=!1,rtl:o=!1}){const c=l.scrollTop,d=c+l.clientHeight,f=l.scrollLeft,p=f+l.clientWidth,A=[],T=new Set,R=e.length;let L=Xc(e,r?function _(Z){const te=Z.div,se=te.offsetLeft+te.clientLeft;return o?se<p:se+te.clientWidth>f}:function y(Z){const te=Z.div;return te.offsetTop+te.clientTop+te.clientHeight>c});L>0&&L<R&&!r&&(L=function y_(l,e,t){if(l<2)return l;let r=e[l].div,o=r.offsetTop+r.clientTop;o>=t&&(r=e[l-1].div,o=r.offsetTop+r.clientTop);for(let c=l-2;c>=0&&(r=e[c].div,!(r.offsetTop+r.clientTop+r.clientHeight<=o));--c)l=c;return l}(L,e,c));let j=r?p:-1;for(let Z=L;Z<R;Z++){const te=e[Z],se=te.div,ue=se.offsetLeft+se.clientLeft,pe=se.offsetTop+se.clientTop,Ce=se.clientWidth,Ae=se.clientHeight,ie=ue+Ce,ve=pe+Ae;if(-1===j)ve>=d&&(j=ve);else if((r?ue:pe)>j)break;if(ve<=c||pe>=d||ie<=f||ue>=p)continue;const $e=Math.max(0,c-pe)+Math.max(0,ve-d),Zt=(Ce-(Math.max(0,f-ue)+Math.max(0,ie-p)))/Ce;A.push({id:te.id,x:ue,y:pe,view:te,percent:(Ae-$e)/Ae*Zt*100|0,widthPercent:100*Zt|0}),T.add(te.id)}const K=A[0],$=A.at(-1);return t&&A.sort(function(Z,te){const se=Z.percent-te.percent;return Math.abs(se)>.001?-se:Z.id-te.id}),{first:K,last:$,views:A,ids:T}}({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:t&&this._isContainerRtl})}cleanup(){for(const e of this._pages)e.renderingState!==li.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}#U(e){var t=this;return(0,G.A)(function*(){if(e.pdfPage)return e.pdfPage;try{const r=yield t.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(r),r}catch(r){return console.error("Unable to get page for page view",r),null}})()}#B(e){if(1===e.first?.id)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case hn.PAGE:return this.#w.scrollDown;case hn.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const t=e||this._getVisiblePages(),r=this.#B(t),c=this.renderingQueue.getHighestPriority(t,this._pages,r,this._spreadMode!==xn.NONE&&this._scrollMode!==hn.HORIZONTAL);return!!c&&(this.#U(c).then(()=>{this.renderingQueue.renderView(c)}),!0)}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,r=this._pages.length;t<r;++t){const o=this._pages[t];if(o.width!==e.width||o.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{const r=t.pdfPage.getViewport({scale:1}),o=mf(r);if(void 0===e)e=o;else if(this.enablePrintAutoRotate&&o!==e)return{width:r.height,height:r.width,rotation:(r.rotation-90)%360};return{width:r.width,height:r.height,rotation:r.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!function b_(l){return Number.isInteger(l)&&Object.values(hn).includes(l)&&l!==hn.UNKNOWN}(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>1e4||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,r=this.viewer;r.classList.toggle("scrollHorizontal",t===hn.HORIZONTAL),r.classList.toggle("scrollWrapped",t===hn.WRAPPED),this.pdfDocument&&e&&(t===hn.PAGE?this.#S():this._previousScrollMode===hn.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#I(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!function Dm(l){return Number.isInteger(l)&&Object.values(xn).includes(l)&&l!==xn.UNKNOWN}(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,r=this._pages;if(this._scrollMode===hn.PAGE)this.#S();else if(t.textContent="",this._spreadMode===xn.NONE)for(const o of this._pages)t.append(o.div);else{const o=this._spreadMode-1;let c=null;for(let d=0,f=r.length;d<f;++d)null===c?(c=document.createElement("div"),c.className="spread",t.append(c)):d%2===o&&(c=c.cloneNode(!1),t.append(c)),c.append(r[d].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#I(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case hn.WRAPPED:{const{views:r}=this._getVisiblePages(),o=new Map;for(const{id:c,y:d,percent:f,widthPercent:p}of r){if(0===f||p<100)continue;let y=o.get(d);y||o.set(d,y||=[]),y.push(c)}for(const c of o.values()){const d=c.indexOf(e);if(-1===d)continue;const f=c.length;if(1===f)break;if(t)for(let p=d-1,y=0;p>=y;p--){const A=c[p+1]-1;if(c[p]<A)return e-A}else for(let p=d+1,y=f;p<y;p++){const A=c[p-1]+1;if(c[p]>A)return A-e}if(t){const p=c[0];if(p<e)return e-p+1}else{const p=c[f-1];if(p>e)return p-e+1}break}break}case hn.HORIZONTAL:break;case hn.PAGE:case hn.VERTICAL:{if(this._spreadMode===xn.NONE)break;const r=this._spreadMode-1;if(t&&e%2!==r)break;if(!t&&e%2===r)break;const{views:o}=this._getVisiblePages(),c=t?e-1:e+1;for(const{id:d,percent:f,widthPercent:p}of o)if(d===c){if(f>0&&100===p)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const r=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+r,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:r=null,origin:o}){if(null===r&&null===t)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let c=this._currentScale;if(t>0&&1!==t)c=Math.round(c*t*100)/100;else if(r){const d=r>0?1.1:1/1.1,f=r>0?Math.ceil:Math.floor;r=Math.abs(r);do{c=f(10*(c*d).toFixed(2))/10}while(--r>0)}c=Math.max(.1,Math.min(10,c)),this.#I(c,{noScroll:!1,drawingDelay:e,origin:o})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#L(e=this.container.clientHeight){e!==this.#_&&(this.#_=e,Id.setProperty("--viewer-container-height",`${e}px`))}#V(e){for(const t of e)if(t.target===this.container){this.#L(Math.floor(t.borderBoxSize[0].blockSize)),this.#l=null;break}}get containerTopLeft(){return this.#l||=[this.container.offsetTop,this.container.offsetLeft]}#j(){this.#f?.abort(),this.#f=null,null!==this.#g&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#r?this.#i:Lr.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:r=!1}){if(!this.#r)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===e)return;if(!yy(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===Lr.STAMP&&this.#p?.loadModel("altText");const{eventBus:o}=this,c=()=>{this.#j(),this.#i=e,this.#r.updateMode(e,t,r),o.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===Lr.NONE||this.#i===Lr.NONE){const d=e!==Lr.NONE;d||this.pdfDocument.annotationStorage.resetModifiedIds();for(const p of this._pages)p.toggleEditingMode(d);const f=this.#F();if(d&&f){this.#j(),this.#f=new AbortController;const p=AbortSignal.any([this.#h.signal,this.#f.signal]);return void o._on("pagerendered",({pageNumber:y})=>{f.delete(y),0===f.size&&(this.#g=setTimeout(c,0))},{signal:p})}}c()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const r of this._pages)r.update(t);null!==this.#E&&(clearTimeout(this.#E),this.#E=null),e||this.update()}}}class by extends Wf{_resetView(){super._resetView(),this._scrollMode=hn.PAGE,this._spreadMode=xn.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}var Qd=ei.AnnotationLayerBuilder,lu=ei.DownloadManager,wy=ei.EventBus,Gf=ei.FindState,Jl=ei.GenericL10n,za=ei.LinkTarget,Yd=ei.PDFFindController,Zd=ei.PDFHistory,Ey=ei.PDFLinkService,Cy=ei.PDFPageView,uw=ei.PDFScriptingManager,Ay=ei.PDFSinglePageViewer,Dy=ei.PDFViewer,Sy=ei.ProgressBar,My=ei.RenderingStates,Ft=ei.ScrollMode,Ty=ei.SimpleLinkService,Iy=ei.SpreadMode,ec=ei.StructTreeLayerBuilder,xy=ei.TextLayerBuilder,Py=ei.XfaLayerBuilder,dw=ei.parseQueryString;const Jd=["pdfViewerContainer"];function Wa(l,e,t){l[e]=t}function nc(){return typeof window>"u"}nc()||Wa(N,"verbosity",wr.INFOS),typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let l,e;return{promise:new Promise((r,o)=>{l=r,e=o}),resolve:l,reject:e}});var cu=function(l){return l[l.DISABLED=0]="DISABLED",l[l.ENABLED=1]="ENABLED",l[l.ENHANCED=2]="ENHANCED",l}(cu||{});let eh=(()=>{class l{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof N<"u"?`https://unpkg.com/pdfjs-dist@${hf}/cmaps/`:null;_imageResourcesPath=typeof N<"u"?`https://unpkg.com/pdfjs-dist@${hf}/web/images/`:void 0;_renderText=!0;_renderTextMode=cu.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new fl.B;afterLoadComplete=new m.bkB;pageRendered=new m.bkB;pageInitialized=new m.bkB;textLayerRendered=new m.bkB;onError=new m.bkB;onProgress=new m.bkB;pageChange=new m.bkB(!0);src;set cMapsUrl(t){this._cMapsUrl=t}set page(t){const r=t=parseInt(t,10)||1;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,r!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=!!t}set fitToPage(t){this._fitToPage=!!t}set showBorders(t){this._showBorders=!!t}static getLinkTarget(t){switch(t){case"blank":return za.BLANK;case"none":return za.NONE;case"self":return za.SELF;case"parent":return za.PARENT;case"top":return za.TOP}return null}constructor(t,r){if(this.element=t,this.ngZone=r,nc())return;let o;const c=hf;o=window[`pdfWorkerSrc${c}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${c}/legacy/build/pdf.worker.min.mjs`),Wa(am,"workerSrc",o)}ngAfterViewChecked(){if(this.isInitialized)return;const t=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=t?!1===this.isVisible&&null!=t&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!nc()&&this.isVisible)if("src"in t)this.loadPDF();else if(this._pdf){if(("renderText"in t||"showAll"in t)&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){const{page:r}=t;if(r.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,Ii.H)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,Sn.Q)(this.destroy$)).subscribe({next:t=>{const r=this._rotation+t.rotate,o=t.getViewport({scale:this._zoom,rotation:r}).width*l.CSS_UNITS;let c=this._zoom,d=!0;if(!this._originalSize||this._fitToPage&&o>this.pdfViewerContainer.nativeElement.clientWidth){const f=t.getViewport({scale:1,rotation:r});c=this.getScale(f.width,f.height),d=!this._stickToPage}this.pdfViewer.currentScale=c,d&&this.pdfViewer.scrollPageIntoView({pageNumber:t.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const t=l.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=function tc(l,e){const t=new l.EventBus;return function Kf(l,e){zt(l,"documentload").pipe((0,Sn.Q)(e)).subscribe(()=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),zt(l,"pagerendered").pipe((0,Sn.Q)(e)).subscribe(({pageNumber:t,cssTransform:r,source:o})=>{const c=document.createEvent("CustomEvent");c.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:r}),o.div.dispatchEvent(c)}),zt(l,"textlayerrendered").pipe((0,Sn.Q)(e)).subscribe(({pageNumber:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),r.textLayerDiv?.dispatchEvent(o)}),zt(l,"pagechanging").pipe((0,Sn.Q)(e)).subscribe(({pageNumber:t,source:r})=>{const o=document.createEvent("UIEvents");o.initEvent("pagechanging",!0,!0),o.pageNumber=t,r.container.dispatchEvent(o)}),zt(l,"pagesinit").pipe((0,Sn.Q)(e)).subscribe(({source:t})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(r)}),zt(l,"pagesloaded").pipe((0,Sn.Q)(e)).subscribe(({pagesCount:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),r.container.dispatchEvent(o)}),zt(l,"scalechange").pipe((0,Sn.Q)(e)).subscribe(({scale:t,presetValue:r,source:o})=>{const c=document.createEvent("UIEvents");c.initEvent("scalechange",!0,!0),c.scale=t,c.presetValue=r,o.container.dispatchEvent(c)}),zt(l,"updateviewarea").pipe((0,Sn.Q)(e)).subscribe(({location:t,source:r})=>{const o=document.createEvent("UIEvents");o.initEvent("updateviewarea",!0,!0),o.location=t,r.container.dispatchEvent(o)}),zt(l,"find").pipe((0,Sn.Q)(e)).subscribe(({source:t,type:r,query:o,phraseSearch:c,caseSensitive:d,highlightAll:f,findPrevious:p})=>{if(t===window)return;const y=document.createEvent("CustomEvent");y.initCustomEvent("find"+r,!0,!0,{query:o,phraseSearch:c,caseSensitive:d,highlightAll:f,findPrevious:p}),window.dispatchEvent(y)}),zt(l,"attachmentsloaded").pipe((0,Sn.Q)(e)).subscribe(({attachmentsCount:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),r.container.dispatchEvent(o)}),zt(l,"sidebarviewchanged").pipe((0,Sn.Q)(e)).subscribe(({view:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),r.outerContainer.dispatchEvent(o)}),zt(l,"pagemode").pipe((0,Sn.Q)(e)).subscribe(({mode:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("pagemode",!0,!0,{mode:t}),r.pdfViewer.container.dispatchEvent(o)}),zt(l,"namedaction").pipe((0,Sn.Q)(e)).subscribe(({action:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("namedaction",!0,!0,{action:t}),r.pdfViewer.container.dispatchEvent(o)}),zt(l,"presentationmodechanged").pipe((0,Sn.Q)(e)).subscribe(({active:t,switchInProgress:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:r}),window.dispatchEvent(o)}),zt(l,"outlineloaded").pipe((0,Sn.Q)(e)).subscribe(({outlineCount:t,source:r})=>{const o=document.createEvent("CustomEvent");o.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),r.container.dispatchEvent(o)})}(t,e),t}(V,this.destroy$),zt(this.eventBus,"pagerendered").pipe((0,Sn.Q)(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),zt(this.eventBus,"pagesinit").pipe((0,Sn.Q)(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),zt(this.eventBus,"pagechanging").pipe((0,Sn.Q)(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),zt(this.eventBus,"textlayerrendered").pipe((0,Sn.Q)(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new Ey({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new Yd({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:cu.DISABLED,findController:this.pdfFindController,l10n:new Jl("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:Na.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),Wa(N,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new Dy(this.getPDFOptions()):new Ay(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){const t=typeof this.src;if(!this._cMapsUrl)return this.src;const r={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0,isEvalSupported:!1};return"string"===t?r.url=this.src:"object"===t&&(void 0!==this.src.byteLength?r.data=this.src:Object.assign(r,this.src)),r}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=$s(this.getDocumentParams()),this.loadingTask.onProgress=r=>{this.onProgress.emit(r)};const t=this.src;(0,Ii.H)(this.loadingTask.promise).pipe((0,Sn.Q)(this.destroy$)).subscribe({next:r=>{this._pdf=r,this.lastLoaded=t,this.afterLoadComplete.emit(r),this.resetPdfDocument(),this.update()},error:r=>{this.lastLoaded=null,this.onError.emit(r)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{const t=this.pageInitialized.subscribe(()=>{this.updateSize(),t.unsubscribe()})}}getScale(t,r){const o=this._showBorders?2*l.BORDER_WIDTH:0,c=this.pdfViewerContainer.nativeElement.clientWidth-o,d=this.pdfViewerContainer.nativeElement.clientHeight-o;if(0===d||0===r||0===c||0===t)return 1;let f=1;switch(this._zoomScale){case"page-fit":f=Math.min(d/r,c/t);break;case"page-height":f=d/r;break;default:f=c/t}return this._zoom*f/l.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){nc()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){nc()||this.ngZone.runOutsideAngular(()=>{zt(window,"resize").pipe(function Bo(l,e=rn){return(0,Nc.N)((t,r)=>{let o=null,c=null,d=null;const f=()=>{if(o){o.unsubscribe(),o=null;const y=c;c=null,r.next(y)}};function p(){const y=d+l,_=e.now();if(_<y)return o=this.schedule(void 0,y-_),void r.add(o);f()}t.subscribe((0,ml._)(r,y=>{c=y,d=e.now(),o||(o=e.schedule(p,l),r.add(o))},()=>{f(),r.complete()},void 0,()=>{c=o=null}))})}(100),(0,Ur.p)(()=>this._canAutoResize&&!!this._pdf),(0,Sn.Q)(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(r){return new(r||l)(m.rXU(m.aKT),m.rXU(m.SKi))};static \u0275cmp=m.VBU({type:l,selectors:[["pdf-viewer"]],viewQuery:function(r,o){if(1&r&&m.GBs(Jd,5),2&r){let c;m.mGM(c=m.lsd())&&(o.pdfViewerContainer=c.first)}},inputs:{src:"src",cMapsUrl:[m.Mj6.None,"c-maps-url","cMapsUrl"],page:"page",renderText:[m.Mj6.None,"render-text","renderText"],renderTextMode:[m.Mj6.None,"render-text-mode","renderTextMode"],originalSize:[m.Mj6.None,"original-size","originalSize"],showAll:[m.Mj6.None,"show-all","showAll"],stickToPage:[m.Mj6.None,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[m.Mj6.None,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[m.Mj6.None,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[m.Mj6.None,"fit-to-page","fitToPage"],showBorders:[m.Mj6.None,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[m.OA$],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(r,o){1&r&&(m.j41(0,"div",1,0),m.nrm(2,"div",2),m.k0s())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})}return l})(),qf=(()=>{class l{static \u0275fac=function(r){return new(r||l)};static \u0275mod=m.$C({type:l});static \u0275inj=m.G2t({})}return l})();const Ry=["principal"];function Xf(l,e){if(1&l&&(m.j41(0,"div",5)(1,"div",6),m.nrm(2,"pdf-viewer",7),m.k0s()()),2&l){const t=m.XpG();m.R7$(2),m.Y8G("src",t.previewSrc)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!1)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1)}}const fw=["divPrincipal"];function pw(l,e){if(1&l){const t=m.RV6();m.j41(0,"div",2),m.bIt("click",function(){const o=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.passObject(o.id))}),m.nrm(1,"img",3),m.k0s()}if(2&l){const t=e.$implicit;m.R7$(),m.Y8G("src","assets/"+t.id+".png",m.B4B)("alt",t.name)}}const Oy=[{path:"home",component:rt},{path:"estudios",component:Rt},{path:"experiencia",component:ln},{path:"proyectos",component:Ye},{path:"lenguajes/:lenguaje",component:Sr},{path:"curriculum",component:(()=>{class l{constructor(t,r){this.http=t,this.translate=r,this.previewSrc_string="",this.verCV=!1}ngOnInit(){this.animationClass="in",this.langSub=this.translate.onLangChange.subscribe(()=>{this.verCV&&this.loadCV()})}loadCV(){this.animationClass="out",this.verCV=!0,this.http.get(`assets/${this.translate.currentLang}/CV.pdf`,{responseType:"blob"}).subscribe(r=>{const o=new FileReader;o.onloadend=()=>{this.previewSrc=o.result},o.readAsDataURL(r)})}downloadCV(){this.http.get(`assets/${this.translate.currentLang}/CV.pdf`,{responseType:"blob"}).subscribe(r=>{const o=document.createElement("a"),c=window.URL.createObjectURL(r);o.href=c,o.download="CV Alejandro Gajadhar",o.click(),window.URL.revokeObjectURL(c),o.remove()})}ngOnDestroy(){this.langSub&&this.langSub.unsubscribe()}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(ht),m.rXU(Ne.c$))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-curriculum"]],viewQuery:function(r,o){if(1&r&&m.GBs(Ry,7,m.aKT),2&r){let c;m.mGM(c=m.lsd())&&(o.div=c.first)}},decls:10,vars:8,consts:[["principal",""],["id","principal"],[1,"divBtn"],[1,"btn",3,"click"],["id","outerContainer","class","zoom-in-zoom-out",4,"ngIf"],["id","outerContainer",1,"zoom-in-zoom-out"],[1,"pdf-container"],[2,"width","100%","height","100vh",3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"]],template:function(r,o){if(1&r){const c=m.RV6();m.j41(0,"div",1,0)(2,"div",2)(3,"button",3),m.bIt("click",function(){return m.eBV(c),m.Njj(o.downloadCV())}),m.EFF(4),m.nI1(5,"translate"),m.k0s(),m.j41(6,"button",3),m.bIt("click",function(){return m.eBV(c),m.Njj(o.loadCV())}),m.EFF(7),m.nI1(8,"translate"),m.k0s()(),m.DNE(9,Xf,3,12,"div",4),m.k0s()}2&r&&(m.Y8G("@moveLeft",o.animationClass),m.R7$(4),m.SpI("",m.bMT(5,4,"labels.downloadCV")," "),m.R7$(3),m.SpI("",m.bMT(8,6,"labels.seeHere")," "),m.R7$(2),m.Y8G("ngIf",o.verCV))},dependencies:[Ue.bT,eh,Ne.D9],styles:[".zoom-in-zoom-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_zoom-in-zoom-out 2s ease-out 1}@keyframes _ngcontent-%COMP%_zoom-in-zoom-out{0%{transform:scale(0)}to{transform:scale(1)}}.btn[_ngcontent-%COMP%]{font-size:1.2rem;padding:1rem 2.5rem;border:none;outline:none;border-radius:.4rem;cursor:pointer;text-transform:uppercase;background-color:#0e0e1a;color:#eaeaea;font-weight:700;transition:.6s;box-shadow:0 0 60px #1f4c65;-webkit-box-reflect:below 10px linear-gradient(to bottom,rgba(0,0,0,0),rgba(0,0,0,.4))}.btn[_ngcontent-%COMP%]:active{scale:.92}.btn[_ngcontent-%COMP%]:hover{background:#021d4e;background:linear-gradient(270deg,#021d4eae,#1fd7e8df 60%);color:#040426}"],data:{animation:[ce("moveLeft",[U("in",he({paddingLeft:"30%",paddingTop:"20%",height:"70vh",width:"100%"})),U("out",he({width:"100%"})),Ee("in => out",fe("400ms ease-in-out"))])]}})}}return l})()},{path:"lenguajes",component:(()=>{class l{constructor(t,r){this.translator=t,this.router=r,this.lenguajes=[]}ngOnInit(){this.loadLanguages()}loadLanguages(){this.translator.getNestedTranslations2("languages",[]).subscribe(t=>{console.log(this.lenguajes),this.lenguajes=t})}passObject(t){this.router.navigate(["/lenguajes/"+t.toLowerCase()])}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Oe),m.rXU(xe.Ix))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-experiencias-program"]],viewQuery:function(r,o){if(1&r&&m.GBs(fw,5),2&r){let c;m.mGM(c=m.lsd())&&(o.divPrincipalRef=c.first)}},decls:2,vars:1,consts:[[1,"divPrincipal"],["class","aElement",3,"click",4,"ngFor","ngForOf"],[1,"aElement",3,"click"],[1,"imagenPrincipal",3,"src","alt"]],template:function(r,o){1&r&&(m.j41(0,"div",0),m.DNE(1,pw,2,2,"div",1),m.k0s()),2&r&&(m.R7$(),m.Y8G("ngForOf",o.lenguajes))},dependencies:[Ue.Sq],styles:['.divPrincipal[_ngcontent-%COMP%]{justify-items:center;display:flex;justify-content:space-evenly;flex-wrap:wrap}.aElement[_ngcontent-%COMP%]{cursor:pointer;transition:transform .5s;width:17%;margin:4%}.aElement[_ngcontent-%COMP%]:hover{transform:scale(1.5)}.imagenPrincipal[_ngcontent-%COMP%]{width:100%;aspect-ratio:1 / 1;object-fit:cover;border-radius:.5rem;background-color:#f5f5f5;display:block}@media screen and (max-width: 620px){.aElement[_ngcontent-%COMP%]{cursor:pointer;transition:transform .5s;width:30%;margin:4%}}@keyframes _ngcontent-%COMP%_gelatine{0%,to{transform:scale(1)}25%{transform:scale(.9,1.1)}50%{transform:scale(1.1,.9)}75%{transform:scale(.95,1.05)}}  .aElement:hover{transform:scale(1.2);background:linear-gradient(to right,#ff8a00,#da1b60);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}ul[_ngcontent-%COMP%]{list-style:none}@keyframes _ngcontent-%COMP%_hithere{30%{transform:scale(1.5)}40%,60%{transform:rotate(-20deg) scale(1.5)}50%{transform:rotate(20deg) scale(1.5)}70%{transform:rotate(0) scale(1.5)}to{transform:scale(1)}}.textImgSec[_ngcontent-%COMP%]{font-size:12px}.holographic-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:#000}.holographic-card[_ngcontent-%COMP%]{width:20%;height:-moz-fit-content;height:fit-content;background:#111;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;overflow:hidden;border-radius:15px;transition:all .5s ease}.holographic-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f9f9f9;font-size:medium}.holographic-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(0deg,transparent,transparent 30%,rgba(0,255,255,.3));transform:rotate(-45deg);transition:all .5s ease;opacity:0}']})}}return l})()},{path:"*",redirectTo:"home"},{path:"**",redirectTo:"home"}];let mw=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l})}static{this.\u0275inj=m.G2t({imports:[xe.iI.forRoot(Oy,{onSameUrlNavigation:"reload",useHash:!0}),xe.iI]})}}return l})();const yw=l=>({"show-scrollTop":l});let vw=(()=>{class l{constructor(t){this.document=t,this.windowScrolled=!1}onWindowScroll(){window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop>100?this.windowScrolled=!0:(this.windowScrolled&&window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop<10)&&(this.windowScrolled=!1)}scrollToTop(){window.scrollTo(0,0)}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Ue.qQ))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-scroll-to-top"]],hostBindings:function(r,o){1&r&&m.bIt("scroll",function(){return o.onWindowScroll()},!1,m.tSv)},decls:3,vars:3,consts:[[1,"scroll-to-top",3,"ngClass"],["type","button","data-toggle","button","aria-pressed","true",1,"btn","active","scrollTop",3,"click"],[1,"fas","fa-chevron-up"]],template:function(r,o){1&r&&(m.j41(0,"div",0)(1,"button",1),m.bIt("click",function(){return o.scrollToTop()}),m.nrm(2,"i",2),m.k0s()()),2&r&&m.Y8G("ngClass",m.eq3(1,yw,o.windowScrolled))},dependencies:[Ue.YU],styles:[".scroll-to-top[_ngcontent-%COMP%]{bottom:0;cursor:pointer;margin:0 8px 12px 0;position:fixed;right:0;opacity:0}.show-scrollTop[_ngcontent-%COMP%]{opacity:1!important;transition:all 1s ease-in-out}"]})}}return l})(),Ny=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-footer"]],decls:15,vars:3,consts:[[1,"footer-basic"],[1,"iconLinks"],["href","https://linkedin.com/in/alejandro-gajadhar-ledo-28842a146","target","_blank"],[1,"icon","ion-social-linkedin"],["href","mailto:alejandro.97.gl@correo.com","target","_blank"],[1,"icon","ion-ios-email"],["href","https://github.com/alejandrogajadhar/","target","_blank"],[1,"icon","ion-social-github"],["href","https://mail.google.com/mail/?view=cm&fs=1&to=alejandro.97.gl@gmail.com","target","_blank"],[1,"material-icons",2,"color","red"],[1,"infoText"]],template:function(r,o){1&r&&(m.j41(0,"div",0)(1,"footer")(2,"div",1)(3,"a",2),m.nrm(4,"i",3),m.k0s(),m.j41(5,"a",4),m.nrm(6,"i",5),m.k0s(),m.j41(7,"a",6),m.nrm(8,"i",7),m.k0s(),m.j41(9,"a",8)(10,"i",9),m.EFF(11,"mail"),m.k0s()()(),m.j41(12,"p",10),m.EFF(13),m.nI1(14,"translate"),m.k0s()()()),2&r&&(m.R7$(13),m.JRh(m.bMT(14,1,"labels.infoText")))},dependencies:[Ne.D9],styles:[".footer-basic[_ngcontent-%COMP%]{padding:2% 0;color:#f0f9ff;background-color:#282d32}.footer-basic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;text-align:center;font-size:18px;line-height:1.6;margin-bottom:0}.footer-basic[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0 10px}.footer-basic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none;opacity:.8}.footer-basic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}.footer-basic[_ngcontent-%COMP%]   .iconLinks[_ngcontent-%COMP%]{text-align:center;padding-bottom:25px}.footer-basic[_ngcontent-%COMP%]   .iconLinks[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:24px;width:40px;height:40px;line-height:40px;display:inline-block;text-align:center;border-radius:50%;border:1px solid #ccc;margin:0 8px;color:inherit;opacity:.75}.footer-basic[_ngcontent-%COMP%]   .iconLinks[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{opacity:.9}.footer-basic[_ngcontent-%COMP%]   .infoText[_ngcontent-%COMP%]{margin-top:15px;text-align:center;font-size:13px;color:#aaa;margin-bottom:0}"]})}}return l})();const ky=["idiomas"];function bw(l,e){if(1&l){const t=m.RV6();m.j41(0,"li")(1,"a",5),m.bIt("click",function(){const o=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.changeLanguage(o.code))}),m.nrm(2,"img",2),m.EFF(3),m.nI1(4,"translate"),m.k0s()()}if(2&l){const t=e.$implicit;m.R7$(2),m.Y8G("src",t.img,m.B4B),m.R7$(),m.SpI(" ",m.bMT(4,2,t.labelKey)," ")}}let _w=(()=>{class l{constructor(t,r,o){this.translate=t,this.router=r,this.activatedRoute=o,this.language=navigator.language,this.selectedItem="en",this.languages=[{code:"en",labelKey:"idiomas.en",img:"assets/english.png"},{code:"es",labelKey:"idiomas.es",img:"assets/spanish.png"},{code:"ca",labelKey:"idiomas.ca",img:"assets/catalan.png"}],this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}changeLanguage(t){t&&(this.selectedItem=t,window.language=t,this.translate.use(t||"en"),localStorage.setItem("lang",t))}getSelectedLang(){return this.languages.find(t=>t.code===this.selectedItem)??this.languages[0]}ngOnInit(){this.selectedItem=navigator.language,this.selectedItem.includes("-")&&(console.log("contiene - "),this.selectedItem=this.selectedItem.substring(0,this.selectedItem.indexOf("-")),console.log("value 2:"),console.log(this.selectedItem),this.changeLanguage(this.selectedItem))}reloadComponent(){this.router.navigateByUrl(this.router.url,{skipLocationChange:!0}).then(()=>{this.router.navigate([this.router.url])})}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(Ne.c$),m.rXU(xe.Ix),m.rXU(xe.nX))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-language-dropdown"]],viewQuery:function(r,o){if(1&r&&m.GBs(ky,5),2&r){let c;m.mGM(c=m.lsd())&&(o.idiomas=c.first)}},decls:7,vars:5,consts:[[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-light","dropdown-toggle"],["width","20",1,"me-2",3,"src"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(r,o){if(1&r&&(m.j41(0,"div",0)(1,"button",1),m.nrm(2,"img",2),m.EFF(3),m.nI1(4,"translate"),m.k0s(),m.j41(5,"ul",3),m.DNE(6,bw,5,4,"li",4),m.k0s()()),2&r){let c;m.R7$(2),m.Y8G("src",null==(c=o.getSelectedLang())?null:c.img,m.B4B),m.R7$(),m.SpI(" ",m.bMT(4,3,o.getSelectedLang().labelKey)," "),m.R7$(3),m.Y8G("ngForOf",o.languages)}},dependencies:[Ue.Sq,Ne.D9],styles:[".dropdown{z-index:10000;height:10%!important}.btn[_ngcontent-%COMP%]{cursor:none}"]})}}return l})(),Cr=(()=>{class l{constructor(){this.isDarkMode=!1,this.theme="light"}setTheme(t){this.applyTheme(t.target.checked?"dark":"light")}applyTheme(t){console.log(t),this.isDarkMode="dark"===t,localStorage.setItem("theme",t);const r=document.getElementById("theme-css"),o=`assets/css/${t}.css`;if(console.log(o),r)r.href=o;else{const c=document.createElement("link");c.id="theme-css",c.rel="stylesheet",c.href=o,document.head.appendChild(c)}}setupAutoDetect(){const t=window.matchMedia("(prefers-color-scheme: dark)");localStorage.getItem("user-theme")||(this.theme=t.matches?"dark":"light",this.loadTheme(this.theme)),t.addEventListener("change",r=>{if(!localStorage.getItem("user-theme")){const o=r.matches?"dark":"light";this.theme=o,this.loadTheme(o)}})}ngOnInit(){this.loadTheme(this.theme)}toggleTheme(t){this.theme=t.target.checked?"dark":"light",this.loadTheme(this.theme)}loadTheme(t){let r=document.getElementById("theme-link");r||(r=document.createElement("link"),r.rel="stylesheet",r.id="theme-link",document.head.appendChild(r)),r.href=`assets/css/${t}.css`}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-switch-dark-colors"]],decls:11,vars:0,consts:[[1,"switch"],[1,"sun"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["fill","#ffd43b"],["r","5","cy","12","cx","12"],["d","m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm-17 0h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm13.66-5.66a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29zm-12.02 12.02a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24zm6.36-14.36a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm0 17a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm-5.66-14.66a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29zm12.02 12.02a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"],[1,"moon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 384 512"],["d","m223.5 32c-123.5 0-223.5 100.3-223.5 224s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"],["type","checkbox",1,"input",3,"click"],[1,"slider"]],template:function(r,o){1&r&&(m.j41(0,"label",0)(1,"span",1),m.qSk(),m.j41(2,"svg",2)(3,"g",3),m.nrm(4,"circle",4)(5,"path",5),m.k0s()()(),m.joV(),m.j41(6,"span",6),m.qSk(),m.j41(7,"svg",7),m.nrm(8,"path",8),m.k0s()(),m.joV(),m.j41(9,"input",9),m.bIt("click",function(d){return o.setTheme(d)}),m.k0s(),m.nrm(10,"span",10),m.k0s())},styles:['.switch[_ngcontent-%COMP%]{font-size:17px;position:relative;display:inline-block;width:64px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#73c0fc;transition:.4s;border-radius:30px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:33px;width:33px;border-radius:20px;left:2px;top:1px;z-index:2;background-color:#e8e8e8;transition:.4s}.sun[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:6px;left:36px;z-index:1;width:24px;height:24px}.moon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#73c0fc;position:absolute;top:5px;left:5px;z-index:1;width:24px;height:24px}.sun[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 15s linear infinite}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.moon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tilt 5s linear infinite}@keyframes _ngcontent-%COMP%_tilt{0%{transform:rotate(0)}25%{transform:rotate(-10deg)}75%{transform:rotate(10deg)}to{transform:rotate(0)}}.input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#183153}.input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #183153}.input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(30px)}']})}}return l})();const ww=["front"];let Ew=(()=>{class l{constructor(t,r){this._router=t,this.translate=r,this.title="portfolio",this.language="",r.setDefaultLang("en"),r.addLangs(["en","es","ca"]),r.use("en")}ngAfterViewInit(){}ngOnInit(){}clearView(){this.aboutme.clear()}developInfo(t){this.lenguajeEscogido=t,this._router.navigateByUrl("/lenguajes/"+t)}static{this.\u0275fac=function(r){return new(r||l)(m.rXU(xe.Ix),m.rXU(Ne.c$))}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-root"]],viewQuery:function(r,o){if(1&r&&m.GBs(ww,5,m.c1b),2&r){let c;m.mGM(c=m.lsd())&&(o.aboutme=c.first)}},decls:40,vars:15,consts:[["navCollapse",""],["tarjeta",""],["front",""],[1,"app-wrapper"],[2,"height","100%"],[1,"sticky-header"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark-blue"],["type","button","data-toggle","collapse","data-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav","menu"],[1,"nav-item"],["routerLinkActive","active","routerLink","/home",1,"nav-link",3,"click"],["routerLinkActive","active","routerLink","/estudios",1,"nav-link",3,"click"],["routerLinkActive","active","routerLink","/experiencia",1,"nav-link",3,"click"],["id","navbarDropdownMenuLink","aria-haspopup","true","aria-expanded","false","routerLink","/lenguajes",1,"nav-link",3,"click"],["routerLinkActive","active","routerLink","/curriculum",1,"nav-link",3,"click"],[1,"topbar"],[1,"center"],[1,"tarjeta"],[1,"front"],[1,"footer"]],template:function(r,o){if(1&r){const c=m.RV6();m.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"nav",6)(4,"button",7),m.nrm(5,"span",8),m.k0s(),m.j41(6,"div",9,0)(8,"ul",10)(9,"li",11)(10,"a",12),m.bIt("click",function(){m.eBV(c);const f=m.sdS(7);return o.clearView(),m.Njj(f.classList.remove("show"))}),m.EFF(11),m.nI1(12,"translate"),m.k0s()(),m.j41(13,"li",11)(14,"a",13),m.bIt("click",function(){m.eBV(c);const f=m.sdS(7);return o.clearView(),m.Njj(f.classList.remove("show"))}),m.EFF(15),m.nI1(16,"translate"),m.k0s()(),m.j41(17,"li",11)(18,"a",14),m.bIt("click",function(){m.eBV(c);const f=m.sdS(7);return o.clearView(),m.Njj(f.classList.remove("show"))}),m.EFF(19),m.nI1(20,"translate"),m.k0s()(),m.j41(21,"li",11)(22,"a",15),m.bIt("click",function(){m.eBV(c);const f=m.sdS(7);return o.clearView(),m.Njj(f.classList.remove("show"))}),m.EFF(23),m.nI1(24,"translate"),m.k0s()(),m.j41(25,"li",11)(26,"a",16),m.bIt("click",function(){m.eBV(c);const f=m.sdS(7);return o.clearView(),m.Njj(f.classList.remove("show"))}),m.EFF(27),m.nI1(28,"translate"),m.k0s()()()()(),m.j41(29,"div",17),m.nrm(30,"app-language-dropdown")(31,"app-switch-dark-colors"),m.k0s()(),m.j41(32,"div",18)(33,"div",19,1),m.nrm(35,"div",20,2)(37,"router-outlet"),m.k0s()(),m.nrm(38,"app-scroll-to-top")(39,"app-footer",21),m.k0s()()}2&r&&(m.R7$(11),m.SpI(" ",m.bMT(12,5,"labels.home")," "),m.R7$(4),m.SpI(" ",m.bMT(16,7,"labels.education")," "),m.R7$(4),m.SpI(" ",m.bMT(20,9,"labels.workingExperience")," "),m.R7$(4),m.SpI(" ",m.bMT(24,11,"labels.programmingExperience")," "),m.R7$(4),m.SpI(" ",m.bMT(28,13,"labels.CV")," "))},dependencies:[xe.n3,xe.Wk,xe.wQ,vw,Ny,_w,Cr,Ne.D9],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0}body[_ngcontent-%COMP%]{display:flex}.center[_ngcontent-%COMP%]{min-height:80vh}.app-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;width:100%}.navbar[_ngcontent-%COMP%]{width:100%}.sticky-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:20000;box-shadow:0 2px 4px #0003;width:100%;display:flex;flex-direction:row}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:2px;background:linear-gradient(to right,#b47dcd,#e878a2,#eb85ab);z-index:1;transform:scaleX(0);transform-origin:left;transition:transform .5s ease-in-out}.menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.menu[data-animation=bonus][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{transform-origin:right;transition:transform .5s ease-in-out}.menu[data-animation=bonus][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{transform-origin:left;transform:scaleX(1);transition-timing-function:cubic-bezier(.2,1,.82,.94)}.active[_ngcontent-%COMP%]:after{content:"";display:flex;flex-direction:row;width:5px;height:5px;text-align:center;margin:0 auto;opacity:1;border-radius:50%;transition:all .2s ease-in-out;transform:translate(-10%)}.topbar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{opacity:1!important;z-index:200000}.blackDiv[_ngcontent-%COMP%]{background-color:#000;height:500px;width:500px}.topbar[_ngcontent-%COMP%]{opacity:1!important;background:linear-gradient(.5turn,#1b1bc5,#6363d5,#1b1bc5);display:flex;align-items:center;align-items:baseline;flex-direction:row;padding-right:2%;padding-top:.75%}.bg-dark-blue[_ngcontent-%COMP%]{opacity:1!important;background-color:#1b1bc5!important;background:linear-gradient(.5turn,#1b1bc5,#6363d5,#1b1bc5)}.navbar-light[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .navbar-light[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{opacity:1!important;background-color:#1b1bc5!important;background:linear-gradient(.35turn,#1b1bc5,#6363d5,#1b1bc5)}.footer[_ngcontent-%COMP%]{background:#222;color:#fff;text-align:center}']})}}return l})();class yC{http;prefix;suffix;constructor(e,t="/assets/i18n/",r=".json"){this.http=e,this.prefix=t,this.suffix=r}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}Math;const Fy={radius:125,animation:"easeOutCubic",animationDelay:void 0,duration:500,stroke:15,color:"#45CCCE",background:"#EAEAEA",responsive:!1,clockwise:!0,semicircle:!1,rounded:!1},Vy={provide:new m.nKC("ROUND_PROGRESS_DEFAULTS",{providedIn:"root",factory:()=>Fy}),useValue:Fy};let Qf=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l})}static{this.\u0275inj=m.G2t({providers:[Vy]})}}return l})();function jy(l){return new m.wOt(3e3,!1)}function aa(l){switch(l.length){case 0:return new cr;case 1:return l[0];default:return new $i(l)}}function kw(l,e,t=new Map,r=new Map){const o=[],c=[];let d=-1,f=null;if(e.forEach(p=>{const y=p.get("offset"),_=y==d,A=_&&f||new Map;p.forEach((T,R)=>{let L=R,j=T;if("offset"!==R)switch(L=l.normalizePropertyName(L,o),j){case"!":j=t.get(R);break;case Cn:j=r.get(R);break;default:j=l.normalizeStyleValue(R,L,j,o)}A.set(L,j)}),_||c.push(A),f=A,d=y}),o.length)throw function Gy(l){return new m.wOt(3502,!1)}();return c}function tp(l,e,t,r){switch(e){case"start":l.onStart(()=>r(t&&np(t,"start",l)));break;case"done":l.onDone(()=>r(t&&np(t,"done",l)));break;case"destroy":l.onDestroy(()=>r(t&&np(t,"destroy",l)))}}function np(l,e,t){const c=rh(l.element,l.triggerName,l.fromState,l.toState,e||l.phaseName,t.totalTime??l.totalTime,!!t.disabled),d=l._data;return null!=d&&(c._data=d),c}function rh(l,e,t,r,o="",c=0,d){return{element:l,triggerName:e,fromState:t,toState:r,phaseName:o,totalTime:c,disabled:!!d}}function Vr(l,e,t){let r=l.get(e);return r||l.set(e,r=t),r}function Qy(l){const e=l.indexOf(":");return[l.substring(1,e),l.slice(e+1)]}const Yy=typeof document>"u"?null:document.documentElement;function fu(l){const e=l.parentNode||l.host||null;return e===Yy?null:e}let ws=null,rc=!1;function Jy(l,e){for(;e;){if(e===l)return!0;e=fu(e)}return!1}function gu(l,e,t){if(t)return Array.from(l.querySelectorAll(e));const r=l.querySelector(e);return r?[r]:[]}let ip=(()=>{class l{validateStyleProperty(t){return function pu(l){ws||(ws=function Lw(){return typeof document<"u"?document.body:null}()||{},rc=!!ws.style&&"WebkitAppearance"in ws.style);let e=!0;return ws.style&&!function Zy(l){return"ebkit"==l.substring(1,6)}(l)&&(e=l in ws.style,!e&&rc&&(e="Webkit"+l.charAt(0).toUpperCase()+l.slice(1)in ws.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Jy(t,r)}getParentElement(t){return fu(t)}query(t,r,o){return gu(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,c,d,f=[],p){return new cr(o,c)}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})();class tv{static{this.NOOP=new ip}}class nv{}const Vw=1e3,iv="ng-enter",sh="ng-leave",oh="ng-trigger",ah=".ng-trigger",lh="ng-animating",Ga=".ng-animating";function Es(l){if("number"==typeof l)return l;const e=l.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sc(parseFloat(e[1]),e[2])}function sc(l,e){return"s"===e?l*Vw:l}function mu(l,e,t){return l.hasOwnProperty("duration")?l:function yu(l,e,t){let o,c=0,d="";if("string"==typeof l){const f=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(jy()),{duration:0,delay:0,easing:""};o=sc(parseFloat(f[1]),f[2]);const p=f[3];null!=p&&(c=sc(parseFloat(p),f[4]));const y=f[5];y&&(d=y)}else o=l;if(!t){let f=!1,p=e.length;o<0&&(e.push(function Aw(){return new m.wOt(3100,!1)}()),f=!0),c<0&&(e.push(function Dw(){return new m.wOt(3101,!1)}()),f=!0),f&&e.splice(p,0,jy())}return{duration:o,delay:c,easing:d}}(l,e,t)}function Ar(l,e,t){e.forEach((r,o)=>{const c=sp(o);t&&!t.has(o)&&t.set(o,l.style[c]),l.style[c]=r})}function la(l,e){e.forEach((t,r)=>{const o=sp(r);l.style[o]=""})}function vu(l){return Array.isArray(l)?1==l.length?l[0]:function X(l,e=null){return{type:it.Sequence,steps:l,options:e}}(l):l}const rp=new RegExp("{{\\s*(.+?)\\s*}}","g");function bu(l){let e=[];if("string"==typeof l){let t;for(;t=rp.exec(l);)e.push(t[1]);rp.lastIndex=0}return e}function _u(l,e,t){const r=`${l}`,o=r.replace(rp,(c,d)=>{let f=e[d];return null==f&&(t.push(function Ks(l){return new m.wOt(3003,!1)}()),f=""),f.toString()});return o==r?l:o}const Uw=/-+([a-z0-9])/g;function sp(l){return l.replace(Uw,(...e)=>e[1].toUpperCase())}function ji(l,e,t){switch(e.type){case it.Trigger:return l.visitTrigger(e,t);case it.State:return l.visitState(e,t);case it.Transition:return l.visitTransition(e,t);case it.Sequence:return l.visitSequence(e,t);case it.Group:return l.visitGroup(e,t);case it.Animate:return l.visitAnimate(e,t);case it.Keyframes:return l.visitKeyframes(e,t);case it.Style:return l.visitStyle(e,t);case it.Reference:return l.visitReference(e,t);case it.AnimateChild:return l.visitAnimateChild(e,t);case it.AnimateRef:return l.visitAnimateRef(e,t);case it.Query:return l.visitQuery(e,t);case it.Stagger:return l.visitStagger(e,t);default:throw function Yf(l){return new m.wOt(3004,!1)}()}}function ap(l,e){return window.getComputedStyle(l)[e]}const ch=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wu extends nv{normalizePropertyName(e,t){return sp(e)}normalizeStyleValue(e,t,r,o){let c="";const d=r.toString().trim();if(ch.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)c="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&o.push(function Mw(l,e){return new m.wOt(3005,!1)}())}return d+c}}const uh="*";const dh=new Set(["true","1"]),_o=new Set(["false","0"]);function Eu(l,e){const t=dh.has(l)||_o.has(l),r=dh.has(e)||_o.has(e);return(o,c)=>{let d=l==uh||l==o,f=e==uh||e==c;return!d&&t&&"boolean"==typeof o&&(d=o?dh.has(l):_o.has(l)),!f&&r&&"boolean"==typeof c&&(f=c?dh.has(e):_o.has(e)),d&&f}}const uv=new RegExp("s*:selfs*,?","g");function lp(l,e,t,r){return new xC(l).build(e,t,r)}class xC{constructor(e){this._driver=e}build(e,t,r){const o=new dv(t);return this._resetContextStyleTimingState(o),ji(this,vu(e),o)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,o=t.depCount=0;const c=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push(function Tw(){return new m.wOt(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),f.type==it.State){const p=f,y=p.name;y.toString().split(/\s*,\s*/).forEach(_=>{p.name=_,c.push(this.visitState(p,t))}),p.name=y}else if(f.type==it.Transition){const p=this.visitTransition(f,t);r+=p.queryCount,o+=p.depCount,d.push(p)}else t.errors.push(function By(){return new m.wOt(3007,!1)}())}),{type:it.Trigger,name:e.name,states:c,transitions:d,queryCount:r,depCount:o,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(r.containsDynamicStyles){const c=new Set,d=o||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(p=>{bu(p).forEach(y=>{d.hasOwnProperty(y)||c.add(y)})})}),c.size&&t.errors.push(function Uy(l,e){return new m.wOt(3008,!1)}(0,c.values()))}return{type:it.State,name:e.name,style:r,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ji(this,vu(e.animation),t),o=function zw(l,e){const t=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(r=>function lv(l,e,t){if(":"==l[0]){const p=function Ww(l,e){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function xw(l){return new m.wOt(3016,!1)}()),"* => *"}}(l,t);if("function"==typeof p)return void e.push(p);l=p}const r=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Iw(l){return new m.wOt(3015,!1)}()),e;const o=r[1],c=r[2],d=r[3];e.push(Eu(o,d)),"<"==c[0]&&(o!=uh||d!=uh)&&e.push(Eu(d,o))}(r,t,e)):t.push(l),t}(e.expr,t.errors);return{type:it.Transition,matchers:o,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ka(e.options)}}visitSequence(e,t){return{type:it.Sequence,steps:e.steps.map(r=>ji(this,r,t)),options:Ka(e.options)}}visitGroup(e,t){const r=t.currentTime;let o=0;const c=e.steps.map(d=>{t.currentTime=r;const f=ji(this,d,t);return o=Math.max(o,t.currentTime),f});return t.currentTime=o,{type:it.Group,steps:c,options:Ka(e.options)}}visitAnimate(e,t){const r=function qw(l,e){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return Au(mu(l,e).duration,0,"");const t=l;if(t.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=Au(0,0,"");return c.dynamic=!0,c.strValue=t,c}const o=mu(t,e);return Au(o.duration,o.delay,o.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let o,c=e.styles?e.styles:he({});if(c.type==it.Keyframes)o=this.visitKeyframes(c,t);else{let d=e.styles,f=!1;if(!d){f=!0;const y={};r.easing&&(y.easing=r.easing),d=he(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(d,t);p.isEmptyStep=f,o=p}return t.currentAnimateTimings=null,{type:it.Animate,timings:r,style:o,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],o=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of o)"string"==typeof f?f===Cn?r.push(f):t.errors.push(new m.wOt(3002,!1)):r.push(new Map(Object.entries(f)));let c=!1,d=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(d=f.get("easing"),f.delete("easing")),!c))for(let p of f.values())if(p.toString().indexOf("{{")>=0){c=!0;break}}),{type:it.Style,styles:r,easing:d,offset:e.offset,containsDynamicStyles:c,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let o=t.currentTime,c=t.currentTime;r&&c>0&&(c-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&d.forEach((f,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),_=y.get(p);let A=!0;_&&(c!=o&&c>=_.startTime&&o<=_.endTime&&(t.errors.push(function CC(l,e,t,r,o){return new m.wOt(3010,!1)}()),A=!1),c=_.startTime),A&&y.set(p,{startTime:c,endTime:o}),t.options&&function ov(l,e,t){const r=e.params||{},o=bu(l);o.length&&o.forEach(c=>{r.hasOwnProperty(c)||t.push(function Sw(l){return new m.wOt(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:it.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function $y(){return new m.wOt(3011,!1)}()),r;let c=0;const d=[];let f=!1,p=!1,y=0;const _=e.steps.map($=>{const Z=this._makeStyleAst($,t);let te=null!=Z.offset?Z.offset:function Kw(l){if("string"==typeof l)return null;let e=null;if(Array.isArray(l))l.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(l instanceof Map&&l.has("offset")){const t=l;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Z.styles),se=0;return null!=te&&(c++,se=Z.offset=te),p=p||se<0||se>1,f=f||se<y,y=se,d.push(se),Z});p&&t.errors.push(function zy(){return new m.wOt(3012,!1)}()),f&&t.errors.push(function Wy(){return new m.wOt(3200,!1)}());const A=e.steps.length;let T=0;c>0&&c<A?t.errors.push(function nh(){return new m.wOt(3202,!1)}()):0==c&&(T=1/(A-1));const R=A-1,L=t.currentTime,j=t.currentAnimateTimings,K=j.duration;return _.forEach(($,Z)=>{const te=T>0?Z==R?1:T*Z:d[Z],se=te*K;t.currentTime=L+j.delay+se,j.duration=se,this._validateStyleAst($,t),$.offset=te,r.styles.push($)}),r}visitReference(e,t){return{type:it.Reference,animation:ji(this,vu(e.animation),t),options:Ka(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:it.AnimateChild,options:Ka(e.options)}}visitAnimateRef(e,t){return{type:it.AnimateRef,animation:this.visitReference(e.animation,t),options:Ka(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[c,d]=function Gw(l){const e=!!l.split(/\s*,\s*/).find(t=>":self"==t);return e&&(l=l.replace(uv,"")),l=l.replace(/@\*/g,ah).replace(/@\w+/g,t=>ah+"-"+t.slice(1)).replace(/:animating/g,Ga),[l,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+c:c,Vr(t.collectedStyles,t.currentQuerySelector,new Map);const f=ji(this,vu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:it.Query,selector:c,limit:o.limit||0,optional:!!o.optional,includeSelf:d,animation:f,originalSelector:e.selector,options:Ka(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Zf(){return new m.wOt(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:mu(e.timings,t.errors,!0);return{type:it.Stagger,animation:ji(this,vu(e.animation),t),timings:r,options:null}}}class dv{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ka(l){return l?(l={...l}).params&&(l.params=function Cu(l){return l?{...l}:null}(l.params)):l={},l}function Au(l,e,t){return{duration:l,delay:e,easing:t}}function hv(l,e,t,r,o,c,d=null,f=!1){return{type:1,element:l,keyframes:e,preStyleProps:t,postStyleProps:r,duration:o,delay:c,totalTime:o+c,easing:d,subTimeline:f}}class Du{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Xw=new RegExp(":enter","g"),Ci=new RegExp(":leave","g");function up(l,e,t,r,o,c=new Map,d=new Map,f,p,y=[]){return(new dp).buildKeyframes(l,e,t,r,o,c,d,f,p,y)}class dp{buildKeyframes(e,t,r,o,c,d,f,p,y,_=[]){y=y||new Du;const A=new hp(e,t,y,o,c,_,[]);A.options=p;const T=p.delay?Es(p.delay):0;A.currentTimeline.delayNextStep(T),A.currentTimeline.setStyles([d],null,A.errors,p),ji(this,r,A);const R=A.timelines.filter(L=>L.containsAnimation());if(R.length&&f.size){let L;for(let j=R.length-1;j>=0;j--){const K=R[j];if(K.element===t){L=K;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([f],null,A.errors,p)}return R.length?R.map(L=>L.buildKeyframes()):[hv(t,[],[],[],0,T,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const o=t.createSubContext(e.options),c=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,o,o.options);c!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const o of e){const c=o?.delay;if(c){const d="number"==typeof c?c:Es(_u(c,o?.params??{},t.errors));r.delayNextStep(d)}}}_visitSubInstructions(e,t,r){let c=t.currentTimeline.currentTime;const d=null!=r.duration?Es(r.duration):null,f=null!=r.delay?Es(r.delay):null;return 0!==d&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,d,f);c=Math.max(c,y.duration+y.delay)}),c}visitReference(e,t){t.updateOptions(e.options,!0),ji(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let o=t;const c=e.options;if(c&&(c.params||c.delay)&&(o=t.createSubContext(c),o.transformIntoNewTimeline(),null!=c.delay)){o.previousNode.type==it.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=hh);const d=Es(c.delay);o.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>ji(this,d,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let o=t.currentTimeline.currentTime;const c=e.options&&e.options.delay?Es(e.options.delay):0;e.steps.forEach(d=>{const f=t.createSubContext(e.options);c&&f.delayNextStep(c),ji(this,d,f),o=Math.max(o,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return mu(t.params?_u(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const c=e.style;c.type==it.Keyframes?this.visitKeyframes(c,t):(t.incrementTime(r.duration),this.visitStyle(c,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();const c=o&&o.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(c):r.setStyles(e.styles,c,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,c=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(p=>{f.forwardTime((p.offset||0)*c),f.setStyles(p.styles,p.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(o+c),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,o=e.options||{},c=o.delay?Es(o.delay):0;c&&(t.previousNode.type===it.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=hh);let d=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=f.length;let p=null;f.forEach((y,_)=>{t.currentQueryIndex=_;const A=t.createSubContext(e.options,y);c&&A.delayNextStep(c),y===t.element&&(p=A.currentTimeline),ji(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,o=t.currentTimeline,c=e.timings,d=Math.abs(c.duration),f=d*(t.currentQueryTotal-1);let p=d*t.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":p=f-p;break;case"full":p=r.currentStaggerTime}const _=t.currentTimeline;p&&_.delayNextStep(p);const A=_.currentTime;ji(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=o.currentTime-A+(o.startTime-r.currentTimeline.startTime)}}const hh={};class hp{constructor(e,t,r,o,c,d,f,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=c,this.errors=d,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new oc(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let o=this.options;null!=r.duration&&(o.duration=Es(r.duration)),null!=r.delay&&(o.delay=Es(r.delay));const c=r.params;if(c){let d=o.params;d||(d=this.options.params={}),Object.keys(c).forEach(f=>{(!t||!d.hasOwnProperty(f))&&(d[f]=_u(c[f],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return e}createSubContext(e=null,t,r){const o=t||this.element,c=new hp(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(e),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(e){return this.previousNode=hh,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const o={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},c=new pv(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(c),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,o,c,d){let f=[];if(o&&f.push(this.element),e.length>0){e=(e=e.replace(Xw,"."+this._enterClassName)).replace(Ci,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),f.push(...y)}return!c&&0==f.length&&d.push(function bo(l){return new m.wOt(3014,!1)}()),f}}class oc{constructor(e,t,r,o){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new oc(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Cn),this._currentKeyframe.set(t,Cn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,o){t&&this._previousKeyframe.set("easing",t);const c=o&&o.params||{},d=function gv(l,e){const t=new Map;let r;return l.forEach(o=>{if("*"===o){r??=e.keys();for(let c of r)t.set(c,Cn)}else for(let[c,d]of o)t.set(c,d)}),t}(e,this._globalTimelineStyles);for(let[f,p]of d){const y=_u(p,c,r);this._pendingStyles.set(f,y),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Cn),this._updateStyle(f,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const o=this._styleSummary.get(r);(!o||t.time>o.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((f,p)=>{const y=new Map([...this._backFill,...f]);y.forEach((_,A)=>{"!"===_?e.add(A):_===Cn&&t.add(A)}),r||y.set("offset",p/this.duration),o.push(y)});const c=[...e.values()],d=[...t.values()];if(r){const f=o[0],p=new Map(f);f.set("offset",0),p.set("offset",1),o=[f,p]}return hv(this.element,o,c,d,this.duration,this.startTime,this.easing,!1)}}class pv extends oc{constructor(e,t,r,o,c,d,f=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=c,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const c=[],d=r+t,f=t/d,p=new Map(e[0]);p.set("offset",0),c.push(p);const y=new Map(e[0]);y.set("offset",fp(f)),c.push(y);const _=e.length-1;for(let A=1;A<=_;A++){let T=new Map(e[A]);const R=T.get("offset");T.set("offset",fp((t+R*r)/d)),c.push(T)}r=d,t=0,o="",e=c}return hv(this.element,e,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function fp(l,e=3){const t=Math.pow(10,e-1);return Math.round(l*t)/t}function mv(l,e,t,r,o,c,d,f,p,y,_,A,T){return{type:0,element:l,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:c,toState:r,toStyles:d,timelines:f,queriedElements:p,preStyleProps:y,postStyleProps:_,totalTime:A,errors:T}}const pp={};class ca{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,o){return function gp(l,e,t,r,o){return l.some(c=>c(e,t,r,o))}(this.ast.matchers,e,t,r,o)}buildStyles(e,t,r){let o=this._stateStyles.get("*");return void 0!==e&&(o=this._stateStyles.get(e?.toString())||o),o?o.buildStyles(t,r):new Map}build(e,t,r,o,c,d,f,p,y,_){const A=[],T=this.ast.options&&this.ast.options.params||pp,L=this.buildStyles(r,f&&f.params||pp,A),j=p&&p.params||pp,K=this.buildStyles(o,j,A),$=new Set,Z=new Map,te=new Map,se="void"===o,ue={params:yv(j,T),delay:this.ast.options?.delay},pe=_?[]:up(e,t,this.ast.animation,c,d,L,K,ue,y,A);let Ce=0;return pe.forEach(Ae=>{Ce=Math.max(Ae.duration+Ae.delay,Ce)}),A.length?mv(t,this._triggerName,r,o,se,L,K,[],[],Z,te,Ce,A):(pe.forEach(Ae=>{const ie=Ae.element,ve=Vr(Z,ie,new Set);Ae.preStyleProps.forEach(Vt=>ve.add(Vt));const $e=Vr(te,ie,new Set);Ae.postStyleProps.forEach(Vt=>$e.add(Vt)),ie!==t&&$.add(ie)}),mv(t,this._triggerName,r,o,se,L,K,pe,[...$.values()],Z,te,Ce))}}function yv(l,e){const t={...e};return Object.entries(l).forEach(([r,o])=>{null!=o&&(t[r]=o)}),t}class vv{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,o=yv(e,this.defaultParams);return this.styles.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{d&&(d=_u(d,o,t));const p=this.normalizer.normalizePropertyName(f,t);d=this.normalizer.normalizeStyleValue(f,p,d,t),r.set(f,d)})}),r}}class _v{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(o=>{this.states.set(o.name,new vv(o.style,o.options&&o.options.params||{},r))}),fh(this.states,"true","1"),fh(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new ca(e,o,this.states))}),this.fallbackTransition=function Su(l,e,t){return new ca(l,{type:it.Transition,animation:{type:it.Sequence,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,o){return this.transitionFactories.find(d=>d.match(e,t,r,o))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function fh(l,e,t){l.has(e)?l.has(t)||l.set(t,l.get(e)):l.has(t)&&l.set(e,l.get(t))}const ua=new Du;class ph{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],c=lp(this._driver,t,r,[]);if(r.length)throw function ic(l){return new m.wOt(3503,!1)}();this._animations.set(e,c)}_buildPlayer(e,t,r){const o=e.element,c=kw(this._normalizer,e.keyframes,t,r);return this._driver.animate(o,c,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const o=[],c=this._animations.get(e);let d;const f=new Map;if(c?(d=up(this._driver,t,c,iv,sh,new Map,new Map,r,ua,o),d.forEach(_=>{const A=Vr(f,_.element,new Map);_.postStyleProps.forEach(T=>A.set(T,null))})):(o.push(function du(){return new m.wOt(3300,!1)}()),d=[]),o.length)throw function ep(l){return new m.wOt(3504,!1)}();f.forEach((_,A)=>{_.forEach((T,R)=>{_.set(R,this._driver.computeStyle(A,R,Cn))})});const y=aa(d.map(_=>{const A=f.get(_.element);return this._buildPlayer(_,new Map,A)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function hu(l){return new m.wOt(3301,!1)}();return t}listen(e,t,r,o){const c=rh(t,"","","");return tp(this._getPlayer(e),r,c,o),()=>{}}command(e,t,r,o){if("register"==r)return void this.register(e,o[0]);if("create"==r)return void this.create(e,t,o[0]||{});const c=this._getPlayer(e);switch(r){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const mp="ng-animate-queued",yp="ng-animate-disabled",da=[],ac={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},RC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dr="__ng_removed";class gh{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Jw(l){return l??null}(r?e.value:e),r){const{value:c,...d}=e;this.options=d}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const lc="void",bp=new gh(lc);class mh{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,or(t,this._hostClassName)}listen(e,t,r,o){if(!this._triggers.has(t))throw function Ky(l,e){return new m.wOt(3302,!1)}();if(null==r||0==r.length)throw function qy(l){return new m.wOt(3303,!1)}();if(!function e0(l){return"start"==l||"done"==l}(r))throw function Rw(l,e){return new m.wOt(3400,!1)}();const c=Vr(this._elementListeners,e,[]),d={name:t,phase:r,callback:o};c.push(d);const f=Vr(this._engine.statesByElement,e,new Map);return f.has(t)||(or(e,oh),or(e,oh+"-"+t),f.set(t,bp)),()=>{this._engine.afterFlush(()=>{const p=c.indexOf(d);p>=0&&c.splice(p,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ow(l){return new m.wOt(3401,!1)}();return t}trigger(e,t,r,o=!0){const c=this._getTrigger(t),d=new _p(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(or(e,oh),or(e,oh+"-"+t),this._engine.statesByElement.set(e,f=new Map));let p=f.get(t);const y=new gh(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),f.set(t,y),p||(p=bp),y.value!==lc&&p.value===y.value){if(!function Ep(l,e){const t=Object.keys(l),r=Object.keys(e);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const c=t[o];if(!e.hasOwnProperty(c)||l[c]!==e[c])return!1}return!0}(p.params,y.params)){const j=[],K=c.matchStyles(p.value,p.params,j),$=c.matchStyles(y.value,y.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{la(e,K),Ar(e,$)})}return}const T=Vr(this._engine.playersByElement,e,[]);T.forEach(j=>{j.namespaceId==this.id&&j.triggerName==t&&j.queued&&j.destroy()});let R=c.matchTransition(p.value,y.value,e,y.params),L=!1;if(!R){if(!o)return;R=c.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:R,fromState:p,toState:y,player:d,isFallbackTransition:L}),L||(or(e,mp),d.onStart(()=>{cc(e,mp)})),d.onDone(()=>{let j=this.players.indexOf(d);j>=0&&this.players.splice(j,1);const K=this._engine.playersByElement.get(e);if(K){let $=K.indexOf(d);$>=0&&K.splice($,1)}}),this.players.push(d),T.push(d),d}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ah,!0);r.forEach(o=>{if(o[Dr])return;const c=this._engine.fetchNamespacesByElement(o);c.size?c.forEach(d=>d.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,o){const c=this._engine.statesByElement.get(e),d=new Map;if(c){const f=[];if(c.forEach((p,y)=>{if(d.set(y,p.value),this._triggers.has(y)){const _=this.trigger(e,y,lc,o);_&&f.push(_)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,d),r&&aa(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const o=new Set;t.forEach(c=>{const d=c.name;if(o.has(d))return;o.add(d);const p=this._triggers.get(d).fallbackTransition,y=r.get(d)||bp,_=new gh(lc),A=new _p(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:p,fromState:y,toState:_,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(r.totalAnimations){const c=r.players.length?r.playersByQueriedElement.get(e):[];if(c&&c.length)o=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)r.markElementAsRemoved(this.id,e,!1,t);else{const c=e[Dr];(!c||c===ac)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){or(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const c=r.element,d=this._elementListeners.get(c);d&&d.forEach(f=>{if(f.name==r.triggerName){const p=rh(c,r.triggerName,r.fromState.value,r.toState.value);p._data=e,tp(r.player,f.phase,p,f.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const c=r.transition.ast.depCount,d=o.transition.ast.depCount;return 0==c||0==d?c-d:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Tu{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r,o){this.bodyNode=e,this.driver=t,this._normalizer=r,this.scheduler=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(c,d)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new mh(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,f=this.driver.getParentElement(t);for(;f;){const p=o.get(f);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),d=!0;break}f=this.driver.getParentElement(f)}d||r.unshift(e)}else r.push(e);return o.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let o=this._namespaceLookup[e];o&&o.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let o of r.values())if(o.namespaceId){const c=this._fetchNamespace(o.namespaceId);c&&t.add(c)}return t}trigger(e,t,r,o){if(yh(t)){const c=this._fetchNamespace(e);if(c)return c.trigger(t,r,o),!0}return!1}insertNode(e,t,r,o){if(!yh(t))return;const c=t[Dr];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),or(e,yp)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),cc(e,yp))}removeNode(e,t,r){if(yh(t)){this.scheduler?.notify();const o=e?this._fetchNamespace(e):null;o?o.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,o,c){this.collectedLeaveElements.push(t),t[Dr]={namespaceId:e,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:c}}listen(e,t,r,o,c){return yh(t)?this._fetchNamespace(e).listen(t,r,o,c):()=>{}}_buildInstruction(e,t,r,o,c){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,o,e.fromState.options,e.toState.options,t,c)}destroyInnerAnimations(e){let t=this.driver.query(e,ah,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ga,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return aa(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Dr];if(t&&t.setForRemoval){if(e[Dr]=ac,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(yp)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)or(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?aa(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(e){throw function Nw(l){return new m.wOt(3402,!1)}()}_flushAnimations(e,t){const r=new Du,o=[],c=new Map,d=[],f=new Map,p=new Map,y=new Map,_=new Set;this.disabledNodes.forEach(We=>{_.add(We);const Me=this.driver.query(We,".ng-animate-queued",!0);for(let Be=0;Be<Me.length;Be++)_.add(Me[Be])});const A=this.bodyNode,T=Array.from(this.statesByElement.keys()),R=Av(T,this.collectedEnterElements),L=new Map;let j=0;R.forEach((We,Me)=>{const Be=iv+j++;L.set(Me,Be),We.forEach(Kt=>or(Kt,Be))});const K=[],$=new Set,Z=new Set;for(let We=0;We<this.collectedLeaveElements.length;We++){const Me=this.collectedLeaveElements[We],Be=Me[Dr];Be&&Be.setForRemoval&&(K.push(Me),$.add(Me),Be.hasAnimation?this.driver.query(Me,".ng-star-inserted",!0).forEach(Kt=>$.add(Kt)):Z.add(Me))}const te=new Map,se=Av(T,Array.from($));se.forEach((We,Me)=>{const Be=sh+j++;te.set(Me,Be),We.forEach(Kt=>or(Kt,Be))}),e.push(()=>{R.forEach((We,Me)=>{const Be=L.get(Me);We.forEach(Kt=>cc(Kt,Be))}),se.forEach((We,Me)=>{const Be=te.get(Me);We.forEach(Kt=>cc(Kt,Be))}),K.forEach(We=>{this.processLeaveNode(We)})});const ue=[],pe=[];for(let We=this._namespaceList.length-1;We>=0;We--)this._namespaceList[We].drainQueuedTransitions(t).forEach(Be=>{const Kt=Be.player,Bn=Be.element;if(ue.push(Kt),this.collectedEnterElements.length){const Bt=Bn[Dr];if(Bt&&Bt.setForMove){if(Bt.previousTriggersValues&&Bt.previousTriggersValues.has(Be.triggerName)){const Gn=Bt.previousTriggersValues.get(Be.triggerName),Qi=this.statesByElement.get(Be.element);if(Qi&&Qi.has(Be.triggerName)){const wc=Qi.get(Be.triggerName);wc.value=Gn,Qi.set(Be.triggerName,wc)}}return void Kt.destroy()}}const ii=!A||!this.driver.containsElement(A,Bn),pn=te.get(Bn),kn=L.get(Bn),bn=this._buildInstruction(Be,r,kn,pn,ii);if(bn.errors&&bn.errors.length)return void pe.push(bn);if(ii)return Kt.onStart(()=>la(Bn,bn.fromStyles)),Kt.onDestroy(()=>Ar(Bn,bn.toStyles)),void o.push(Kt);if(Be.isFallbackTransition)return Kt.onStart(()=>la(Bn,bn.fromStyles)),Kt.onDestroy(()=>Ar(Bn,bn.toStyles)),void o.push(Kt);const Xs=[];bn.timelines.forEach(Bt=>{Bt.stretchStartingKeyframe=!0,this.disabledNodes.has(Bt.element)||Xs.push(Bt)}),bn.timelines=Xs,r.append(Bn,bn.timelines),d.push({instruction:bn,player:Kt,element:Bn}),bn.queriedElements.forEach(Bt=>Vr(f,Bt,[]).push(Kt)),bn.preStyleProps.forEach((Bt,Gn)=>{if(Bt.size){let Qi=p.get(Gn);Qi||p.set(Gn,Qi=new Set),Bt.forEach((wc,rs)=>Qi.add(rs))}}),bn.postStyleProps.forEach((Bt,Gn)=>{let Qi=y.get(Gn);Qi||y.set(Gn,Qi=new Set),Bt.forEach((wc,rs)=>Qi.add(rs))})});if(pe.length){const We=[];pe.forEach(Me=>{We.push(function Xy(l,e){return new m.wOt(3505,!1)}())}),ue.forEach(Me=>Me.destroy()),this.reportError(We)}const Ce=new Map,Ae=new Map;d.forEach(We=>{const Me=We.element;r.has(Me)&&(Ae.set(Me,Me),this._beforeAnimationBuild(We.player.namespaceId,We.instruction,Ce))}),o.forEach(We=>{const Me=We.element;this._getPreviousPlayers(Me,!1,We.namespaceId,We.triggerName,null).forEach(Kt=>{Vr(Ce,Me,[]).push(Kt),Kt.destroy()})});const ie=K.filter(We=>Cp(We,p,y)),ve=new Map;Cv(ve,this.driver,Z,y,Cn).forEach(We=>{Cp(We,p,y)&&ie.push(We)});const Vt=new Map;R.forEach((We,Me)=>{Cv(Vt,this.driver,new Set(We),p,"!")}),ie.forEach(We=>{const Me=ve.get(We),Be=Vt.get(We);ve.set(We,new Map([...Me?.entries()??[],...Be?.entries()??[]]))});const Gt=[],Zt=[],vn={};d.forEach(We=>{const{element:Me,player:Be,instruction:Kt}=We;if(r.has(Me)){if(_.has(Me))return Be.onDestroy(()=>Ar(Me,Kt.toStyles)),Be.disabled=!0,Be.overrideTotalTime(Kt.totalTime),void o.push(Be);let Bn=vn;if(Ae.size>1){let pn=Me;const kn=[];for(;pn=pn.parentNode;){const bn=Ae.get(pn);if(bn){Bn=bn;break}kn.push(pn)}kn.forEach(bn=>Ae.set(bn,Bn))}const ii=this._buildAnimation(Be.namespaceId,Kt,Ce,c,Vt,ve);if(Be.setRealPlayer(ii),Bn===vn)Gt.push(Be);else{const pn=this.playersByElement.get(Bn);pn&&pn.length&&(Be.parentPlayer=aa(pn)),o.push(Be)}}else la(Me,Kt.fromStyles),Be.onDestroy(()=>Ar(Me,Kt.toStyles)),Zt.push(Be),_.has(Me)&&o.push(Be)}),Zt.forEach(We=>{const Me=c.get(We.element);if(Me&&Me.length){const Be=aa(Me);We.setRealPlayer(Be)}}),o.forEach(We=>{We.parentPlayer?We.syncPlayerEvents(We.parentPlayer):We.destroy()});for(let We=0;We<K.length;We++){const Me=K[We],Be=Me[Dr];if(cc(Me,sh),Be&&Be.hasAnimation)continue;let Kt=[];if(f.size){let ii=f.get(Me);ii&&ii.length&&Kt.push(...ii);let pn=this.driver.query(Me,Ga,!0);for(let kn=0;kn<pn.length;kn++){let bn=f.get(pn[kn]);bn&&bn.length&&Kt.push(...bn)}}const Bn=Kt.filter(ii=>!ii.destroyed);Bn.length?t0(this,Me,Bn):this.processLeaveNode(Me)}return K.length=0,Gt.forEach(We=>{this.players.push(We),We.onDone(()=>{We.destroy();const Me=this.players.indexOf(We);this.players.splice(Me,1)}),We.play()}),Gt}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,o,c){let d=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(d=f)}else{const f=this.playersByElement.get(e);if(f){const p=!c||c==lc;f.forEach(y=>{y.queued||!p&&y.triggerName!=o||d.push(y)})}}return(r||o)&&(d=d.filter(f=>!(r&&r!=f.namespaceId||o&&o!=f.triggerName))),d}_beforeAnimationBuild(e,t,r){const c=t.element,d=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,_=y!==c,A=Vr(r,y,[]);this._getPreviousPlayers(y,_,d,f,t.toState).forEach(R=>{const L=R.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),R.destroy(),A.push(R)})}la(c,t.fromStyles)}_buildAnimation(e,t,r,o,c,d){const f=t.triggerName,p=t.element,y=[],_=new Set,A=new Set,T=t.timelines.map(L=>{const j=L.element;_.add(j);const K=j[Dr];if(K&&K.removedBeforeQueried)return new cr(L.duration,L.delay);const $=j!==p,Z=function Dv(l){const e=[];return wp(l,e),e}((r.get(j)||da).map(Ce=>Ce.getRealPlayer())).filter(Ce=>!!Ce.element&&Ce.element===j),te=c.get(j),se=d.get(j),ue=kw(this._normalizer,L.keyframes,te,se),pe=this._buildPlayer(L,ue,Z);if(L.subTimeline&&o&&A.add(j),$){const Ce=new _p(e,f,j);Ce.setRealPlayer(pe),y.push(Ce)}return pe});y.forEach(L=>{Vr(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function Zw(l,e,t){let r=l.get(e);if(r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&l.delete(e)}return r}(this.playersByQueriedElement,L.element,L))}),_.forEach(L=>or(L,lh));const R=aa(T);return R.onDestroy(()=>{_.forEach(L=>cc(L,lh)),Ar(p,t.toStyles)}),A.forEach(L=>{Vr(o,L,[]).push(R)}),R}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new cr(e.duration,e.delay)}}class _p{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new cr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(o=>tp(e,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Vr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function yh(l){return l&&1===l.nodeType}function Ev(l,e){const t=l.style.display;return l.style.display=e??"none",t}function Cv(l,e,t,r,o){const c=[];t.forEach(p=>c.push(Ev(p)));const d=[];r.forEach((p,y)=>{const _=new Map;p.forEach(A=>{const T=e.computeStyle(y,A,o);_.set(A,T),(!T||0==T.length)&&(y[Dr]=RC,d.push(y))}),l.set(y,_)});let f=0;return t.forEach(p=>Ev(p,c[f++])),d}function Av(l,e){const t=new Map;if(l.forEach(f=>t.set(f,[])),0==e.length)return t;const o=new Set(e),c=new Map;function d(f){if(!f)return 1;let p=c.get(f);if(p)return p;const y=f.parentNode;return p=t.has(y)?y:o.has(y)?1:d(y),c.set(f,p),p}return e.forEach(f=>{const p=d(f);1!==p&&t.get(p).push(f)}),t}function or(l,e){l.classList?.add(e)}function cc(l,e){l.classList?.remove(e)}function t0(l,e,t){aa(t).onDone(()=>l.processLeaveNode(e))}function wp(l,e){for(let t=0;t<l.length;t++){const r=l[t];r instanceof $i?wp(r.players,e):e.push(r)}}function Cp(l,e,t){const r=t.get(l);if(!r)return!1;let o=e.get(l);return o?r.forEach(c=>o.add(c)):e.set(l,r),t.delete(l),!0}class Iu{constructor(e,t,r,o){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(c,d)=>{},this._transitionEngine=new Tu(e.body,t,r,o),this._timelineEngine=new ph(e.body,t,r),this._transitionEngine.onRemovalComplete=(c,d)=>this.onRemovalComplete(c,d)}registerTrigger(e,t,r,o,c){const d=e+"-"+o;let f=this._triggerCache[d];if(!f){const p=[],_=lp(this._driver,c,p,[]);if(p.length)throw function uu(l,e){return new m.wOt(3404,!1)}();f=function bv(l,e,t){return new _v(l,e,t)}(o,_,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(t,o,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,o){this._transitionEngine.insertNode(e,t,r,o)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,o){if("@"==r.charAt(0)){const[c,d]=Qy(r);this._timelineEngine.command(c,t,d,o)}else this._transitionEngine.trigger(e,t,r,o)}listen(e,t,r,o,c){if("@"==r.charAt(0)){const[d,f]=Qy(r);return this._timelineEngine.listen(d,t,f,c)}return this._transitionEngine.listen(e,t,r,o,c)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class qa{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let o=qa.initialStylesByElement.get(e);o||qa.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ar(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ar(this._element,this._initialStyles),this._endStyles&&(Ar(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(qa.initialStylesByElement.delete(this._element),this._startStyles&&(la(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(la(this._element,this._endStyles),this._endStyles=null),Ar(this._element,this._initialStyles),this._state=3)}}function vh(l){let e=null;return l.forEach((t,r)=>{(function Mv(l){return"display"===l||"position"===l})(r)&&(e=e||new Map,e.set(r,t))}),e}class Tv{constructor(e,t,r,o){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{"offset"!==o&&e.set(o,this._finished?r:ap(this.element,o))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Iv{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Jy(e,t)}getParentElement(e){return fu(e)}query(e,t,r){return gu(e,t,r)}computeStyle(e,t,r){return ap(e,t)}animate(e,t,r,o,c,d=[]){const p={duration:r,delay:o,fill:0==o?"both":"forwards"};c&&(p.easing=c);const y=new Map,_=d.filter(R=>R instanceof Tv);(function Hw(l,e){return 0===l||0===e})(r,o)&&_.forEach(R=>{R.currentSnapshot.forEach((L,j)=>y.set(j,L))});let A=function rv(l){return l.length?l[0]instanceof Map?l:l.map(e=>new Map(Object.entries(e))):[]}(t).map(R=>new Map(R));A=function op(l,e,t){if(t.size&&e.length){let r=e[0],o=[];if(t.forEach((c,d)=>{r.has(d)||o.push(d),r.set(d,c)}),o.length)for(let c=1;c<e.length;c++){let d=e[c];o.forEach(f=>d.set(f,ap(l,f)))}}return e}(e,A,y);const T=function Sv(l,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=vh(e[0]),e.length>1&&(r=vh(e[e.length-1]))):e instanceof Map&&(t=vh(e)),t||r?new qa(l,t,r):null}(e,A);return new Tv(e,A,p,T)}}const Ap="@.disabled";class bh{constructor(e,t,r,o){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,o=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,o){this.delegate.setAttribute(e,t,r,o)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,o){this.delegate.setStyle(e,t,r,o)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Ap?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Dp extends bh{constructor(e,t,r,o,c){super(t,r,o,c),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ap?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const o=function n0(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(e);let c=t.slice(1),d="";return"@"!=c.charAt(0)&&([c,d]=function r0(l){const e=l.indexOf(".");return[l.substring(0,e),l.slice(e+1)]}(c)),this.engine.listen(this.namespaceId,o,c,d,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}class s0{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(o,c)=>{const d=c?.parentNode(o);d&&c.removeChild(d,o)}}createRenderer(e,t){const o=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const y=this._rendererCache;let _=y.get(o);return _||(_=new bh("",o,this.engine,()=>y.delete(o)),y.set(o,_)),_}const c=t.id,d=t.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=y=>{Array.isArray(y)?y.forEach(f):this.engine.registerTrigger(c,d,e,y.name,y)};return t.data.animation.forEach(f),new Dp(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const o=this._animationCallbacksBuffer;0==o.length&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(c=>{const[d,f]=c;d(f)}),this._animationCallbacksBuffer=[]})}),o.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const _h=[{provide:nv,useFactory:function Pv(){return new wu}},{provide:Iu,useClass:(()=>{class l extends Iu{constructor(t,r,o){super(t,r,o,(0,m.WQX)(m.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||l)(m.KVO(Ue.qQ),m.KVO(tv),m.KVO(nv))}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})()},{provide:m._9s,useFactory:function Sp(l,e,t){return new s0(l,e,t)},deps:[ge.B7,Iu,m.SKi]}],wh=[{provide:tv,useFactory:()=>new Iv},{provide:m.bc$,useValue:"BrowserAnimations"},..._h],Mp=[{provide:tv,useClass:ip},{provide:m.bc$,useValue:"NoopAnimations"},..._h];let Rv=(()=>{class l{static withConfig(t){return{ngModule:l,providers:t.disableAnimations?Mp:wh}}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l})}static{this.\u0275inj=m.G2t({providers:wh,imports:[ge.Bb]})}}return l})();H(7468);const Ds=new m.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Up}),Up="always";Promise.resolve(),Promise.resolve();let Vu=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l})}static{this.\u0275inj=m.G2t({})}}return l})(),yc=(()=>{class l{static withConfig(t){return{ngModule:l,providers:[{provide:Ds,useValue:t.callSetDisabledState??Up}]}}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l})}static{this.\u0275inj=m.G2t({imports:[Vu]})}}return l})(),vc=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=m.$C({type:l,bootstrap:[Ew]})}static{this.\u0275inj=m.G2t({providers:[eh,{provide:m.hnV,useFactory:_c,deps:[Ne.c$],multi:!0},(0,xe.lh)(Oy,(0,xe.lG)())],imports:[Qf,Rv,ge.Bb,yc,mw,qf,io,Ne.h.forRoot({loader:{provide:Ne.Wr,useFactory:bc,deps:[ht]}})]})}}return l})();function bc(l){return new yC(l,"./assets/i18n/",".json")}function _c(l){return(0,G.A)(function*(){return l.setDefaultLang("en"),l.use("en"),new Promise(e=>{l.onLangChange.subscribe(()=>{e()})})})}ge.sG().bootstrapModule(vc).catch(l=>console.error(l))},4412:(ut,Te,H)=>{H.d(Te,{t:()=>V});var N=H(1413);class V extends N.B{constructor(G){super(),this._value=G}get value(){return this.getValue()}_subscribe(G){const m=super._subscribe(G);return!m.closed&&G.next(this._value),m}getValue(){const{hasError:G,thrownError:m,_value:xe}=this;if(G)throw m;return this._throwIfClosed(),xe}next(G){super.next(this._value=G)}}},1985:(ut,Te,H)=>{H.d(Te,{c:()=>Qe});var N=H(7707),V=H(8359),ge=H(3494),G=H(1203),m=H(1026),xe=H(8071),ye=H(9786);let Qe=(()=>{class Fe{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const ct=new Fe;return ct.source=this,ct.operator=Ue,ct}subscribe(Ue,ct,Ut){const Rt=function be(Fe){return Fe&&Fe instanceof N.vU||function Oe(Fe){return Fe&&(0,xe.T)(Fe.next)&&(0,xe.T)(Fe.error)&&(0,xe.T)(Fe.complete)}(Fe)&&(0,V.Uv)(Fe)}(Ue)?Ue:new N.Ms(Ue,ct,Ut);return(0,ye.Y)(()=>{const{operator:Xt,source:tn}=this;Rt.add(Xt?Xt.call(Rt,tn):tn?this._subscribe(Rt):this._trySubscribe(Rt))}),Rt}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(ct){Ue.error(ct)}}forEach(Ue,ct){return new(ct=Ne(ct))((Ut,Rt)=>{const Xt=new N.Ms({next:tn=>{try{Ue(tn)}catch(ln){Rt(ln),Xt.unsubscribe()}},error:Rt,complete:Ut});this.subscribe(Xt)})}_subscribe(Ue){var ct;return null===(ct=this.source)||void 0===ct?void 0:ct.subscribe(Ue)}[ge.s](){return this}pipe(...Ue){return(0,G.m)(Ue)(this)}toPromise(Ue){return new(Ue=Ne(Ue))((ct,Ut)=>{let Rt;this.subscribe(Xt=>Rt=Xt,Xt=>Ut(Xt),()=>ct(Rt))})}}return Fe.create=rt=>new Fe(rt),Fe})();function Ne(Fe){var rt;return null!==(rt=Fe??m.$.Promise)&&void 0!==rt?rt:Promise}},1413:(ut,Te,H)=>{H.d(Te,{B:()=>ye});var N=H(1985),V=H(8359);const G=(0,H(1853).L)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var m=H(7908),xe=H(9786);let ye=(()=>{class Ne extends N.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(be){const Fe=new Qe(this,this);return Fe.operator=be,Fe}_throwIfClosed(){if(this.closed)throw new G}next(be){(0,xe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Fe of this.currentObservers)Fe.next(be)}})}error(be){(0,xe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=be;const{observers:Fe}=this;for(;Fe.length;)Fe.shift().error(be)}})}complete(){(0,xe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:be}=this;for(;be.length;)be.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var be;return(null===(be=this.observers)||void 0===be?void 0:be.length)>0}_trySubscribe(be){return this._throwIfClosed(),super._trySubscribe(be)}_subscribe(be){return this._throwIfClosed(),this._checkFinalizedStatuses(be),this._innerSubscribe(be)}_innerSubscribe(be){const{hasError:Fe,isStopped:rt,observers:Ue}=this;return Fe||rt?V.Kn:(this.currentObservers=null,Ue.push(be),new V.yU(()=>{this.currentObservers=null,(0,m.o)(Ue,be)}))}_checkFinalizedStatuses(be){const{hasError:Fe,thrownError:rt,isStopped:Ue}=this;Fe?be.error(rt):Ue&&be.complete()}asObservable(){const be=new N.c;return be.source=this,be}}return Ne.create=(Oe,be)=>new Qe(Oe,be),Ne})();class Qe extends ye{constructor(Oe,be){super(),this.destination=Oe,this.source=be}next(Oe){var be,Fe;null===(Fe=null===(be=this.destination)||void 0===be?void 0:be.next)||void 0===Fe||Fe.call(be,Oe)}error(Oe){var be,Fe;null===(Fe=null===(be=this.destination)||void 0===be?void 0:be.error)||void 0===Fe||Fe.call(be,Oe)}complete(){var Oe,be;null===(be=null===(Oe=this.destination)||void 0===Oe?void 0:Oe.complete)||void 0===be||be.call(Oe)}_subscribe(Oe){var be,Fe;return null!==(Fe=null===(be=this.source)||void 0===be?void 0:be.subscribe(Oe))&&void 0!==Fe?Fe:V.Kn}}},7707:(ut,Te,H)=>{H.d(Te,{Ms:()=>Ut,vU:()=>Fe});var N=H(8071),V=H(8359),ge=H(1026),G=H(5334),m=H(5343);const xe=Ne("C",void 0,void 0);function Ne(Ye,He,lt){return{kind:Ye,value:He,error:lt}}var Oe=H(9270),be=H(9786);class Fe extends V.yU{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,V.Uv)(He)&&He.add(this)):this.destination=ln}static create(He,lt,wt){return new Ut(He,lt,wt)}next(He){this.isStopped?tn(function Qe(Ye){return Ne("N",Ye,void 0)}(He),this):this._next(He)}error(He){this.isStopped?tn(function ye(Ye){return Ne("E",void 0,Ye)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?tn(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rt=Function.prototype.bind;function Ue(Ye,He){return rt.call(Ye,He)}class ct{constructor(He){this.partialObserver=He}next(He){const{partialObserver:lt}=this;if(lt.next)try{lt.next(He)}catch(wt){Rt(wt)}}error(He){const{partialObserver:lt}=this;if(lt.error)try{lt.error(He)}catch(wt){Rt(wt)}else Rt(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(lt){Rt(lt)}}}class Ut extends Fe{constructor(He,lt,wt){let ze;if(super(),(0,N.T)(He)||!He)ze={next:He??void 0,error:lt??void 0,complete:wt??void 0};else{let qe;this&&ge.$.useDeprecatedNextContext?(qe=Object.create(He),qe.unsubscribe=()=>this.unsubscribe(),ze={next:He.next&&Ue(He.next,qe),error:He.error&&Ue(He.error,qe),complete:He.complete&&Ue(He.complete,qe)}):ze=He}this.destination=new ct(ze)}}function Rt(Ye){ge.$.useDeprecatedSynchronousErrorHandling?(0,be.l)(Ye):(0,G.m)(Ye)}function tn(Ye,He){const{onStoppedNotification:lt}=ge.$;lt&&Oe.f.setTimeout(()=>lt(Ye,He))}const ln={closed:!0,next:m.l,error:function Xt(Ye){throw Ye},complete:m.l}},8359:(ut,Te,H)=>{H.d(Te,{Kn:()=>xe,yU:()=>m,Uv:()=>ye});var N=H(8071);const ge=(0,H(1853).L)(Ne=>function(be){Ne(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((Fe,rt)=>`${rt+1}) ${Fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be});var G=H(7908);class m{constructor(Oe){this.initialTeardown=Oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Oe;if(!this.closed){this.closed=!0;const{_parentage:be}=this;if(be)if(this._parentage=null,Array.isArray(be))for(const Ue of be)Ue.remove(this);else be.remove(this);const{initialTeardown:Fe}=this;if((0,N.T)(Fe))try{Fe()}catch(Ue){Oe=Ue instanceof ge?Ue.errors:[Ue]}const{_finalizers:rt}=this;if(rt){this._finalizers=null;for(const Ue of rt)try{Qe(Ue)}catch(ct){Oe=Oe??[],ct instanceof ge?Oe=[...Oe,...ct.errors]:Oe.push(ct)}}if(Oe)throw new ge(Oe)}}add(Oe){var be;if(Oe&&Oe!==this)if(this.closed)Qe(Oe);else{if(Oe instanceof m){if(Oe.closed||Oe._hasParent(this))return;Oe._addParent(this)}(this._finalizers=null!==(be=this._finalizers)&&void 0!==be?be:[]).push(Oe)}}_hasParent(Oe){const{_parentage:be}=this;return be===Oe||Array.isArray(be)&&be.includes(Oe)}_addParent(Oe){const{_parentage:be}=this;this._parentage=Array.isArray(be)?(be.push(Oe),be):be?[be,Oe]:Oe}_removeParent(Oe){const{_parentage:be}=this;be===Oe?this._parentage=null:Array.isArray(be)&&(0,G.o)(be,Oe)}remove(Oe){const{_finalizers:be}=this;be&&(0,G.o)(be,Oe),Oe instanceof m&&Oe._removeParent(this)}}m.EMPTY=(()=>{const Ne=new m;return Ne.closed=!0,Ne})();const xe=m.EMPTY;function ye(Ne){return Ne instanceof m||Ne&&"closed"in Ne&&(0,N.T)(Ne.remove)&&(0,N.T)(Ne.add)&&(0,N.T)(Ne.unsubscribe)}function Qe(Ne){(0,N.T)(Ne)?Ne():Ne.unsubscribe()}},1026:(ut,Te,H)=>{H.d(Te,{$:()=>N});const N={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(ut,Te,H)=>{H.d(Te,{x:()=>m});var N=H(6365),ge=H(3794),G=H(6648);function m(...xe){return function V(){return(0,N.U)(1)}()((0,G.H)(xe,(0,ge.lI)(xe)))}},9030:(ut,Te,H)=>{H.d(Te,{v:()=>ge});var N=H(1985),V=H(8750);function ge(G){return new N.c(m=>{(0,V.Tg)(G()).subscribe(m)})}},983:(ut,Te,H)=>{H.d(Te,{w:()=>V});const V=new(H(1985).c)(m=>m.complete())},7468:(ut,Te,H)=>{H.d(Te,{p:()=>Qe});var N=H(1985),V=H(3073),ge=H(8750),G=H(3794),m=H(4360),xe=H(6450),ye=H(8496);function Qe(...Ne){const Oe=(0,G.ms)(Ne),{args:be,keys:Fe}=(0,V.D)(Ne),rt=new N.c(Ue=>{const{length:ct}=be;if(!ct)return void Ue.complete();const Ut=new Array(ct);let Rt=ct,Xt=ct;for(let tn=0;tn<ct;tn++){let ln=!1;(0,ge.Tg)(be[tn]).subscribe((0,m._)(Ue,Ye=>{ln||(ln=!0,Xt--),Ut[tn]=Ye},()=>Rt--,void 0,()=>{(!Rt||!ln)&&(Xt||Ue.next(Fe?(0,ye.e)(Fe,Ut):Ut),Ue.complete())}))}});return Oe?rt.pipe((0,xe.I)(Oe)):rt}},6648:(ut,Te,H)=>{H.d(Te,{H:()=>wt});var N=H(8750),V=H(5225),ge=H(9974),G=H(4360);function m(ze,qe=0){return(0,ge.N)((tt,Ct)=>{tt.subscribe((0,G._)(Ct,Ht=>(0,V.N)(Ct,ze,()=>Ct.next(Ht),qe),()=>(0,V.N)(Ct,ze,()=>Ct.complete(),qe),Ht=>(0,V.N)(Ct,ze,()=>Ct.error(Ht),qe)))})}function xe(ze,qe=0){return(0,ge.N)((tt,Ct)=>{Ct.add(ze.schedule(()=>tt.subscribe(Ct),qe))})}var Ne=H(1985),be=H(4761),Fe=H(8071);function Ue(ze,qe){if(!ze)throw new Error("Iterable cannot be null");return new Ne.c(tt=>{(0,V.N)(tt,qe,()=>{const Ct=ze[Symbol.asyncIterator]();(0,V.N)(tt,qe,()=>{Ct.next().then(Ht=>{Ht.done?tt.complete():tt.next(Ht.value)})},0,!0)})})}var ct=H(5055),Ut=H(9858),Rt=H(7441),Xt=H(5397),tn=H(7953),ln=H(591),Ye=H(5196);function wt(ze,qe){return qe?function lt(ze,qe){if(null!=ze){if((0,ct.l)(ze))return function ye(ze,qe){return(0,N.Tg)(ze).pipe(xe(qe),m(qe))}(ze,qe);if((0,Rt.X)(ze))return function Oe(ze,qe){return new Ne.c(tt=>{let Ct=0;return qe.schedule(function(){Ct===ze.length?tt.complete():(tt.next(ze[Ct++]),tt.closed||this.schedule())})})}(ze,qe);if((0,Ut.y)(ze))return function Qe(ze,qe){return(0,N.Tg)(ze).pipe(xe(qe),m(qe))}(ze,qe);if((0,tn.T)(ze))return Ue(ze,qe);if((0,Xt.x)(ze))return function rt(ze,qe){return new Ne.c(tt=>{let Ct;return(0,V.N)(tt,qe,()=>{Ct=ze[be.l](),(0,V.N)(tt,qe,()=>{let Ht,Yn;try{({value:Ht,done:Yn}=Ct.next())}catch(Ln){return void tt.error(Ln)}Yn?tt.complete():tt.next(Ht)},0,!0)}),()=>(0,Fe.T)(Ct?.return)&&Ct.return()})}(ze,qe);if((0,Ye.U)(ze))return function He(ze,qe){return Ue((0,Ye.C)(ze),qe)}(ze,qe)}throw(0,ln.L)(ze)}(ze,qe):(0,N.Tg)(ze)}},8750:(ut,Te,H)=>{H.d(Te,{Tg:()=>rt});var N=H(1635),V=H(7441),ge=H(9858),G=H(1985),m=H(5055),xe=H(7953),ye=H(591),Qe=H(5397),Ne=H(5196),Oe=H(8071),be=H(5334),Fe=H(3494);function rt(Ye){if(Ye instanceof G.c)return Ye;if(null!=Ye){if((0,m.l)(Ye))return function Ue(Ye){return new G.c(He=>{const lt=Ye[Fe.s]();if((0,Oe.T)(lt.subscribe))return lt.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ye);if((0,V.X)(Ye))return function ct(Ye){return new G.c(He=>{for(let lt=0;lt<Ye.length&&!He.closed;lt++)He.next(Ye[lt]);He.complete()})}(Ye);if((0,ge.y)(Ye))return function Ut(Ye){return new G.c(He=>{Ye.then(lt=>{He.closed||(He.next(lt),He.complete())},lt=>He.error(lt)).then(null,be.m)})}(Ye);if((0,xe.T)(Ye))return Xt(Ye);if((0,Qe.x)(Ye))return function Rt(Ye){return new G.c(He=>{for(const lt of Ye)if(He.next(lt),He.closed)return;He.complete()})}(Ye);if((0,Ne.U)(Ye))return function tn(Ye){return Xt((0,Ne.C)(Ye))}(Ye)}throw(0,ye.L)(Ye)}function Xt(Ye){return new G.c(He=>{(function ln(Ye,He){var lt,wt,ze,qe;return(0,N.sH)(this,void 0,void 0,function*(){try{for(lt=(0,N.xN)(Ye);!(wt=yield lt.next()).done;)if(He.next(wt.value),He.closed)return}catch(tt){ze={error:tt}}finally{try{wt&&!wt.done&&(qe=lt.return)&&(yield qe.call(lt))}finally{if(ze)throw ze.error}}He.complete()})})(Ye,He).catch(lt=>He.error(lt))})}},7673:(ut,Te,H)=>{H.d(Te,{of:()=>ge});var N=H(3794),V=H(6648);function ge(...G){const m=(0,N.lI)(G);return(0,V.H)(G,m)}},4360:(ut,Te,H)=>{H.d(Te,{_:()=>V});var N=H(7707);function V(G,m,xe,ye,Qe){return new ge(G,m,xe,ye,Qe)}class ge extends N.vU{constructor(m,xe,ye,Qe,Ne,Oe){super(m),this.onFinalize=Ne,this.shouldUnsubscribe=Oe,this._next=xe?function(be){try{xe(be)}catch(Fe){m.error(Fe)}}:super._next,this._error=Qe?function(be){try{Qe(be)}catch(Fe){m.error(Fe)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(be){m.error(be)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var m;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(m=this.onFinalize)||void 0===m||m.call(this))}}}},274:(ut,Te,H)=>{H.d(Te,{H:()=>ge});var N=H(1397),V=H(8071);function ge(G,m){return(0,V.T)(m)?(0,N.Z)(G,m,1):(0,N.Z)(G,1)}},5964:(ut,Te,H)=>{H.d(Te,{p:()=>ge});var N=H(9974),V=H(4360);function ge(G,m){return(0,N.N)((xe,ye)=>{let Qe=0;xe.subscribe((0,V._)(ye,Ne=>G.call(m,Ne,Qe++)&&ye.next(Ne)))})}},980:(ut,Te,H)=>{H.d(Te,{j:()=>V});var N=H(9974);function V(ge){return(0,N.N)((G,m)=>{try{G.subscribe(m)}finally{m.add(ge)}})}},6354:(ut,Te,H)=>{H.d(Te,{T:()=>ge});var N=H(9974),V=H(4360);function ge(G,m){return(0,N.N)((xe,ye)=>{let Qe=0;xe.subscribe((0,V._)(ye,Ne=>{ye.next(G.call(m,Ne,Qe++))}))})}},6365:(ut,Te,H)=>{H.d(Te,{U:()=>ge});var N=H(1397),V=H(3669);function ge(G=1/0){return(0,N.Z)(V.D,G)}},1397:(ut,Te,H)=>{H.d(Te,{Z:()=>Qe});var N=H(6354),V=H(8750),ge=H(9974),G=H(5225),m=H(4360),ye=H(8071);function Qe(Ne,Oe,be=1/0){return(0,ye.T)(Oe)?Qe((Fe,rt)=>(0,N.T)((Ue,ct)=>Oe(Fe,Ue,rt,ct))((0,V.Tg)(Ne(Fe,rt))),be):("number"==typeof Oe&&(be=Oe),(0,ge.N)((Fe,rt)=>function xe(Ne,Oe,be,Fe,rt,Ue,ct,Ut){const Rt=[];let Xt=0,tn=0,ln=!1;const Ye=()=>{ln&&!Rt.length&&!Xt&&Oe.complete()},He=wt=>Xt<Fe?lt(wt):Rt.push(wt),lt=wt=>{Ue&&Oe.next(wt),Xt++;let ze=!1;(0,V.Tg)(be(wt,tn++)).subscribe((0,m._)(Oe,qe=>{rt?.(qe),Ue?He(qe):Oe.next(qe)},()=>{ze=!0},void 0,()=>{if(ze)try{for(Xt--;Rt.length&&Xt<Fe;){const qe=Rt.shift();ct?(0,G.N)(Oe,ct,()=>lt(qe)):lt(qe)}Ye()}catch(qe){Oe.error(qe)}}))};return Ne.subscribe((0,m._)(Oe,He,()=>{ln=!0,Ye()})),()=>{Ut?.()}}(Fe,rt,Ne,be)))}},5558:(ut,Te,H)=>{H.d(Te,{n:()=>G});var N=H(8750),V=H(9974),ge=H(4360);function G(m,xe){return(0,V.N)((ye,Qe)=>{let Ne=null,Oe=0,be=!1;const Fe=()=>be&&!Ne&&Qe.complete();ye.subscribe((0,ge._)(Qe,rt=>{Ne?.unsubscribe();let Ue=0;const ct=Oe++;(0,N.Tg)(m(rt,ct)).subscribe(Ne=(0,ge._)(Qe,Ut=>Qe.next(xe?xe(rt,Ut,ct,Ue++):Ut),()=>{Ne=null,Fe()}))},()=>{be=!0,Fe()}))})}},6697:(ut,Te,H)=>{H.d(Te,{s:()=>G});var N=H(983),V=H(9974),ge=H(4360);function G(m){return m<=0?()=>N.w:(0,V.N)((xe,ye)=>{let Qe=0;xe.subscribe((0,ge._)(ye,Ne=>{++Qe<=m&&(ye.next(Ne),m<=Qe&&ye.complete())}))})}},6977:(ut,Te,H)=>{H.d(Te,{Q:()=>m});var N=H(9974),V=H(4360),ge=H(8750),G=H(5343);function m(xe){return(0,N.N)((ye,Qe)=>{(0,ge.Tg)(xe).subscribe((0,V._)(Qe,()=>Qe.complete(),G.l)),!Qe.closed&&ye.subscribe(Qe)})}},6129:(ut,Te,H)=>{H.d(Te,{U:()=>N});const N={now:()=>(N.delegate||Date).now(),delegate:void 0}},9270:(ut,Te,H)=>{H.d(Te,{f:()=>N});const N={setTimeout(V,ge,...G){const{delegate:m}=N;return m?.setTimeout?m.setTimeout(V,ge,...G):setTimeout(V,ge,...G)},clearTimeout(V){const{delegate:ge}=N;return(ge?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4761:(ut,Te,H)=>{H.d(Te,{l:()=>V});const V=function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(ut,Te,H)=>{H.d(Te,{s:()=>N});const N="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(ut,Te,H)=>{H.d(Te,{ms:()=>G,lI:()=>m});var N=H(8071);function ge(ye){return ye[ye.length-1]}function G(ye){return(0,N.T)(ge(ye))?ye.pop():void 0}function m(ye){return function V(ye){return ye&&(0,N.T)(ye.schedule)}(ge(ye))?ye.pop():void 0}},3073:(ut,Te,H)=>{H.d(Te,{D:()=>m});const{isArray:N}=Array,{getPrototypeOf:V,prototype:ge,keys:G}=Object;function m(ye){if(1===ye.length){const Qe=ye[0];if(N(Qe))return{args:Qe,keys:null};if(function xe(ye){return ye&&"object"==typeof ye&&V(ye)===ge}(Qe)){const Ne=G(Qe);return{args:Ne.map(Oe=>Qe[Oe]),keys:Ne}}}return{args:ye,keys:null}}},7908:(ut,Te,H)=>{function N(V,ge){if(V){const G=V.indexOf(ge);0<=G&&V.splice(G,1)}}H.d(Te,{o:()=>N})},1853:(ut,Te,H)=>{function N(V){const G=V(m=>{Error.call(m),m.stack=(new Error).stack});return G.prototype=Object.create(Error.prototype),G.prototype.constructor=G,G}H.d(Te,{L:()=>N})},8496:(ut,Te,H)=>{function N(V,ge){return V.reduce((G,m,xe)=>(G[m]=ge[xe],G),{})}H.d(Te,{e:()=>N})},9786:(ut,Te,H)=>{H.d(Te,{Y:()=>ge,l:()=>G});var N=H(1026);let V=null;function ge(m){if(N.$.useDeprecatedSynchronousErrorHandling){const xe=!V;if(xe&&(V={errorThrown:!1,error:null}),m(),xe){const{errorThrown:ye,error:Qe}=V;if(V=null,ye)throw Qe}}else m()}function G(m){N.$.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=m)}},5225:(ut,Te,H)=>{function N(V,ge,G,m=0,xe=!1){const ye=ge.schedule(function(){G(),xe?V.add(this.schedule(null,m)):this.unsubscribe()},m);if(V.add(ye),!xe)return ye}H.d(Te,{N:()=>N})},3669:(ut,Te,H)=>{function N(V){return V}H.d(Te,{D:()=>N})},7441:(ut,Te,H)=>{H.d(Te,{X:()=>N});const N=V=>V&&"number"==typeof V.length&&"function"!=typeof V},7953:(ut,Te,H)=>{H.d(Te,{T:()=>V});var N=H(8071);function V(ge){return Symbol.asyncIterator&&(0,N.T)(ge?.[Symbol.asyncIterator])}},8071:(ut,Te,H)=>{function N(V){return"function"==typeof V}H.d(Te,{T:()=>N})},5055:(ut,Te,H)=>{H.d(Te,{l:()=>ge});var N=H(3494),V=H(8071);function ge(G){return(0,V.T)(G[N.s])}},5397:(ut,Te,H)=>{H.d(Te,{x:()=>ge});var N=H(4761),V=H(8071);function ge(G){return(0,V.T)(G?.[N.l])}},4402:(ut,Te,H)=>{H.d(Te,{A:()=>ge});var N=H(1985),V=H(8071);function ge(G){return!!G&&(G instanceof N.c||(0,V.T)(G.lift)&&(0,V.T)(G.subscribe))}},9858:(ut,Te,H)=>{H.d(Te,{y:()=>V});var N=H(8071);function V(ge){return(0,N.T)(ge?.then)}},5196:(ut,Te,H)=>{H.d(Te,{C:()=>ge,U:()=>G});var N=H(1635),V=H(8071);function ge(m){return(0,N.AQ)(this,arguments,function*(){const ye=m.getReader();try{for(;;){const{value:Qe,done:Ne}=yield(0,N.N3)(ye.read());if(Ne)return yield(0,N.N3)(void 0);yield yield(0,N.N3)(Qe)}}finally{ye.releaseLock()}})}function G(m){return(0,V.T)(m?.getReader)}},9974:(ut,Te,H)=>{H.d(Te,{N:()=>ge,S:()=>V});var N=H(8071);function V(G){return(0,N.T)(G?.lift)}function ge(G){return m=>{if(V(m))return m.lift(function(xe){try{return G(xe,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(ut,Te,H)=>{H.d(Te,{I:()=>G});var N=H(6354);const{isArray:V}=Array;function G(m){return(0,N.T)(xe=>function ge(m,xe){return V(xe)?m(...xe):m(xe)}(m,xe))}},5343:(ut,Te,H)=>{function N(){}H.d(Te,{l:()=>N})},1203:(ut,Te,H)=>{H.d(Te,{F:()=>V,m:()=>ge});var N=H(3669);function V(...G){return ge(G)}function ge(G){return 0===G.length?N.D:1===G.length?G[0]:function(xe){return G.reduce((ye,Qe)=>Qe(ye),xe)}}},5334:(ut,Te,H)=>{H.d(Te,{m:()=>ge});var N=H(1026),V=H(9270);function ge(G){V.f.setTimeout(()=>{const{onUnhandledError:m}=N.$;if(!m)throw G;m(G)})}},591:(ut,Te,H)=>{function N(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Te,{L:()=>N})},177:(ut,Te,H)=>{H.d(Te,{AJ:()=>wa,MD:()=>tr,N0:()=>Gr,QT:()=>ge,Sm:()=>Ut,Sq:()=>Ms,VF:()=>m,Vy:()=>Tr,Xr:()=>Ca,YU:()=>kt,ZD:()=>G,_b:()=>Io,aZ:()=>Xt,bT:()=>Tc,fw:()=>Rt,hb:()=>Ue,hj:()=>Ne,qQ:()=>ye});var N=H(4438);let V=null;function ge(){return V}function G(C){V??=C}class m{}const ye=new N.nKC("");let Qe=(()=>{class C{historyGo(M){throw new Error("")}static{this.\u0275fac=function(P){return new(P||C)}}static{this.\u0275prov=N.jDH({token:C,factory:()=>(0,N.WQX)(Oe),providedIn:"platform"})}}return C})();const Ne=new N.nKC("");let Oe=(()=>{class C extends Qe{constructor(){super(),this._doc=(0,N.WQX)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ge().getBaseHref(this._doc)}onPopState(M){const P=ge().getGlobalEventTarget(this._doc,"window");return P.addEventListener("popstate",M,!1),()=>P.removeEventListener("popstate",M)}onHashChange(M){const P=ge().getGlobalEventTarget(this._doc,"window");return P.addEventListener("hashchange",M,!1),()=>P.removeEventListener("hashchange",M)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(M){this._location.pathname=M}pushState(M,P,W){this._history.pushState(M,P,W)}replaceState(M,P,W){this._history.replaceState(M,P,W)}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}static{this.\u0275fac=function(P){return new(P||C)}}static{this.\u0275prov=N.jDH({token:C,factory:()=>new C,providedIn:"platform"})}}return C})();function be(C,k){if(0==C.length)return k;if(0==k.length)return C;let M=0;return C.endsWith("/")&&M++,k.startsWith("/")&&M++,2==M?C+k.substring(1):1==M?C+k:C+"/"+k}function Fe(C){const k=C.match(/#|\?|$/),M=k&&k.index||C.length;return C.slice(0,M-("/"===C[M-1]?1:0))+C.slice(M)}function rt(C){return C&&"?"!==C[0]?"?"+C:C}let Ue=(()=>{class C{historyGo(M){throw new Error("")}static{this.\u0275fac=function(P){return new(P||C)}}static{this.\u0275prov=N.jDH({token:C,factory:()=>(0,N.WQX)(Ut),providedIn:"root"})}}return C})();const ct=new N.nKC("");let Ut=(()=>{class C extends Ue{constructor(M,P){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=P??this._platformLocation.getBaseHrefFromDOM()??(0,N.WQX)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return be(this._baseHref,M)}path(M=!1){const P=this._platformLocation.pathname+rt(this._platformLocation.search),W=this._platformLocation.hash;return W&&M?`${P}${W}`:P}pushState(M,P,W,de){const De=this.prepareExternalUrl(W+rt(de));this._platformLocation.pushState(M,P,De)}replaceState(M,P,W,de){const De=this.prepareExternalUrl(W+rt(de));this._platformLocation.replaceState(M,P,De)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}static{this.\u0275fac=function(P){return new(P||C)(N.KVO(Qe),N.KVO(ct,8))}}static{this.\u0275prov=N.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})(),Rt=(()=>{class C extends Ue{constructor(M,P){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=P&&(this._baseHref=P)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){const P=this._platformLocation.hash??"#";return P.length>0?P.substring(1):P}prepareExternalUrl(M){const P=be(this._baseHref,M);return P.length>0?"#"+P:P}pushState(M,P,W,de){let De=this.prepareExternalUrl(W+rt(de));0==De.length&&(De=this._platformLocation.pathname),this._platformLocation.pushState(M,P,De)}replaceState(M,P,W,de){let De=this.prepareExternalUrl(W+rt(de));0==De.length&&(De=this._platformLocation.pathname),this._platformLocation.replaceState(M,P,De)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}static{this.\u0275fac=function(P){return new(P||C)(N.KVO(Qe),N.KVO(ct,8))}}static{this.\u0275prov=N.jDH({token:C,factory:C.\u0275fac})}}return C})(),Xt=(()=>{class C{constructor(M){this._subject=new N.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const P=this._locationStrategy.getBaseHref();this._basePath=function He(C){if(new RegExp("^(https?:)?//").test(C)){const[,M]=C.split(/\/\/[^\/]+/);return M}return C}(Fe(Ye(P))),this._locationStrategy.onPopState(W=>{this._subject.emit({url:this.path(!0),pop:!0,state:W.state,type:W.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,P=""){return this.path()==this.normalize(M+rt(P))}normalize(M){return C.stripTrailingSlash(function ln(C,k){if(!C||!k.startsWith(C))return k;const M=k.substring(C.length);return""===M||["/",";","?","#"].includes(M[0])?M:k}(this._basePath,Ye(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,P="",W=null){this._locationStrategy.pushState(W,"",M,P),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+rt(P)),W)}replaceState(M,P="",W=null){this._locationStrategy.replaceState(W,"",M,P),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+rt(P)),W)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription??=this.subscribe(P=>{this._notifyUrlChangeListeners(P.url,P.state)}),()=>{const P=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(P,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",P){this._urlChangeListeners.forEach(W=>W(M,P))}subscribe(M,P,W){return this._subject.subscribe({next:M,error:P,complete:W})}static{this.normalizeQueryParams=rt}static{this.joinWithSlash=be}static{this.stripTrailingSlash=Fe}static{this.\u0275fac=function(P){return new(P||C)(N.KVO(Ue))}}static{this.\u0275prov=N.jDH({token:C,factory:()=>function tn(){return new Xt((0,N.KVO)(Ue))}(),providedIn:"root"})}}return C})();function Ye(C){return C.replace(/\/index.html$/,"")}function Io(C,k){k=encodeURIComponent(k);for(const M of C.split(";")){const P=M.indexOf("="),[W,de]=-1==P?[M,""]:[M.slice(0,P),M.slice(P+1)];if(W.trim()===k)return decodeURIComponent(de)}return null}const ls=/\s+/,eo=[];let kt=(()=>{class C{constructor(M,P){this._ngEl=M,this._renderer=P,this.initialClasses=eo,this.stateMap=new Map}set klass(M){this.initialClasses=null!=M?M.trim().split(ls):eo}set ngClass(M){this.rawClass="string"==typeof M?M.trim().split(ls):M}ngDoCheck(){for(const P of this.initialClasses)this._updateState(P,!0);const M=this.rawClass;if(Array.isArray(M)||M instanceof Set)for(const P of M)this._updateState(P,!0);else if(null!=M)for(const P of Object.keys(M))this._updateState(P,!!M[P]);this._applyStateDiff()}_updateState(M,P){const W=this.stateMap.get(M);void 0!==W?(W.enabled!==P&&(W.changed=!0,W.enabled=P),W.touched=!0):this.stateMap.set(M,{enabled:P,changed:!0,touched:!0})}_applyStateDiff(){for(const M of this.stateMap){const P=M[0],W=M[1];W.changed?(this._toggleClass(P,W.enabled),W.changed=!1):W.touched||(W.enabled&&this._toggleClass(P,!1),this.stateMap.delete(P)),W.touched=!1}}_toggleClass(M,P){(M=M.trim()).length>0&&M.split(ls).forEach(W=>{P?this._renderer.addClass(this._ngEl.nativeElement,W):this._renderer.removeClass(this._ngEl.nativeElement,W)})}static{this.\u0275fac=function(P){return new(P||C)(N.rXU(N.aKT),N.rXU(N.sFG))}}static{this.\u0275dir=N.FsC({type:C,selectors:[["","ngClass",""]],inputs:{klass:[N.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return C})();class Dc{constructor(k,M,P,W){this.$implicit=k,this.ngForOf=M,this.index=P,this.count=W}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ms=(()=>{class C{set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}constructor(M,P,W){this._viewContainer=M,this._template=P,this._differs=W,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const P=this._viewContainer;M.forEachOperation((W,de,De)=>{if(null==W.previousIndex)P.createEmbeddedView(this._template,new Dc(W.item,this._ngForOf,-1,-1),null===De?void 0:De);else if(null==De)P.remove(null===de?void 0:de);else if(null!==de){const Je=P.get(de);P.move(Je,De),Sc(Je,W)}});for(let W=0,de=P.length;W<de;W++){const Je=P.get(W).context;Je.index=W,Je.count=de,Je.ngForOf=this._ngForOf}M.forEachIdentityChange(W=>{Sc(P.get(W.currentIndex),W)})}static ngTemplateContextGuard(M,P){return!0}static{this.\u0275fac=function(P){return new(P||C)(N.rXU(N.c1b),N.rXU(N.C4Q),N.rXU(N._q3))}}static{this.\u0275dir=N.FsC({type:C,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return C})();function Sc(C,k){C.context.$implicit=k.item}let Tc=(()=>{class C{constructor(M,P){this._viewContainer=M,this._context=new Ic,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=P}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Ts("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Ts("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,P){return!0}static{this.\u0275fac=function(P){return new(P||C)(N.rXU(N.c1b),N.rXU(N.C4Q))}}static{this.\u0275dir=N.FsC({type:C,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return C})();class Ic{constructor(){this.$implicit=null,this.ngIf=null}}function Ts(C,k){if(k&&!k.createEmbeddedView)throw new Error(`${C} must be a TemplateRef, but received '${(0,N.Tbb)(k)}'.`)}let tr=(()=>{class C{static{this.\u0275fac=function(P){return new(P||C)}}static{this.\u0275mod=N.$C({type:C})}static{this.\u0275inj=N.G2t({})}}return C})();const wa="browser",ul="server";function Tr(C){return C===ul}let Ca=(()=>{class C{static{this.\u0275prov=(0,N.jDH)({token:C,providedIn:"root",factory:()=>function so(C){return C===wa}((0,N.WQX)(N.Agw))?new zt((0,N.WQX)(ye),window):new hl})}}return C})();class zt{constructor(k,M){this.document=k,this.window=M,this.offset=()=>[0,0]}setOffset(k){this.offset=Array.isArray(k)?()=>k:k}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(k){this.window.scrollTo(k[0],k[1])}scrollToAnchor(k){const M=function Wr(C,k){const M=C.getElementById(k)||C.getElementsByName(k)[0];if(M)return M;if("function"==typeof C.createTreeWalker&&C.body&&"function"==typeof C.body.attachShadow){const P=C.createTreeWalker(C.body,NodeFilter.SHOW_ELEMENT);let W=P.currentNode;for(;W;){const de=W.shadowRoot;if(de){const De=de.getElementById(k)||de.querySelector(`[name="${k}"]`);if(De)return De}W=P.nextNode()}}return null}(this.document,k);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(k){this.window.history.scrollRestoration=k}scrollToElement(k){const M=k.getBoundingClientRect(),P=M.left+this.window.pageXOffset,W=M.top+this.window.pageYOffset,de=this.offset();this.window.scrollTo(P-de[0],W-de[1])}}class hl{setOffset(k){}getScrollPosition(){return[0,0]}scrollToPosition(k){}scrollToAnchor(k){}setHistoryScrollRestoration(k){}}class Gr{}},4438:(ut,Te,H)=>{H.d(Te,{bc$:()=>S_,iLQ:()=>_E,sZ2:()=>Qc,hnV:()=>dS,Hbi:()=>rP,o8S:()=>Ec,BIS:()=>M_,gRc:()=>AS,Ql9:()=>Px,OM3:()=>Cu,Ocv:()=>jx,Z63:()=>jo,aKT:()=>jl,uvJ:()=>mr,zcH:()=>$s,bkB:()=>Er,$GK:()=>Qt,nKC:()=>kt,zZn:()=>wr,_q3:()=>TE,MKu:()=>IE,xe9:()=>Tb,Co$:()=>Mh,Vns:()=>As,SKi:()=>Ci,Xx1:()=>so,Agw:()=>Ws,PLl:()=>Rm,sFG:()=>Kw,_9s:()=>dv,czy:()=>Gd,kdw:()=>oo,C4Q:()=>pu,NYb:()=>Ax,giA:()=>cS,RxE:()=>tS,c1b:()=>or,gXe:()=>mt,mal:()=>vv,L39:()=>OP,Ol2:()=>Ru,w6W:()=>M0,oH4:()=>_S,Rfq:()=>hr,WQX:()=>_t,QuC:()=>Wi,EmA:()=>pr,fpN:()=>iP,HJs:()=>UP,N4e:()=>xi,O8t:()=>kP,An2:()=>Eu,H3F:()=>nS,H8p:()=>at,KH2:()=>Lh,TgB:()=>Ds,wOt:()=>je,WHO:()=>aS,e01:()=>lS,H5H:()=>J0,Zy3:()=>ot,mq5:()=>mA,JZv:()=>bt,LfX:()=>Mo,plB:()=>ua,jNT:()=>vE,zjR:()=>uS,TL$:()=>D_,Tbb:()=>Fn,Vt3:()=>xu,Mj6:()=>on,GFd:()=>Xa,OA$:()=>F,Jv_:()=>TD,aNF:()=>ID,R7$:()=>Ty,BMQ:()=>hb,AVh:()=>Bt,wni:()=>iD,VBU:()=>hs,FsC:()=>Vc,jDH:()=>un,G2t:()=>Qs,$C:()=>lo,EJ8:()=>Ps,rXU:()=>ec,nrm:()=>Z0,bVm:()=>yb,qex:()=>mb,k0s:()=>gb,j41:()=>pb,RV6:()=>fA,xGo:()=>sm,KVO:()=>An,kS0:()=>Cd,QTQ:()=>xy,bIt:()=>nE,lsd:()=>oD,joV:()=>Nl,qSk:()=>pd,XpG:()=>KA,nI1:()=>FD,bMT:()=>VD,Y8G:()=>bn,eq3:()=>PD,mGM:()=>sD,sdS:()=>aD,Njj:()=>Bg,tSv:()=>ay,eBV:()=>jg,B4B:()=>$d,n$t:()=>ey,DNE:()=>ku,C5r:()=>jD,EFF:()=>yD,JRh:()=>sE,SpI:()=>Eb,Lme:()=>oE,LHq:()=>aE,GBs:()=>rD}),H(467);let ge=null,m=1;const xe=Symbol("SIGNAL");function ye(n){const i=ge;return ge=n,i}function Ue(n){if((!wt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==m)){if(!n.producerMustRecompute(n)&&!ln(n))return n.dirty=!1,void(n.lastCleanEpoch=m);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=m}}function ln(n){ze(n);for(let i=0;i<n.producerNode.length;i++){const s=n.producerNode[i],a=n.producerLastReadVersion[i];if(a!==s.version||(Ue(s),a!==s.version))return!0}return!1}function lt(n,i){if(function qe(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),ze(n),1===n.liveConsumerNode.length)for(let a=0;a<n.producerNode.length;a++)lt(n.producerNode[a],n.producerIndexOfThis[a]);const s=n.liveConsumerNode.length-1;if(n.liveConsumerNode[i]=n.liveConsumerNode[s],n.liveConsumerIndexOfThis[i]=n.liveConsumerIndexOfThis[s],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,i<n.liveConsumerNode.length){const a=n.liveConsumerIndexOfThis[i],u=n.liveConsumerNode[i];ze(u),u.producerIndexOfThis[a]=i}}function wt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ze(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Zn=null;var yt=H(1413),Ot=H(8359),Un=H(4412),$t=H(6354);const wn="https://g.co/ng/security#xss";class je extends Error{constructor(i,s){super(ot(i,s)),this.code=i}}function ot(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}function gt(n){return{toString:n}.toString()}const ur="__parameters__";function Jn(n,i,s){return gt(()=>{const a=function Ur(n){return function(...s){if(n){const a=n(...s);for(const u in a)this[u]=a[u]}}}(i);function u(...h){if(this instanceof u)return a.apply(this,h),this;const g=new u(...h);return v.annotation=g,v;function v(E,I,O){const B=E.hasOwnProperty(ur)?E[ur]:Object.defineProperty(E,ur,{value:[]})[ur];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(g),E}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}const bt=globalThis;function cn(n){for(let i in n)if(n[i]===cn)return i;throw Error("Could not find renamed property on target object.")}function Ss(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function Fn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Fn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function zi(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Hr=cn({__forward_ref__:cn});function hr(n){return n.__forward_ref__=hr,n.toString=function(){return Fn(this())},n}function J(n){return le(n)?n():n}function le(n){return"function"==typeof n&&n.hasOwnProperty(Hr)&&n.__forward_ref__===hr}function un(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qs(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ys(n){return To(n,Js)||To(n,ls)}function Mo(n){return null!==Ys(n)}function To(n,i){return n.hasOwnProperty(i)?n[i]:null}function Zs(n){return n&&(n.hasOwnProperty(Io)||n.hasOwnProperty(eo))?n[Io]:null}const Js=cn({\u0275prov:cn}),Io=cn({\u0275inj:cn}),ls=cn({ngInjectableDef:cn}),eo=cn({ngInjectorDef:cn});class kt{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=un({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Is(n){return n&&!!n.\u0275providers}const cs=cn({\u0275cmp:cn}),Po=cn({\u0275dir:cn}),to=cn({\u0275pipe:cn}),us=cn({\u0275mod:cn}),Pt=cn({\u0275fac:cn}),mi=cn({__NG_ELEMENT_ID__:cn}),Ro=cn({__NG_ENV_ID__:cn});function ft(n){return"string"==typeof n?n:null==n?"":String(n)}function ba(n,i){throw new je(-201,!1)}var Qt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Qt||{});let Oo;function ol(){return Oo}function Li(n){const i=Oo;return Oo=n,i}function xc(n,i,s){const a=Ys(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Qt.Optional?null:void 0!==i?i:void ba()}const No={},al="__NG_DI_FLAG__",io="ngTempTokenPath",ko=/\n/gm,_a="__source";let Ji;function er(n){const i=Ji;return Ji=n,i}function xs(n,i=Qt.Default){if(void 0===Ji)throw new je(-203,!1);return null===Ji?xc(n,void 0,i):Ji.get(n,i&Qt.Optional?null:void 0,i)}function An(n,i=Qt.Default){return(ol()||xs)(J(n),i)}function _t(n,i=Qt.Default){return An(n,ro(i))}function ro(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cl(n){const i=[];for(let s=0;s<n.length;s++){const a=J(n[s]);if(Array.isArray(a)){if(0===a.length)throw new je(900,!1);let u,h=Qt.Default;for(let g=0;g<a.length;g++){const v=a[g],E=wa(v);"number"==typeof E?-1===E?u=v.token:h|=E:u=v}i.push(An(u,h))}else i.push(An(a))}return i}function tr(n,i){return n[al]=i,n.prototype[al]=i,n}function wa(n){return n[al]}const so=tr(Jn("Optional"),8),oo=tr(Jn("SkipSelf"),4);function zr(n,i){return n.hasOwnProperty(Pt)?n[Pt]:null}function Wr(n,i){n.forEach(s=>Array.isArray(s)?Wr(s,i):i(s))}function hl(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function Gr(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function vi(n,i,s){let a=nr(n,i);return a>=0?n[1|a]=s:(a=~a,function pl(n,i,s,a){let u=n.length;if(u==i)n.push(s,a);else if(1===u)n.push(a,n[0]),n[0]=s;else{for(u--,n.push(n[u-1],n[u]);u>i;)n[u]=n[u-2],u--;n[i]=s,n[i+1]=a}}(n,a,i,s)),a}function Fo(n,i){const s=nr(n,i);if(s>=0)return n[1|s]}function nr(n,i){return function Vo(n,i,s){let a=0,u=n.length>>s;for(;u!==a;){const h=a+(u-a>>1),g=n[h<<s];if(i===g)return h<<s;g>i?u=h:a=h+1}return~(u<<s)}(n,i,1)}const Ir={},rn=[],jo=new kt(""),Nc=new kt("",-1),ml=new kt("");class Bo{get(i,s=No){if(s===No){const a=new Error(`NullInjectorError: No provider for ${Fn(i)}!`);throw a.name="NullInjectorError",a}return s}}var Kr=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Kr||{}),mt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(mt||{}),on=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(on||{});function yl(n,i,s){let a=n.length;for(;;){const u=n.indexOf(i,s);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const h=i.length;if(u+h===a||n.charCodeAt(u+h)<=32)return u}s=u+1}}function xr(n,i,s){let a=0;for(;a<s.length;){const u=s[a];if("number"==typeof u){if(0!==u)break;a++;const h=s[a++],g=s[a++],v=s[a++];n.setAttribute(i,g,v,h)}else{const h=u,g=s[++a];Uo(h)?n.setProperty(i,h,g):n.setAttribute(i,h,g),a++}}return a}function kc(n){return 3===n||4===n||6===n}function Uo(n){return 64===n.charCodeAt(0)}function Aa(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const u=i[a];"number"==typeof u?s=u:0===s||vl(n,s,u,null,-1===s||2===s?i[++a]:null)}}return n}function vl(n,i,s,a,u){let h=0,g=n.length;if(-1===i)g=-1;else for(;h<n.length;){const v=n[h++];if("number"==typeof v){if(v===i){g=-1;break}if(v>i){g=h-1;break}}}for(;h<n.length;){const v=n[h];if("number"==typeof v)break;if(v===s){if(null===a)return void(null!==u&&(n[h+1]=u));if(a===n[h+1])return void(n[h+2]=u)}h++,null!==a&&h++,null!==u&&h++}-1!==g&&(n.splice(g,0,i),h=g+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==u&&n.splice(h++,0,u)}const ui="ng-template";function qr(n,i,s,a){let u=0;if(a){for(;u<i.length&&"string"==typeof i[u];u+=2)if("class"===i[u]&&-1!==yl(i[u+1].toLowerCase(),s,0))return!0}else if(bl(n))return!1;if(u=i.indexOf(1,u),u>-1){let h;for(;++u<i.length&&"string"==typeof(h=i[u]);)if(h.toLowerCase()===s)return!0}return!1}function bl(n){return 4===n.type&&n.value!==ui}function At(n,i,s){return i===(4!==n.type||s?n.value:ui)}function vt(n,i,s){let a=4;const u=n.attrs,h=null!==u?function Qu(n){for(let i=0;i<n.length;i++)if(kc(n[i]))return i;return n.length}(u):0;let g=!1;for(let v=0;v<i.length;v++){const E=i[v];if("number"!=typeof E){if(!g)if(4&a){if(a=2|1&a,""!==E&&!At(n,E,s)||""===E&&1===i.length){if(ir(a))return!1;g=!0}}else if(8&a){if(null===u||!qr(n,u,E,s)){if(ir(a))return!1;g=!0}}else{const I=i[++v],O=bi(E,u,bl(n),s);if(-1===O){if(ir(a))return!1;g=!0;continue}if(""!==I){let B;if(B=O>h?"":u[O+1].toLowerCase(),2&a&&I!==B){if(ir(a))return!1;g=!0}}}}else{if(!g&&!ir(a)&&!ir(E))return!1;if(g&&ir(E))continue;g=!1,a=E|1&a}}return ir(a)||g}function ir(n){return!(1&n)}function bi(n,i,s,a){if(null===i)return-1;let u=0;if(a||!s){let h=!1;for(;u<i.length;){const g=i[u];if(g===n)return u;if(3===g||6===g)h=!0;else{if(1===g||2===g){let v=i[++u];for(;"string"==typeof v;)v=i[++u];continue}if(4===g)break;if(0===g){u+=4;continue}}u+=h?1:2}return-1}return function Mn(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,n)}function Xr(n,i,s=!1){for(let a=0;a<i.length;a++)if(vt(n,i[a],s))return!0;return!1}function ao(n,i){return n?":not("+i.trim()+")":i}function Wh(n){let i=n[0],s=1,a=2,u="",h=!1;for(;s<n.length;){let g=n[s];if("string"==typeof g)if(2&a){const v=n[++s];u+="["+g+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?u+="."+g:4&a&&(u+=" "+g);else""!==u&&!ir(g)&&(i+=ao(h,u),u=""),a=g,h=h||!ir(a);s++}return""!==u&&(i+=ao(h,u)),i}function hs(n){return gt(()=>{const i=Yt(n),s={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Kr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||mt.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""};Gi(s);const a=n.dependencies;return s.directiveDefs=Pr(a,!1),s.pipeDefs=Pr(a,!0),s.id=function Zu(n){let i=0;const s=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const u of s)i=Math.imul(31,i)+u.charCodeAt(0)|0;return i+=2147483648,"c"+i}(s),s})}function Ai(n){return Xe(n)||xt(n)}function Lc(n){return null!==n}function lo(n){return gt(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Fc(n,i){if(null==n)return Ir;const s={};for(const a in n)if(n.hasOwnProperty(a)){const u=n[a];let h,g,v=on.None;Array.isArray(u)?(v=u[0],h=u[1],g=u[2]??h):(h=u,g=u),i?(s[h]=v!==on.None?[a,v]:a,i[h]=g):s[h]=a}return s}function Vc(n){return gt(()=>{const i=Yt(n);return Gi(i),i})}function Ps(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xe(n){return n[cs]||null}function xt(n){return n[Po]||null}function qt(n){return n[to]||null}function Wi(n){const i=Xe(n)||xt(n)||qt(n);return null!==i&&i.standalone}function _i(n,i){const s=n[us]||null;if(!s&&!0===i)throw new Error(`Type ${Fn(n)} does not have '\u0275mod' property.`);return s}function Yt(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||Ir,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fc(n.inputs,i),outputs:Fc(n.outputs),debugInfo:null}}function Gi(n){n.features?.forEach(i=>i(n))}function Pr(n,i){if(!n)return null;const s=i?qt:Ai;return()=>("function"==typeof n?n():n).map(a=>s(a)).filter(Lc)}function pr(n){return{\u0275providers:n}}function co(...n){return{\u0275providers:Ho(0,n),\u0275fromNgModule:!0}}function Ho(n,...i){const s=[],a=new Set;let u;const h=g=>{s.push(g)};return Wr(i,g=>{const v=g;$o(v,h,[],a)&&(u||=[],u.push(v))}),void 0!==u&&gr(u,h),s}function gr(n,i){for(let s=0;s<n.length;s++){const{ngModule:a,providers:u}=n[s];_l(u,h=>{i(h,a)})}}function $o(n,i,s,a){if(!(n=J(n)))return!1;let u=null,h=Zs(n);const g=!h&&Xe(n);if(h||g){if(g&&!g.standalone)return!1;u=n}else{const E=n.ngModule;if(h=Zs(E),!h)return!1;u=E}const v=a.has(u);if(g){if(v)return!1;if(a.add(u),g.dependencies){const E="function"==typeof g.dependencies?g.dependencies():g.dependencies;for(const I of E)$o(I,i,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!v){let I;a.add(u);try{Wr(h.imports,O=>{$o(O,i,s,a)&&(I||=[],I.push(O))})}finally{}void 0!==I&&gr(I,i)}if(!v){const I=zr(u)||(()=>new u);i({provide:u,useFactory:I,deps:rn},u),i({provide:ml,useValue:u,multi:!0},u),i({provide:jo,useValue:()=>An(u),multi:!0},u)}const E=h.providers;if(null!=E&&!v){const I=n;_l(E,O=>{i(O,I)})}}}return u!==n&&void 0!==n.providers}function _l(n,i){for(let s of n)Is(s)&&(s=s.\u0275providers),Array.isArray(s)?_l(s,i):i(s)}const Ju=cn({provide:String,useValue:cn});function zo(n){return null!==n&&"object"==typeof n&&Ju in n}function qn(n){return"function"==typeof n}const at=new kt(""),Da={},ed={};let wl;function Sa(){return void 0===wl&&(wl=new Bo),wl}class mr{}class Wo extends mr{get destroyed(){return this._destroyed}constructor(i,s,a,u){super(),this.parent=s,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$c(i,g=>this.processProvider(g)),this.records.set(Nc,gs(void 0,this)),u.has("environment")&&this.records.set(mr,gs(void 0,this));const h=this.records.get(at);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(ml,rn,Qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=ye(null);try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const s=er(this),a=Li(void 0);try{return i()}finally{er(s),Li(a)}}get(i,s=No,a=Qt.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(Ro))return i[Ro](this);a=ro(a);const h=er(this),g=Li(void 0);try{if(!(a&Qt.SkipSelf)){let E=this.records.get(i);if(void 0===E){const I=function Hc(n){return"function"==typeof n||"object"==typeof n&&n instanceof kt}(i)&&Ys(i);E=I&&this.injectableDefInScope(I)?gs(Go(i),Da):null,this.records.set(i,E)}if(null!=E)return this.hydrate(i,E)}return(a&Qt.Self?Sa():this.parent).get(i,s=a&Qt.Optional&&s===No?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[io]=v[io]||[]).unshift(Fn(i)),h)throw v;return function ul(n,i,s,a){const u=n[io];throw i[_a]&&u.unshift(i[_a]),n.message=function dl(n,i,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let u=Fn(i);if(Array.isArray(i))u=i.map(Fn).join(" -> ");else if("object"==typeof i){let h=[];for(let g in i)if(i.hasOwnProperty(g)){let v=i[g];h.push(g+":"+("string"==typeof v?JSON.stringify(v):Fn(v)))}u=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${n.replace(ko,"\n  ")}`}("\n"+n.message,u,s,a),n.ngTokenPath=u,n[io]=null,n}(v,i,"R3InjectorError",this.source)}throw v}finally{Li(g),er(h)}}resolveInjectorInitializers(){const i=ye(null),s=er(this),a=Li(void 0);try{const h=this.get(jo,rn,Qt.Self);for(const g of h)g()}finally{er(s),Li(a),ye(i)}}toString(){const i=[],s=this.records;for(const a of s.keys())i.push(Fn(a));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(i){let s=qn(i=J(i))?i:J(i&&i.provide);const a=function Kh(n){return zo(n)?gs(void 0,n.useValue):gs(Uc(n),Da)}(i);if(!qn(i)&&!0===i.multi){let u=this.records.get(s);u||(u=gs(void 0,Da,!0),u.factory=()=>cl(u.multi),this.records.set(s,u)),s=i,u.multi.push(i)}this.records.set(s,a)}hydrate(i,s){const a=ye(null);try{return s.value===Da&&(s.value=ed,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}finally{ye(a)}}injectableDefInScope(i){if(!i.providedIn)return!1;const s=J(i.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(i){const s=this._onDestroyHooks.indexOf(i);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Go(n){const i=Ys(n),s=null!==i?i.factory:zr(n);if(null!==s)return s;if(n instanceof kt)throw new je(204,!1);if(n instanceof Function)return function El(n){if(n.length>0)throw new je(204,!1);const s=function Zi(n){return n&&(n[Js]||n[ls])||null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new je(204,!1)}function Uc(n,i,s){let a;if(qn(n)){const u=J(n);return zr(u)||Go(u)}if(zo(n))a=()=>J(n.useValue);else if(function Bc(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...cl(n.deps||[]));else if(function jc(n){return!(!n||!n.useExisting)}(n))a=()=>An(J(n.useExisting));else{const u=J(n&&(n.useClass||n.provide));if(!function Qr(n){return!!n.deps}(n))return zr(u)||Go(u);a=()=>new u(...cl(n.deps))}return a}function gs(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function $c(n,i){for(const s of n)Array.isArray(s)?$c(s,i):s&&Is(s)?$c(s.\u0275providers,i):i(s)}function xi(n,i){n instanceof Wo&&n.assertNotDestroyed();const a=er(n),u=Li(void 0);try{return i()}finally{er(a),Li(u)}}function Os(){return void 0!==ol()||null!=function Lo(){return Ji}()}const pt=0,Re=1,et=2,dn=3,zn=4,Vn=5,Tn=6,Rr=7,On=8,Qn=9,Or=10,st=11,uo=12,Ko=13,Zr=14,nt=15,Ma=16,Ns=17,di=18,rr=19,zc=20,yr=21,ho=22,ks=23,St=25,vr=1,ms=7,Xo=9,Xn=10;var Al=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Al||{});function hi(n){return Array.isArray(n)&&"object"==typeof n[vr]}function Di(n){return Array.isArray(n)&&!0===n[vr]}function Ta(n){return!!(4&n.flags)}function Ls(n){return n.componentOffset>-1}function br(n){return!(1&~n.flags)}function _r(n){return!!n.template}function Dl(n){return!!(512&n[et])}class D{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function x(n,i,s,a){null!==i?i.applyValueToInputSignal(i,a):n[s]=a}function F(){return z}function z(n){return n.type.prototype.ngOnChanges&&(n.setInput=ne),ae}function ae(){const n=Et(this),i=n?.current;if(i){const s=n.previous;if(s===Ir)n.previous=i;else for(let a in i)s[a]=i[a];n.current=null,this.ngOnChanges(i)}}function ne(n,i,s,a,u){const h=this.declaredInputs[a],g=Et(n)||function Mt(n,i){return n[Le]=i}(n,{previous:Ir,current:null}),v=g.current||(g.current={}),E=g.previous,I=E[h];v[h]=new D(I&&I.currentValue,s,E===Ir),x(n,i,u,s)}F.ngInherit=!0;const Le="__ngSimpleChanges__";function Et(n){return n[Le]||null}const qi=function(n,i,s){},Zo="svg";let ys=!1;function En(n){for(;Array.isArray(n);)n=n[pt];return n}function Fi(n,i){return En(i[n])}function Si(n,i){return En(i[n.index])}function Fs(n,i){return n.data[i]}function Il(n,i){return n[i]}function Nr(n,i){const s=i[n];return hi(s)?s:s[pt]}function Xh(n){return!(128&~n[et])}function Vs(n,i){return null==i?null:n[i]}function ad(n){n[Ns]=0}function Qh(n){1024&n[et]||(n[et]|=1024,Xh(n)&&Pl(n))}function xl(n){return!!(9216&n[et]||n[ks]?.dirty)}function cd(n){n[Or].changeDetectionScheduler?.notify(1),xl(n)?Pl(n):64&n[et]&&(function Tl(){return ys}()?(n[et]|=1024,Pl(n)):n[Or].changeDetectionScheduler?.notify())}function Pl(n){n[Or].changeDetectionScheduler?.notify();let i=Ia(n);for(;null!==i&&!(8192&i[et])&&(i[et]|=8192,Xh(i));)i=Ia(i)}function Wc(n,i){if(!(256&~n[et]))throw new je(911,!1);null===n[yr]&&(n[yr]=[]),n[yr].push(i)}function Ia(n){const i=n[dn];return Di(i)?i[dn]:i}const Tt={lFrame:Kg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Lg(){return Tt.bindingsEnabled}function _e(){return Tt.lFrame.lView}function en(){return Tt.lFrame.tView}function jg(n){return Tt.lFrame.contextLView=n,n[On]}function Bg(n){return Tt.lFrame.contextLView=null,n}function In(){let n=Ug();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ug(){return Tt.lFrame.currentTNode}function js(n,i){const s=Tt.lFrame;s.currentTNode=n,s.isParent=i}function Vi(){return Tt.lFrame.isParent}function xa(){Tt.lFrame.isParent=!1}function sr(){const n=Tt.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function fo(){return Tt.lFrame.bindingIndex}function vs(){return Tt.lFrame.bindingIndex++}function po(n){const i=Tt.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}function Wg(n,i){const s=Tt.lFrame;s.bindingIndex=s.bindingRootIndex=n,hd(i)}function hd(n){Tt.lFrame.currentDirectiveIndex=n}function Jh(){return Tt.lFrame.currentQueryIndex}function fd(n){Tt.lFrame.currentQueryIndex=n}function Ri(n){const i=n[Re];return 2===i.type?i.declTNode:1===i.type?n[Vn]:null}function Gg(n,i,s){if(s&Qt.SkipSelf){let u=i,h=n;for(;!(u=u.parent,null!==u||s&Qt.Host||(u=Ri(h),null===u||(h=h[Zr],10&u.type))););if(null===u)return!1;i=u,n=h}const a=Tt.lFrame=ef();return a.currentTNode=i,a.lView=n,!0}function Ol(n){const i=ef(),s=n[Re];Tt.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function ef(){const n=Tt.lFrame,i=null===n?null:n.child;return null===i?Kg(n):i}function Kg(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Pa(){const n=Tt.lFrame;return Tt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const qg=Pa;function tf(){const n=Pa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wi(){return Tt.lFrame.selectedIndex}function Jo(n){Tt.lFrame.selectedIndex=n}function Wn(){const n=Tt.lFrame;return Fs(n.tView,n.selectedIndex)}function pd(){Tt.lFrame.currentNamespace=Zo}function Nl(){!function qb(){Tt.lFrame.currentNamespace=null}()}let Bs=!0;function Gc(){return Bs}function Dn(n){Bs=n}function gd(n,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:v,ngAfterViewInit:E,ngAfterViewChecked:I,ngOnDestroy:O}=h;g&&(n.contentHooks??=[]).push(-s,g),v&&((n.contentHooks??=[]).push(s,v),(n.contentCheckHooks??=[]).push(s,v)),E&&(n.viewHooks??=[]).push(-s,E),I&&((n.viewHooks??=[]).push(s,I),(n.viewCheckHooks??=[]).push(s,I)),null!=O&&(n.destroyHooks??=[]).push(s,O)}}function Us(n,i,s){Zg(n,i,3,s)}function md(n,i,s,a){(3&n[et])===s&&Zg(n,i,s,a)}function nf(n,i){let s=n[et];(3&s)===i&&(s&=16383,s+=1,n[et]=s)}function Zg(n,i,s,a){const h=a??-1,g=i.length-1;let v=0;for(let E=void 0!==a?65535&n[Ns]:0;E<g;E++)if("number"==typeof i[E+1]){if(v=i[E],null!=a&&v>=a)break}else i[E]<0&&(n[Ns]+=65536),(v<h||-1==h)&&(Xb(n,s,i,E),n[Ns]=(4294901760&n[Ns])+E+2),E++}function rf(n,i){qi(4,n,i);const s=ye(null);try{i.call(n)}finally{ye(s),qi(5,n,i)}}function Xb(n,i,s,a){const u=s[a]<0,h=s[a+1],v=n[u?-s[a]:s[a]];u?n[et]>>14<n[Ns]>>16&&(3&n[et])===i&&(n[et]+=16384,rf(v,h)):rf(v,h)}const kl=-1;class Ra{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function sf(n){return n!==kl}function Oa(n){return 32767&n}function Kc(n,i){let s=function Jg(n){return n>>16}(n),a=i;for(;s>0;)a=a[Zr],s--;return a}let af=!0;function vd(n){const i=af;return af=n,i}const em=255,tm=5;let bd=0;const Nn={};function Hs(n,i){const s=lf(n,i);if(-1!==s)return s;const a=i[Re];a.firstCreatePass&&(n.injectorIndex=i.length,_d(a.data,n),_d(i,null),_d(a.blueprint,null));const u=wd(n,i),h=n.injectorIndex;if(sf(u)){const g=Oa(u),v=Kc(u,i),E=v[Re].data;for(let I=0;I<8;I++)i[h+I]=v[g+I]|E[g+I]}return i[h+8]=u,h}function _d(n,i){n.push(0,0,0,0,0,0,0,0,i)}function lf(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function wd(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,u=i;for(;null!==u;){if(a=om(u),null===a)return kl;if(s++,u=u[Zr],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return kl}function qc(n,i,s){!function nm(n,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(mi)&&(a=s[mi]),null==a&&(a=s[mi]=bd++);const u=a&em;i.data[n+(u>>tm)]|=1<<u}(n,i,s)}function kr(n,i,s){if(s&Qt.Optional||void 0!==n)return n;ba()}function ai(n,i,s,a){if(s&Qt.Optional&&void 0===a&&(a=null),!(s&(Qt.Self|Qt.Host))){const u=n[Qn],h=Li(void 0);try{return u?u.get(i,a,s&Qt.Optional):xc(i,a,s&Qt.Optional)}finally{Li(h)}}return kr(a,0,s)}function Oi(n,i,s,a=Qt.Default,u){if(null!==n){if(2048&i[et]&&!(a&Qt.Self)){const g=function s_(n,i,s,a,u){let h=n,g=i;for(;null!==h&&null!==g&&2048&g[et]&&!(512&g[et]);){const v=Ed(h,g,s,a|Qt.Self,Nn);if(v!==Nn)return v;let E=h.parent;if(!E){const I=g[zc];if(I){const O=I.get(s,Nn,a);if(O!==Nn)return O}E=om(g),g=g[Zr]}h=E}return u}(n,i,s,a,Nn);if(g!==Nn)return g}const h=Ed(n,i,s,a,Nn);if(h!==Nn)return h}return ai(i,s,a,u)}function Ed(n,i,s,a,u){const h=function kE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(mi)?n[mi]:void 0;return"number"==typeof i?i>=0?i&em:r_:i}(s);if("function"==typeof h){if(!Gg(i,n,a))return a&Qt.Host?kr(u,0,a):ai(i,s,a,u);try{let g;if(g=h(a),null!=g||a&Qt.Optional)return g;ba()}finally{qg()}}else if("number"==typeof h){let g=null,v=lf(n,i),E=kl,I=a&Qt.Host?i[nt][Vn]:null;for((-1===v||a&Qt.SkipSelf)&&(E=-1===v?wd(n,i):i[v+8],E!==kl&&rm(a,!1)?(g=i[Re],v=Oa(E),i=Kc(E,i)):v=-1);-1!==v;){const O=i[Re];if(im(h,v,O.data)){const B=i_(v,i,s,g,a,I);if(B!==Nn)return B}E=i[v+8],E!==kl&&rm(a,i[Re].data[v+8]===I)&&im(h,v,i)?(g=O,v=Oa(E),i=Kc(E,i)):v=-1}}return u}function i_(n,i,s,a,u,h){const g=i[Re],v=g.data[n+8],O=Mi(v,g,s,null==a?Ls(v)&&af:a!=g&&!!(3&v.type),u&Qt.Host&&h===v);return null!==O?Ll(i,g,O,v):Nn}function Mi(n,i,s,a,u){const h=n.providerIndexes,g=i.data,v=1048575&h,E=n.directiveStart,O=h>>20,Q=u?v+O:n.directiveEnd;for(let Y=a?v:v+O;Y<Q;Y++){const oe=g[Y];if(Y<E&&s===oe||Y>=E&&oe.type===s)return Y}if(u){const Y=g[E];if(Y&&_r(Y)&&Y.type===s)return E}return null}function Ll(n,i,s,a){let u=n[s];const h=i.data;if(function Qb(n){return n instanceof Ra}(u)){const g=u;g.resolving&&function no(n,i){throw i&&i.join(" > "),new je(-200,n)}(function It(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ft(n)}(h[s]));const v=vd(g.canSeeViewProviders);g.resolving=!0;const I=g.injectImpl?Li(g.injectImpl):null;Gg(n,a,Qt.Default);try{u=n[s]=g.factory(void 0,h,n,a),i.firstCreatePass&&s>=a.directiveStart&&function Yg(n,i,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:h}=i.type.prototype;if(a){const g=z(i);(s.preOrderHooks??=[]).push(n,g),(s.preOrderCheckHooks??=[]).push(n,g)}u&&(s.preOrderHooks??=[]).push(0-n,u),h&&((s.preOrderHooks??=[]).push(n,h),(s.preOrderCheckHooks??=[]).push(n,h))}(s,h[s],i)}finally{null!==I&&Li(I),vd(v),g.resolving=!1,qg()}}return u}function im(n,i,s){return!!(s[i+(n>>tm)]&1<<n)}function rm(n,i){return!(n&Qt.Self||n&Qt.Host&&i)}class Ti{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return Oi(this._tNode,this._lView,i,ro(a),s)}}function r_(){return new Ti(In(),_e())}function sm(n){return gt(()=>{const i=n.prototype.constructor,s=i[Pt]||cf(i),a=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==a;){const h=u[Pt]||cf(u);if(h&&h!==s)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function cf(n){return le(n)?()=>{const i=cf(J(n));return i&&i()}:zr(n)}function om(n){const i=n[Re],s=i.type;return 2===s?i.declTNode:1===s?n[Vn]:null}function Cd(n){return function n_(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const h=s[u];if(kc(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(h===i)return s[u+1];u+=2}}}return null}(In(),n)}function hm(n,i=null,s=null,a){const u=fm(n,i,s,a);return u.resolveInjectorInitializers(),u}function fm(n,i=null,s=null,a,u=new Set){const h=[s||rn,co(n)];return a=a||("object"==typeof n?void 0:Fn(n)),new Wo(h,i||Sa(),a||null,u)}let wr=(()=>{class n{static{this.THROW_IF_NOT_FOUND=No}static{this.NULL=new Bo}static create(s,a){if(Array.isArray(s))return hm({name:""},a,s,"");{const u=s.name??"";return hm({name:u},s.parent,s.providers,u)}}static{this.\u0275prov=un({token:n,providedIn:"any",factory:()=>An(Nc)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function df(n){return n.ngOriginalError}class $s{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i);this._console.error("ERROR",i),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&df(i);for(;s&&df(s);)s=df(s);return s||null}}const gm=new kt("",{providedIn:"root",factory:()=>_t($s).handleError.bind(void 0)});let Vl=(()=>{class n{static{this.__NG_ELEMENT_ID__=f_}static{this.__NG_ENV_ID__=s=>s}}return n})();class h_ extends Vl{constructor(i){super(),this._lView=i}onDestroy(i){return Wc(this._lView,i),()=>function ud(n,i){if(null===n[yr])return;const s=n[yr].indexOf(i);-1!==s&&n[yr].splice(s,1)}(this._lView,i)}}function f_(){return new h_(_e())}function ym(){return ka(In(),_e())}function ka(n,i){return new jl(Si(n,i))}let jl=(()=>{class n{constructor(s){this.nativeElement=s}static{this.__NG_ELEMENT_ID__=ym}}return n})();function Bl(n){return n instanceof jl?n.nativeElement:n}function Ul(n){return i=>{setTimeout(n,void 0,i)}}const Er=class p_ extends yt.B{constructor(i=!1){super(),this.destroyRef=void 0,this.__isAsync=i,Os()&&(this.destroyRef=_t(Vl,{optional:!0})??void 0)}emit(i){const s=ye(null);try{super.next(i)}finally{ye(s)}}subscribe(i,s,a){let u=i,h=s||(()=>null),g=a;if(i&&"object"==typeof i){const E=i;u=E.next?.bind(E),h=E.error?.bind(E),g=E.complete?.bind(E)}this.__isAsync&&(h=Ul(h),u&&(u=Ul(u)),g&&(g=Ul(g)));const v=super.subscribe({next:u,error:h,complete:g});return i instanceof Ot.yU&&i.add(v),v}};function ei(){return this._results[Symbol.iterator]()}class ff{get changes(){return this._changes??=new Er}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=ff.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=ei)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){this.dirty=!1;const a=function zt(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ca(n,i,s){if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let u=n[a],h=i[a];if(s&&(u=s(u),h=s(h)),h!==u)return!1}return!0}(this._results,a,s))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function $l(n){return!(128&~n.flags)}const Sd=new Map;let wm=0;const Md="__ngContext__";function Xi(n,i){hi(i)?(n[Md]=i[rr],function zl(n){Sd.set(n[rr],n)}(i)):n[Md]=i}function Dm(n){return __(n[uo])}function mf(n){return __(n[zn])}function __(n){for(;null!==n&&!Di(n);)n=n[zn];return n}let yf;function D_(n){yf=n}const Qc=new kt("",{providedIn:"root",factory:()=>Pm}),Pm="ng",Rm=new kt(""),Ws=new kt("",{providedIn:"platform",factory:()=>"unknown"}),S_=new kt(""),M_=new kt("",{providedIn:"root",factory:()=>function na(){if(void 0!==yf)return yf;if(typeof document<"u")return document;throw new je(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let km=()=>null;function Cf(n,i,s=!1){return km(n,i,s)}const k_=new kt("",{providedIn:"root",factory:()=>!1});let Ba;function Zc(n){return function bs(){if(void 0===Ba&&(Ba=null,bt.trustedTypes))try{Ba=bt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ba}()?.createScriptURL(n)||n}class $m{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wn})`}}function mo(n){return n instanceof $m?n.changingThisBreaksApplicationSecurity:n}function Xl(n,i){const s=function L_(n){return n instanceof $m&&n.getTypeName()||null}(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see ${wn})`)}return s===i}const Km=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Yl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Yl||{});function $d(n){const i=iu();return i?i.sanitize(Yl.URL,n)||"":Xl(n,"URL")?mo(n):function Tf(n){return(n=String(n)).match(Km)?n:"unsafe:"+n}(ft(n))}function Ff(n){const i=iu();if(i)return Zc(i.sanitize(Yl.RESOURCE_URL,n)||"");if(Xl(n,"ResourceURL"))return Zc(mo(n));throw new je(904,!1)}function ey(n,i,s){return function W_(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?Ff:$d}(i,s)(n)}function iu(){const n=_e();return n&&n[Or].sanitizer}const K_=/^>|^->|<!--|-->|--!>|<!-$/g,q_=/(<|>)/g,X_="\u200b$1\u200b";function ay(n){return n.ownerDocument.defaultView}function Fr(n){return n instanceof Function?n():n}var Gd=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Gd||{});let Hf;function $f(n,i){return Hf(n,i)}function oa(n,i,s,a,u){if(null!=a){let h,g=!1;Di(a)?h=a:hi(a)&&(g=!0,a=a[pt]);const v=En(a);0===n&&null!==s?null==u?gy(i,s,v):Ha(i,s,v,u||null,!0):1===n&&null!==s?Ha(i,s,v,u||null,!0):2===n?function Jl(n,i,s){const a=$a(n,i);a&&function aw(n,i,s,a){n.removeChild(i,s,a)}(n,a,i,s)}(i,v,g):3===n&&i.destroyNode(v),null!=h&&function uw(n,i,s,a,u){const h=s[ms];h!==En(s)&&oa(i,n,a,h,u);for(let v=Xn;v<s.length;v++){const E=s[v];Zd(E[Re],E,n,i,a,h)}}(i,n,h,s,u)}}function es(n,i){return n.createComment(function ty(n){return n.replace(K_,i=>i.replace(q_,X_))}(i))}function qd(n,i,s){return n.createElement(i,s)}function dy(n,i){i[Or].changeDetectionScheduler?.notify(1),Zd(n,i,i[st],2,null,null)}function Ua(n,i){const s=n[Xo],a=s.indexOf(i);s.splice(a,1)}function Zl(n,i){if(n.length<=Xn)return;const s=Xn+i,a=n[s];if(a){const u=a[Ma];null!==u&&u!==n&&Ua(u,a),i>0&&(n[s-1][zn]=a[zn]);const h=Gr(n,Xn+i);!function rw(n,i){dy(n,i),i[pt]=null,i[Vn]=null}(a[Re],a);const g=h[di];null!==g&&g.detachView(h[Re]),a[dn]=null,a[zn]=null,a[et]&=-129}return a}function Xd(n,i){if(!(256&i[et])){const s=i[st];s.destroyNode&&Zd(n,i,s,3,null,null),function hy(n){let i=n[uo];if(!i)return zf(n[Re],n);for(;i;){let s=null;if(hi(i))s=i[uo];else{const a=i[Xn];a&&(s=a)}if(!s){for(;i&&!i[zn]&&i!==n;)hi(i)&&zf(i[Re],i),i=i[dn];null===i&&(i=n),hi(i)&&zf(i[Re],i),s=i&&i[zn]}i=s}}(i)}}function zf(n,i){if(256&i[et])return;const s=ye(null);try{i[et]&=-129,i[et]|=256,i[ks]&&function Ye(n){if(ze(n),wt(n))for(let i=0;i<n.producerNode.length;i++)lt(n.producerNode[i],n.producerIndexOfThis[i]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(i[ks]),function ow(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const u=i[s[a]];if(!(u instanceof Ra)){const h=s[a+1];if(Array.isArray(h))for(let g=0;g<h.length;g+=2){const v=u[h[g]],E=h[g+1];qi(4,v,E);try{E.call(v)}finally{qi(5,v,E)}}else{qi(4,u,h);try{h.call(u)}finally{qi(5,u,h)}}}}}(n,i),function fy(n,i){const s=n.cleanup,a=i[Rr];if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const g=s[h+3];g>=0?a[g]():a[-g].unsubscribe(),h+=2}else s[h].call(a[s[h+1]]);null!==a&&(i[Rr]=null);const u=i[yr];if(null!==u){i[yr]=null;for(let h=0;h<u.length;h++)(0,u[h])()}}(n,i),1===i[Re].type&&i[st].destroy();const a=i[Ma];if(null!==a&&Di(i[dn])){a!==i[dn]&&Ua(a,i);const u=i[di];null!==u&&u.detachView(n)}!function zs(n){Sd.delete(n[rr])}(i)}finally{ye(s)}}function au(n,i,s){return function py(n,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[pt];{const{componentOffset:u}=a;if(u>-1){const{encapsulation:h}=n.data[a.directiveStart+u];if(h===mt.None||h===mt.Emulated)return null}return Si(a,s)}}(n,i.parent,s)}function Ha(n,i,s,a,u){n.insertBefore(i,s,a,u)}function gy(n,i,s){n.appendChild(i,s)}function my(n,i,s,a,u){null!==a?Ha(n,i,s,a,u):gy(n,i,s)}function $a(n,i){return n.parentNode(i)}let _y,by=function Wf(n,i,s){return 40&n.type?Si(n,s):null};function Qd(n,i,s,a){const u=au(n,a,i),h=i[st],v=function vy(n,i,s){return by(n,i,s)}(a.parent||i[Vn],a,i);if(null!=u)if(Array.isArray(s))for(let E=0;E<s.length;E++)my(h,u,s[E],v,!1);else my(h,u,s,v,!1);void 0!==_y&&_y(h,a,i,s,u)}function lu(n,i){if(null!==i){const s=i.type;if(3&s)return Si(i,n);if(4&s)return Gf(-1,n[i.index]);if(8&s){const a=i.child;if(null!==a)return lu(n,a);{const u=n[i.index];return Di(u)?Gf(-1,u):En(u)}}if(32&s)return $f(i,n)()||En(n[i.index]);{const a=wy(n,i);return null!==a?Array.isArray(a)?a[0]:lu(Ia(n[nt]),a):lu(n,i.next)}}return null}function wy(n,i){return null!==i?n[nt][Vn].projection[i.projection]:null}function Gf(n,i){const s=Xn+n+1;if(s<i.length){const a=i[s],u=a[Re].firstChild;if(null!==u)return lu(a,u)}return i[ms]}function Yd(n,i,s,a,u,h,g){for(;null!=s;){const v=a[s.index],E=s.type;if(g&&0===i&&(v&&Xi(En(v),a),s.flags|=2),32&~s.flags)if(8&E)Yd(n,i,s.child,a,u,h,!1),oa(i,n,u,v,h);else if(32&E){const I=$f(s,a);let O;for(;O=I();)oa(i,n,u,O,h);oa(i,n,u,v,h)}else 16&E?Cy(n,i,a,s,u,h):oa(i,n,u,v,h);s=g?s.projectionNext:s.next}}function Zd(n,i,s,a,u,h){Yd(s,a,n.firstChild,i,u,h,!1)}function Cy(n,i,s,a,u,h){const g=s[nt],E=g[Vn].projection[a.projection];if(Array.isArray(E))for(let I=0;I<E.length;I++)oa(i,n,u,E[I],h);else{let I=E;const O=g[dn];$l(a)&&(I.flags|=128),Yd(n,i,I,O,u,h,!0)}}function Sy(n,i,s){""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s)}function My(n,i,s){const{mergedAttrs:a,classes:u,styles:h}=s;null!==a&&xr(n,i,a),null!==u&&Sy(n,i,u),null!==h&&function Dy(n,i,s){n.setAttribute(i,"style",s)}(n,i,h)}const Ft={};function Ty(n=1){Iy(en(),_e(),wi()+n,!1)}function Iy(n,i,s,a){if(!a)if(3&~i[et]){const h=n.preOrderHooks;null!==h&&md(i,h,0,s)}else{const h=n.preOrderCheckHooks;null!==h&&Us(i,h,s)}Jo(s)}function ec(n,i=Qt.Default){const s=_e();return null===s?An(n,i):Oi(In(),s,J(n),i)}function xy(){throw new Error("invalid")}function Py(n,i,s,a,u,h){const g=ye(null);try{let v=null;u&on.SignalBased&&(v=i[a][xe]),null!==v&&void 0!==v.transformFn&&(h=v.transformFn(h)),u&on.HasDecoratorInputTransform&&(h=n.inputTransforms[a].call(i,h)),null!==n.setInput?n.setInput(i,v,h,s,a):x(i,v,a,h)}finally{ye(g)}}function Jd(n,i,s,a,u,h,g,v,E,I,O){const B=i.blueprint.slice();return B[pt]=u,B[et]=204|a,(null!==I||n&&2048&n[et])&&(B[et]|=2048),ad(B),B[dn]=B[Zr]=n,B[On]=s,B[Or]=g||n&&n[Or],B[st]=v||n&&n[st],B[Qn]=E||n&&n[Qn]||null,B[Vn]=h,B[rr]=function li(){return wm++}(),B[Tn]=O,B[zc]=I,B[nt]=2==i.type?n[nt]:B,B}function tc(n,i,s,a,u){let h=n.data[i];if(null===h)h=function Kf(n,i,s,a,u){const h=Ug(),g=Vi(),E=n.data[i]=function vw(n,i,s,a,u,h){let g=i?i.injectorIndex:-1,v=0;return function Rl(){return null!==Tt.skipHydrationRootTNode}()&&(v|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:g,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?h:h&&h.parent,s,i,a,u);return null===n.firstChild&&(n.firstChild=E),null!==h&&(g?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E,E.prev=h)),E}(n,i,s,a,u),function Kb(){return Tt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=s,h.value=a,h.attrs=u;const g=function Pi(){const n=Tt.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();h.injectorIndex=null===g?-1:g.injectorIndex}return js(h,!0),h}function Wa(n,i,s,a){if(0===s)return-1;const u=i.length;for(let h=0;h<s;h++)i.push(a),n.blueprint.push(a),n.data.push(null);return u}function nc(n,i,s,a,u){const h=wi(),g=2&a;try{Jo(-1),g&&i.length>St&&Iy(n,i,St,!1),qi(g?2:0,u),s(a,u)}finally{Jo(h),qi(g?3:1,u)}}function cu(n,i,s){if(Ta(i)){const a=ye(null);try{const h=i.directiveEnd;for(let g=i.directiveStart;g<h;g++){const v=n.data[g];v.contentQueries&&v.contentQueries(1,s[g],g)}}finally{ye(a)}}}function eh(n,i,s){Lg()&&(function bC(n,i,s,a){const u=s.directiveStart,h=s.directiveEnd;Ls(s)&&function Sw(n,i,s){const a=Si(i,n),u=Ry(s);let g=16;s.signals?g=4096:s.onPush&&(g=64);const v=th(n,Jd(n,u,null,g,a,i,null,n[Or].rendererFactory.createRenderer(a,s),null,null,null));n[i.index]=v}(i,s,n.data[u+s.componentOffset]),n.firstCreatePass||Hs(s,i),Xi(a,i);const g=s.initialInputs;for(let v=u;v<h;v++){const E=n.data[v],I=Ll(i,n,v,s);Xi(I,i),null!==g&&Mw(0,v-u,I,E,0,g),_r(E)&&(Nr(s.index,i)[On]=Ll(i,n,v,s))}}(n,i,s,Si(s,i)),!(64&~s.flags)&&Vy(n,i,s))}function qf(n,i,s=Si){const a=i.localNames;if(null!==a){let u=i.index+1;for(let h=0;h<a.length;h+=2){const g=a[h+1],v=-1===g?s(i,n):n[g];n[u++]=v}}}function Ry(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Xf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function Xf(n,i,s,a,u,h,g,v,E,I,O){const B=St+a,Q=B+u,Y=function hw(n,i){const s=[];for(let a=0;a<i;a++)s.push(a<n?null:Ft);return s}(B,Q),oe="function"==typeof I?I():I;return Y[Re]={type:n,blueprint:Y,template:s,queries:null,viewQuery:v,declTNode:i,data:Y.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:E,consts:oe,incompleteFirstPass:!1,ssrId:O}}let gw=()=>null;function Ny(n,i,s,a,u){for(let h in i){if(!i.hasOwnProperty(h))continue;const g=i[h];if(void 0===g)continue;a??={};let v,E=on.None;Array.isArray(g)?(v=g[0],E=g[1]):v=g;let I=h;if(null!==u){if(!u.hasOwnProperty(h))continue;I=u[h]}0===n?ky(a,s,I,v,E):ky(a,s,I,v)}return a}function ky(n,i,s,a,u){let h;n.hasOwnProperty(s)?(h=n[s]).push(i,a):h=n[s]=[i,a],void 0!==u&&h.push(u)}function Ly(n,i,s,a){if(Lg()){const u=null===a?null:{"":-1},h=function wC(n,i){const s=n.directiveRegistry;let a=null,u=null;if(s)for(let h=0;h<s.length;h++){const g=s[h];if(Xr(i,g.selectors,!1))if(a||(a=[]),_r(g))if(null!==g.findHostDirectiveDefs){const v=[];u=u||new Map,g.findHostDirectiveDefs(g,v,u),a.unshift(...v,g),Qf(n,i,v.length)}else a.unshift(g),Qf(n,i,0);else u=u||new Map,g.findHostDirectiveDefs?.(g,a,u),a.push(g)}return null===a?null:[a,u]}(n,s);let g,v;null===h?g=v=null:[g,v]=h,null!==g&&Cw(n,i,s,g,u,v),u&&function EC(n,i,s){if(i){const a=n.localNames=[];for(let u=0;u<i.length;u+=2){const h=s[i[u+1]];if(null==h)throw new je(-301,!1);a.push(i[u],h)}}}(s,a,u)}s.mergedAttrs=Aa(s.mergedAttrs,s.attrs)}function Cw(n,i,s,a,u,h){for(let I=0;I<a.length;I++)qc(Hs(s,i),n,a[I].type);!function Aw(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}(s,n.data.length,a.length);for(let I=0;I<a.length;I++){const O=a[I];O.providersResolver&&O.providersResolver(O)}let g=!1,v=!1,E=Wa(n,i,a.length,null);for(let I=0;I<a.length;I++){const O=a[I];s.mergedAttrs=Aa(s.mergedAttrs,O.hostAttrs),Dw(n,s,i,E,O),jy(E,O,u),null!==O.contentQueries&&(s.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(s.flags|=64);const B=O.type.prototype;!g&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((n.preOrderHooks??=[]).push(s.index),g=!0),!v&&(B.ngOnChanges||B.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(s.index),v=!0),E++}!function bw(n,i,s){const u=i.directiveEnd,h=n.data,g=i.attrs,v=[];let E=null,I=null;for(let O=i.directiveStart;O<u;O++){const B=h[O],Q=s?s.get(B):null,oe=Q?Q.outputs:null;E=Ny(0,B.inputs,O,E,Q?Q.inputs:null),I=Ny(1,B.outputs,O,I,oe);const we=null===E||null===g||bl(i)?null:Tw(E,O,g);v.push(we)}null!==E&&(E.hasOwnProperty("class")&&(i.flags|=8),E.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=v,i.inputs=E,i.outputs=I}(n,s,h)}function Vy(n,i,s){const a=s.directiveStart,u=s.directiveEnd,h=s.index,g=function Yh(){return Tt.lFrame.currentDirectiveIndex}();try{Jo(h);for(let v=a;v<u;v++){const E=n.data[v],I=i[v];hd(v),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&_C(E,I)}}finally{Jo(-1),hd(g)}}function _C(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Qf(n,i,s){i.componentOffset=s,(n.components??=[]).push(i.index)}function jy(n,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=n;_r(i)&&(s[""]=n)}}function Dw(n,i,s,a,u){n.data[a]=u;const h=u.factory||(u.factory=zr(u.type)),g=new Ra(h,_r(u),ec);n.blueprint[a]=g,s[a]=g,function vC(n,i,s,a,u){const h=u.hostBindings;if(h){let g=n.hostBindingOpCodes;null===g&&(g=n.hostBindingOpCodes=[]);const v=~i.index;(function Fy(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(g)!=v&&g.push(v),g.push(s,a,h)}}(n,i,a,Wa(n,s,u.hostVars,Ft),u)}function Ks(n,i,s,a,u,h){const g=Si(n,i);!function Yf(n,i,s,a,u,h,g){if(null==h)n.removeAttribute(i,u,s);else{const v=null==g?ft(h):g(h,a||"",u);n.setAttribute(i,u,v,s)}}(i[st],g,h,n.value,s,a,u)}function Mw(n,i,s,a,u,h){const g=h[i];if(null!==g)for(let v=0;v<g.length;)Py(a,s,g[v++],g[v++],g[v++],g[v++])}function Tw(n,i,s){let a=null,u=0;for(;u<s.length;){const h=s[u];if(0!==h)if(5!==h){if("number"==typeof h)break;if(n.hasOwnProperty(h)){null===a&&(a=[]);const g=n[h];for(let v=0;v<g.length;v+=3)if(g[v]===i){a.push(h,g[v+1],g[v+2],s[u+1]);break}}u+=2}else u+=2;else u+=4}return a}function By(n,i,s,a){return[n,!0,0,i,null,a,null,s,null,null]}function Uy(n,i){const s=n.contentQueries;if(null!==s){const a=ye(null);try{for(let u=0;u<s.length;u+=2){const g=s[u+1];if(-1!==g){const v=n.data[g];fd(s[u]),v.contentQueries(2,i[g],g)}}}finally{ye(a)}}}function th(n,i){return n[uo]?n[Ko][zn]=i:n[uo]=i,n[Ko]=i,i}function Hy(n,i,s){fd(0);const a=ye(null);try{i(n,s)}finally{ye(a)}}function $y(n){return n[Rr]||(n[Rr]=[])}function zy(n){return n.cleanup||(n.cleanup=[])}function nh(n,i){const s=n[Qn],a=s?s.get($s,null):null;a&&a.handleError(i)}function Zf(n,i,s,a,u){for(let h=0;h<s.length;){const g=s[h++],v=s[h++],E=s[h++];Py(n.data[g],i[g],a,v,E,u)}}function bo(n,i,s){const a=Fi(i,n);!function Kd(n,i,s){n.setValue(i,s)}(n[st],a,s)}function Iw(n,i){const s=Nr(i,n),a=s[Re];!function xw(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])}(a,s);const u=s[pt];null!==u&&null===s[Tn]&&(s[Tn]=Cf(u,s[Qn])),Jf(a,s,s[On])}function Jf(n,i,s){Ol(i);try{const a=n.viewQuery;null!==a&&Hy(1,a,s);const u=n.template;null!==u&&nc(n,i,u,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),i[di]?.finishViewCreation(n),n.staticContentQueries&&Uy(n,i),n.staticViewQueries&&Hy(2,n.viewQuery,s);const h=n.components;null!==h&&function Pw(n,i){for(let s=0;s<i.length;s++)Iw(n,i[s])}(i,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{i[et]&=-5,tf()}}function ic(n,i){return!i||null===i.firstChild||$l(n)}function du(n,i,s,a=!0){const u=i[Re];if(function ou(n,i,s,a){const u=Xn+a,h=s.length;a>0&&(s[u-1][zn]=i),a<h-Xn?(i[zn]=s[u],hl(s,Xn+a,i)):(s.push(i),i[zn]=null),i[dn]=s;const g=i[Ma];null!==g&&s!==g&&function sw(n,i){const s=n[Xo];i[nt]!==i[dn][dn][nt]&&(n[et]|=Al.HasTransplantedViews),null===s?n[Xo]=[i]:s.push(i)}(g,i);const v=i[di];null!==v&&v.insertView(n),cd(i),i[et]|=128}(u,i,n,s),a){const g=Gf(s,n),v=i[st],E=$a(v,n[ms]);null!==E&&function uy(n,i,s,a,u,h){a[pt]=u,a[Vn]=i,Zd(n,a,s,1,u,h)}(u,n[Vn],v,i,E,g)}const h=i[Tn];null!==h&&null!==h.firstChild&&(h.firstChild=null)}function hu(n,i,s,a,u=!1){for(;null!==s;){const h=i[s.index];null!==h&&a.push(En(h)),Di(h)&&Ky(h,a);const g=s.type;if(8&g)hu(n,i,s.child,a);else if(32&g){const v=$f(s,i);let E;for(;E=v();)a.push(E)}else if(16&g){const v=wy(i,s);if(Array.isArray(v))a.push(...v);else{const E=Ia(i[nt]);hu(E[Re],E,v,a,!0)}}s=u?s.projectionNext:s.next}return a}function Ky(n,i){for(let s=Xn;s<n.length;s++){const a=n[s],u=a[Re].firstChild;null!==u&&hu(a[Re],a,u,i)}n[ms]!==n[pt]&&i.push(n[ms])}let qy=[];const AC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Pl(n.lView)},consumerOnSignalRead(){this.lView[ks]=this}},Xy=100;function ih(n,i=!0,s=0){const a=n[Or],u=a.rendererFactory;u.begin?.();try{!function aa(n,i){fu(n,i);let s=0;for(;xl(n);){if(s===Xy)throw new je(103,!1);s++,fu(n,1)}}(n,s)}catch(g){throw i&&nh(n,g),g}finally{u.end?.(),a.inlineEffectRunner?.flush()}}function tp(n,i,s,a){const u=i[et];if(!(256&~u))return;i[Or].inlineEffectRunner?.flush(),Ol(i);let g=null,v=null;(function np(n){return 2!==n.type})(n)&&(v=function Rw(n){return n[ks]??function Ow(n){const i=qy.pop()??Object.create(AC);return i.lView=n,i}(n)}(i),g=function Xt(n){return n&&(n.nextProducerIndex=0),ye(n)}(v));try{ad(i),function $g(n){return Tt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&nc(n,i,s,2,a);const E=!(3&~u);if(E){const B=n.preOrderCheckHooks;null!==B&&Us(i,B,null)}else{const B=n.preOrderHooks;null!==B&&md(i,B,0,null),nf(i,0)}if(function Vr(n){for(let i=Dm(n);null!==i;i=mf(i)){if(!(i[et]&Al.HasTransplantedViews))continue;const s=i[Xo];for(let a=0;a<s.length;a++){Qh(s[a])}}}(i),rh(i,0),null!==n.contentQueries&&Uy(n,i),E){const B=n.contentCheckHooks;null!==B&&Us(i,B)}else{const B=n.contentHooks;null!==B&&md(i,B,1),nf(i,1)}!function dw(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)Jo(~u);else{const h=u,g=s[++a],v=s[++a];Wg(g,h),v(2,i[h])}}}finally{Jo(-1)}}(n,i);const I=n.components;null!==I&&Zy(i,I,0);const O=n.viewQuery;if(null!==O&&Hy(2,O,a),E){const B=n.viewCheckHooks;null!==B&&Us(i,B)}else{const B=n.viewHooks;null!==B&&md(i,B,2),nf(i,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[ho]){for(const B of i[ho])B();i[ho]=null}i[et]&=-73}catch(E){throw Pl(i),E}finally{null!==v&&(function tn(n,i){if(ye(i),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(wt(n))for(let s=n.nextProducerIndex;s<n.producerNode.length;s++)lt(n.producerNode[s],n.producerIndexOfThis[s]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(v,g),function Nw(n){n.lView[ks]!==n&&(n.lView=null,qy.push(n))}(v)),tf()}}function rh(n,i){for(let s=Dm(n);null!==s;s=mf(s))for(let a=Xn;a<s.length;a++)Yy(s[a],i)}function Qy(n,i,s){Yy(Nr(i,n),s)}function Yy(n,i){Xh(n)&&fu(n,i)}function fu(n,i){const a=n[Re],u=n[et],h=n[ks];let g=!!(0===i&&16&u);if(g||=!!(64&u&&0===i),g||=!!(1024&u),g||=!(!h?.dirty||!ln(h)),h&&(h.dirty=!1),n[et]&=-9217,g)tp(a,n,a.template,n[On]);else if(8192&u){rh(n,1);const v=a.components;null!==v&&Zy(n,v,1)}}function Zy(n,i,s){for(let a=0;a<i.length;a++)Qy(n,i[a],s)}function ws(n){for(n[Or].changeDetectionScheduler?.notify();n;){n[et]|=64;const i=Ia(n);if(Dl(n)&&!i)return n;n=i}return null}class rc{get rootNodes(){const i=this._lView,s=i[Re];return hu(s,i,s.firstChild,[])}constructor(i,s,a=!0){this._lView=i,this._cdRefInjectingView=s,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(i){this._lView[On]=i}get destroyed(){return!(256&~this._lView[et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[dn];if(Di(i)){const s=i[8],a=s?s.indexOf(this):-1;a>-1&&(Zl(i,a),Gr(s,a))}this._attachedToViewContainer=!1}Xd(this._lView[Re],this._lView)}onDestroy(i){Wc(this._lView,i)}markForCheck(){ws(this._cdRefInjectingView||this._lView)}detach(){this._lView[et]&=-129}reattach(){cd(this._lView),this._lView[et]|=128}detectChanges(){this._lView[et]|=1024,ih(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,dy(this._lView[Re],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=i,cd(this._lView)}}let pu=(()=>{class n{static{this.__NG_ELEMENT_ID__=Jy}}return n})();const DC=pu,Lw=class extends DC{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,s){return this.createEmbeddedViewImpl(i,s)}createEmbeddedViewImpl(i,s,a){const u=function uu(n,i,s,a){const u=ye(null);try{const h=i.tView,E=Jd(n,h,s,4096&n[et]?4096:16,null,i,null,null,a?.injector??null,a?.embeddedViewInjector??null,a?.dehydratedView??null);E[Ma]=n[i.index];const O=n[di];return null!==O&&(E[di]=O.createEmbeddedView(h)),Jf(h,E,s),E}finally{ye(u)}}(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:s,dehydratedView:a});return new rc(u)}};function Jy(){return gu(In(),_e())}function gu(n,i){return 4&n.type?new Lw(i,n,ka(n,i)):null}class Eu{}class cv{}class uv{}class Gw{resolveComponentFactory(i){throw function lp(n){const i=Error(`No component factory found for ${Fn(n)}.`);return i.ngComponent=n,i}(i)}}let Cu=(()=>{class n{static{this.NULL=new Gw}}return n})();class dv{}let Kw=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function qw(){const n=_e(),s=Nr(In().index,n);return(hi(s)?s:n)[st]}()}}return n})(),Ka=(()=>{class n{static{this.\u0275prov=un({token:n,providedIn:"root",factory:()=>null})}}return n})();const Au={},Du=new Set;function qs(n){Du.has(n)||(Du.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function fv(...n){}class Ci{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Er(!1),this.onMicrotaskEmpty=new Er(!1),this.onStable=new Er(!1),this.onError=new Er(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function Xw(){const n="function"==typeof bt.requestAnimationFrame;let i=bt[n?"requestAnimationFrame":"setTimeout"],s=bt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function hp(n){const i=()=>{!function hh(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(bt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,oc(n),n.isCheckStableRunning=!0,dp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),oc(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,h,g,v)=>{if(function mv(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(v))return s.invokeTask(u,h,g,v);try{return pv(n),s.invokeTask(u,h,g,v)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&i(),fp(n)}},onInvoke:(s,a,u,h,g,v,E)=>{try{return pv(n),s.invoke(u,h,g,v,E)}finally{n.shouldCoalesceRunChangeDetection&&i(),fp(n)}},onHasTask:(s,a,u,h)=>{s.hasTask(u,h),a===u&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,oc(n),dp(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,u,h)=>(s.handleError(u,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ci.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(Ci.isInAngularZone())throw new je(909,!1)}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,u){const h=this._inner,g=h.scheduleEventTask("NgZoneEvent: "+u,i,up,fv,fv);try{return h.runTask(g,s,a)}finally{h.cancelTask(g)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const up={};function dp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oc(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function pv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fp(n){n._nesting--,dp(n)}class gv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Er,this.onMicrotaskEmpty=new Er,this.onStable=new Er,this.onError=new Er}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,u){return i.apply(s,a)}}var ca=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ca||{});const Qw={destroy(){}};function vv(n,i){!i&&function Yr(n){if(!Os())throw new je(-203,!1)}();const s=i?.injector??_t(wr);if(!function _s(n){return"browser"===(n??_t(wr)).get(Ws)}(s))return Qw;qs("NgAfterNextRender");const a=s.get(Su),u=a.handler??=new _v,h=i?.phase??ca.MixedReadWrite,g=()=>{u.unregister(E),v()},v=s.get(Vl).onDestroy(g),E=xi(s,()=>new bv(h,()=>{g(),n()}));return u.register(E),{destroy:g}}class bv{constructor(i,s){this.phase=i,this.callbackFn=s,this.zone=_t(Ci),this.errorHandler=_t($s,{optional:!0}),_t(Eu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(i){this.errorHandler?.handleError(i)}}}class _v{constructor(){this.executingCallbacks=!1,this.buckets={[ca.EarlyRead]:new Set,[ca.Write]:new Set,[ca.MixedReadWrite]:new Set,[ca.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const s of i)s.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let Su=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const a of s)a()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=un({token:n,providedIn:"root",factory:()=>new n})}}return n})();function ua(n){return!!_i(n)}function Dr(n,i,s){let a=s?n.styles:null,u=s?n.classes:null,h=0;if(null!==i)for(let g=0;g<i.length;g++){const v=i[g];"number"==typeof v?h=v:1==h?u=zi(u,v):2==h&&(a=zi(a,v+": "+i[++g]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=u:n.classesWithoutHost=u}class gh extends Cu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Xe(i);return new Tu(s,this.ngModule)}}function lc(n){const i=[];for(const s in n){if(!n.hasOwnProperty(s))continue;const a=n[s];void 0!==a&&i.push({propName:Array.isArray(a)?a[0]:a,templateName:s})}return i}class mh{constructor(i,s){this.injector=i,this.parentInjector=s}get(i,s,a){a=ro(a);const u=this.injector.get(i,Au,a);return u!==Au||s===Au?u:this.parentInjector.get(i,s,a)}}class Tu extends uv{get inputs(){const i=this.componentDef,s=i.inputTransforms,a=lc(i.inputs);if(null!==s)for(const u of a)s.hasOwnProperty(u.propName)&&(u.transform=s[u.propName]);return a}get outputs(){return lc(this.componentDef.outputs)}constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function Gh(n){return n.map(Wh).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}create(i,s,a,u){const h=ye(null);try{let g=(u=u||this.ngModule)instanceof mr?u:u?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new mh(i,g):i,E=v.get(dv,null);if(null===E)throw new je(407,!1);const I=v.get(Ka,null),Q={rendererFactory:E,sanitizer:I,inlineEffectRunner:null,afterRenderEventManager:v.get(Su,null),changeDetectionScheduler:v.get(Eu,null)},Y=E.createRenderer(null,this.componentDef),oe=this.componentDef.selectors[0][0]||"div",we=a?function fw(n,i,s,a){const h=a.get(k_,!1)||s===mt.ShadowDom,g=n.selectRootElement(i,h);return function pw(n){gw(n)}(g),g}(Y,a,this.componentDef.encapsulation,v):qd(Y,oe,function bp(n){const i=n.toLowerCase();return"svg"===i?Zo:"math"===i?"math":null}(oe));let ke=512;this.componentDef.signals?ke|=4096:this.componentDef.onPush||(ke|=16);let Ge=null;null!==we&&(Ge=Cf(we,v,!0));const Ie=Xf(0,null,null,1,0,null,null,null,null,null,null),Dt=Jd(null,Ie,null,ke,null,null,Q,Y,v,null,Ge);let _n,Kn;Ol(Dt);try{const Hi=this.componentDef;let os,Uh=null;Hi.findHostDirectiveDefs?(os=[],Uh=new Map,Hi.findHostDirectiveDefs(Hi,os,Uh),os.push(Hi)):os=[Hi];const tM=function Zw(n,i){const s=n[Re],a=St;return n[a]=i,tc(s,a,2,"#host",null)}(Dt,we),HP=function Jw(n,i,s,a,u,h,g){const v=u[Re];!function yh(n,i,s,a){for(const u of n)i.mergedAttrs=Aa(i.mergedAttrs,u.hostAttrs);null!==i.mergedAttrs&&(Dr(i,i.mergedAttrs,!0),null!==s&&My(a,s,i))}(a,n,i,g);let E=null;null!==i&&(E=Cf(i,u[Qn]));const I=h.rendererFactory.createRenderer(i,s);let O=16;s.signals?O=4096:s.onPush&&(O=64);const B=Jd(u,Ry(s),null,O,u[n.index],n,h,I,null,null,E);return v.firstCreatePass&&Qf(v,n,a.length-1),th(u,B),u[n.index]=B}(tM,we,Hi,os,Dt,Q,Y);Kn=Fs(Ie,St),we&&function Ev(n,i,s,a){if(a)xr(n,s,["ng-version","17.3.12"]);else{const{attrs:u,classes:h}=function Yu(n){const i=[],s=[];let a=1,u=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===u?""!==h&&i.push(h,n[++a]):8===u&&s.push(h);else{if(!ir(u))break;u=h}a++}return{attrs:i,classes:s}}(i.selectors[0]);u&&xr(n,s,u),h&&h.length>0&&Sy(n,s,h.join(" "))}}(Y,Hi,we,a),void 0!==s&&function Cv(n,i,s){const a=n.projection=[];for(let u=0;u<i.length;u++){const h=s[u];a.push(null!=h?Array.from(h):null)}}(Kn,this.ngContentSelectors,s),_n=function e0(n,i,s,a,u,h){const g=In(),v=u[Re],E=Si(g,u);Cw(v,u,g,s,null,a);for(let O=0;O<s.length;O++)Xi(Ll(u,v,g.directiveStart+O,g),u);Vy(v,u,g),E&&Xi(E,u);const I=Ll(u,v,g.directiveStart+g.componentOffset,g);if(n[On]=u[On]=I,null!==h)for(const O of h)O(I,i);return cu(v,g,u),I}(HP,Hi,os,Uh,Dt,[Av]),Jf(Ie,Dt,null)}finally{tf()}return new _p(this.componentType,_n,ka(Kn,Dt),Dt,Kn)}finally{ye(h)}}}class _p extends cv{constructor(i,s,a,u,h){super(),this.location=a,this._rootLView=u,this._tNode=h,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new rc(u,void 0,!1),this.componentType=i}setInput(i,s){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),s))return;const h=this._rootLView;Zf(h[Re],h,u,i,s),this.previousInputValues.set(i,s),ws(Nr(this._tNode.index,h))}}get injector(){return new Ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Av(){const n=In();gd(_e()[Re],n)}let or=(()=>{class n{static{this.__NG_ELEMENT_ID__=cc}}return n})();function cc(){return Cp(In(),_e())}const t0=or,Dv=class extends t0{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new Ti(this._hostTNode,this._hostLView)}get parentInjector(){const i=wd(this._hostTNode,this._hostLView);if(sf(i)){const s=Kc(i,this._hostLView),a=Oa(i);return new Ti(s[Re].data[a+8],s)}return new Ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=wp(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-Xn}createEmbeddedView(i,s,a){let u,h;"number"==typeof a?u=a:null!=a&&(u=a.index,h=a.injector);const v=i.createEmbeddedViewImpl(s||{},h,null);return this.insertImpl(v,u,ic(this._hostTNode,null)),v}createComponent(i,s,a,u,h){const g=i&&!function De(n){return"function"==typeof n}(i);let v;if(g)v=s;else{const oe=s||{};v=oe.index,a=oe.injector,u=oe.projectableNodes,h=oe.environmentInjector||oe.ngModuleRef}const E=g?i:new Tu(Xe(i)),I=a||this.parentInjector;if(!h&&null==E.ngModule){const we=(g?I:this.parentInjector).get(mr,null);we&&(h=we)}Xe(E.componentType??{});const Y=E.create(I,u,null,h);return this.insertImpl(Y.hostView,v,ic(this._hostTNode,null)),Y}insert(i,s){return this.insertImpl(i,s,!0)}insertImpl(i,s,a){const u=i._lView;if(function jb(n){return Di(n[dn])}(u)){const v=this.indexOf(i);if(-1!==v)this.detach(v);else{const E=u[dn],I=new Dv(E,E[Vn],E[dn]);I.detach(I.indexOf(i))}}const h=this._adjustIndex(s),g=this._lContainer;return du(g,u,h,a),i.attachToViewContainerRef(),hl(Ep(g),h,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=wp(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=Zl(this._lContainer,s);a&&(Gr(Ep(this._lContainer),s),Xd(a[Re],a))}detach(i){const s=this._adjustIndex(i,-1),a=Zl(this._lContainer,s);return a&&null!=Gr(Ep(this._lContainer),s)?new rc(a):null}_adjustIndex(i,s=0){return i??this.length+s}};function wp(n){return n[8]}function Ep(n){return n[8]||(n[8]=[])}function Cp(n,i){let s;const a=i[n.index];return Di(a)?s=a:(s=By(a,i,null,n),i[n.index]=s,th(i,s)),Sv(s,i,n,a),new Dv(s,n,i)}let Sv=function Mv(n,i,s,a){if(n[ms])return;let u;u=8&s.type?En(a):function Iu(n,i){const s=n[st],a=s.createComment(""),u=Si(i,n);return Ha(s,$a(s,u),a,function yy(n,i){return n.nextSibling(i)}(s,u),!1),a}(i,s),n[ms]=u},qa=()=>!1;class xv{constructor(i){this.queryList=i,this.matches=null}clone(){return new xv(this.queryList)}setDirty(){this.queryList.setDirty()}}class uc{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const a=null!==i.contentQueries?i.contentQueries[0]:s.length,u=[];for(let h=0;h<a;h++){const g=s.getByIndex(h);u.push(this.queries[g.indexInDeclarationView].clone())}return new uc(u)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Tp(i,s).matches&&this.queries[s].setDirty()}}class Ap{constructor(i,s,a=null){this.flags=s,this.read=a,this.predicate="string"==typeof i?function NC(n){return n.split(",").map(i=>i.trim())}(i):i}}class bh{constructor(i=[]){this.queries=i}elementStart(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(i,u);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new bh(s):null}template(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Dp{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Dp(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const s=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const h=a[u];this.matchTNodeWithReadOption(i,s,n0(s,h)),this.matchTNodeWithReadOption(i,s,Mi(s,i,h,!1,!1))}else a===pu?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,Mi(s,i,a,!1,!1))}matchTNodeWithReadOption(i,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===jl||u===or||u===pu&&4&s.type)this.addMatch(s.index,-2);else{const h=Mi(s,i,u,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function n0(n,i){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===i)return s[a+1];return null}function s0(n,i,s,a){return-1===s?function r0(n,i){return 11&n.type?ka(n,i):4&n.type?gu(n,i):null}(i,n):-2===s?function o0(n,i,s){return s===jl?ka(i,n):s===pu?gu(i,n):s===or?Cp(i,n):void 0}(n,i,a):Ll(n,n[Re],s,i)}function Pv(n,i,s,a){const u=i[di].queries[a];if(null===u.matches){const h=n.data,g=s.matches,v=[];for(let E=0;null!==g&&E<g.length;E+=2){const I=g[E];v.push(I<0?null:s0(i,h[I],g[E+1],s.metadata.read))}u.matches=v}return u.matches}function Sp(n,i,s,a){const u=n.queries.getByIndex(s),h=u.matches;if(null!==h){const g=Pv(n,i,u,s);for(let v=0;v<h.length;v+=2){const E=h[v];if(E>0)a.push(g[v/2]);else{const I=h[v+1],O=i[-E];for(let B=Xn;B<O.length;B++){const Q=O[B];Q[Ma]===Q[dn]&&Sp(Q[Re],Q,I,a)}if(null!==O[Xo]){const B=O[Xo];for(let Q=0;Q<B.length;Q++){const Y=B[Q];Sp(Y[Re],Y,I,a)}}}}}return a}function wh(n,i,s){const a=new ff(!(4&~s));return function yw(n,i,s,a){const u=$y(i);u.push(s),n.firstCreatePass&&zy(n).push(a,u.length-1)}(n,i,a,a.destroy),(i[di]??=new uc).queries.push(new xv(a))-1}function a0(n,i,s){null===n.queries&&(n.queries=new bh),n.queries.track(new Dp(i,s))}function Tp(n,i){return n.queries.getByIndex(i)}function Ip(n,i){const s=n[Re],a=Tp(s,i);return a.crossesNgTemplate?Sp(s,n,i,[]):Pv(s,n,a,i)}function xu(n){let i=function $v(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;i;){let u;if(_r(n))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new je(903,!1);u=i.\u0275dir}if(u){if(s){a.push(u);const g=n;g.inputs=Lp(n.inputs),g.inputTransforms=Lp(n.inputTransforms),g.declaredInputs=Lp(n.declaredInputs),g.outputs=Lp(n.outputs);const v=u.hostBindings;v&&zC(n,v);const E=u.viewQuery,I=u.contentQueries;if(E&&HC(n,E),I&&$C(n,I),C0(n,u),Ss(n.outputs,u.outputs),_r(u)&&u.data.animation){const O=n.data;O.animation=(O.animation||[]).concat(u.data.animation)}}const h=u.features;if(h)for(let g=0;g<h.length;g++){const v=h[g];v&&v.ngInherit&&v(n),v===xu&&(s=!1)}}i=Object.getPrototypeOf(i)}!function UC(n){let i=0,s=null;for(let a=n.length-1;a>=0;a--){const u=n[a];u.hostVars=i+=u.hostVars,u.hostAttrs=Aa(u.hostAttrs,s=Aa(s,u.hostAttrs))}}(a)}function C0(n,i){for(const s in i.inputs){if(!i.inputs.hasOwnProperty(s)||n.inputs.hasOwnProperty(s))continue;const a=i.inputs[s];if(void 0!==a&&(n.inputs[s]=a,n.declaredInputs[s]=i.declaredInputs[s],null!==i.inputTransforms)){const u=Array.isArray(a)?a[0]:a;if(!i.inputTransforms.hasOwnProperty(u))continue;n.inputTransforms??={},n.inputTransforms[u]=i.inputTransforms[u]}}}function Lp(n){return n===Ir?{}:n===rn?[]:n}function HC(n,i){const s=n.viewQuery;n.viewQuery=s?(a,u)=>{i(a,u),s(a,u)}:i}function $C(n,i){const s=n.contentQueries;n.contentQueries=s?(a,u,h)=>{i(a,u,h),s(a,u,h)}:i}function zC(n,i){const s=n.hostBindings;n.hostBindings=s?(a,u)=>{i(a,u),s(a,u)}:i}function Xa(n){const i=n.inputConfig,s={};for(const a in i)if(i.hasOwnProperty(a)){const u=i[a];Array.isArray(u)&&u[3]&&(s[a]=u[3])}n.inputTransforms=s}class As{}class Mh{}function M0(n,i){return new Fp(n,i??null,[])}class Fp extends As{constructor(i,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gh(this);const u=_i(i);this._bootstrapComponents=Fr(u.bootstrap),this._r3Injector=fm(i,s,[{provide:As,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver},...a],Fn(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class hc extends Mh{constructor(i){super(),this.moduleType=i}create(i){return new Fp(this.moduleType,i,[])}}class Vp extends As{constructor(i){super(),this.componentFactoryResolver=new gh(this),this.instance=null;const s=new Wo([...i.providers,{provide:As,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver}],i.parent||Sa(),i.debugName,new Set(["environment"]));this.injector=s,i.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Ru(n,i,s=null){return new Vp({providers:n,parent:i,debugName:s,runEnvironmentInitializers:!0}).injector}let Ds=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Un.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qa(n){return!!fc(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function fc(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fi(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function Ya(n,i,s,a){const u=fi(n,i,s);return fi(n,i+1,a)||u}function ku(n,i,s,a,u,h,g,v){const E=_e(),I=en(),O=n+St,B=I.firstCreatePass?function x0(n,i,s,a,u,h,g,v,E){const I=i.consts,O=tc(i,n,4,g||null,Vs(I,v));Ly(i,s,O,Vs(I,E)),gd(i,O);const B=O.tView=Xf(2,O,a,u,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,I,null);return null!==i.queries&&(i.queries.template(i,O),B.queries=i.queries.embeddedTView(O)),O}(O,I,E,i,s,a,u,h,g):I.data[O];js(B,!1);const Q=Kv(I,E,B,n);Gc()&&Qd(I,E,Q,B),Xi(Q,E);const Y=By(Q,E,Q,B);return E[O]=Y,th(E,Y),function vh(n,i,s){return qa(n,i,s)}(Y,B,E),br(B)&&eh(I,E,B),null!=g&&qf(E,B,v),ku}let Kv=function Ih(n,i,s,a){return Dn(!0),i[st].createComment("")};function hb(n,i,s,a){const u=_e();return fi(u,vs(),i)&&(en(),Ks(Wn(),u,n,i,s,a)),hb}function zu(n,i,s,a,u,h,g,v,E,I){const B=function ns(n,i,s,a,u,h){const g=Ya(n,i,s,a);return Ya(n,i+2,u,h)||g}(n,fo(),s,u,g,E);return po(4),B?i+ft(s)+a+ft(u)+h+ft(g)+v+ft(E)+I:Ft}function _(n,i){return n<<17|i<<2}function A(n){return n>>17&32767}function L(n){return 2|n}function j(n){return(131068&n)>>2}function K(n,i){return-131069&n|i<<2}function Z(n){return 1|n}function Ce(n,i,s,a){const u=n[s+1],h=null===i;let g=a?A(u):j(u),v=!1;for(;0!==g&&(!1===v||h);){const I=n[g+1];Ae(n[g],i)&&(v=!0,n[g+1]=a?Z(I):L(I)),g=a?A(I):j(I)}v&&(n[s+1]=a?L(u):Z(u))}function Ae(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&nr(n,i)>=0}function bn(n,i,s){const a=_e();return fi(a,vs(),i)&&function Cr(n,i,s,a,u,h,g,v){const E=Si(i,s);let O,I=i.inputs;!v&&null!=I&&(O=I[a])?(Zf(n,s,O,a,u),Ls(i)&&function ww(n,i){const s=Nr(i,n);16&s[et]||(s[et]|=64)}(s,i.index)):3&i.type&&(a=function _w(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),u=null!=g?g(u,i.value||"",a):u,h.setProperty(E,a,u))}(en(),Wn(),a,n,i,a[st],s,!1),bn}function Xs(n,i,s,a,u){const g=u?"class":"style";Zf(n,s,i.inputs[g],g,a)}function Bt(n,i){return function Ao(n,i,s,a){const u=_e(),h=en(),g=po(2);h.firstUpdatePass&&function nA(n,i,s,a){const u=n.data;if(null===u[s+1]){const h=u[wi()],g=function tA(n,i){return i>=n.expandoStartIndex}(n,s);(function oA(n,i){return!!(n.flags&(i?8:16))})(h,a)&&null===i&&!g&&(i=!1),i=function dM(n,i,s,a){const u=function Zh(n){const i=Tt.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let h=a?i.residualClasses:i.residualStyles;if(null===u)0===(a?i.classBindings:i.styleBindings)&&(s=dg(s=K0(null,n,i,s,a),i.attrs,a),h=null);else{const g=i.directiveStylingLast;if(-1===g||n[g]!==u)if(s=K0(u,n,i,s,a),null===h){let E=function hM(n,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==j(a))return n[A(a)]}(n,i,a);void 0!==E&&Array.isArray(E)&&(E=K0(null,n,i,E[1],a),E=dg(E,i.attrs,a),function fM(n,i,s,a){n[A(s?i.classBindings:i.styleBindings)]=a}(n,i,a,E))}else h=function pM(n,i,s){let a;const u=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<u;h++)a=dg(a,n[h].hostAttrs,s);return dg(a,i.attrs,s)}(n,i,a)}return void 0!==h&&(a?i.residualClasses=h:i.residualStyles=h),s}(u,h,i,a),function ue(n,i,s,a,u,h){let g=h?i.classBindings:i.styleBindings,v=A(g),E=j(g);n[a]=s;let O,I=!1;if(Array.isArray(s)?(O=s[1],(null===O||nr(s,O)>0)&&(I=!0)):O=s,u)if(0!==E){const Q=A(n[v+1]);n[a+1]=_(Q,v),0!==Q&&(n[Q+1]=K(n[Q+1],a)),n[v+1]=function R(n,i){return 131071&n|i<<17}(n[v+1],a)}else n[a+1]=_(v,0),0!==v&&(n[v+1]=K(n[v+1],a)),v=a;else n[a+1]=_(E,0),0===v?v=a:n[E+1]=K(n[E+1],a),E=a;I&&(n[a+1]=L(n[a+1])),Ce(n,O,a,!0),Ce(n,O,a,!1),function pe(n,i,s,a,u){const h=u?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof i&&nr(h,i)>=0&&(s[a+1]=Z(s[a+1]))}(i,O,n,a,h),g=_(v,E),h?i.classBindings=g:i.styleBindings=g}(u,h,i,s,g,a)}}(h,n,g,a),i!==Ft&&fi(u,g,i)&&function rA(n,i,s,a,u,h,g,v){if(!(3&i.type))return;const E=n.data,I=E[v+1],O=function $(n){return!(1&~n)}(I)?sA(E,i,s,u,j(I),g):void 0;fb(O)||(fb(h)||function T(n){return!(2&~n)}(I)&&(h=sA(E,null,s,u,v,g)),function Ay(n,i,s,a,u){if(i)u?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:Gd.DashCase;null==u?n.removeStyle(s,a,h):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),h|=Gd.Important),n.setStyle(s,a,u,h))}}(a,g,Fi(wi(),s),u,h))}(h,h.data[wi()],u,u[st],n,u[g+1]=function vM(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Fn(mo(n)))),n}(i,s),a,g)}(n,i,null,!0),Bt}function K0(n,i,s,a,u){let h=null;const g=s.directiveEnd;let v=s.directiveStylingLast;for(-1===v?v=s.directiveStart:v++;v<g&&(h=i[v],a=dg(a,h.hostAttrs,u),h!==n);)v++;return null!==n&&(s.directiveStylingLast=v),a}function dg(n,i,s){const a=s?1:2;let u=-1;if(null!==i)for(let h=0;h<i.length;h++){const g=i[h];"number"==typeof g?u=g:u===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),vi(n,g,!!s||i[++h]))}return void 0===n?null:n}function sA(n,i,s,a,u,h){const g=null===i;let v;for(;u>0;){const E=n[u],I=Array.isArray(E),O=I?E[1]:E,B=null===O;let Q=s[u+1];Q===Ft&&(Q=B?rn:void 0);let Y=B?Fo(Q,a):O===a?Q:void 0;if(I&&!fb(Y)&&(Y=Fo(E,a)),fb(Y)&&(v=Y,g))return v;const oe=n[u+1];u=g?A(oe):j(oe)}if(null!==i){let E=h?i.residualClasses:i.residualStyles;null!=E&&(v=Fo(E,a))}return v}function fb(n){return void 0!==n}function pb(n,i,s,a){const u=_e(),h=en(),g=St+n,v=u[st],E=h.firstCreatePass?function UM(n,i,s,a,u,h){const g=i.consts,E=tc(i,n,2,a,Vs(g,u));return Ly(i,s,E,Vs(g,h)),null!==E.attrs&&Dr(E,E.attrs,!1),null!==E.mergedAttrs&&Dr(E,E.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,E),E}(g,h,u,i,s,a):h.data[g],I=uA(h,u,E,v,i,n);u[g]=I;const O=br(E);return js(E,!0),My(v,I,E),!function pc(n){return!(32&~n.flags)}(E)&&Gc()&&Qd(h,u,I,E),0===function Bb(){return Tt.lFrame.elementDepthCount}()&&Xi(I,u),function Ub(){Tt.lFrame.elementDepthCount++}(),O&&(eh(h,u,E),cu(h,E,u)),null!==a&&qf(u,E),pb}function gb(){let n=In();Vi()?xa():(n=n.parent,js(n,!1));const i=n;(function $b(n){return Tt.skipHydrationRootTNode===n})(i)&&function Vg(){Tt.skipHydrationRootTNode=null}(),function Hb(){Tt.lFrame.elementDepthCount--}();const s=en();return s.firstCreatePass&&(gd(s,n),Ta(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Zb(n){return!!(8&n.flags)}(i)&&Xs(s,i,_e(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Jb(n){return!!(16&n.flags)}(i)&&Xs(s,i,_e(),i.stylesWithoutHost,!1),gb}function Z0(n,i,s,a){return pb(n,i,s,a),gb(),Z0}let uA=(n,i,s,a,u,h)=>(Dn(!0),qd(a,u,function ea(){return Tt.lFrame.currentNamespace}()));function mb(n,i,s){const a=_e(),u=en(),h=n+St,g=u.firstCreatePass?function zM(n,i,s,a,u){const h=i.consts,g=Vs(h,a),v=tc(i,n,8,"ng-container",g);return null!==g&&Dr(v,g,!0),Ly(i,s,v,Vs(h,u)),null!==i.queries&&i.queries.elementStart(i,v),v}(h,u,a,i,s):u.data[h];js(g,!0);const v=hA(u,a,g,n);return a[h]=v,Gc()&&Qd(u,a,v,g),Xi(v,a),br(g)&&(eh(u,a,g),cu(u,g,a)),null!=s&&qf(a,g),mb}function yb(){let n=In();const i=en();return Vi()?xa():(n=n.parent,js(n,!1)),i.firstCreatePass&&(gd(i,n),Ta(n)&&i.queries.elementEnd(n)),yb}let hA=(n,i,s,a)=>(Dn(!0),es(i[st],""));function fA(){return _e()}const Wu=void 0;var qM=["en",[["a","p"],["AM","PM"],Wu],[["AM","PM"],Wu,Wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wu,"{1} 'at' {0}",Wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function KM(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let kh={};function J0(n){const i=function XM(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=yA(i);if(s)return s;const a=i.split("-")[0];if(s=yA(a),s)return s;if("en"===a)return qM;throw new je(701,!1)}function mA(n){return J0(n)[Lh.PluralCase]}function yA(n){return n in kh||(kh[n]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[n]),kh[n]}var Lh=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Lh||{});const Fh="en-US";let vA=Fh;function nE(n,i,s,a){const u=_e(),h=en(),g=In();return function iE(n,i,s,a,u,h,g){const v=br(a),I=n.firstCreatePass&&zy(n),O=i[On],B=$y(i);let Q=!0;if(3&a.type||g){const we=Si(a,i),ke=g?g(we):we,Ge=B.length,Ie=g?_n=>g(En(_n[a.index])):a.index;let Dt=null;if(!g&&v&&(Dt=function WT(n,i,s,a){const u=n.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const g=u[h];if(g===s&&u[h+1]===a){const v=i[Rr],E=u[h+2];return v.length>E?v[E]:null}"string"==typeof g&&(h+=2)}return null}(n,i,u,a.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=h,Dt.__ngLastListenerFn__=h,Q=!1;else{h=GA(a,i,O,h,!1);const _n=s.listen(ke,u,h);B.push(h,_n),I&&I.push(u,Ie,Ge,Ge+1)}}else h=GA(a,i,O,h,!1);const Y=a.outputs;let oe;if(Q&&null!==Y&&(oe=Y[u])){const we=oe.length;if(we)for(let ke=0;ke<we;ke+=2){const Kn=i[oe[ke]][oe[ke+1]].subscribe(h),Hi=B.length;B.push(h,Kn),I&&I.push(u,a.index,Hi,-(Hi+1))}}}(h,u,u[st],g,n,i,a),nE}function WA(n,i,s,a){const u=ye(null);try{return qi(6,i,s),!1!==s(a)}catch(h){return nh(n,h),!1}finally{qi(7,i,s),ye(u)}}function GA(n,i,s,a,u){return function h(g){if(g===Function)return a;ws(n.componentOffset>-1?Nr(n.index,i):i);let E=WA(i,s,a,g),I=h.__ngNextListenerFn__;for(;I;)E=WA(i,s,I,g)&&E,I=I.__ngNextListenerFn__;return u&&!1===E&&g.preventDefault(),E}}function KA(n=1){return function Xg(n){return(Tt.lFrame.contextLView=function ld(n,i){for(;n>0;)i=i[Zr],n--;return i}(n,Tt.lFrame.contextLView))[On]}(n)}function iD(n,i,s,a){!function Rv(n,i,s,a){const u=en();if(u.firstCreatePass){const h=In();a0(u,new Ap(i,s,a),h.index),function kC(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(u,n),!(2&~s)&&(u.staticContentQueries=!0)}return wh(u,_e(),s)}(n,i,s,a)}function rD(n,i,s){!function Mp(n,i,s){const a=en();return a.firstCreatePass&&(a0(a,new Ap(n,i,s),-1),!(2&~i)&&(a.staticViewQueries=!0)),wh(a,_e(),i)}(n,i,s)}function sD(n){const i=_e(),s=en(),a=Jh();fd(a+1);const u=Tp(s,a);if(n.dirty&&function Vb(n){return!(4&~n[et])}(i)===!(2&~u.metadata.flags)){if(null===u.matches)n.reset([]);else{const h=Ip(i,a);n.reset(h,Bl),n.notifyOnChanges()}return!0}return!1}function oD(){return function _h(n,i){return n[di].queries[i].queryList}(_e(),Jh())}function aD(n){return Il(function Gb(){return Tt.lFrame.contextLView}(),St+n)}function yD(n,i=""){const s=_e(),a=en(),u=n+St,h=a.firstCreatePass?tc(a,u,1,i,null):a.data[u],g=vD(a,s,h,i,n);s[u]=g,Gc()&&Qd(a,s,g,h),js(h,!1)}let vD=(n,i,s,a,u)=>(Dn(!0),function Se(n,i){return n.createText(i)}(i[st],a));function sE(n){return Eb("",n,""),sE}function Eb(n,i,s){const a=_e(),u=function Hu(n,i,s,a){return fi(n,vs(),s)?i+ft(s)+a:Ft}(a,n,i,s);return u!==Ft&&bo(a,wi(),u),Eb}function oE(n,i,s,a,u){const h=_e(),g=function $u(n,i,s,a,u,h){const v=Ya(n,fo(),s,u);return po(2),v?i+ft(s)+a+ft(u)+h:Ft}(h,n,i,s,a,u);return g!==Ft&&bo(h,wi(),g),oE}function aE(n,i,s,a,u,h,g,v,E){const I=_e(),O=zu(I,n,i,s,a,u,h,g,v,E);return O!==Ft&&bo(I,wi(),O),aE}function lE(n,i,s,a,u){if(n=J(n),Array.isArray(n))for(let h=0;h<n.length;h++)lE(n[h],i,s,a,u);else{const h=en(),g=_e(),v=In();let E=qn(n)?n:J(n.provide);const I=Uc(n),O=1048575&v.providerIndexes,B=v.directiveStart,Q=v.providerIndexes>>20;if(qn(n)||!n.multi){const Y=new Ra(I,u,ec),oe=uE(E,i,u?O:O+Q,B);-1===oe?(qc(Hs(v,g),h,E),cE(h,n,i.length),i.push(E),v.directiveStart++,v.directiveEnd++,u&&(v.providerIndexes+=1048576),s.push(Y),g.push(Y)):(s[oe]=Y,g[oe]=Y)}else{const Y=uE(E,i,O+Q,B),oe=uE(E,i,O,O+Q),ke=oe>=0&&s[oe];if(u&&!ke||!u&&!(Y>=0&&s[Y])){qc(Hs(v,g),h,E);const Ge=function pI(n,i,s,a,u){const h=new Ra(n,s,ec);return h.multi=[],h.index=i,h.componentProviders=0,MD(h,u,a&&!s),h}(u?fI:hI,s.length,u,a,I);!u&&ke&&(s[oe].providerFactory=Ge),cE(h,n,i.length,0),i.push(E),v.directiveStart++,v.directiveEnd++,u&&(v.providerIndexes+=1048576),s.push(Ge),g.push(Ge)}else cE(h,n,Y>-1?Y:oe,MD(s[u?oe:Y],I,!u&&a));!u&&a&&ke&&s[oe].componentProviders++}}}function cE(n,i,s,a){const u=qn(i),h=function ps(n){return!!n.useClass}(i);if(u||h){const E=(h?J(i.useClass):i).prototype.ngOnDestroy;if(E){const I=n.destroyHooks||(n.destroyHooks=[]);if(!u&&i.multi){const O=I.indexOf(s);-1===O?I.push(s,[a,E]):I[O+1].push(a,E)}else I.push(s,E)}}}function MD(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function uE(n,i,s,a){for(let u=s;u<a;u++)if(i[u]===n)return u;return-1}function hI(n,i,s,a){return dE(this.multi,[])}function fI(n,i,s,a){const u=this.multi;let h;if(this.providerFactory){const g=this.providerFactory.componentProviders,v=Ll(s,s[Re],this.providerFactory.index,a);h=v.slice(0,g),dE(u,h);for(let E=g;E<v.length;E++)h.push(v[E])}else h=[],dE(u,h);return h}function dE(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function TD(n,i=[]){return s=>{s.providersResolver=(a,u)=>function dI(n,i,s){const a=en();if(a.firstCreatePass){const u=_r(n);lE(s,a.data,a.blueprint,u,!0),lE(i,a.data,a.blueprint,u,!1)}}(a,u?u(n):n,i)}}let gI=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Ho(0,s.type),u=a.length>0?Ru([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,u)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=un({token:n,providedIn:"environment",factory:()=>new n(An(mr))})}}return n})();function ID(n){qs("NgStandalone"),n.getStandaloneInjector=i=>i.get(gI).getOrCreateStandaloneInjector(n)}function PD(n,i,s,a){return RD(_e(),sr(),n,i,s,a)}function RD(n,i,s,a,u,h){const g=i+s;return fi(n,g,u)?function ts(n,i,s){return n[i]=s}(n,g+1,h?a.call(h,u):a(u)):function vg(n,i){const s=n[i];return s===Ft?void 0:s}(n,g+1)}function FD(n,i){const s=en();let a;const u=n+St;s.firstCreatePass?(a=function MI(n,i){if(i)for(let s=i.length-1;s>=0;s--){const a=i[s];if(n===a.name)return a}}(i,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks??=[]).push(u,a.onDestroy)):a=s.data[u];const h=a.factory||(a.factory=zr(a.type)),v=Li(ec);try{const E=vd(!1),I=h();return vd(E),function ZT(n,i,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),i[s]=a}(s,_e(),u,I),I}finally{Li(v)}}function VD(n,i,s){const a=n+St,u=_e(),h=Il(u,a);return function bg(n,i){return n[Re].data[i].pure}(u,a)?RD(u,sr(),i,h.transform,s,h):h.transform(s)}function jD(n,i){return gu(n,i)}class tS{constructor(i){this.full=i;const s=i.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}let nS=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const aS=new kt(""),lS=new kt("");let yE,Ax=(()=>{class n{constructor(s,a,u){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,yE||(function Dx(n){yE=n}(u),u.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ci.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==h),s()},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,u){return[]}static{this.\u0275fac=function(a){return new(a||n)(An(Ci),An(cS),An(lS))}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac})}}return n})(),cS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return yE?.findTestabilityInTree(this,s,a)??null}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function vE(n){return!!n&&"function"==typeof n.then}function uS(n){return!!n&&"function"==typeof n.subscribe}const dS=new kt("");let bE=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=_t(dS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const u of this.appInits){const h=u();if(vE(h))s.push(h);else if(uS(h)){const g=new Promise((v,E)=>{h.subscribe({complete:v,error:E})});s.push(g)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const _E=new kt("");function pS(n,i){return Array.isArray(i)?i.reduce(pS,n):{...n,...i}}let Ec=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_t(gm),this.afterRenderEffectManager=_t(Su),this.externalTestViews=new Set,this.beforeRender=new yt.B,this.afterTick=new yt.B,this.componentTypes=[],this.components=[],this.isStable=_t(Ds).hasPendingTasks.pipe((0,$t.T)(s=>!s)),this._injector=_t(mr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const u=s instanceof uv;if(!this._injector.get(bE).done)throw!u&&Wi(s),new je(405,!1);let g;g=u?s:this._injector.get(Cu).resolveComponentFactory(s),this.componentTypes.push(g.componentType);const v=function Sx(n){return n.isBoundToModule}(g)?void 0:this._injector.get(As),I=g.create(wr.NULL,[],a||g.selector,v),O=I.location.nativeElement,B=I.injector.get(aS,null);return B?.registerApplication(O),I.onDestroy(()=>{this.detachView(I.hostView),Sb(this.components,I),B?.unregisterApplication(O)}),this._loadComponent(I),I}tick(){this._tick(!0)}_tick(s){if(this._runningTick)throw new je(101,!1);const a=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(s)}catch(u){this.internalErrorHandler(u)}finally{this.afterTick.next(),this._runningTick=!1,ye(a)}}detectChangesInAttachedViews(s){let a=0;const u=this.afterRenderEffectManager;for(;;){if(a===Xy)throw new je(103,!1);if(s){const h=0===a;this.beforeRender.next(h);for(let{_lView:g,notifyErrorHandler:v}of this._views)Tx(g,h,v)}if(a++,u.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:h})=>wE(h))&&(u.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:h})=>wE(h))))break}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Sb(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(_E,[]);[...this._bootstrapListeners,...a].forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Sb(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new je(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sb(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}function Tx(n,i,s){!i&&!wE(n)||function Ix(n,i,s){let a;s?(a=0,n[et]|=1024):a=64&n[et]?0:1,ih(n,i,a)}(n,s,i)}function wE(n){return xl(n)}class xx{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let Px=(()=>{class n{compileModuleSync(s){return new hc(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=Fr(_i(s).declarations).reduce((g,v)=>{const E=Xe(v);return E&&g.push(new Tu(E)),g},[]);return new xx(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nx=(()=>{class n{constructor(){this.zone=_t(Ci),this.applicationRef=_t(Ec)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kx(){const n=_t(Ci),i=_t($s);return s=>n.runOutsideAngular(()=>i.handleError(s))}let Fx=(()=>{class n{constructor(){this.subscription=new Ot.yU,this.initialized=!1,this.zone=_t(Ci),this.pendingTasks=_t(Ds)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ci.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ci.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Tb=new kt("",{providedIn:"root",factory:()=>_t(Tb,Qt.Optional|Qt.SkipSelf)||function Vx(){return typeof $localize<"u"&&$localize.locale||Fh}()}),jx=new kt("",{providedIn:"root",factory:()=>"USD"}),EE=new kt("");let vS=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const u=function pp(n="zone.js",i){return"noop"===n?new gv:"zone.js"===n?new Ci(i):n}(a?.ngZone,function yS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return u.run(()=>{const h=function Gv(n,i,s){return new Fp(n,i,s)}(s.moduleType,this.injector,function mS(n){return[{provide:Ci,useFactory:n},{provide:jo,multi:!0,useFactory:()=>{const i=_t(Nx,{optional:!0});return()=>i.initialize()}},{provide:jo,multi:!0,useFactory:()=>{const i=_t(Fx);return()=>{i.initialize()}}},{provide:gm,useFactory:kx}]}(()=>u)),g=h.injector.get($s,null);return u.runOutsideAngular(()=>{const v=u.onError.subscribe({next:E=>{g.handleError(E)}});h.onDestroy(()=>{Sb(this._modules,h),v.unsubscribe()})}),function fS(n,i,s){try{const a=s();return vE(a)?a.catch(u=>{throw i.runOutsideAngular(()=>n.handleError(u)),u}):a}catch(a){throw i.runOutsideAngular(()=>n.handleError(a)),a}}(g,u,()=>{const v=h.injector.get(bE);return v.runInitializers(),v.donePromise.then(()=>(function bA(n){"string"==typeof n&&(vA=n.toLowerCase().replace(/_/g,"-"))}(h.injector.get(Tb,Fh)||Fh),this._moduleDoBootstrap(h),h))})})}bootstrapModule(s,a=[]){const u=pS({},a);return function Ox(n,i,s){const a=new hc(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(s){const a=s.injector.get(Ec);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new je(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(EE,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(a){return new(a||n)(An(wr))}}static{this.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Cc=null;const bS=new kt("");function _S(n,i,s=[]){const a=`Platform: ${i}`,u=new kt(a);return(h=[])=>{let g=CE();if(!g||g.injector.get(bS,!1)){const v=[...s,...h,{provide:u,useValue:!0}];n?n(v):function Ux(n){if(Cc&&!Cc.get(bS,!1))throw new je(400,!1);(function hS(){!function Sr(n){Zn=n}(()=>{throw new je(600,!1)})})(),Cc=n;const i=n.get(vS);(function ES(n){n.get(Rm,null)?.forEach(s=>s())})(n)}(function wS(n=[],i){return wr.create({name:i,providers:[{provide:at,useValue:"platform"},{provide:EE,useValue:new Set([()=>Cc=null])},...n]})}(v,a))}return function Hx(n){const i=CE();if(!i)throw new je(401,!1);return i}()}}function CE(){return Cc?.get(vS)??null}let AS=(()=>{class n{static{this.__NG_ELEMENT_ID__=zx}}return n})();function zx(n){return function Wx(n,i,s){if(Ls(n)&&!s){const a=Nr(n.index,i);return new rc(a,a)}return 47&n.type?new rc(i[nt],i):null}(In(),_e(),!(16&~n))}class TS{constructor(){}supports(i){return Qa(i)}create(i){return new Qx(i)}}const Xx=(n,i)=>i;class Qx{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Xx}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,u=0,h=null;for(;s||a;){const g=!a||s&&s.currentIndex<xS(a,u,h)?s:a,v=xS(g,u,h),E=g.currentIndex;if(g===a)u--,a=a._nextRemoved;else if(s=s._next,null==g.previousIndex)u++;else{h||(h=[]);const I=v-u,O=E-u;if(I!=O){for(let Q=0;Q<I;Q++){const Y=Q<h.length?h[Q]:h[Q]=0,oe=Y+Q;O<=oe&&oe<I&&(h[Q]=Y+1)}h[g.previousIndex]=O-I}}v!==E&&i(g,v,E)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Qa(i))throw new je(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,h,g,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let v=0;v<this.length;v++)h=i[v],g=this._trackByFn(v,h),null!==s&&Object.is(s.trackById,g)?(a&&(s=this._verifyReinsertion(s,h,g,v)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,g,v),a=!0),s=s._next}else u=0,function Th(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[Symbol.iterator]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,v=>{g=this._trackByFn(u,v),null!==s&&Object.is(s.trackById,g)?(a&&(s=this._verifyReinsertion(s,v,g,u)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,g,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,u){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,h,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,h,u)):i=this._addAfter(new Yx(s,a),h,u),i}_verifyReinsertion(i,s,a,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?i=this._reinsertAfter(h,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,h=i._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const u=null===s?this._itHead:s._next;return i._next=u,i._prev=s,null===u?this._itTail=i:u._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new IS),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new IS),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Yx{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zx{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class IS{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new Zx,this.map.set(s,a)),a.add(i)}get(i,s){const u=this.map.get(i);return u?u.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xS(n,i,s){const a=n.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+i+u}class PS{constructor(){}supports(i){return i instanceof Map||fc(i)}create(){return new Jx}}class Jx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||fc(i)))throw new je(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,s);const h=u._prev,g=u._next;return h&&(h._next=g),g&&(g._prev=h),u._next=null,u._prev=null,u}const a=new eP(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class eP{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RS(){return new TE([new TS])}let TE=(()=>{class n{static{this.\u0275prov=un({token:n,providedIn:"root",factory:RS})}constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||RS()),deps:[[n,new oo,new so]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new je(901,!1)}}return n})();function OS(){return new IE([new PS])}let IE=(()=>{class n{static{this.\u0275prov=un({token:n,providedIn:"root",factory:OS})}constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||OS()),deps:[[n,new oo,new so]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(a)return a;throw new je(901,!1)}}return n})();const iP=_S(null,"core",[]);let rP=(()=>{class n{constructor(s){}static{this.\u0275fac=function(a){return new(a||n)(An(Ec))}}static{this.\u0275mod=lo({type:n})}static{this.\u0275inj=Qs({})}}return n})();function OP(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function kP(n){const i=ye(null);try{return n()}finally{ye(i)}}function UP(n){const i=Xe(n);if(!i)return null;const s=new Tu(i);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},345:(ut,Te,H)=>{H.d(Te,{B7:()=>ze,Bb:()=>Un,hE:()=>wn,sG:()=>Ke});var N=H(4438),V=H(177);class ge extends V.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class G extends ge{static makeCurrent(){(0,V.ZD)(new G)}onAndCancel(le,q,re){return le.addEventListener(q,re),()=>{le.removeEventListener(q,re)}}dispatchEvent(le,q){le.dispatchEvent(q)}remove(le){le.parentNode&&le.parentNode.removeChild(le)}createElement(le,q){return(q=q||this.getDefaultDocument()).createElement(le)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(le){return le.nodeType===Node.ELEMENT_NODE}isShadowRoot(le){return le instanceof DocumentFragment}getGlobalEventTarget(le,q){return"window"===q?window:"document"===q?le:"body"===q?le.body:null}getBaseHref(le){const q=function xe(){return m=m||document.querySelector("base"),m?m.getAttribute("href"):null}();return null==q?null:function ye(J){return new URL(J,document.baseURI).pathname}(q)}resetBaseElement(){m=null}getUserAgent(){return window.navigator.userAgent}getCookie(le){return(0,V._b)(document.cookie,le)}}let m=null,Ne=(()=>{class J{build(){return new XMLHttpRequest}static{this.\u0275fac=function(re){return new(re||J)}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac})}}return J})();const Oe=new N.nKC("");let be=(()=>{class J{constructor(q,re){this._zone=re,this._eventNameToPlugin=new Map,q.forEach(Pe=>{Pe.manager=this}),this._plugins=q.slice().reverse()}addEventListener(q,re,Pe){return this._findPluginFor(re).addEventListener(q,re,Pe)}getZone(){return this._zone}_findPluginFor(q){let re=this._eventNameToPlugin.get(q);if(re)return re;if(re=this._plugins.find(Ze=>Ze.supports(q)),!re)throw new N.wOt(5101,!1);return this._eventNameToPlugin.set(q,re),re}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(Oe),N.KVO(N.SKi))}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac})}}return J})();class Fe{constructor(le){this._doc=le}}const rt="ng-app-id";let Ue=(()=>{class J{constructor(q,re,Pe,Ze={}){this.doc=q,this.appId=re,this.nonce=Pe,this.platformId=Ze,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,V.Vy)(Ze),this.resetHostNodes()}addStyles(q){for(const re of q)1===this.changeUsageCount(re,1)&&this.onStyleAdded(re)}removeStyles(q){for(const re of q)this.changeUsageCount(re,-1)<=0&&this.onStyleRemoved(re)}ngOnDestroy(){const q=this.styleNodesInDOM;q&&(q.forEach(re=>re.remove()),q.clear());for(const re of this.getAllStyles())this.onStyleRemoved(re);this.resetHostNodes()}addHost(q){this.hostNodes.add(q);for(const re of this.getAllStyles())this.addStyleToHost(q,re)}removeHost(q){this.hostNodes.delete(q)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(q){for(const re of this.hostNodes)this.addStyleToHost(re,q)}onStyleRemoved(q){const re=this.styleRef;re.get(q)?.elements?.forEach(Pe=>Pe.remove()),re.delete(q)}collectServerRenderedStyles(){const q=this.doc.head?.querySelectorAll(`style[${rt}="${this.appId}"]`);if(q?.length){const re=new Map;return q.forEach(Pe=>{null!=Pe.textContent&&re.set(Pe.textContent,Pe)}),re}return null}changeUsageCount(q,re){const Pe=this.styleRef;if(Pe.has(q)){const Ze=Pe.get(q);return Ze.usage+=re,Ze.usage}return Pe.set(q,{usage:re,elements:[]}),re}getStyleElement(q,re){const Pe=this.styleNodesInDOM,Ze=Pe?.get(re);if(Ze?.parentNode===q)return Pe.delete(re),Ze.removeAttribute(rt),Ze;{const dt=this.doc.createElement("style");return this.nonce&&dt.setAttribute("nonce",this.nonce),dt.textContent=re,this.platformIsServer&&dt.setAttribute(rt,this.appId),q.appendChild(dt),dt}}addStyleToHost(q,re){const Pe=this.getStyleElement(q,re),Ze=this.styleRef,dt=Ze.get(re)?.elements;dt?dt.push(Pe):Ze.set(re,{elements:[Pe],usage:1})}resetHostNodes(){const q=this.hostNodes;q.clear(),q.add(this.doc.head)}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(V.qQ),N.KVO(N.sZ2),N.KVO(N.BIS,8),N.KVO(N.Agw))}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac})}}return J})();const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ut=/%COMP%/g,Ye=new N.nKC("",{providedIn:"root",factory:()=>!0});function wt(J,le){return le.map(q=>q.replace(Ut,J))}let ze=(()=>{class J{constructor(q,re,Pe,Ze,dt,mn,yn,Hn=null){this.eventManager=q,this.sharedStylesHost=re,this.appId=Pe,this.removeStylesOnCompDestroy=Ze,this.doc=dt,this.platformId=mn,this.ngZone=yn,this.nonce=Hn,this.rendererByCompId=new Map,this.platformIsServer=(0,V.Vy)(mn),this.defaultRenderer=new qe(q,dt,yn,this.platformIsServer)}createRenderer(q,re){if(!q||!re)return this.defaultRenderer;this.platformIsServer&&re.encapsulation===N.gXe.ShadowDom&&(re={...re,encapsulation:N.gXe.Emulated});const Pe=this.getOrCreateRenderer(q,re);return Pe instanceof nn?Pe.applyToHost(q):Pe instanceof Ln&&Pe.applyStyles(),Pe}getOrCreateRenderer(q,re){const Pe=this.rendererByCompId;let Ze=Pe.get(re.id);if(!Ze){const dt=this.doc,mn=this.ngZone,yn=this.eventManager,Hn=this.sharedStylesHost,ki=this.removeStylesOnCompDestroy,si=this.platformIsServer;switch(re.encapsulation){case N.gXe.Emulated:Ze=new nn(yn,Hn,re,this.appId,ki,dt,mn,si);break;case N.gXe.ShadowDom:return new Yn(yn,Hn,q,re,dt,mn,this.nonce,si);default:Ze=new Ln(yn,Hn,re,ki,dt,mn,si)}Pe.set(re.id,Ze)}return Ze}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(be),N.KVO(Ue),N.KVO(N.sZ2),N.KVO(Ye),N.KVO(V.qQ),N.KVO(N.Agw),N.KVO(N.SKi),N.KVO(N.BIS))}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac})}}return J})();class qe{constructor(le,q,re,Pe){this.eventManager=le,this.doc=q,this.ngZone=re,this.platformIsServer=Pe,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(le,q){return q?this.doc.createElementNS(ct[q]||q,le):this.doc.createElement(le)}createComment(le){return this.doc.createComment(le)}createText(le){return this.doc.createTextNode(le)}appendChild(le,q){(Ht(le)?le.content:le).appendChild(q)}insertBefore(le,q,re){le&&(Ht(le)?le.content:le).insertBefore(q,re)}removeChild(le,q){le&&le.removeChild(q)}selectRootElement(le,q){let re="string"==typeof le?this.doc.querySelector(le):le;if(!re)throw new N.wOt(-5104,!1);return q||(re.textContent=""),re}parentNode(le){return le.parentNode}nextSibling(le){return le.nextSibling}setAttribute(le,q,re,Pe){if(Pe){q=Pe+":"+q;const Ze=ct[Pe];Ze?le.setAttributeNS(Ze,q,re):le.setAttribute(q,re)}else le.setAttribute(q,re)}removeAttribute(le,q,re){if(re){const Pe=ct[re];Pe?le.removeAttributeNS(Pe,q):le.removeAttribute(`${re}:${q}`)}else le.removeAttribute(q)}addClass(le,q){le.classList.add(q)}removeClass(le,q){le.classList.remove(q)}setStyle(le,q,re,Pe){Pe&(N.czy.DashCase|N.czy.Important)?le.style.setProperty(q,re,Pe&N.czy.Important?"important":""):le.style[q]=re}removeStyle(le,q,re){re&N.czy.DashCase?le.style.removeProperty(q):le.style[q]=""}setProperty(le,q,re){null!=le&&(le[q]=re)}setValue(le,q){le.nodeValue=q}listen(le,q,re){if("string"==typeof le&&!(le=(0,V.QT)().getGlobalEventTarget(this.doc,le)))throw new Error(`Unsupported event target ${le} for event ${q}`);return this.eventManager.addEventListener(le,q,this.decoratePreventDefault(re))}decoratePreventDefault(le){return q=>{if("__ngUnwrap__"===q)return le;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>le(q)):le(q))&&q.preventDefault()}}}function Ht(J){return"TEMPLATE"===J.tagName&&void 0!==J.content}class Yn extends qe{constructor(le,q,re,Pe,Ze,dt,mn,yn){super(le,Ze,dt,yn),this.sharedStylesHost=q,this.hostEl=re,this.shadowRoot=re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Hn=wt(Pe.id,Pe.styles);for(const ki of Hn){const si=document.createElement("style");mn&&si.setAttribute("nonce",mn),si.textContent=ki,this.shadowRoot.appendChild(si)}}nodeOrShadowRoot(le){return le===this.hostEl?this.shadowRoot:le}appendChild(le,q){return super.appendChild(this.nodeOrShadowRoot(le),q)}insertBefore(le,q,re){return super.insertBefore(this.nodeOrShadowRoot(le),q,re)}removeChild(le,q){return super.removeChild(this.nodeOrShadowRoot(le),q)}parentNode(le){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(le)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ln extends qe{constructor(le,q,re,Pe,Ze,dt,mn,yn){super(le,Ze,dt,mn),this.sharedStylesHost=q,this.removeStylesOnCompDestroy=Pe,this.styles=yn?wt(yn,re.styles):re.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nn extends Ln{constructor(le,q,re,Pe,Ze,dt,mn,yn){const Hn=Pe+"-"+re.id;super(le,q,re,Ze,dt,mn,yn,Hn),this.contentAttr=function He(J){return"_ngcontent-%COMP%".replace(Ut,J)}(Hn),this.hostAttr=function lt(J){return"_nghost-%COMP%".replace(Ut,J)}(Hn)}applyToHost(le){this.applyStyles(),this.setAttribute(le,this.hostAttr,"")}createElement(le,q){const re=super.createElement(le,q);return super.setAttribute(re,this.contentAttr,""),re}}let Zn=(()=>{class J extends Fe{constructor(q){super(q)}supports(q){return!0}addEventListener(q,re,Pe){return q.addEventListener(re,Pe,!1),()=>this.removeEventListener(q,re,Pe)}removeEventListener(q,re,Pe){return q.removeEventListener(re,Pe)}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(V.qQ))}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac})}}return J})();const pi=["alt","control","meta","shift"],Sr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},it={alt:J=>J.altKey,control:J=>J.ctrlKey,meta:J=>J.metaKey,shift:J=>J.shiftKey};let Cn=(()=>{class J extends Fe{constructor(q){super(q)}supports(q){return null!=J.parseEventName(q)}addEventListener(q,re,Pe){const Ze=J.parseEventName(re),dt=J.eventCallback(Ze.fullKey,Pe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,V.QT)().onAndCancel(q,Ze.domEventName,dt))}static parseEventName(q){const re=q.toLowerCase().split("."),Pe=re.shift();if(0===re.length||"keydown"!==Pe&&"keyup"!==Pe)return null;const Ze=J._normalizeKey(re.pop());let dt="",mn=re.indexOf("code");if(mn>-1&&(re.splice(mn,1),dt="code."),pi.forEach(Hn=>{const ki=re.indexOf(Hn);ki>-1&&(re.splice(ki,1),dt+=Hn+".")}),dt+=Ze,0!=re.length||0===Ze.length)return null;const yn={};return yn.domEventName=Pe,yn.fullKey=dt,yn}static matchEventFullKeyCode(q,re){let Pe=Sr[q.key]||q.key,Ze="";return re.indexOf("code.")>-1&&(Pe=q.code,Ze="code."),!(null==Pe||!Pe)&&(Pe=Pe.toLowerCase()," "===Pe?Pe="space":"."===Pe&&(Pe="dot"),pi.forEach(dt=>{dt!==Pe&&(0,it[dt])(q)&&(Ze+=dt+".")}),Ze+=Pe,Ze===re)}static eventCallback(q,re,Pe){return Ze=>{J.matchEventFullKeyCode(Ze,q)&&Pe.runGuarded(()=>re(Ze))}}static _normalizeKey(q){return"esc"===q?"escape":q}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(V.qQ))}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac})}}return J})();const Ke=(0,N.oH4)(N.fpN,"browser",[{provide:N.Agw,useValue:V.AJ},{provide:N.PLl,useValue:function he(){G.makeCurrent()},multi:!0},{provide:V.qQ,useFactory:function ee(){return(0,N.TL$)(document),document},deps:[]}]),Ve=new N.nKC(""),yt=[{provide:N.e01,useClass:class Qe{addToWindow(le){N.JZv.getAngularTestability=(re,Pe=!0)=>{const Ze=le.findTestabilityInTree(re,Pe);if(null==Ze)throw new N.wOt(5103,!1);return Ze},N.JZv.getAllAngularTestabilities=()=>le.getAllTestabilities(),N.JZv.getAllAngularRootElements=()=>le.getAllRootElements(),N.JZv.frameworkStabilizers||(N.JZv.frameworkStabilizers=[]),N.JZv.frameworkStabilizers.push(re=>{const Pe=N.JZv.getAllAngularTestabilities();let Ze=Pe.length;const dt=function(){Ze--,0==Ze&&re()};Pe.forEach(mn=>{mn.whenStable(dt)})})}findTestabilityInTree(le,q,re){return null==q?null:le.getTestability(q)??(re?(0,V.QT)().isShadowRoot(q)?this.findTestabilityInTree(le,q.host,!0):this.findTestabilityInTree(le,q.parentElement,!0):null)}},deps:[]},{provide:N.WHO,useClass:N.NYb,deps:[N.SKi,N.giA,N.e01]},{provide:N.NYb,useClass:N.NYb,deps:[N.SKi,N.giA,N.e01]}],Ot=[{provide:N.H8p,useValue:"root"},{provide:N.zcH,useFactory:function U(){return new N.zcH},deps:[]},{provide:Oe,useClass:Zn,multi:!0,deps:[V.qQ,N.SKi,N.Agw]},{provide:Oe,useClass:Cn,multi:!0,deps:[V.qQ]},ze,Ue,be,{provide:N._9s,useExisting:ze},{provide:V.N0,useClass:Ne,deps:[]},[]];let Un=(()=>{class J{constructor(q){}static withServerTransition(q){return{ngModule:J,providers:[{provide:N.sZ2,useValue:q.appId}]}}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(Ve,12))}}static{this.\u0275mod=N.$C({type:J})}static{this.\u0275inj=N.G2t({providers:[...Ot,...yt],imports:[V.MD,N.Hbi]})}}return J})(),wn=(()=>{class J{constructor(q){this._doc=q}getTitle(){return this._doc.title}setTitle(q){this._doc.title=q||""}static{this.\u0275fac=function(re){return new(re||J)(N.KVO(V.qQ))}}static{this.\u0275prov=N.jDH({token:J,factory:J.\u0275fac,providedIn:"root"})}}return J})()},4432:(ut,Te,H)=>{H.d(Te,{nX:()=>tr,Ix:()=>st,Wk:()=>Zr,wQ:()=>nt,iI:()=>Sg,n3:()=>zr,lh:()=>ks,lG:()=>Sl});var N=H(467),V=H(4438),ge=H(4402),G=H(6648),m=H(7673),xe=H(4412),ye=H(1985),Qe=H(3073),Ne=H(3669),Oe=H(6450),be=H(3794),Fe=H(8496),rt=H(4360),Ue=H(5225);function ct(...b){const S=(0,be.lI)(b),w=(0,be.ms)(b),{args:D,keys:x}=(0,Qe.D)(b);if(0===D.length)return(0,G.H)([],S);const F=new ye.c(function Ut(b,S,w=Ne.D){return D=>{Rt(S,()=>{const{length:x}=b,F=new Array(x);let z=x,ae=x;for(let ne=0;ne<x;ne++)Rt(S,()=>{const Le=(0,G.H)(b[ne],S);let Et=!1;Le.subscribe((0,rt._)(D,Mt=>{F[ne]=Mt,Et||(Et=!0,ae--),ae||D.next(w(F.slice()))},()=>{--z||D.complete()}))},D)},D)}}(D,S,x?z=>(0,Fe.e)(x,z):Ne.D));return w?F.pipe((0,Oe.I)(w)):F}function Rt(b,S,w){b?(0,Ue.N)(w,b,S):S()}const tn=(0,H(1853).L)(b=>function(){b(this),this.name="EmptyError",this.message="no elements in sequence"});var ln=H(8793),Ye=H(9030),He=H(1203),lt=H(8071);function wt(b,S){const w=(0,lt.T)(b)?b:()=>b,D=x=>x.error(w());return new ye.c(S?x=>S.schedule(D,0,x):D)}var ze=H(983),qe=H(8359),tt=H(9974);function Ct(){return(0,tt.N)((b,S)=>{let w=null;b._refCount++;const D=(0,rt._)(S,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(w=null);const x=b._connection,F=w;w=null,x&&(!F||x===F)&&x.unsubscribe(),S.unsubscribe()});b.subscribe(D),D.closed||(w=b.connect())})}class Ht extends ye.c{constructor(S,w){super(),this.source=S,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,tt.S)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new qe.yU;const w=this.getSubject();S.add(this.source.subscribe((0,rt._)(w,void 0,()=>{this._teardown(),w.complete()},D=>{this._teardown(),w.error(D)},()=>this._teardown()))),S.closed&&(this._connection=null,S=qe.yU.EMPTY)}return S}refCount(){return Ct()(this)}}var Yn=H(1413),Ln=H(177),nn=H(6354),Zn=H(5558),pi=H(6697),it=H(5964),Cn=H(1397);function ce(b){return(0,tt.N)((S,w)=>{let D=!1;S.subscribe((0,rt._)(w,x=>{D=!0,w.next(x)},()=>{D||w.next(b),w.complete()}))})}function fe(b=me){return(0,tt.N)((S,w)=>{let D=!1;S.subscribe((0,rt._)(w,x=>{D=!0,w.next(x)},()=>D?w.complete():w.error(b())))})}function me(){return new tn}function X(b,S){const w=arguments.length>=2;return D=>D.pipe(b?(0,it.p)((x,F)=>b(x,F,D)):Ne.D,(0,pi.s)(1),w?ce(S):fe(()=>new tn))}var he=H(274);function U(b,S,w){const D=(0,lt.T)(b)||S||w?{next:b,error:S,complete:w}:b;return D?(0,tt.N)((x,F)=>{var z;null===(z=D.subscribe)||void 0===z||z.call(D);let ae=!0;x.subscribe((0,rt._)(F,ne=>{var Le;null===(Le=D.next)||void 0===Le||Le.call(D,ne),F.next(ne)},()=>{var ne;ae=!1,null===(ne=D.complete)||void 0===ne||ne.call(D),F.complete()},ne=>{var Le;ae=!1,null===(Le=D.error)||void 0===Le||Le.call(D,ne),F.error(ne)},()=>{var ne,Le;ae&&(null===(ne=D.unsubscribe)||void 0===ne||ne.call(D)),null===(Le=D.finalize)||void 0===Le||Le.call(D)}))}):Ne.D}var ee=H(8750);function Ee(b){return(0,tt.N)((S,w)=>{let F,D=null,x=!1;D=S.subscribe((0,rt._)(w,void 0,void 0,z=>{F=(0,ee.Tg)(b(z,Ee(b)(S))),D?(D.unsubscribe(),D=null,F.subscribe(w)):x=!0})),x&&(D.unsubscribe(),D=null,F.subscribe(w))})}function yt(b){return b<=0?()=>ze.w:(0,tt.N)((S,w)=>{let D=[];S.subscribe((0,rt._)(w,x=>{D.push(x),b<D.length&&D.shift()},()=>{for(const x of D)w.next(x);w.complete()},void 0,()=>{D=null}))})}var $t=H(980),Jt=H(6977),wn=H(6365),je=H(345);const ot="primary",gi=Symbol("RouteTitle");class Br{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const w=this.params[S];return Array.isArray(w)?w[0]:w}return null}getAll(S){if(this.has(S)){const w=this.params[S];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Ni(b){return new Br(b)}function cr(b,S,w){const D=w.path.split("/");if(D.length>b.length||"full"===w.pathMatch&&(S.hasChildren()||D.length<b.length))return null;const x={};for(let F=0;F<D.length;F++){const z=D[F],ae=b[F];if(z.startsWith(":"))x[z.substring(1)]=ae;else if(z!==ae.path)return null}return{consumed:b.slice(0,D.length),posParams:x}}function gt(b,S){const w=b?Nt(b):void 0,D=S?Nt(S):void 0;if(!w||!D||w.length!=D.length)return!1;let x;for(let F=0;F<w.length;F++)if(x=w[F],!ur(b[x],S[x]))return!1;return!0}function Nt(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}function ur(b,S){if(Array.isArray(b)&&Array.isArray(S)){if(b.length!==S.length)return!1;const w=[...b].sort(),D=[...S].sort();return w.every((x,F)=>D[F]===x)}return b===S}function Ii(b){return b.length>0?b[b.length-1]:null}function ri(b){return(0,ge.A)(b)?b:(0,V.jNT)(b)?(0,G.H)(Promise.resolve(b)):(0,m.of)(b)}const Ur={exact:function dr(b,S,w){if(!J(b.segments,S.segments)||!Fn(b.segments,S.segments,w)||b.numberOfChildren!==S.numberOfChildren)return!1;for(const D in S.children)if(!b.children[D]||!dr(b.children[D],S.children[D],w))return!1;return!0},subset:cn},Jn={exact:function bt(b,S){return gt(b,S)},subset:function jt(b,S){return Object.keys(S).length<=Object.keys(b).length&&Object.keys(S).every(w=>ur(b[w],S[w]))},ignored:()=>!0};function tl(b,S,w){return Ur[w.paths](b.root,S.root,w.matrixParams)&&Jn[w.queryParams](b.queryParams,S.queryParams)&&!("exact"===w.fragment&&b.fragment!==S.fragment)}function cn(b,S,w){return Ss(b,S,S.segments,w)}function Ss(b,S,w,D){if(b.segments.length>w.length){const x=b.segments.slice(0,w.length);return!(!J(x,w)||S.hasChildren()||!Fn(x,w,D))}if(b.segments.length===w.length){if(!J(b.segments,w)||!Fn(b.segments,w,D))return!1;for(const x in S.children)if(!b.children[x]||!cn(b.children[x],S.children[x],D))return!1;return!0}{const x=w.slice(0,b.segments.length),F=w.slice(b.segments.length);return!!(J(b.segments,x)&&Fn(b.segments,x,D)&&b.children[ot])&&Ss(b.children[ot],S,F,D)}}function Fn(b,S,w){return S.every((D,x)=>Jn[w](b[x].parameters,D.parameters))}class zi{constructor(S=new gn([],{}),w={},D=null){this.root=S,this.queryParams=w,this.fragment=D}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){return Pe.serialize(this)}}class gn{constructor(S,w){this.segments=S,this.children=w,this.parent=null,Object.values(w).forEach(D=>D.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ze(this)}}class Hr{constructor(S,w){this.path=S,this.parameters=w}get parameterMap(){return this._parameterMap??=Ni(this.parameters),this._parameterMap}toString(){return as(this)}}function J(b,S){return b.length===S.length&&b.every((w,D)=>w.path===S[D].path)}let q=(()=>{class b{static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:()=>new re,providedIn:"root"})}}return b})();class re{parse(S){const w=new Qs(S);return new zi(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(S){const w=`/${dt(S.root,!0)}`,D=function ci(b){const S=Object.entries(b).map(([w,D])=>Array.isArray(D)?D.map(x=>`${yn(w)}=${yn(x)}`).join("&"):`${yn(w)}=${yn(D)}`).filter(w=>w);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${w}${D}${"string"==typeof S.fragment?`#${function Hn(b){return encodeURI(b)}(S.fragment)}`:""}`}}const Pe=new re;function Ze(b){return b.segments.map(S=>as(S)).join("/")}function dt(b,S){if(!b.hasChildren())return Ze(b);if(S){const w=b.children[ot]?dt(b.children[ot],!1):"",D=[];return Object.entries(b.children).forEach(([x,F])=>{x!==ot&&D.push(`${x}:${dt(F,!1)}`)}),D.length>0?`${w}(${D.join("//")})`:w}{const w=function le(b,S){let w=[];return Object.entries(b.children).forEach(([D,x])=>{D===ot&&(w=w.concat(S(x,D)))}),Object.entries(b.children).forEach(([D,x])=>{D!==ot&&(w=w.concat(S(x,D)))}),w}(b,(D,x)=>x===ot?[dt(b.children[ot],!1)]:[`${x}:${dt(D,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[ot]?`${Ze(b)}/${w[0]}`:`${Ze(b)}/(${w.join("//")})`}}function mn(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yn(b){return mn(b).replace(/%3B/gi,";")}function ki(b){return mn(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function si(b){return decodeURIComponent(b)}function Yi(b){return si(b.replace(/\+/g,"%20"))}function as(b){return`${ki(b.path)}${function So(b){return Object.entries(b).map(([S,w])=>`;${ki(S)}=${ki(w)}`).join("")}(b.parameters)}`}const ht=/^[^\/()?;#]+/;function nl(b){const S=b.match(ht);return S?S[0]:""}const il=/^[^\/()?;=#]+/,rl=/^[^=?&#]+/,un=/^[^&#]+/;class Qs{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gn([],{}):new gn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let D={};return this.peekStartsWith("(")&&(D=this.parseParens(!1)),(S.length>0||Object.keys(w).length>0)&&(D[ot]=new gn(S,w)),D}parseSegment(){const S=nl(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new V.wOt(4009,!1);return this.capture(S),new Hr(si(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const w=function Ac(b){const S=b.match(il);return S?S[0]:""}(this.remaining);if(!w)return;this.capture(w);let D="";if(this.consumeOptional("=")){const x=nl(this.remaining);x&&(D=x,this.capture(D))}S[si(w)]=si(D)}parseQueryParam(S){const w=function Ku(b){const S=b.match(rl);return S?S[0]:""}(this.remaining);if(!w)return;this.capture(w);let D="";if(this.consumeOptional("=")){const z=function qu(b){const S=b.match(un);return S?S[0]:""}(this.remaining);z&&(D=z,this.capture(D))}const x=Yi(w),F=Yi(D);if(S.hasOwnProperty(x)){let z=S[x];Array.isArray(z)||(z=[z],S[x]=z),z.push(F)}else S[x]=F}parseParens(S){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const D=nl(this.remaining),x=this.remaining[D.length];if("/"!==x&&")"!==x&&";"!==x)throw new V.wOt(4010,!1);let F;D.indexOf(":")>-1?(F=D.slice(0,D.indexOf(":")),this.capture(F),this.capture(":")):S&&(F=ot);const z=this.parseChildren();w[F]=1===Object.keys(z).length?z[ot]:new gn([],z),this.consumeOptional("//")}return w}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new V.wOt(4011,!1)}}function Ys(b){return b.segments.length>0?new gn([],{[ot]:b}):b}function Mo(b){const S={};for(const[D,x]of Object.entries(b.children)){const F=Mo(x);if(D===ot&&0===F.segments.length&&F.hasChildren())for(const[z,ae]of Object.entries(F.children))S[z]=ae;else(F.segments.length>0||F.hasChildren())&&(S[D]=F)}return function To(b){if(1===b.numberOfChildren&&b.children[ot]){const S=b.children[ot];return new gn(b.segments.concat(S.segments),S.children)}return b}(new gn(b.segments,S))}function Zi(b){return b instanceof zi}function Js(b){let S;const x=Ys(function w(F){const z={};for(const ne of F.children){const Le=w(ne);z[ne.outlet]=Le}const ae=new gn(F.url,z);return F===b&&(S=ae),ae}(b.root));return S??x}function Io(b,S,w,D){let x=b;for(;x.parent;)x=x.parent;if(0===S.length)return kt(x,x,x,w,D);const F=function Dc(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new xo(!0,0,b);let S=0,w=!1;const D=b.reduce((x,F,z)=>{if("object"==typeof F&&null!=F){if(F.outlets){const ae={};return Object.entries(F.outlets).forEach(([ne,Le])=>{ae[ne]="string"==typeof Le?Le.split("/"):Le}),[...x,{outlets:ae}]}if(F.segmentPath)return[...x,F.segmentPath]}return"string"!=typeof F?[...x,F]:0===z?(F.split("/").forEach((ae,ne)=>{0==ne&&"."===ae||(0==ne&&""===ae?w=!0:".."===ae?S++:""!=ae&&x.push(ae))}),x):[...x,F]},[]);return new xo(w,S,D)}(S);if(F.toRoot())return kt(x,x,new gn([],{}),w,D);const z=function Sc(b,S,w){if(b.isAbsolute)return new Ms(S,!0,0);if(!w)return new Ms(S,!1,NaN);if(null===w.parent)return new Ms(w,!0,0);const D=ls(b.commands[0])?0:1;return function Mc(b,S,w){let D=b,x=S,F=w;for(;F>x;){if(F-=x,D=D.parent,!D)throw new V.wOt(4005,!1);x=D.segments.length}return new Ms(D,!1,x-F)}(w,w.segments.length-1+D,b.numberOfDoubleDots)}(F,x,b),ae=z.processChildren?Ts(z.segmentGroup,z.index,F.commands):Ic(z.segmentGroup,z.index,F.commands);return kt(x,z.segmentGroup,ae,w,D)}function ls(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function eo(b){return"object"==typeof b&&null!=b&&b.outlets}function kt(b,S,w,D,x){let z,F={};D&&Object.entries(D).forEach(([ne,Le])=>{F[ne]=Array.isArray(Le)?Le.map(Et=>`${Et}`):`${Le}`}),z=b===S?w:va(b,S,w);const ae=Ys(Mo(z));return new zi(ae,F,x)}function va(b,S,w){const D={};return Object.entries(b.children).forEach(([x,F])=>{D[x]=F===S?w:va(F,S,w)}),new gn(b.segments,D)}class xo{constructor(S,w,D){if(this.isAbsolute=S,this.numberOfDoubleDots=w,this.commands=D,S&&D.length>0&&ls(D[0]))throw new V.wOt(4003,!1);const x=D.find(eo);if(x&&x!==Ii(D))throw new V.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ms{constructor(S,w,D){this.segmentGroup=S,this.processChildren=w,this.index=D}}function Ic(b,S,w){if(b??=new gn([],{}),0===b.segments.length&&b.hasChildren())return Ts(b,S,w);const D=function Xu(b,S,w){let D=0,x=S;const F={match:!1,pathIndex:0,commandIndex:0};for(;x<b.segments.length;){if(D>=w.length)return F;const z=b.segments[x],ae=w[D];if(eo(ae))break;const ne=`${ae}`,Le=D<w.length-1?w[D+1]:null;if(x>0&&void 0===ne)break;if(ne&&Le&&"object"==typeof Le&&void 0===Le.outlets){if(!to(ne,Le,z))return F;D+=2}else{if(!to(ne,{},z))return F;D++}x++}return{match:!0,pathIndex:x,commandIndex:D}}(b,S,w),x=w.slice(D.commandIndex);if(D.match&&D.pathIndex<b.segments.length){const F=new gn(b.segments.slice(0,D.pathIndex),{});return F.children[ot]=new gn(b.segments.slice(D.pathIndex),b.children),Ts(F,0,x)}return D.match&&0===x.length?new gn(b.segments,{}):D.match&&!b.hasChildren()?Is(b,S,w):D.match?Ts(b,0,x):Is(b,S,w)}function Ts(b,S,w){if(0===w.length)return new gn(b.segments,{});{const D=function Tc(b){return eo(b[0])?b[0].outlets:{[ot]:b}}(w),x={};if(Object.keys(D).some(F=>F!==ot)&&b.children[ot]&&1===b.numberOfChildren&&0===b.children[ot].segments.length){const F=Ts(b.children[ot],S,w);return new gn(b.segments,F.children)}return Object.entries(D).forEach(([F,z])=>{"string"==typeof z&&(z=[z]),null!==z&&(x[F]=Ic(b.children[F],S,z))}),Object.entries(b.children).forEach(([F,z])=>{void 0===D[F]&&(x[F]=z)}),new gn(b.segments,x)}}function Is(b,S,w){const D=b.segments.slice(0,S);let x=0;for(;x<w.length;){const F=w[x];if(eo(F)){const ne=cs(F.outlets);return new gn(D,ne)}if(0===x&&ls(w[0])){D.push(new Hr(b.segments[S].path,Po(w[0]))),x++;continue}const z=eo(F)?F.outlets[ot]:`${F}`,ae=x<w.length-1?w[x+1]:null;z&&ae&&ls(ae)?(D.push(new Hr(z,Po(ae))),x+=2):(D.push(new Hr(z,{})),x++)}return new gn(D,{})}function cs(b){const S={};return Object.entries(b).forEach(([w,D])=>{"string"==typeof D&&(D=[D]),null!==D&&(S[w]=Is(new gn([],{}),0,D))}),S}function Po(b){const S={};return Object.entries(b).forEach(([w,D])=>S[w]=`${D}`),S}function to(b,S,w){return b==w.path&&gt(S,w.parameters)}const us="imperative";var Pt=function(b){return b[b.NavigationStart=0]="NavigationStart",b[b.NavigationEnd=1]="NavigationEnd",b[b.NavigationCancel=2]="NavigationCancel",b[b.NavigationError=3]="NavigationError",b[b.RoutesRecognized=4]="RoutesRecognized",b[b.ResolveStart=5]="ResolveStart",b[b.ResolveEnd=6]="ResolveEnd",b[b.GuardsCheckStart=7]="GuardsCheckStart",b[b.GuardsCheckEnd=8]="GuardsCheckEnd",b[b.RouteConfigLoadStart=9]="RouteConfigLoadStart",b[b.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",b[b.ChildActivationStart=11]="ChildActivationStart",b[b.ChildActivationEnd=12]="ChildActivationEnd",b[b.ActivationStart=13]="ActivationStart",b[b.ActivationEnd=14]="ActivationEnd",b[b.Scroll=15]="Scroll",b[b.NavigationSkipped=16]="NavigationSkipped",b}(Pt||{});class mi{constructor(S,w){this.id=S,this.url=w}}class Ro extends mi{constructor(S,w,D="imperative",x=null){super(S,w),this.type=Pt.NavigationStart,this.navigationTrigger=D,this.restoredState=x}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ft extends mi{constructor(S,w,D){super(S,w),this.urlAfterRedirects=D,this.type=Pt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var It=function(b){return b[b.Redirect=0]="Redirect",b[b.SupersededByNewNavigation=1]="SupersededByNewNavigation",b[b.NoDataFromResolver=2]="NoDataFromResolver",b[b.GuardRejected=3]="GuardRejected",b}(It||{}),sl=function(b){return b[b.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",b[b.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",b}(sl||{});class yi extends mi{constructor(S,w,D,x){super(S,w),this.reason=D,this.code=x,this.type=Pt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class no extends mi{constructor(S,w,D,x){super(S,w),this.reason=D,this.code=x,this.type=Pt.NavigationSkipped}}class fr extends mi{constructor(S,w,D,x){super(S,w),this.error=D,this.target=x,this.type=Pt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $r extends mi{constructor(S,w,D,x){super(S,w),this.urlAfterRedirects=D,this.state=x,this.type=Pt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ba extends mi{constructor(S,w,D,x){super(S,w),this.urlAfterRedirects=D,this.state=x,this.type=Pt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt extends mi{constructor(S,w,D,x,F){super(S,w),this.urlAfterRedirects=D,this.state=x,this.shouldActivate=F,this.type=Pt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oo extends mi{constructor(S,w,D,x){super(S,w),this.urlAfterRedirects=D,this.state=x,this.type=Pt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ol extends mi{constructor(S,w,D,x){super(S,w),this.urlAfterRedirects=D,this.state=x,this.type=Pt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Li{constructor(S){this.route=S,this.type=Pt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xc{constructor(S){this.route=S,this.type=Pt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hh{constructor(S){this.snapshot=S,this.type=Pt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $h{constructor(S){this.snapshot=S,this.type=Pt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class No{constructor(S){this.snapshot=S,this.type=Pt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class al{constructor(S){this.snapshot=S,this.type=Pt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(S,w,D){this.routerEvent=S,this.position=w,this.anchor=D,this.type=Pt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ll{}class ko{constructor(S){this.url=S}}class _a{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ji,this.attachRef=null}}let Ji=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(w,D){const x=this.getOrCreateContext(w);x.outlet=D,this.contexts.set(w,x)}onChildOutletDestroyed(w){const D=this.getContext(w);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let D=this.getContext(w);return D||(D=new _a,this.contexts.set(w,D)),D}getContext(w){return this.contexts.get(w)||null}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();class Lo{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const w=this.pathFromRoot(S);return w.length>1?w[w.length-2]:null}children(S){const w=er(S,this._root);return w?w.children.map(D=>D.value):[]}firstChild(S){const w=er(S,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(S){const w=xs(S,this._root);return w.length<2?[]:w[w.length-2].children.map(x=>x.value).filter(x=>x!==S)}pathFromRoot(S){return xs(S,this._root).map(w=>w.value)}}function er(b,S){if(b===S.value)return S;for(const w of S.children){const D=er(b,w);if(D)return D}return null}function xs(b,S){if(b===S.value)return[S];for(const w of S.children){const D=xs(b,w);if(D.length)return D.unshift(S),D}return[]}class An{constructor(S,w){this.value=S,this.children=w}toString(){return`TreeNode(${this.value})`}}function Mr(b){const S={};return b&&b.children.forEach(w=>S[w.value.outlet]=w),S}class _t extends Lo{constructor(S,w){super(S),this.snapshot=w,Ea(this,S)}toString(){return this.snapshot.toString()}}function ro(b){const S=function cl(b){const F=new ul([],{},{},"",{},ot,b,null,{});return new dl("",new An(F,[]))}(b),w=new xe.t([new Hr("",{})]),D=new xe.t({}),x=new xe.t({}),F=new xe.t({}),z=new xe.t(""),ae=new tr(w,D,F,z,x,ot,b,S.root);return ae.snapshot=S.root,new _t(new An(ae,[]),S)}class tr{constructor(S,w,D,x,F,z,ae,ne){this.urlSubject=S,this.paramsSubject=w,this.queryParamsSubject=D,this.fragmentSubject=x,this.dataSubject=F,this.outlet=z,this.component=ae,this._futureSnapshot=ne,this.title=this.dataSubject?.pipe((0,nn.T)(Le=>Le[gi]))??(0,m.of)(void 0),this.url=S,this.params=w,this.queryParams=D,this.fragment=x,this.data=F}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,nn.T)(S=>Ni(S))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,nn.T)(S=>Ni(S))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wa(b,S,w="emptyOnly"){let D;const{routeConfig:x}=b;return D=null===S||"always"!==w&&""!==x?.path&&(S.component||S.routeConfig?.loadComponent)?{params:{...b.params},data:{...b.data},resolve:{...b.data,...b._resolvedData??{}}}:{params:{...S.params,...b.params},data:{...S.data,...b.data},resolve:{...b.data,...S.data,...x?.data,...b._resolvedData}},x&&Rc(x)&&(D.resolve[gi]=x.title),D}class ul{get title(){return this.data?.[gi]}constructor(S,w,D,x,F,z,ae,ne,Le){this.url=S,this.params=w,this.queryParams=D,this.fragment=x,this.data=F,this.outlet=z,this.component=ae,this.routeConfig=ne,this._resolve=Le}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ni(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(D=>D.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dl extends Lo{constructor(S,w){super(w),this.url=S,Ea(this,w)}toString(){return so(this._root)}}function Ea(b,S){S.value._routerState=b,S.children.forEach(w=>Ea(b,w))}function so(b){const S=b.children.length>0?` { ${b.children.map(so).join(", ")} } `:"";return`${b.value}${S}`}function Tr(b){if(b.snapshot){const S=b.snapshot,w=b._futureSnapshot;b.snapshot=w,gt(S.queryParams,w.queryParams)||b.queryParamsSubject.next(w.queryParams),S.fragment!==w.fragment&&b.fragmentSubject.next(w.fragment),gt(S.params,w.params)||b.paramsSubject.next(w.params),function $i(b,S){if(b.length!==S.length)return!1;for(let w=0;w<b.length;++w)if(!gt(b[w],S[w]))return!1;return!0}(S.url,w.url)||b.urlSubject.next(w.url),gt(S.data,w.data)||b.dataSubject.next(w.data)}else b.snapshot=b._futureSnapshot,b.dataSubject.next(b._futureSnapshot.data)}function oo(b,S){const w=gt(b.params,S.params)&&function hr(b,S){return J(b,S)&&b.every((w,D)=>gt(w.parameters,S[D].parameters))}(b.url,S.url);return w&&!(!b.parent!=!S.parent)&&(!b.parent||oo(b.parent,S.parent))}function Rc(b){return"string"==typeof b.title||null===b.title}let zr=(()=>{class b{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new V.bkB,this.deactivateEvents=new V.bkB,this.attachEvents=new V.bkB,this.detachEvents=new V.bkB,this.parentContexts=(0,V.WQX)(Ji),this.location=(0,V.WQX)(V.c1b),this.changeDetector=(0,V.WQX)(V.gRc),this.environmentInjector=(0,V.WQX)(V.uvJ),this.inputBinder=(0,V.WQX)(zt,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:D,previousValue:x}=w.name;if(D)return;this.isTrackedInParentContexts(x)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(x)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V.wOt(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,D){this.activated=w,this._activatedRoute=D,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,D){if(this.isActivated)throw new V.wOt(4013,!1);this._activatedRoute=w;const x=this.location,z=w.snapshot.component,ae=this.parentContexts.getOrCreateContext(this.name).children,ne=new Ca(w,ae,x.injector);this.activated=x.createComponent(z,{index:x.length,injector:ne,environmentInjector:D??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275dir=V.FsC({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[V.OA$]})}}return b})();class Ca{__ngOutletInjector(S){return new Ca(this.route,this.childContexts,S)}constructor(S,w,D){this.route=S,this.childContexts=w,this.parent=D}get(S,w){return S===tr?this.route:S===Ji?this.childContexts:this.parent.get(S,w)}}const zt=new V.nKC("");let Wr=(()=>{class b{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:D}=w,x=ct([D.queryParams,D.params,D.data]).pipe((0,Zn.n)(([F,z,ae],ne)=>(ae={...F,...z,...ae},0===ne?(0,m.of)(ae):Promise.resolve(ae)))).subscribe(F=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==D||null===D.component)return void this.unsubscribeFromRouteData(w);const z=(0,V.HJs)(D.component);if(z)for(const{templateName:ae}of z.inputs)w.activatedComponentRef.setInput(ae,F[ae]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,x)}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac})}}return b})();function Gr(b,S,w){if(w&&b.shouldReuseRoute(S.value,w.value.snapshot)){const D=w.value;D._futureSnapshot=S.value;const x=function ds(b,S,w){return S.children.map(D=>{for(const x of w.children)if(b.shouldReuseRoute(D.value,x.value.snapshot))return Gr(b,D,x);return Gr(b,D)})}(b,S,w);return new An(D,x)}{if(b.shouldAttach(S.value)){const F=b.retrieve(S.value);if(null!==F){const z=F.route;return z.value._futureSnapshot=S.value,z.children=S.children.map(ae=>Gr(b,ae)),z}}const D=function fl(b){return new tr(new xe.t(b.url),new xe.t(b.params),new xe.t(b.queryParams),new xe.t(b.fragment),new xe.t(b.data),b.outlet,b.component,b)}(S.value),x=S.children.map(F=>Gr(b,F));return new An(D,x)}}const Sn="ngNavigationCancelingError";function pl(b,S){const{redirectTo:w,navigationBehaviorOptions:D}=Zi(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,x=gl(!1,It.Redirect);return x.url=w,x.navigationBehaviorOptions=D,x}function gl(b,S){const w=new Error(`NavigationCancelingError: ${b||""}`);return w[Sn]=!0,w.cancellationCode=S,w}function Fo(b){return!!b&&b[Sn]}let nr=(()=>{class b{static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275cmp=V.VBU({type:b,selectors:[["ng-component"]],standalone:!0,features:[V.aNF],decls:1,vars:0,template:function(D,x){1&D&&V.nrm(0,"router-outlet")},dependencies:[zr],encapsulation:2})}}return b})();function mt(b){const S=b.children&&b.children.map(mt),w=S?{...b,children:S}:{...b};return!w.component&&!w.loadComponent&&(S||w.loadChildren)&&w.outlet&&w.outlet!==ot&&(w.component=nr),w}function on(b){return b.outlet||ot}function xr(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let S=b.parent;S;S=S.parent){const w=S.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class Aa{constructor(S,w,D,x,F){this.routeReuseStrategy=S,this.futureState=w,this.currState=D,this.forwardEvent=x,this.inputBindingEnabled=F}activate(S){const w=this.futureState._root,D=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,D,S),Tr(this.futureState.root),this.activateChildRoutes(w,D,S)}deactivateChildRoutes(S,w,D){const x=Mr(w);S.children.forEach(F=>{const z=F.value.outlet;this.deactivateRoutes(F,x[z],D),delete x[z]}),Object.values(x).forEach(F=>{this.deactivateRouteAndItsChildren(F,D)})}deactivateRoutes(S,w,D){const x=S.value,F=w?w.value:null;if(x===F)if(x.component){const z=D.getContext(x.outlet);z&&this.deactivateChildRoutes(S,w,z.children)}else this.deactivateChildRoutes(S,w,D);else F&&this.deactivateRouteAndItsChildren(w,D)}deactivateRouteAndItsChildren(S,w){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,w):this.deactivateRouteAndOutlet(S,w)}detachAndStoreRouteSubtree(S,w){const D=w.getContext(S.value.outlet),x=D&&S.value.component?D.children:w,F=Mr(S);for(const z of Object.values(F))this.deactivateRouteAndItsChildren(z,x);if(D&&D.outlet){const z=D.outlet.detach(),ae=D.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:z,route:S,contexts:ae})}}deactivateRouteAndOutlet(S,w){const D=w.getContext(S.value.outlet),x=D&&S.value.component?D.children:w,F=Mr(S);for(const z of Object.values(F))this.deactivateRouteAndItsChildren(z,x);D&&(D.outlet&&(D.outlet.deactivate(),D.children.onOutletDeactivated()),D.attachRef=null,D.route=null)}activateChildRoutes(S,w,D){const x=Mr(w);S.children.forEach(F=>{this.activateRoutes(F,x[F.value.outlet],D),this.forwardEvent(new al(F.value.snapshot))}),S.children.length&&this.forwardEvent(new $h(S.value.snapshot))}activateRoutes(S,w,D){const x=S.value,F=w?w.value:null;if(Tr(x),x===F)if(x.component){const z=D.getOrCreateContext(x.outlet);this.activateChildRoutes(S,w,z.children)}else this.activateChildRoutes(S,w,D);else if(x.component){const z=D.getOrCreateContext(x.outlet);if(this.routeReuseStrategy.shouldAttach(x.snapshot)){const ae=this.routeReuseStrategy.retrieve(x.snapshot);this.routeReuseStrategy.store(x.snapshot,null),z.children.onOutletReAttached(ae.contexts),z.attachRef=ae.componentRef,z.route=ae.route.value,z.outlet&&z.outlet.attach(ae.componentRef,ae.route.value),Tr(ae.route.value),this.activateChildRoutes(S,null,z.children)}else{const ae=xr(x.snapshot);z.attachRef=null,z.route=x,z.injector=ae,z.outlet&&z.outlet.activateWith(x,z.injector),this.activateChildRoutes(S,null,z.children)}}else this.activateChildRoutes(S,null,D)}}class vl{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class ui{constructor(S,w){this.component=S,this.route=w}}function qr(b,S,w){const D=b._root;return vt(D,S?S._root:null,w,[D.value])}function At(b,S){const w=Symbol(),D=S.get(b,w);return D===w?"function"!=typeof b||(0,V.LfX)(b)?S.get(b):b:D}function vt(b,S,w,D,x={canDeactivateChecks:[],canActivateChecks:[]}){const F=Mr(S);return b.children.forEach(z=>{(function ir(b,S,w,D,x={canDeactivateChecks:[],canActivateChecks:[]}){const F=b.value,z=S?S.value:null,ae=w?w.getContext(b.value.outlet):null;if(z&&F.routeConfig===z.routeConfig){const ne=function bi(b,S,w){if("function"==typeof w)return w(b,S);switch(w){case"pathParamsChange":return!J(b.url,S.url);case"pathParamsOrQueryParamsChange":return!J(b.url,S.url)||!gt(b.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oo(b,S)||!gt(b.queryParams,S.queryParams);default:return!oo(b,S)}}(z,F,F.routeConfig.runGuardsAndResolvers);ne?x.canActivateChecks.push(new vl(D)):(F.data=z.data,F._resolvedData=z._resolvedData),vt(b,S,F.component?ae?ae.children:null:w,D,x),ne&&ae&&ae.outlet&&ae.outlet.isActivated&&x.canDeactivateChecks.push(new ui(ae.outlet.component,z))}else z&&Xr(S,ae,x),x.canActivateChecks.push(new vl(D)),vt(b,null,F.component?ae?ae.children:null:w,D,x)})(z,F[z.value.outlet],w,D.concat([z.value]),x),delete F[z.value.outlet]}),Object.entries(F).forEach(([z,ae])=>Xr(ae,w.getContext(z),x)),x}function Xr(b,S,w){const D=Mr(b),x=b.value;Object.entries(D).forEach(([F,z])=>{Xr(z,x.component?S?S.children.getContext(F):null:S,w)}),w.canDeactivateChecks.push(new ui(x.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,x))}function Pn(b){return"function"==typeof b}function Yu(b){return b instanceof tn||"EmptyError"===b?.name}const hs=Symbol("INITIAL_VALUE");function Ai(){return(0,Zn.n)(b=>ct(b.map(S=>S.pipe((0,pi.s)(1),function Sr(...b){const S=(0,be.lI)(b);return(0,tt.N)((w,D)=>{(S?(0,ln.x)(b,w,S):(0,ln.x)(b,w)).subscribe(D)})}(hs)))).pipe((0,nn.T)(S=>{for(const w of S)if(!0!==w){if(w===hs)return hs;if(!1===w||w instanceof zi)return w}return!0}),(0,it.p)(S=>S!==hs),(0,pi.s)(1)))}function _i(b){return(0,He.F)(U(S=>{if(Zi(S))throw pl(0,S)}),(0,nn.T)(S=>!0===S))}class Gi{constructor(S){this.segmentGroup=S||null}}class Pr extends Error{constructor(S){super(),this.urlTree=S}}function fs(b){return wt(new Gi(b))}class Ho{constructor(S,w){this.urlSerializer=S,this.urlTree=w}lineralizeSegments(S,w){let D=[],x=w.root;for(;;){if(D=D.concat(x.segments),0===x.numberOfChildren)return(0,m.of)(D);if(x.numberOfChildren>1||!x.children[ot])return wt(new V.wOt(4e3,!1));x=x.children[ot]}}applyRedirectCommands(S,w,D){const x=this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),S,D);if(w.startsWith("/"))throw new Pr(x);return x}applyRedirectCreateUrlTree(S,w,D,x){const F=this.createSegmentGroup(S,w.root,D,x);return new zi(F,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(S,w){const D={};return Object.entries(S).forEach(([x,F])=>{if("string"==typeof F&&F.startsWith(":")){const ae=F.substring(1);D[x]=w[ae]}else D[x]=F}),D}createSegmentGroup(S,w,D,x){const F=this.createSegments(S,w.segments,D,x);let z={};return Object.entries(w.children).forEach(([ae,ne])=>{z[ae]=this.createSegmentGroup(S,ne,D,x)}),new gn(F,z)}createSegments(S,w,D,x){return w.map(F=>F.path.startsWith(":")?this.findPosParam(S,F,x):this.findOrReturn(F,D))}findPosParam(S,w,D){const x=D[w.path.substring(1)];if(!x)throw new V.wOt(4001,!1);return x}findOrReturn(S,w){let D=0;for(const x of w){if(x.path===S.path)return w.splice(D),x;D++}return S}}const gr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $o(b,S,w,D,x){const F=Rs(b,S,w);return F.matched?(D=function Oc(b,S){return b.providers&&!b._injector&&(b._injector=(0,V.Ol2)(b.providers,S,`Route: ${b.path}`)),b._injector??S}(S,D),function Yt(b,S,w,D){const x=S.canMatch;if(!x||0===x.length)return(0,m.of)(!0);const F=x.map(z=>{const ae=At(z,b);return ri(function Gh(b){return b&&Pn(b.canMatch)}(ae)?ae.canMatch(S,w):(0,V.N4e)(b,()=>ae(S,w)))});return(0,m.of)(F).pipe(Ai(),_i())}(D,S,w).pipe((0,nn.T)(z=>!0===z?F:{...gr}))):(0,m.of)(F)}function Rs(b,S,w){if("**"===S.path)return function _l(b){return{matched:!0,parameters:b.length>0?Ii(b).parameters:{},consumedSegments:b,remainingSegments:[],positionalParamSegments:{}}}(w);if(""===S.path)return"full"===S.pathMatch&&(b.hasChildren()||w.length>0)?{...gr}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const x=(S.matcher||cr)(w,b,S);if(!x)return{...gr};const F={};Object.entries(x.posParams??{}).forEach(([ae,ne])=>{F[ae]=ne.path});const z=x.consumed.length>0?{...F,...x.consumed[x.consumed.length-1].parameters}:F;return{matched:!0,consumedSegments:x.consumed,remainingSegments:w.slice(x.consumed.length),parameters:z,positionalParamSegments:x.posParams??{}}}function Ju(b,S,w,D){return w.length>0&&function Bc(b,S,w){return w.some(D=>ps(b,S,D)&&on(D)!==ot)}(b,w,D)?{segmentGroup:new gn(S,jc(D,new gn(w,b.children))),slicedSegments:[]}:0===w.length&&function qn(b,S,w){return w.some(D=>ps(b,S,D))}(b,w,D)?{segmentGroup:new gn(b.segments,zo(b,w,D,b.children)),slicedSegments:w}:{segmentGroup:new gn(b.segments,b.children),slicedSegments:w}}function zo(b,S,w,D){const x={};for(const F of w)if(ps(b,S,F)&&!D[on(F)]){const z=new gn([],{});x[on(F)]=z}return{...D,...x}}function jc(b,S){const w={};w[ot]=S;for(const D of b)if(""===D.path&&on(D)!==ot){const x=new gn([],{});w[on(D)]=x}return w}function ps(b,S,w){return(!(b.hasChildren()||S.length>0)||"full"!==w.pathMatch)&&""===w.path}class ed{}class mr{constructor(S,w,D,x,F,z,ae){this.injector=S,this.configLoader=w,this.rootComponentType=D,this.config=x,this.urlTree=F,this.paramsInheritanceStrategy=z,this.urlSerializer=ae,this.applyRedirects=new Ho(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(S){return new V.wOt(4002,`'${S.segmentGroup}'`)}recognize(){const S=Ju(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(S).pipe((0,nn.T)(w=>{const D=new ul([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,{}),x=new An(D,w),F=new dl("",x),z=function Zs(b,S,w=null,D=null){return Io(Js(b),S,w,D)}(D,[],this.urlTree.queryParams,this.urlTree.fragment);return z.queryParams=this.urlTree.queryParams,F.url=this.urlSerializer.serialize(z),this.inheritParamsAndData(F._root,null),{state:F,tree:z}}))}match(S){return this.processSegmentGroup(this.injector,this.config,S,ot).pipe(Ee(D=>{if(D instanceof Pr)return this.urlTree=D.urlTree,this.match(D.urlTree.root);throw D instanceof Gi?this.noMatchError(D):D}))}inheritParamsAndData(S,w){const D=S.value,x=wa(D,w,this.paramsInheritanceStrategy);D.params=Object.freeze(x.params),D.data=Object.freeze(x.data),S.children.forEach(F=>this.inheritParamsAndData(F,D))}processSegmentGroup(S,w,D,x){return 0===D.segments.length&&D.hasChildren()?this.processChildren(S,w,D):this.processSegment(S,w,D,D.segments,x,!0).pipe((0,nn.T)(F=>F instanceof An?[F]:[]))}processChildren(S,w,D){const x=[];for(const F of Object.keys(D.children))"primary"===F?x.unshift(F):x.push(F);return(0,G.H)(x).pipe((0,he.H)(F=>{const z=D.children[F],ae=function yl(b,S){const w=b.filter(D=>on(D)===S);return w.push(...b.filter(D=>on(D)!==S)),w}(w,F);return this.processSegmentGroup(S,ae,z,F)}),function Ve(b,S){return(0,tt.N)(function Ke(b,S,w,D,x){return(F,z)=>{let ae=w,ne=S,Le=0;F.subscribe((0,rt._)(z,Et=>{const Mt=Le++;ne=ae?b(ne,Et,Mt):(ae=!0,Et),D&&z.next(ne)},x&&(()=>{ae&&z.next(ne),z.complete()})))}}(b,S,arguments.length>=2,!0))}((F,z)=>(F.push(...z),F)),ce(null),function Ot(b,S){const w=arguments.length>=2;return D=>D.pipe(b?(0,it.p)((x,F)=>b(x,F,D)):Ne.D,yt(1),w?ce(S):fe(()=>new tn))}(),(0,Cn.Z)(F=>{if(null===F)return fs(D);const z=El(F);return function Wo(b){b.sort((S,w)=>S.value.outlet===ot?-1:w.value.outlet===ot?1:S.value.outlet.localeCompare(w.value.outlet))}(z),(0,m.of)(z)}))}processSegment(S,w,D,x,F,z){return(0,G.H)(w).pipe((0,he.H)(ae=>this.processSegmentAgainstRoute(ae._injector??S,w,ae,D,x,F,z).pipe(Ee(ne=>{if(ne instanceof Gi)return(0,m.of)(null);throw ne}))),X(ae=>!!ae),Ee(ae=>{if(Yu(ae))return function Da(b,S,w){return 0===S.length&&!b.children[w]}(D,x,F)?(0,m.of)(new ed):fs(D);throw ae}))}processSegmentAgainstRoute(S,w,D,x,F,z,ae){return function at(b,S,w,D){return!!(on(b)===D||D!==ot&&ps(S,w,b))&&Rs(S,b,w).matched}(D,x,F,z)?void 0===D.redirectTo?this.matchSegmentAgainstRoute(S,x,D,F,z):this.allowRedirects&&ae?this.expandSegmentAgainstRouteUsingRedirect(S,x,w,D,F,z):fs(x):fs(x)}expandSegmentAgainstRouteUsingRedirect(S,w,D,x,F,z){const{matched:ae,consumedSegments:ne,positionalParamSegments:Le,remainingSegments:Et}=Rs(w,x,F);if(!ae)return fs(w);x.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Mt=this.applyRedirects.applyRedirectCommands(ne,x.redirectTo,Le);return this.applyRedirects.lineralizeSegments(x,Mt).pipe((0,Cn.Z)(jn=>this.processSegment(S,D,w,jn.concat(Et),z,!1)))}matchSegmentAgainstRoute(S,w,D,x,F){const z=$o(w,D,x,S);return"**"===D.path&&(w.children={}),z.pipe((0,Zn.n)(ae=>ae.matched?this.getChildConfig(S=D._injector??S,D,x).pipe((0,Zn.n)(({routes:ne})=>{const Le=D._loadedInjector??S,{consumedSegments:Et,remainingSegments:Mt,parameters:jn}=ae,Yo=new ul(Et,jn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Uc(b){return b.data||{}}(D),on(D),D.component??D._loadedComponent??null,D,function gs(b){return b.resolve||{}}(D)),{segmentGroup:qi,slicedSegments:Zo}=Ju(w,Et,Mt,ne);if(0===Zo.length&&qi.hasChildren())return this.processChildren(Le,ne,qi).pipe((0,nn.T)(ys=>null===ys?null:new An(Yo,ys)));if(0===ne.length&&0===Zo.length)return(0,m.of)(new An(Yo,[]));const Ml=on(D)===F;return this.processSegment(Le,ne,qi,Zo,Ml?ot:F,!0).pipe((0,nn.T)(ys=>new An(Yo,ys instanceof An?[ys]:[])))})):fs(w)))}getChildConfig(S,w,D){return w.children?(0,m.of)({routes:w.children,injector:S}):w.loadChildren?void 0!==w._loadedRoutes?(0,m.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Wi(b,S,w,D){const x=S.canLoad;if(void 0===x||0===x.length)return(0,m.of)(!0);const F=x.map(z=>{const ae=At(z,b);return ri(function Mn(b){return b&&Pn(b.canLoad)}(ae)?ae.canLoad(S,w):(0,V.N4e)(b,()=>ae(S,w)))});return(0,m.of)(F).pipe(Ai(),_i())}(S,w,D).pipe((0,Cn.Z)(x=>x?this.configLoader.loadChildren(S,w).pipe(U(F=>{w._loadedRoutes=F.routes,w._loadedInjector=F.injector})):function co(b){return wt(gl(!1,It.GuardRejected))}())):(0,m.of)({routes:[],injector:S})}}function Go(b){const S=b.value.routeConfig;return S&&""===S.path}function El(b){const S=[],w=new Set;for(const D of b){if(!Go(D)){S.push(D);continue}const x=S.find(F=>D.value.routeConfig===F.value.routeConfig);void 0!==x?(x.children.push(...D.children),w.add(x)):S.push(D)}for(const D of w){const x=El(D.children);S.push(new An(D.value,x))}return S.filter(D=>!w.has(D))}function Hc(b){const S=b.children.map(w=>Hc(w)).flat();return[b,...S]}function Yr(b){return(0,Zn.n)(S=>{const w=b(S);return w?(0,G.H)(w).pipe((0,nn.T)(()=>S)):(0,m.of)(S)})}let C=(()=>{class b{buildTitle(w){let D,x=w.root;for(;void 0!==x;)D=this.getResolvedTitleForRoute(x)??D,x=x.children.find(F=>F.outlet===ot);return D}getResolvedTitleForRoute(w){return w.data[gi]}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:()=>(0,V.WQX)(k),providedIn:"root"})}}return b})(),k=(()=>{class b extends C{constructor(w){super(),this.title=w}updateTitle(w){const D=this.buildTitle(w);void 0!==D&&this.title.setTitle(D)}static{this.\u0275fac=function(D){return new(D||b)(V.KVO(je.hE))}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();const M=new V.nKC("",{providedIn:"root",factory:()=>({})}),P=new V.nKC("");let W=(()=>{class b{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,V.WQX)(V.Ql9)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,m.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const D=ri(w.loadComponent()).pipe((0,nn.T)(Je),U(F=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=F}),(0,$t.j)(()=>{this.componentLoaders.delete(w)})),x=new Ht(D,()=>new Yn.B).pipe(Ct());return this.componentLoaders.set(w,x),x}loadChildren(w,D){if(this.childrenLoaders.get(D))return this.childrenLoaders.get(D);if(D._loadedRoutes)return(0,m.of)({routes:D._loadedRoutes,injector:D._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(D);const F=function de(b,S,w,D){return ri(b.loadChildren()).pipe((0,nn.T)(Je),(0,Cn.Z)(x=>x instanceof V.Co$||Array.isArray(x)?(0,m.of)(x):(0,G.H)(S.compileModuleAsync(x))),(0,nn.T)(x=>{D&&D(b);let F,z,ae=!1;return Array.isArray(x)?(z=x,!0):(F=x.create(w).injector,z=F.get(P,[],{optional:!0,self:!0}).flat()),{routes:z.map(mt),injector:F}}))}(D,this.compiler,w,this.onLoadEndListener).pipe((0,$t.j)(()=>{this.childrenLoaders.delete(D)})),z=new Ht(F,()=>new Yn.B).pipe(Ct());return this.childrenLoaders.set(D,z),z}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();function Je(b){return function De(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let an=(()=>{class b{static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:()=>(0,V.WQX)(Wt),providedIn:"root"})}}return b})(),Wt=(()=>{class b{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,D){return w}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();const fn=new V.nKC(""),Lt=new V.nKC("");function $n(b,S,w){const D=b.get(Lt),x=b.get(Ln.qQ);return b.get(V.SKi).runOutsideAngular(()=>{if(!x.startViewTransition||D.skipNextTransition)return D.skipNextTransition=!1,new Promise(Le=>setTimeout(Le));let F;const z=new Promise(Le=>{F=Le}),ae=x.startViewTransition(()=>(F(),function sn(b){return new Promise(S=>{(0,V.mal)(S,{injector:b})})}(b))),{onViewTransitionCreated:ne}=D;return ne&&(0,V.N4e)(b,()=>ne({transition:ae,from:S,to:w})),z})}let Rn=(()=>{class b{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Yn.B,this.transitionAbortSubject=new Yn.B,this.configLoader=(0,V.WQX)(W),this.environmentInjector=(0,V.WQX)(V.uvJ),this.urlSerializer=(0,V.WQX)(q),this.rootContexts=(0,V.WQX)(Ji),this.location=(0,V.WQX)(Ln.aZ),this.inputBindingEnabled=null!==(0,V.WQX)(zt,{optional:!0}),this.titleStrategy=(0,V.WQX)(C),this.options=(0,V.WQX)(M,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,V.WQX)(an),this.createViewTransition=(0,V.WQX)(fn,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,m.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=x=>this.events.next(new xc(x)),this.configLoader.onLoadStartListener=x=>this.events.next(new Li(x))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const D=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:D})}setupNavigations(w,D,x){return this.transitions=new xe.t({id:0,currentUrlTree:D,currentRawUrl:D,extractedUrl:this.urlHandlingStrategy.extract(D),urlAfterRedirects:this.urlHandlingStrategy.extract(D),rawUrl:D,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:us,restoredState:null,currentSnapshot:x.snapshot,targetSnapshot:null,currentRouterState:x,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,it.p)(F=>0!==F.id),(0,nn.T)(F=>({...F,extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,Zn.n)(F=>{let z=!1,ae=!1;return(0,m.of)(F).pipe((0,Zn.n)(ne=>{if(this.navigationId>F.id)return this.cancelNavigationTransition(F,"",It.SupersededByNewNavigation),ze.w;this.currentTransition=F,this.currentNavigation={id:ne.id,initialUrl:ne.rawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Le=!w.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Le&&"reload"!==(ne.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const Mt="";return this.events.next(new no(ne.id,this.urlSerializer.serialize(ne.rawUrl),Mt,sl.IgnoredSameUrlNavigation)),ne.resolve(null),ze.w}if(this.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return(0,m.of)(ne).pipe((0,Zn.n)(Mt=>{const jn=this.transitions?.getValue();return this.events.next(new Ro(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),Mt.source,Mt.restoredState)),jn!==this.transitions?.getValue()?ze.w:Promise.resolve(Mt)}),function Qr(b,S,w,D,x,F){return(0,Cn.Z)(z=>function wl(b,S,w,D,x,F,z="emptyOnly"){return new mr(b,S,w,D,x,z,F).recognize()}(b,S,w,D,z.extractedUrl,x,F).pipe((0,nn.T)(({state:ae,tree:ne})=>({...z,targetSnapshot:ae,urlAfterRedirects:ne}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,this.paramsInheritanceStrategy),U(Mt=>{F.targetSnapshot=Mt.targetSnapshot,F.urlAfterRedirects=Mt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Mt.urlAfterRedirects};const jn=new $r(Mt.id,this.urlSerializer.serialize(Mt.extractedUrl),this.urlSerializer.serialize(Mt.urlAfterRedirects),Mt.targetSnapshot);this.events.next(jn)}));if(Le&&this.urlHandlingStrategy.shouldProcessUrl(ne.currentRawUrl)){const{id:Mt,extractedUrl:jn,source:Yo,restoredState:qi,extras:Zo}=ne,Ml=new Ro(Mt,this.urlSerializer.serialize(jn),Yo,qi);this.events.next(Ml);const ys=ro(this.rootComponentType).snapshot;return this.currentTransition=F={...ne,targetSnapshot:ys,urlAfterRedirects:jn,extras:{...Zo,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=jn,(0,m.of)(F)}{const Mt="";return this.events.next(new no(ne.id,this.urlSerializer.serialize(ne.extractedUrl),Mt,sl.IgnoredByUrlHandlingStrategy)),ne.resolve(null),ze.w}}),U(ne=>{const Le=new ba(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(Le)}),(0,nn.T)(ne=>(this.currentTransition=F={...ne,guards:qr(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)},F)),function Lc(b,S){return(0,Cn.Z)(w=>{const{targetSnapshot:D,currentSnapshot:x,guards:{canActivateChecks:F,canDeactivateChecks:z}}=w;return 0===z.length&&0===F.length?(0,m.of)({...w,guardsResult:!0}):function lo(b,S,w,D){return(0,G.H)(b).pipe((0,Cn.Z)(x=>function qt(b,S,w,D,x){const F=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!F||0===F.length)return(0,m.of)(!0);const z=F.map(ae=>{const ne=xr(S)??x,Le=At(ae,ne);return ri(function Wh(b){return b&&Pn(b.canDeactivate)}(Le)?Le.canDeactivate(b,S,w,D):(0,V.N4e)(ne,()=>Le(b,S,w,D))).pipe(X())});return(0,m.of)(z).pipe(Ai())}(x.component,x.route,w,S,D)),X(x=>!0!==x,!0))}(z,D,x,b).pipe((0,Cn.Z)(ae=>ae&&function Qu(b){return"boolean"==typeof b}(ae)?function Fc(b,S,w,D){return(0,G.H)(S).pipe((0,he.H)(x=>(0,ln.x)(function Ps(b,S){return null!==b&&S&&S(new Hh(b)),(0,m.of)(!0)}(x.route.parent,D),function Vc(b,S){return null!==b&&S&&S(new No(b)),(0,m.of)(!0)}(x.route,D),function xt(b,S,w){const D=S[S.length-1],F=S.slice(0,S.length-1).reverse().map(z=>function bl(b){const S=b.routeConfig?b.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:b,guards:S}:null}(z)).filter(z=>null!==z).map(z=>(0,Ye.v)(()=>{const ae=z.guards.map(ne=>{const Le=xr(z.node)??w,Et=At(ne,Le);return ri(function ao(b){return b&&Pn(b.canActivateChild)}(Et)?Et.canActivateChild(D,b):(0,V.N4e)(Le,()=>Et(D,b))).pipe(X())});return(0,m.of)(ae).pipe(Ai())}));return(0,m.of)(F).pipe(Ai())}(b,x.path,w),function Xe(b,S,w){const D=S.routeConfig?S.routeConfig.canActivate:null;if(!D||0===D.length)return(0,m.of)(!0);const x=D.map(F=>(0,Ye.v)(()=>{const z=xr(S)??w,ae=At(F,z);return ri(function zh(b){return b&&Pn(b.canActivate)}(ae)?ae.canActivate(S,b):(0,V.N4e)(z,()=>ae(S,b))).pipe(X())}));return(0,m.of)(x).pipe(Ai())}(b,x.route,w))),X(x=>!0!==x,!0))}(D,F,b,S):(0,m.of)(ae)),(0,nn.T)(ae=>({...w,guardsResult:ae})))})}(this.environmentInjector,ne=>this.events.next(ne)),U(ne=>{if(F.guardsResult=ne.guardsResult,Zi(ne.guardsResult))throw pl(0,ne.guardsResult);const Le=new Qt(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.events.next(Le)}),(0,it.p)(ne=>!!ne.guardsResult||(this.cancelNavigationTransition(ne,"",It.GuardRejected),!1)),Yr(ne=>{if(ne.guards.canActivateChecks.length)return(0,m.of)(ne).pipe(U(Le=>{const Et=new Oo(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(Et)}),(0,Zn.n)(Le=>{let Et=!1;return(0,m.of)(Le).pipe(function qh(b,S){return(0,Cn.Z)(w=>{const{targetSnapshot:D,guards:{canActivateChecks:x}}=w;if(!x.length)return(0,m.of)(w);const F=new Set(x.map(ne=>ne.route)),z=new Set;for(const ne of F)if(!z.has(ne))for(const Le of Hc(ne))z.add(Le);let ae=0;return(0,G.H)(z).pipe((0,he.H)(ne=>F.has(ne)?function $c(b,S,w,D){const x=b.routeConfig,F=b._resolve;return void 0!==x?.title&&!Rc(x)&&(F[gi]=x.title),function xi(b,S,w,D){const x=Nt(b);if(0===x.length)return(0,m.of)({});const F={};return(0,G.H)(x).pipe((0,Cn.Z)(z=>function Os(b,S,w,D){const x=xr(S)??D,F=At(b,x);return ri(F.resolve?F.resolve(S,w):(0,V.N4e)(x,()=>F(S,w)))}(b[z],S,w,D).pipe(X(),U(ae=>{F[z]=ae}))),yt(1),function Un(b){return(0,nn.T)(()=>b)}(F),Ee(z=>Yu(z)?ze.w:wt(z)))}(F,b,S,D).pipe((0,nn.T)(z=>(b._resolvedData=z,b.data=wa(b,b.parent,w).resolve,null)))}(ne,D,b,S):(ne.data=wa(ne,ne.parent,b).resolve,(0,m.of)(void 0))),U(()=>ae++),yt(1),(0,Cn.Z)(ne=>ae===z.size?(0,m.of)(w):ze.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),U({next:()=>Et=!0,complete:()=>{Et||this.cancelNavigationTransition(Le,"",It.NoDataFromResolver)}}))}),U(Le=>{const Et=new ol(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(Et)}))}),Yr(ne=>{const Le=Et=>{const Mt=[];Et.routeConfig?.loadComponent&&!Et.routeConfig._loadedComponent&&Mt.push(this.configLoader.loadComponent(Et.routeConfig).pipe(U(jn=>{Et.component=jn}),(0,nn.T)(()=>{})));for(const jn of Et.children)Mt.push(...Le(jn));return Mt};return ct(Le(ne.targetSnapshot.root)).pipe(ce(null),(0,pi.s)(1))}),Yr(()=>this.afterPreactivation()),(0,Zn.n)(()=>{const{currentSnapshot:ne,targetSnapshot:Le}=F,Et=this.createViewTransition?.(this.environmentInjector,ne.root,Le.root);return Et?(0,G.H)(Et).pipe((0,nn.T)(()=>F)):(0,m.of)(F)}),(0,nn.T)(ne=>{const Le=function hl(b,S,w){const D=Gr(b,S._root,w?w._root:void 0);return new _t(D,S)}(w.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return this.currentTransition=F={...ne,targetRouterState:Le},this.currentNavigation.targetRouterState=Le,F}),U(()=>{this.events.next(new ll)}),((b,S,w,D)=>(0,nn.T)(x=>(new Aa(S,x.targetRouterState,x.currentRouterState,w,D).activate(b),x)))(this.rootContexts,w.routeReuseStrategy,ne=>this.events.next(ne),this.inputBindingEnabled),(0,pi.s)(1),U({next:ne=>{z=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ft(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects))),this.titleStrategy?.updateTitle(ne.targetRouterState.snapshot),ne.resolve(!0)},complete:()=>{z=!0}}),(0,Jt.Q)(this.transitionAbortSubject.pipe(U(ne=>{throw ne}))),(0,$t.j)(()=>{!z&&!ae&&this.cancelNavigationTransition(F,"",It.SupersededByNewNavigation),this.currentTransition?.id===F.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ee(ne=>{if(ae=!0,Fo(ne))this.events.next(new yi(F.id,this.urlSerializer.serialize(F.extractedUrl),ne.message,ne.cancellationCode)),function vi(b){return Fo(b)&&Zi(b.url)}(ne)?this.events.next(new ko(ne.url)):F.resolve(!1);else{this.events.next(new fr(F.id,this.urlSerializer.serialize(F.extractedUrl),ne,F.targetSnapshot??void 0));try{F.resolve(w.errorHandler(ne))}catch(Le){this.options.resolveNavigationPromiseOnError?F.resolve(!1):F.reject(Le)}}return ze.w}))}))}cancelNavigationTransition(w,D,x){const F=new yi(w.id,this.urlSerializer.serialize(w.extractedUrl),D,x);this.events.next(F),w.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();function pt(b){return b!==us}let Re=(()=>{class b{static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:()=>(0,V.WQX)(dn),providedIn:"root"})}}return b})();class et{shouldDetach(S){return!1}store(S,w){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,w){return S.routeConfig===w.routeConfig}}let dn=(()=>{class b extends et{static{this.\u0275fac=(()=>{let w;return function(x){return(w||(w=V.xGo(b)))(x||b)}})()}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})(),zn=(()=>{class b{static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:()=>(0,V.WQX)(Vn),providedIn:"root"})}}return b})(),Vn=(()=>{class b extends zn{constructor(){super(...arguments),this.location=(0,V.WQX)(Ln.aZ),this.urlSerializer=(0,V.WQX)(q),this.options=(0,V.WQX)(M,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,V.WQX)(an),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ro(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(w){return this.location.subscribe(D=>{"popstate"===D.type&&w(D.url,D.state)})}handleRouterEvent(w,D){if(w instanceof Ro)this.stateMemento=this.createStateMemento();else if(w instanceof no)this.rawUrlTree=D.initialUrl;else if(w instanceof $r){if("eager"===this.urlUpdateStrategy&&!D.extras.skipLocationChange){const x=this.urlHandlingStrategy.merge(D.finalUrl,D.initialUrl);this.setBrowserUrl(x,D)}}else w instanceof ll?(this.currentUrlTree=D.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(D.finalUrl,D.initialUrl),this.routerState=D.targetRouterState,"deferred"===this.urlUpdateStrategy&&(D.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,D))):w instanceof yi&&(w.code===It.GuardRejected||w.code===It.NoDataFromResolver)?this.restoreHistory(D):w instanceof fr?this.restoreHistory(D,!0):w instanceof ft&&(this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId)}setBrowserUrl(w,D){const x=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(x)||D.extras.replaceUrl){const z={...D.extras.state,...this.generateNgRouterState(D.id,this.browserPageId)};this.location.replaceState(x,"",z)}else{const F={...D.extras.state,...this.generateNgRouterState(D.id,this.browserPageId+1)};this.location.go(x,"",F)}}restoreHistory(w,D=!1){if("computed"===this.canceledNavigationResolution){const F=this.currentPageId-this.browserPageId;0!==F?this.location.historyGo(F):this.currentUrlTree===w.finalUrl&&0===F&&(this.resetState(w),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(D&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,D){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:D}:{navigationId:w}}static{this.\u0275fac=(()=>{let w;return function(x){return(w||(w=V.xGo(b)))(x||b)}})()}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();var Tn=function(b){return b[b.COMPLETE=0]="COMPLETE",b[b.FAILED=1]="FAILED",b[b.REDIRECTING=2]="REDIRECTING",b}(Tn||{});function Rr(b,S){b.events.pipe((0,it.p)(w=>w instanceof ft||w instanceof yi||w instanceof fr||w instanceof no),(0,nn.T)(w=>w instanceof ft||w instanceof no?Tn.COMPLETE:w instanceof yi&&(w.code===It.Redirect||w.code===It.SupersededByNewNavigation)?Tn.REDIRECTING:Tn.FAILED),(0,it.p)(w=>w!==Tn.REDIRECTING),(0,pi.s)(1)).subscribe(()=>{S()})}function On(b){throw b}const Qn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Or={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let st=(()=>{class b{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,V.WQX)(V.H3F),this.stateManager=(0,V.WQX)(zn),this.options=(0,V.WQX)(M,{optional:!0})||{},this.pendingTasks=(0,V.WQX)(V.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,V.WQX)(Rn),this.urlSerializer=(0,V.WQX)(q),this.location=(0,V.WQX)(Ln.aZ),this.urlHandlingStrategy=(0,V.WQX)(an),this._events=new Yn.B,this.errorHandler=this.options.errorHandler||On,this.navigated=!1,this.routeReuseStrategy=(0,V.WQX)(Re),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,V.WQX)(P,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,V.WQX)(zt,{optional:!0}),this.eventsSubscription=new qe.yU,this.isNgZoneEnabled=(0,V.WQX)(V.SKi)instanceof V.SKi&&V.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:w=>{this.console.warn(w)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(D=>{try{const x=this.navigationTransitions.currentTransition,F=this.navigationTransitions.currentNavigation;if(null!==x&&null!==F)if(this.stateManager.handleRouterEvent(D,F),D instanceof yi&&D.code!==It.Redirect&&D.code!==It.SupersededByNewNavigation)this.navigated=!0;else if(D instanceof ft)this.navigated=!0;else if(D instanceof ko){const z=this.urlHandlingStrategy.merge(D.url,x.currentRawUrl),ae={info:x.extras.info,skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pt(x.source)};this.scheduleNavigation(z,us,null,ae,{resolve:x.resolve,reject:x.reject,promise:x.promise})}(function Ko(b){return!(b instanceof ll||b instanceof ko)})(D)&&this._events.next(D)}catch(x){this.navigationTransitions.transitionAbortSubject.next(x)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),us,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((w,D)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(w,"popstate",D)},0)})}navigateToSyncWithBrowser(w,D,x){const F={replaceUrl:!0},z=x?.navigationId?x:null;if(x){const ne={...x};delete ne.navigationId,delete ne.\u0275routerPageId,0!==Object.keys(ne).length&&(F.state=ne)}const ae=this.parseUrl(w);this.scheduleNavigation(ae,D,z,F)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(mt),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,D={}){const{relativeTo:x,queryParams:F,fragment:z,queryParamsHandling:ae,preserveFragment:ne}=D,Le=ne?this.currentUrlTree.fragment:z;let Mt,Et=null;switch(ae){case"merge":Et={...this.currentUrlTree.queryParams,...F};break;case"preserve":Et=this.currentUrlTree.queryParams;break;default:Et=F||null}null!==Et&&(Et=this.removeEmptyProps(Et));try{Mt=Js(x?x.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),Mt=this.currentUrlTree.root}return Io(Mt,w,Et,Le??null)}navigateByUrl(w,D={skipLocationChange:!1}){const x=Zi(w)?w:this.parseUrl(w),F=this.urlHandlingStrategy.merge(x,this.rawUrlTree);return this.scheduleNavigation(F,us,null,D)}navigate(w,D={skipLocationChange:!1}){return function uo(b){for(let S=0;S<b.length;S++)if(null==b[S])throw new V.wOt(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,D),D)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){try{return this.urlSerializer.parse(w)}catch{return this.urlSerializer.parse("/")}}isActive(w,D){let x;if(x=!0===D?{...Qn}:!1===D?{...Or}:D,Zi(w))return tl(this.currentUrlTree,w,x);const F=this.parseUrl(w);return tl(this.currentUrlTree,F,x)}removeEmptyProps(w){return Object.entries(w).reduce((D,[x,F])=>(null!=F&&(D[x]=F),D),{})}scheduleNavigation(w,D,x,F,z){if(this.disposed)return Promise.resolve(!1);let ae,ne,Le;z?(ae=z.resolve,ne=z.reject,Le=z.promise):Le=new Promise((Mt,jn)=>{ae=Mt,ne=jn});const Et=this.pendingTasks.add();return Rr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Et))}),this.navigationTransitions.handleNavigationRequest({source:D,restoredState:x,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:F,resolve:ae,reject:ne,promise:Le,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Le.catch(Mt=>Promise.reject(Mt))}static{this.\u0275fac=function(D){return new(D||b)}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})(),Zr=(()=>{class b{constructor(w,D,x,F,z,ae){this.router=w,this.route=D,this.tabIndexAttribute=x,this.renderer=F,this.el=z,this.locationStrategy=ae,this.href=null,this.commands=null,this.onChanges=new Yn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const ne=z.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ne||"area"===ne,this.isAnchorElement?this.subscription=w.events.subscribe(Le=>{Le instanceof ft&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,D,x,F,z){const ae=this.urlTree;return!!(null===ae||this.isAnchorElement&&(0!==w||D||x||F||z||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(ae,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const w=this.urlTree;this.href=null!==w&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(w)):null;const D=null===this.href?null:(0,V.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(w,D){const x=this.renderer,F=this.el.nativeElement;null!==D?x.setAttribute(F,w,D):x.removeAttribute(F,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(D){return new(D||b)(V.rXU(st),V.rXU(tr),V.kS0("tabindex"),V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(Ln.hb))}}static{this.\u0275dir=V.FsC({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,x){1&D&&V.bIt("click",function(z){return x.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&D&&V.BMQ("target",x.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[V.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",V.L39],skipLocationChange:[V.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",V.L39],replaceUrl:[V.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",V.L39],routerLink:"routerLink"},standalone:!0,features:[V.GFd,V.OA$]})}}return b})(),nt=(()=>{class b{get isActive(){return this._isActive}constructor(w,D,x,F,z){this.router=w,this.element=D,this.renderer=x,this.cdr=F,this.link=z,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new V.bkB,this.routerEventsSubscription=w.events.subscribe(ae=>{ae instanceof ft&&this.update()})}ngAfterContentInit(){(0,m.of)(this.links.changes,(0,m.of)(null)).pipe((0,wn.U)()).subscribe(w=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const w=[...this.links.toArray(),this.link].filter(D=>!!D).map(D=>D.onChanges);this.linkInputChangesSubscription=(0,G.H)(w).pipe((0,wn.U)()).subscribe(D=>{this._isActive!==this.isLinkActive(this.router)(D)&&this.update()})}set routerLinkActive(w){const D=Array.isArray(w)?w:w.split(" ");this.classes=D.filter(x=>!!x)}ngOnChanges(w){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const w=this.hasActiveLinks();this.classes.forEach(D=>{w?this.renderer.addClass(this.element.nativeElement,D):this.renderer.removeClass(this.element.nativeElement,D)}),w&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==w&&(this._isActive=w,this.cdr.markForCheck(),this.isActiveChange.emit(w))})}isLinkActive(w){const D=function Ma(b){return!!b.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return x=>{const F=x.urlTree;return!!F&&w.isActive(F,D)}}hasActiveLinks(){const w=this.isLinkActive(this.router);return this.link&&w(this.link)||this.links.some(w)}static{this.\u0275fac=function(D){return new(D||b)(V.rXU(st),V.rXU(V.aKT),V.rXU(V.sFG),V.rXU(V.gRc),V.rXU(Zr,8))}}static{this.\u0275dir=V.FsC({type:b,selectors:[["","routerLinkActive",""]],contentQueries:function(D,x,F){if(1&D&&V.wni(F,Zr,5),2&D){let z;V.mGM(z=V.lsd())&&(x.links=z)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[V.OA$]})}}return b})();class Ns{}let zc=(()=>{class b{constructor(w,D,x,F,z){this.router=w,this.injector=x,this.preloadingStrategy=F,this.loader=z}setUpPreloading(){this.subscription=this.router.events.pipe((0,it.p)(w=>w instanceof ft),(0,he.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,D){const x=[];for(const F of D){F.providers&&!F._injector&&(F._injector=(0,V.Ol2)(F.providers,w,`Route: ${F.path}`));const z=F._injector??w,ae=F._loadedInjector??z;(F.loadChildren&&!F._loadedRoutes&&void 0===F.canLoad||F.loadComponent&&!F._loadedComponent)&&x.push(this.preloadConfig(z,F)),(F.children||F._loadedRoutes)&&x.push(this.processRoutes(ae,F.children??F._loadedRoutes))}return(0,G.H)(x).pipe((0,wn.U)())}preloadConfig(w,D){return this.preloadingStrategy.preload(D,()=>{let x;x=D.loadChildren&&void 0===D.canLoad?this.loader.loadChildren(w,D):(0,m.of)(null);const F=x.pipe((0,Cn.Z)(z=>null===z?(0,m.of)(void 0):(D._loadedRoutes=z.routes,D._loadedInjector=z.injector,this.processRoutes(z.injector??w,z.routes))));if(D.loadComponent&&!D._loadedComponent){const z=this.loader.loadComponent(D);return(0,G.H)([F,z]).pipe((0,wn.U)())}return F})}static{this.\u0275fac=function(D){return new(D||b)(V.KVO(st),V.KVO(V.Ql9),V.KVO(V.uvJ),V.KVO(Ns),V.KVO(W))}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})();const yr=new V.nKC("");let ho=(()=>{class b{constructor(w,D,x,F,z={}){this.urlSerializer=w,this.transitions=D,this.viewportScroller=x,this.zone=F,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,V.WQX)(V.uvJ),z.scrollPositionRestoration||="disabled",z.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Ro?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof ft?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof no&&w.code===sl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof io&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,D){var x=this;this.zone.runOutsideAngular((0,N.A)(function*(){yield new Promise(F=>{setTimeout(()=>{F()}),(0,V.mal)(()=>{F()},{injector:x.environmentInjector})}),x.zone.run(()=>{x.transitions.events.next(new io(w,"popstate"===x.lastSource?x.store[x.restoredId]:null,D))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(D){V.QTQ()}}static{this.\u0275prov=V.jDH({token:b,factory:b.\u0275fac})}}return b})();function ks(b,...S){return(0,V.EmA)([{provide:P,multi:!0,useValue:b},[],{provide:tr,useFactory:St,deps:[st]},{provide:V.iLQ,multi:!0,useFactory:Xn},S.map(w=>w.\u0275providers)])}function St(b){return b.routerState.root}function vr(b,S){return{\u0275kind:b,\u0275providers:S}}function Xn(){const b=(0,V.WQX)(V.zZn);return S=>{const w=b.get(V.o8S);if(S!==w.components[0])return;const D=b.get(st),x=b.get(Al);1===b.get(hi)&&D.initialNavigation(),b.get(br,null,V.$GK.Optional)?.setUpPreloading(),b.get(yr,null,V.$GK.Optional)?.init(),D.resetRootComponentType(w.componentTypes[0]),x.closed||(x.next(),x.complete(),x.unsubscribe())}}const Al=new V.nKC("",{factory:()=>new Yn.B}),hi=new V.nKC("",{providedIn:"root",factory:()=>1}),br=new V.nKC("");function _r(b){return vr(0,[{provide:br,useExisting:zc},{provide:Ns,useExisting:b}])}function Sl(){return vr(8,[Wr,{provide:zt,useExisting:Wr}])}function td(b){return vr(9,[{provide:fn,useValue:$n},{provide:Lt,useValue:{skipNextTransition:!!b?.skipInitialTransition,...b}}])}const Qo=new V.nKC("ROUTER_FORROOT_GUARD"),nd=[Ln.aZ,{provide:q,useClass:re},st,Ji,{provide:tr,useFactory:St,deps:[st]},W,[]];let Sg=(()=>{class b{constructor(w){}static forRoot(w,D){return{ngModule:b,providers:[nd,[],{provide:P,multi:!0,useValue:w},{provide:Qo,useFactory:Ig,deps:[[st,new V.Xx1,new V.kdw]]},{provide:M,useValue:D||{}},D?.useHash?{provide:Ln.hb,useClass:Ln.fw}:{provide:Ln.hb,useClass:Ln.Sm},{provide:yr,useFactory:()=>{const b=(0,V.WQX)(Ln.Xr),S=(0,V.WQX)(V.SKi),w=(0,V.WQX)(M),D=(0,V.WQX)(Rn),x=(0,V.WQX)(q);return w.scrollOffset&&b.setOffset(w.scrollOffset),new ho(x,D,b,S,w)}},D?.preloadingStrategy?_r(D.preloadingStrategy).\u0275providers:[],D?.initialNavigation?xg(D):[],D?.bindToComponentInputs?Sl().\u0275providers:[],D?.enableViewTransitions?td().\u0275providers:[],[{provide:rd,useFactory:Xn},{provide:V.iLQ,multi:!0,useExisting:rd}]]}}static forChild(w){return{ngModule:b,providers:[{provide:P,multi:!0,useValue:w}]}}static{this.\u0275fac=function(D){return new(D||b)(V.KVO(Qo,8))}}static{this.\u0275mod=V.$C({type:b})}static{this.\u0275inj=V.G2t({})}}return b})();function Ig(b){return"guarded"}function xg(b){return["disabled"===b.initialNavigation?vr(3,[{provide:V.hnV,multi:!0,useFactory:()=>{const S=(0,V.WQX)(st);return()=>{S.setUpLocationChangeListener()}}},{provide:hi,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?vr(2,[{provide:hi,useValue:0},{provide:V.hnV,multi:!0,deps:[V.zZn],useFactory:S=>{const w=S.get(Ln.hj,Promise.resolve());return()=>w.then(()=>new Promise(D=>{const x=S.get(st),F=S.get(Al);Rr(x,()=>{D(!0)}),S.get(Rn).afterPreactivation=()=>(D(!0),F.closed?(0,m.of)(void 0):F),x.initialNavigation()}))}}]).\u0275providers:[]]}const rd=new V.nKC("")},4842:(ut,Te,H)=>{H.d(Te,{Wr:()=>ln,h:()=>me,D9:()=>fe,c$:()=>Cn});var N=H(4438),V=H(7673),ge=H(4402),G=H(7468),m=H(8793),xe=H(9030),ye=H(6697),Qe=H(1413),Ne=H(6129);class Oe extends Qe.B{constructor(he=1/0,U=1/0,ee=Ne.U){super(),this._bufferSize=he,this._windowTime=U,this._timestampProvider=ee,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=U===1/0,this._bufferSize=Math.max(1,he),this._windowTime=Math.max(1,U)}next(he){const{isStopped:U,_buffer:ee,_infiniteTimeWindow:Ee,_timestampProvider:Ke,_windowTime:Ve}=this;U||(ee.push(he),!Ee&&ee.push(Ke.now()+Ve)),this._trimBuffer(),super.next(he)}_subscribe(he){this._throwIfClosed(),this._trimBuffer();const U=this._innerSubscribe(he),{_infiniteTimeWindow:ee,_buffer:Ee}=this,Ke=Ee.slice();for(let Ve=0;Ve<Ke.length&&!he.closed;Ve+=ee?1:2)he.next(Ke[Ve]);return this._checkFinalizedStatuses(he),U}_trimBuffer(){const{_bufferSize:he,_timestampProvider:U,_buffer:ee,_infiniteTimeWindow:Ee}=this,Ke=(Ee?1:2)*he;if(he<1/0&&Ke<ee.length&&ee.splice(0,ee.length-Ke),!Ee){const Ve=U.now();let yt=0;for(let Ot=1;Ot<ee.length&&ee[Ot]<=Ve;Ot+=2)yt=Ot;yt&&ee.splice(0,yt+1)}}}var be=H(8750),Fe=H(7707),rt=H(9974);function ct(X,he,...U){if(!0===he)return void X();if(!1===he)return;const ee=new Fe.Ms({next:()=>{ee.unsubscribe(),X()}});return(0,be.Tg)(he(...U)).subscribe(ee)}function Ut(X,he,U){let ee,Ee=!1;return X&&"object"==typeof X?({bufferSize:ee=1/0,windowTime:he=1/0,refCount:Ee=!1,scheduler:U}=X):ee=X??1/0,function Ue(X={}){const{connector:he=(()=>new Qe.B),resetOnError:U=!0,resetOnComplete:ee=!0,resetOnRefCountZero:Ee=!0}=X;return Ke=>{let Ve,yt,Ot,Un=0,$t=!1,Jt=!1;const wn=()=>{yt?.unsubscribe(),yt=void 0},je=()=>{wn(),Ve=Ot=void 0,$t=Jt=!1},ot=()=>{const gi=Ve;je(),gi?.unsubscribe()};return(0,rt.N)((gi,Br)=>{Un++,!Jt&&!$t&&wn();const Ni=Ot=Ot??he();Br.add(()=>{Un--,0===Un&&!Jt&&!$t&&(yt=ct(ot,Ee))}),Ni.subscribe(Br),!Ve&&Un>0&&(Ve=new Fe.Ms({next:cr=>Ni.next(cr),error:cr=>{Jt=!0,wn(),yt=ct(je,U,cr),Ni.error(cr)},complete:()=>{$t=!0,wn(),yt=ct(je,ee),Ni.complete()}}),(0,be.Tg)(gi).subscribe(Ve))})(Ke)}}({connector:()=>new Oe(ee,he,U),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ee})}var Rt=H(6354),Xt=H(274),tn=H(5558);class ln{}let Ye=(()=>{class X extends ln{getTranslation(U){return(0,V.of)({})}static \u0275fac=(()=>{let U;return function(Ee){return(U||(U=N.xGo(X)))(Ee||X)}})();static \u0275prov=N.jDH({token:X,factory:X.\u0275fac})}return X})();class He{}let lt=(()=>{class X{handle(U){return U.key}static \u0275fac=function(ee){return new(ee||X)};static \u0275prov=N.jDH({token:X,factory:X.\u0275fac})}return X})();function wt(X,he){if(X===he)return!0;if(null===X||null===he)return!1;if(X!=X&&he!=he)return!0;let Ee,Ke,Ve,U=typeof X;if(U==typeof he&&"object"==U){if(!Array.isArray(X)){if(Array.isArray(he))return!1;for(Ke in Ve=Object.create(null),X){if(!wt(X[Ke],he[Ke]))return!1;Ve[Ke]=!0}for(Ke in he)if(!(Ke in Ve)&&typeof he[Ke]<"u")return!1;return!0}if(!Array.isArray(he))return!1;if((Ee=X.length)==he.length){for(Ke=0;Ke<Ee;Ke++)if(!wt(X[Ke],he[Ke]))return!1;return!0}}return!1}function ze(X){return typeof X<"u"&&null!==X}function qe(X){return X&&"object"==typeof X&&!Array.isArray(X)}function tt(X,he){let U=Object.assign({},X);return qe(X)&&qe(he)&&Object.keys(he).forEach(ee=>{qe(he[ee])?ee in X?U[ee]=tt(X[ee],he[ee]):Object.assign(U,{[ee]:he[ee]}):Object.assign(U,{[ee]:he[ee]})}),U}class Ct{}let Ht=(()=>{class X extends Ct{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(U,ee){let Ee;return Ee="string"==typeof U?this.interpolateString(U,ee):"function"==typeof U?this.interpolateFunction(U,ee):U,Ee}getValue(U,ee){let Ee="string"==typeof ee?ee.split("."):[ee];ee="";do{ee+=Ee.shift(),!ze(U)||!ze(U[ee])||"object"!=typeof U[ee]&&Ee.length?Ee.length?ee+=".":U=void 0:(U=U[ee],ee="")}while(Ee.length);return U}interpolateFunction(U,ee){return U(ee)}interpolateString(U,ee){return ee?U.replace(this.templateMatcher,(Ee,Ke)=>{let Ve=this.getValue(ee,Ke);return ze(Ve)?Ve:Ee}):U}static \u0275fac=(()=>{let U;return function(Ee){return(U||(U=N.xGo(X)))(Ee||X)}})();static \u0275prov=N.jDH({token:X,factory:X.\u0275fac})}return X})();class Yn{}let Ln=(()=>{class X extends Yn{compile(U,ee){return U}compileTranslations(U,ee){return U}static \u0275fac=(()=>{let U;return function(Ee){return(U||(U=N.xGo(X)))(Ee||X)}})();static \u0275prov=N.jDH({token:X,factory:X.\u0275fac})}return X})();class nn{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new N.bkB;onLangChange=new N.bkB;onDefaultLangChange=new N.bkB}const Zn=new N.nKC("USE_STORE"),pi=new N.nKC("USE_DEFAULT_LANG"),Sr=new N.nKC("DEFAULT_LANGUAGE"),it=new N.nKC("USE_EXTEND");let Cn=(()=>{class X{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new N.bkB;_onLangChange=new N.bkB;_onDefaultLangChange=new N.bkB;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(U){this.isolate?this._defaultLang=U:this.store.defaultLang=U}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(U){this.isolate?this._currentLang=U:this.store.currentLang=U}get langs(){return this.isolate?this._langs:this.store.langs}set langs(U){this.isolate?this._langs=U:this.store.langs=U}get translations(){return this.isolate?this._translations:this.store.translations}set translations(U){this.isolate?this._translations=U:this.store.translations=U}constructor(U,ee,Ee,Ke,Ve,yt=!0,Ot=!1,Un=!1,$t){this.store=U,this.currentLoader=ee,this.compiler=Ee,this.parser=Ke,this.missingTranslationHandler=Ve,this.useDefaultLang=yt,this.isolate=Ot,this.extend=Un,$t&&this.setDefaultLang($t)}setDefaultLang(U){if(U===this.defaultLang)return;let ee=this.retrieveTranslations(U);typeof ee<"u"?(null==this.defaultLang&&(this.defaultLang=U),ee.pipe((0,ye.s)(1)).subscribe(Ee=>{this.changeDefaultLang(U)})):this.changeDefaultLang(U)}getDefaultLang(){return this.defaultLang}use(U){if(U===this.currentLang)return(0,V.of)(this.translations[U]);let ee=this.retrieveTranslations(U);return typeof ee<"u"?(this.currentLang||(this.currentLang=U),ee.pipe((0,ye.s)(1)).subscribe(Ee=>{this.changeLang(U)}),ee):(this.changeLang(U),(0,V.of)(this.translations[U]))}retrieveTranslations(U){let ee;return(typeof this.translations[U]>"u"||this.extend)&&(this._translationRequests[U]=this._translationRequests[U]||this.getTranslation(U),ee=this._translationRequests[U]),ee}getTranslation(U){this.pending=!0;const ee=this.currentLoader.getTranslation(U).pipe(Ut(1),(0,ye.s)(1));return this.loadingTranslations=ee.pipe((0,Rt.T)(Ee=>this.compiler.compileTranslations(Ee,U)),Ut(1),(0,ye.s)(1)),this.loadingTranslations.subscribe({next:Ee=>{this.translations[U]=this.extend&&this.translations[U]?{...Ee,...this.translations[U]}:Ee,this.updateLangs(),this.pending=!1},error:Ee=>{this.pending=!1}}),ee}setTranslation(U,ee,Ee=!1){ee=this.compiler.compileTranslations(ee,U),this.translations[U]=(Ee||this.extend)&&this.translations[U]?tt(this.translations[U],ee):ee,this.updateLangs(),this.onTranslationChange.emit({lang:U,translations:this.translations[U]})}getLangs(){return this.langs}addLangs(U){U.forEach(ee=>{-1===this.langs.indexOf(ee)&&this.langs.push(ee)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(U,ee,Ee){let Ke;if(ee instanceof Array){let Ve={},yt=!1;for(let Ot of ee)Ve[Ot]=this.getParsedResult(U,Ot,Ee),(0,ge.A)(Ve[Ot])&&(yt=!0);if(yt){const Ot=ee.map(Un=>(0,ge.A)(Ve[Un])?Ve[Un]:(0,V.of)(Ve[Un]));return(0,G.p)(Ot).pipe((0,Rt.T)(Un=>{let $t={};return Un.forEach((Jt,wn)=>{$t[ee[wn]]=Jt}),$t}))}return Ve}if(U&&(Ke=this.parser.interpolate(this.parser.getValue(U,ee),Ee)),typeof Ke>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(Ke=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ee),Ee)),typeof Ke>"u"){let Ve={key:ee,translateService:this};typeof Ee<"u"&&(Ve.interpolateParams=Ee),Ke=this.missingTranslationHandler.handle(Ve)}return typeof Ke<"u"?Ke:ee}get(U,ee){if(!ze(U)||!U.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,Xt.H)(Ee=>(Ee=this.getParsedResult(Ee,U,ee),(0,ge.A)(Ee)?Ee:(0,V.of)(Ee))));{let Ee=this.getParsedResult(this.translations[this.currentLang],U,ee);return(0,ge.A)(Ee)?Ee:(0,V.of)(Ee)}}getStreamOnTranslationChange(U,ee){if(!ze(U)||!U.length)throw new Error('Parameter "key" required');return(0,m.x)((0,xe.v)(()=>this.get(U,ee)),this.onTranslationChange.pipe((0,tn.n)(Ee=>{const Ke=this.getParsedResult(Ee.translations,U,ee);return"function"==typeof Ke.subscribe?Ke:(0,V.of)(Ke)})))}stream(U,ee){if(!ze(U)||!U.length)throw new Error('Parameter "key" required');return(0,m.x)((0,xe.v)(()=>this.get(U,ee)),this.onLangChange.pipe((0,tn.n)(Ee=>{const Ke=this.getParsedResult(Ee.translations,U,ee);return(0,ge.A)(Ke)?Ke:(0,V.of)(Ke)})))}instant(U,ee){if(!ze(U)||!U.length)throw new Error('Parameter "key" required');let Ee=this.getParsedResult(this.translations[this.currentLang],U,ee);if((0,ge.A)(Ee)){if(U instanceof Array){let Ke={};return U.forEach((Ve,yt)=>{Ke[U[yt]]=U[yt]}),Ke}return U}return Ee}set(U,ee,Ee=this.currentLang){this.translations[Ee][U]=this.compiler.compile(ee,Ee),this.updateLangs(),this.onTranslationChange.emit({lang:Ee,translations:this.translations[Ee]})}changeLang(U){this.currentLang=U,this.onLangChange.emit({lang:U,translations:this.translations[U]}),null==this.defaultLang&&this.changeDefaultLang(U)}changeDefaultLang(U){this.defaultLang=U,this.onDefaultLangChange.emit({lang:U,translations:this.translations[U]})}reloadLang(U){return this.resetLang(U),this.getTranslation(U)}resetLang(U){this._translationRequests[U]=void 0,this.translations[U]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let U=window.navigator.languages?window.navigator.languages[0]:null;return U=U||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof U>"u"?void 0:(-1!==U.indexOf("-")&&(U=U.split("-")[0]),-1!==U.indexOf("_")&&(U=U.split("_")[0]),U)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let U=window.navigator.languages?window.navigator.languages[0]:null;return U=U||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,U}static \u0275fac=function(ee){return new(ee||X)(N.KVO(nn),N.KVO(ln),N.KVO(Yn),N.KVO(Ct),N.KVO(He),N.KVO(pi),N.KVO(Zn),N.KVO(it),N.KVO(Sr))};static \u0275prov=N.jDH({token:X,factory:X.\u0275fac})}return X})(),fe=(()=>{class X{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(U,ee){this.translate=U,this._ref=ee}updateValue(U,ee,Ee){let Ke=Ve=>{this.value=void 0!==Ve?Ve:U,this.lastKey=U,this._ref.markForCheck()};if(Ee){let Ve=this.translate.getParsedResult(Ee,U,ee);(0,ge.A)(Ve.subscribe)?Ve.subscribe(Ke):Ke(Ve)}this.translate.get(U,ee).subscribe(Ke)}transform(U,...ee){if(!U||!U.length)return U;if(wt(U,this.lastKey)&&wt(ee,this.lastParams))return this.value;let Ee;if(ze(ee[0])&&ee.length)if("string"==typeof ee[0]&&ee[0].length){let Ke=ee[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Ee=JSON.parse(Ke)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${ee[0]}`)}}else"object"==typeof ee[0]&&!Array.isArray(ee[0])&&(Ee=ee[0]);return this.lastKey=U,this.lastParams=ee,this.updateValue(U,Ee),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(Ke=>{this.lastKey&&Ke.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(U,Ee,Ke.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(Ke=>{this.lastKey&&(this.lastKey=null,this.updateValue(U,Ee,Ke.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(U,Ee))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(ee){return new(ee||X)(N.rXU(Cn,16),N.rXU(N.gRc,16))};static \u0275pipe=N.EJ8({name:"translate",type:X,pure:!1});static \u0275prov=N.jDH({token:X,factory:X.\u0275fac})}return X})(),me=(()=>{class X{static forRoot(U={}){return{ngModule:X,providers:[U.loader||{provide:ln,useClass:Ye},U.compiler||{provide:Yn,useClass:Ln},U.parser||{provide:Ct,useClass:Ht},U.missingTranslationHandler||{provide:He,useClass:lt},nn,{provide:Zn,useValue:U.isolate},{provide:pi,useValue:U.useDefaultLang},{provide:it,useValue:U.extend},{provide:Sr,useValue:U.defaultLanguage},Cn]}}static forChild(U={}){return{ngModule:X,providers:[U.loader||{provide:ln,useClass:Ye},U.compiler||{provide:Yn,useClass:Ln},U.parser||{provide:Ct,useClass:Ht},U.missingTranslationHandler||{provide:He,useClass:lt},{provide:Zn,useValue:U.isolate},{provide:pi,useValue:U.useDefaultLang},{provide:it,useValue:U.extend},{provide:Sr,useValue:U.defaultLanguage},Cn]}}static \u0275fac=function(ee){return new(ee||X)};static \u0275mod=N.$C({type:X});static \u0275inj=N.G2t({})}return X})()},467:(ut,Te,H)=>{function N(ge,G,m,xe,ye,Qe,Ne){try{var Oe=ge[Qe](Ne),be=Oe.value}catch(Fe){return void m(Fe)}Oe.done?G(be):Promise.resolve(be).then(xe,ye)}function V(ge){return function(){var G=this,m=arguments;return new Promise(function(xe,ye){var Qe=ge.apply(G,m);function Ne(be){N(Qe,xe,ye,Ne,Oe,"next",be)}function Oe(be){N(Qe,xe,ye,Ne,Oe,"throw",be)}Ne(void 0)})}}H.d(Te,{A:()=>V})},1635:(ut,Te,H)=>{function Fe(ce,fe,me,X){return new(me||(me=Promise))(function(U,ee){function Ee(yt){try{Ve(X.next(yt))}catch(Ot){ee(Ot)}}function Ke(yt){try{Ve(X.throw(yt))}catch(Ot){ee(Ot)}}function Ve(yt){yt.done?U(yt.value):function he(U){return U instanceof me?U:new me(function(ee){ee(U)})}(yt.value).then(Ee,Ke)}Ve((X=X.apply(ce,fe||[])).next())})}function Ye(ce){return this instanceof Ye?(this.v=ce,this):new Ye(ce)}function He(ce,fe,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,X=me.apply(ce,fe||[]),U=[];return he=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Ee("next"),Ee("throw"),Ee("return",function ee($t){return function(Jt){return Promise.resolve(Jt).then($t,Ot)}}),he[Symbol.asyncIterator]=function(){return this},he;function Ee($t,Jt){X[$t]&&(he[$t]=function(wn){return new Promise(function(je,ot){U.push([$t,wn,je,ot])>1||Ke($t,wn)})},Jt&&(he[$t]=Jt(he[$t])))}function Ke($t,Jt){try{!function Ve($t){$t.value instanceof Ye?Promise.resolve($t.value.v).then(yt,Ot):Un(U[0][2],$t)}(X[$t](Jt))}catch(wn){Un(U[0][3],wn)}}function yt($t){Ke("next",$t)}function Ot($t){Ke("throw",$t)}function Un($t,Jt){$t(Jt),U.shift(),U.length&&Ke(U[0][0],U[0][1])}}function wt(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,fe=ce[Symbol.asyncIterator];return fe?fe.call(ce):(ce=function Ut(ce){var fe="function"==typeof Symbol&&Symbol.iterator,me=fe&&ce[fe],X=0;if(me)return me.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&X>=ce.length&&(ce=void 0),{value:ce&&ce[X++],done:!ce}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),me={},X("next"),X("throw"),X("return"),me[Symbol.asyncIterator]=function(){return this},me);function X(U){me[U]=ce[U]&&function(ee){return new Promise(function(Ee,Ke){!function he(U,ee,Ee,Ke){Promise.resolve(Ke).then(function(Ve){U({value:Ve,done:Ee})},ee)}(Ee,Ke,(ee=ce[U](ee)).done,ee.value)})}}}H.d(Te,{AQ:()=>He,N3:()=>Ye,sH:()=>Fe,xN:()=>wt}),"function"==typeof SuppressedError&&SuppressedError}},ut=>{ut(ut.s=1593)}]);